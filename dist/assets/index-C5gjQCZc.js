(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))d(f);new MutationObserver(f=>{for(const x of f)if(x.type==="childList")for(const y of x.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&d(y)}).observe(document,{childList:!0,subtree:!0});function c(f){const x={};return f.integrity&&(x.integrity=f.integrity),f.referrerPolicy&&(x.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?x.credentials="include":f.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function d(f){if(f.ep)return;f.ep=!0;const x=c(f);fetch(f.href,x)}})();function tm(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var wh={exports:{}},ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ux;function Iy(){if(ux)return ql;ux=1;var l=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function c(d,f,x){var y=null;if(x!==void 0&&(y=""+x),f.key!==void 0&&(y=""+f.key),"key"in f){x={};for(var _ in f)_!=="key"&&(x[_]=f[_])}else x=f;return f=x.ref,{$$typeof:l,type:d,key:y,ref:f!==void 0?f:null,props:x}}return ql.Fragment=o,ql.jsx=c,ql.jsxs=c,ql}var hx;function Zy(){return hx||(hx=1,wh.exports=Iy()),wh.exports}var e=Zy(),Sh={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mx;function $y(){if(mx)return Ie;mx=1;var l=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),y=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),E=Symbol.iterator;function P(U){return U===null||typeof U!="object"?null:(U=E&&U[E]||U["@@iterator"],typeof U=="function"?U:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,S={};function M(U,ne,ge){this.props=U,this.context=ne,this.refs=S,this.updater=ge||R}M.prototype.isReactComponent={},M.prototype.setState=function(U,ne){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ne,"setState")},M.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function F(){}F.prototype=M.prototype;function I(U,ne,ge){this.props=U,this.context=ne,this.refs=S,this.updater=ge||R}var T=I.prototype=new F;T.constructor=I,B(T,M.prototype),T.isPureReactComponent=!0;var H=Array.isArray,q={H:null,A:null,T:null,S:null,V:null},A=Object.prototype.hasOwnProperty;function D(U,ne,ge,oe,xe,_e){return ge=_e.ref,{$$typeof:l,type:U,key:ne,ref:ge!==void 0?ge:null,props:_e}}function V(U,ne){return D(U.type,ne,void 0,void 0,void 0,U.props)}function O(U){return typeof U=="object"&&U!==null&&U.$$typeof===l}function G(U){var ne={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ge){return ne[ge]})}var K=/\/+/g;function Q(U,ne){return typeof U=="object"&&U!==null&&U.key!=null?G(""+U.key):ne.toString(36)}function ue(){}function le(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(ue,ue):(U.status="pending",U.then(function(ne){U.status==="pending"&&(U.status="fulfilled",U.value=ne)},function(ne){U.status==="pending"&&(U.status="rejected",U.reason=ne)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function de(U,ne,ge,oe,xe){var _e=typeof U;(_e==="undefined"||_e==="boolean")&&(U=null);var ye=!1;if(U===null)ye=!0;else switch(_e){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(U.$$typeof){case l:case o:ye=!0;break;case N:return ye=U._init,de(ye(U._payload),ne,ge,oe,xe)}}if(ye)return xe=xe(U),ye=oe===""?"."+Q(U,0):oe,H(xe)?(ge="",ye!=null&&(ge=ye.replace(K,"$&/")+"/"),de(xe,ne,ge,"",function(Tt){return Tt})):xe!=null&&(O(xe)&&(xe=V(xe,ge+(xe.key==null||U&&U.key===xe.key?"":(""+xe.key).replace(K,"$&/")+"/")+ye)),ne.push(xe)),1;ye=0;var Le=oe===""?".":oe+":";if(H(U))for(var De=0;De<U.length;De++)oe=U[De],_e=Le+Q(oe,De),ye+=de(oe,ne,ge,_e,xe);else if(De=P(U),typeof De=="function")for(U=De.call(U),De=0;!(oe=U.next()).done;)oe=oe.value,_e=Le+Q(oe,De++),ye+=de(oe,ne,ge,_e,xe);else if(_e==="object"){if(typeof U.then=="function")return de(le(U),ne,ge,oe,xe);throw ne=String(U),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ye}function z(U,ne,ge){if(U==null)return U;var oe=[],xe=0;return de(U,oe,"","",function(_e){return ne.call(ge,_e,xe++)}),oe}function J(U){if(U._status===-1){var ne=U._result;ne=ne(),ne.then(function(ge){(U._status===0||U._status===-1)&&(U._status=1,U._result=ge)},function(ge){(U._status===0||U._status===-1)&&(U._status=2,U._result=ge)}),U._status===-1&&(U._status=0,U._result=ne)}if(U._status===1)return U._result.default;throw U._result}var W=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function ve(){}return Ie.Children={map:z,forEach:function(U,ne,ge){z(U,function(){ne.apply(this,arguments)},ge)},count:function(U){var ne=0;return z(U,function(){ne++}),ne},toArray:function(U){return z(U,function(ne){return ne})||[]},only:function(U){if(!O(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Ie.Component=M,Ie.Fragment=c,Ie.Profiler=f,Ie.PureComponent=I,Ie.StrictMode=d,Ie.Suspense=g,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(U){return q.H.useMemoCache(U)}},Ie.cache=function(U){return function(){return U.apply(null,arguments)}},Ie.cloneElement=function(U,ne,ge){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var oe=B({},U.props),xe=U.key,_e=void 0;if(ne!=null)for(ye in ne.ref!==void 0&&(_e=void 0),ne.key!==void 0&&(xe=""+ne.key),ne)!A.call(ne,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&ne.ref===void 0||(oe[ye]=ne[ye]);var ye=arguments.length-2;if(ye===1)oe.children=ge;else if(1<ye){for(var Le=Array(ye),De=0;De<ye;De++)Le[De]=arguments[De+2];oe.children=Le}return D(U.type,xe,void 0,void 0,_e,oe)},Ie.createContext=function(U){return U={$$typeof:y,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:x,_context:U},U},Ie.createElement=function(U,ne,ge){var oe,xe={},_e=null;if(ne!=null)for(oe in ne.key!==void 0&&(_e=""+ne.key),ne)A.call(ne,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(xe[oe]=ne[oe]);var ye=arguments.length-2;if(ye===1)xe.children=ge;else if(1<ye){for(var Le=Array(ye),De=0;De<ye;De++)Le[De]=arguments[De+2];xe.children=Le}if(U&&U.defaultProps)for(oe in ye=U.defaultProps,ye)xe[oe]===void 0&&(xe[oe]=ye[oe]);return D(U,_e,void 0,void 0,null,xe)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(U){return{$$typeof:_,render:U}},Ie.isValidElement=O,Ie.lazy=function(U){return{$$typeof:N,_payload:{_status:-1,_result:U},_init:J}},Ie.memo=function(U,ne){return{$$typeof:b,type:U,compare:ne===void 0?null:ne}},Ie.startTransition=function(U){var ne=q.T,ge={};q.T=ge;try{var oe=U(),xe=q.S;xe!==null&&xe(ge,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(ve,W)}catch(_e){W(_e)}finally{q.T=ne}},Ie.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},Ie.use=function(U){return q.H.use(U)},Ie.useActionState=function(U,ne,ge){return q.H.useActionState(U,ne,ge)},Ie.useCallback=function(U,ne){return q.H.useCallback(U,ne)},Ie.useContext=function(U){return q.H.useContext(U)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(U,ne){return q.H.useDeferredValue(U,ne)},Ie.useEffect=function(U,ne,ge){var oe=q.H;if(typeof ge=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(U,ne)},Ie.useId=function(){return q.H.useId()},Ie.useImperativeHandle=function(U,ne,ge){return q.H.useImperativeHandle(U,ne,ge)},Ie.useInsertionEffect=function(U,ne){return q.H.useInsertionEffect(U,ne)},Ie.useLayoutEffect=function(U,ne){return q.H.useLayoutEffect(U,ne)},Ie.useMemo=function(U,ne){return q.H.useMemo(U,ne)},Ie.useOptimistic=function(U,ne){return q.H.useOptimistic(U,ne)},Ie.useReducer=function(U,ne,ge){return q.H.useReducer(U,ne,ge)},Ie.useRef=function(U){return q.H.useRef(U)},Ie.useState=function(U){return q.H.useState(U)},Ie.useSyncExternalStore=function(U,ne,ge){return q.H.useSyncExternalStore(U,ne,ge)},Ie.useTransition=function(){return q.H.useTransition()},Ie.version="19.1.0",Ie}var fx;function sm(){return fx||(fx=1,Sh.exports=$y()),Sh.exports}var j=sm();const qe=tm(j);var Ch={exports:{}},Hl={},Eh={exports:{}},kh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var px;function Vy(){return px||(px=1,function(l){function o(z,J){var W=z.length;z.push(J);e:for(;0<W;){var ve=W-1>>>1,U=z[ve];if(0<f(U,J))z[ve]=J,z[W]=U,W=ve;else break e}}function c(z){return z.length===0?null:z[0]}function d(z){if(z.length===0)return null;var J=z[0],W=z.pop();if(W!==J){z[0]=W;e:for(var ve=0,U=z.length,ne=U>>>1;ve<ne;){var ge=2*(ve+1)-1,oe=z[ge],xe=ge+1,_e=z[xe];if(0>f(oe,W))xe<U&&0>f(_e,oe)?(z[ve]=_e,z[xe]=W,ve=xe):(z[ve]=oe,z[ge]=W,ve=ge);else if(xe<U&&0>f(_e,W))z[ve]=_e,z[xe]=W,ve=xe;else break e}}return J}function f(z,J){var W=z.sortIndex-J.sortIndex;return W!==0?W:z.id-J.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var x=performance;l.unstable_now=function(){return x.now()}}else{var y=Date,_=y.now();l.unstable_now=function(){return y.now()-_}}var g=[],b=[],N=1,E=null,P=3,R=!1,B=!1,S=!1,M=!1,F=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function H(z){for(var J=c(b);J!==null;){if(J.callback===null)d(b);else if(J.startTime<=z)d(b),J.sortIndex=J.expirationTime,o(g,J);else break;J=c(b)}}function q(z){if(S=!1,H(z),!B)if(c(g)!==null)B=!0,A||(A=!0,Q());else{var J=c(b);J!==null&&de(q,J.startTime-z)}}var A=!1,D=-1,V=5,O=-1;function G(){return M?!0:!(l.unstable_now()-O<V)}function K(){if(M=!1,A){var z=l.unstable_now();O=z;var J=!0;try{e:{B=!1,S&&(S=!1,I(D),D=-1),R=!0;var W=P;try{t:{for(H(z),E=c(g);E!==null&&!(E.expirationTime>z&&G());){var ve=E.callback;if(typeof ve=="function"){E.callback=null,P=E.priorityLevel;var U=ve(E.expirationTime<=z);if(z=l.unstable_now(),typeof U=="function"){E.callback=U,H(z),J=!0;break t}E===c(g)&&d(g),H(z)}else d(g);E=c(g)}if(E!==null)J=!0;else{var ne=c(b);ne!==null&&de(q,ne.startTime-z),J=!1}}break e}finally{E=null,P=W,R=!1}J=void 0}}finally{J?Q():A=!1}}}var Q;if(typeof T=="function")Q=function(){T(K)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,le=ue.port2;ue.port1.onmessage=K,Q=function(){le.postMessage(null)}}else Q=function(){F(K,0)};function de(z,J){D=F(function(){z(l.unstable_now())},J)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(z){z.callback=null},l.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<z?Math.floor(1e3/z):5},l.unstable_getCurrentPriorityLevel=function(){return P},l.unstable_next=function(z){switch(P){case 1:case 2:case 3:var J=3;break;default:J=P}var W=P;P=J;try{return z()}finally{P=W}},l.unstable_requestPaint=function(){M=!0},l.unstable_runWithPriority=function(z,J){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var W=P;P=z;try{return J()}finally{P=W}},l.unstable_scheduleCallback=function(z,J,W){var ve=l.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ve+W:ve):W=ve,z){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=W+U,z={id:N++,callback:J,priorityLevel:z,startTime:W,expirationTime:U,sortIndex:-1},W>ve?(z.sortIndex=W,o(b,z),c(g)===null&&z===c(b)&&(S?(I(D),D=-1):S=!0,de(q,W-ve))):(z.sortIndex=U,o(g,z),B||R||(B=!0,A||(A=!0,Q()))),z},l.unstable_shouldYield=G,l.unstable_wrapCallback=function(z){var J=P;return function(){var W=P;P=J;try{return z.apply(this,arguments)}finally{P=W}}}}(kh)),kh}var xx;function Yy(){return xx||(xx=1,Eh.exports=Vy()),Eh.exports}var Rh={exports:{}},Xt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gx;function Gy(){if(gx)return Xt;gx=1;var l=sm();function o(g){var b="https://react.dev/errors/"+g;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)b+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+g+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(){}var d={d:{f:c,r:function(){throw Error(o(522))},D:c,C:c,L:c,m:c,X:c,S:c,M:c},p:0,findDOMNode:null},f=Symbol.for("react.portal");function x(g,b,N){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:E==null?null:""+E,children:g,containerInfo:b,implementation:N}}var y=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _(g,b){if(g==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return Xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,Xt.createPortal=function(g,b){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(o(299));return x(g,b,null,N)},Xt.flushSync=function(g){var b=y.T,N=d.p;try{if(y.T=null,d.p=2,g)return g()}finally{y.T=b,d.p=N,d.d.f()}},Xt.preconnect=function(g,b){typeof g=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,d.d.C(g,b))},Xt.prefetchDNS=function(g){typeof g=="string"&&d.d.D(g)},Xt.preinit=function(g,b){if(typeof g=="string"&&b&&typeof b.as=="string"){var N=b.as,E=_(N,b.crossOrigin),P=typeof b.integrity=="string"?b.integrity:void 0,R=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;N==="style"?d.d.S(g,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:E,integrity:P,fetchPriority:R}):N==="script"&&d.d.X(g,{crossOrigin:E,integrity:P,fetchPriority:R,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},Xt.preinitModule=function(g,b){if(typeof g=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var N=_(b.as,b.crossOrigin);d.d.M(g,{crossOrigin:N,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&d.d.M(g)},Xt.preload=function(g,b){if(typeof g=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var N=b.as,E=_(N,b.crossOrigin);d.d.L(g,N,{crossOrigin:E,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},Xt.preloadModule=function(g,b){if(typeof g=="string")if(b){var N=_(b.as,b.crossOrigin);d.d.m(g,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:N,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else d.d.m(g)},Xt.requestFormReset=function(g){d.d.r(g)},Xt.unstable_batchedUpdates=function(g,b){return g(b)},Xt.useFormState=function(g,b,N){return y.H.useFormState(g,b,N)},Xt.useFormStatus=function(){return y.H.useHostTransitionStatus()},Xt.version="19.1.0",Xt}var yx;function cg(){if(yx)return Rh.exports;yx=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(o){console.error(o)}}return l(),Rh.exports=Gy(),Rh.exports}var bx;function Ky(){if(bx)return Hl;bx=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=Yy(),o=sm(),c=cg();function d(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function x(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function y(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function _(t){if(x(t)!==t)throw Error(d(188))}function g(t){var s=t.alternate;if(!s){if(s=x(t),s===null)throw Error(d(188));return s!==t?null:t}for(var a=t,i=s;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(i=h.return,i!==null){a=i;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return _(h),t;if(m===i)return _(h),s;m=m.sibling}throw Error(d(188))}if(a.return!==i.return)a=h,i=m;else{for(var w=!1,k=h.child;k;){if(k===a){w=!0,a=h,i=m;break}if(k===i){w=!0,i=h,a=m;break}k=k.sibling}if(!w){for(k=m.child;k;){if(k===a){w=!0,a=m,i=h;break}if(k===i){w=!0,i=m,a=h;break}k=k.sibling}if(!w)throw Error(d(189))}}if(a.alternate!==i)throw Error(d(190))}if(a.tag!==3)throw Error(d(188));return a.stateNode.current===a?t:s}function b(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=b(t),s!==null)return s;t=t.sibling}return null}var N=Object.assign,E=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),T=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function Q(t){return t===null||typeof t!="object"?null:(t=K&&t[K]||t["@@iterator"],typeof t=="function"?t:null)}var ue=Symbol.for("react.client.reference");function le(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ue?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case M:return"Profiler";case S:return"StrictMode";case q:return"Suspense";case A:return"SuspenseList";case O:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case R:return"Portal";case T:return(t.displayName||"Context")+".Provider";case I:return(t._context.displayName||"Context")+".Consumer";case H:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return s=t.displayName||null,s!==null?s:le(t.type)||"Memo";case V:s=t._payload,t=t._init;try{return le(t(s))}catch{}}return null}var de=Array.isArray,z=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},ve=[],U=-1;function ne(t){return{current:t}}function ge(t){0>U||(t.current=ve[U],ve[U]=null,U--)}function oe(t,s){U++,ve[U]=t.current,t.current=s}var xe=ne(null),_e=ne(null),ye=ne(null),Le=ne(null);function De(t,s){switch(oe(ye,s),oe(_e,t),oe(xe,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Up(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Up(s),t=Fp(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ge(xe),oe(xe,t)}function Tt(){ge(xe),ge(_e),ge(ye)}function cs(t){t.memoizedState!==null&&oe(Le,t);var s=xe.current,a=Fp(s,t.type);s!==a&&(oe(_e,t),oe(xe,a))}function je(t){_e.current===t&&(ge(xe),ge(_e)),Le.current===t&&(ge(Le),zl._currentValue=W)}var He=Object.prototype.hasOwnProperty,Ze=l.unstable_scheduleCallback,Be=l.unstable_cancelCallback,nt=l.unstable_shouldYield,As=l.unstable_requestPaint,es=l.unstable_now,Mr=l.unstable_getCurrentPriorityLevel,po=l.unstable_ImmediatePriority,Bi=l.unstable_UserBlockingPriority,sa=l.unstable_NormalPriority,xo=l.unstable_LowPriority,Ui=l.unstable_IdlePriority,Rd=l.log,Ld=l.unstable_setDisableYieldValue,Sn=null,Vt=null;function Ys(t){if(typeof Rd=="function"&&Ld(t),Vt&&typeof Vt.setStrictMode=="function")try{Vt.setStrictMode(Sn,t)}catch{}}var ts=Math.clz32?Math.clz32:Td,go=Math.log,yo=Math.LN2;function Td(t){return t>>>=0,t===0?32:31-(go(t)/yo|0)|0}var Wa=256,na=4194304;function cn(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Pr(t,s,a){var i=t.pendingLanes;if(i===0)return 0;var h=0,m=t.suspendedLanes,w=t.pingedLanes;t=t.warmLanes;var k=i&134217727;return k!==0?(i=k&~m,i!==0?h=cn(i):(w&=k,w!==0?h=cn(w):a||(a=k&~t,a!==0&&(h=cn(a))))):(k=i&~m,k!==0?h=cn(k):w!==0?h=cn(w):a||(a=i&~t,a!==0&&(h=cn(a)))),h===0?0:s!==0&&s!==h&&(s&m)===0&&(m=h&-h,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:h}function Gs(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Ad(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bo(){var t=Wa;return Wa<<=1,(Wa&4194048)===0&&(Wa=256),t}function Fi(){var t=na;return na<<=1,(na&62914560)===0&&(na=4194304),t}function Or(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function aa(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Md(t,s,a,i,h,m){var w=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var k=t.entanglements,$=t.expirationTimes,se=t.hiddenUpdates;for(a=w&~a;0<a;){var he=31-ts(a),fe=1<<he;k[he]=0,$[he]=-1;var ae=se[he];if(ae!==null)for(se[he]=null,he=0;he<ae.length;he++){var re=ae[he];re!==null&&(re.lane&=-536870913)}a&=~fe}i!==0&&vo(t,i,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(w&~s))}function vo(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var i=31-ts(s);t.entangledLanes|=s,t.entanglements[i]=t.entanglements[i]|1073741824|a&4194090}function jo(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var i=31-ts(a),h=1<<i;h&s|t[i]&s&&(t[i]|=s),a&=~h}}function qi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Hi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function _o(){var t=J.p;return t!==0?t:(t=window.event,t===void 0?32:rx(t.type))}function Ii(t,s){var a=J.p;try{return J.p=t,s()}finally{J.p=a}}var dn=Math.random().toString(36).slice(2),Pt="__reactFiber$"+dn,Yt="__reactProps$"+dn,ra="__reactContainer$"+dn,ds="__reactEvents$"+dn,ke="__reactListeners$"+dn,No="__reactHandles$"+dn,Zi="__reactResources$"+dn,ia="__reactMarker$"+dn;function zr(t){delete t[Pt],delete t[Yt],delete t[ds],delete t[ke],delete t[No]}function un(t){var s=t[Pt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[ra]||a[Pt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=Zp(t);t!==null;){if(a=t[Pt])return a;t=Zp(t)}return s}t=a,a=t.parentNode}return null}function Cn(t){if(t=t[Pt]||t[ra]){var s=t.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return t}return null}function Ms(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(d(33))}function En(t){var s=t[Zi];return s||(s=t[Zi]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Et(t){t[ia]=!0}var wo=new Set,So={};function kn(t,s){Rn(t,s),Rn(t+"Capture",s)}function Rn(t,s){for(So[t]=s,t=0;t<s.length;t++)wo.add(s[t])}var Pd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ja={},Co={};function Od(t){return He.call(Co,t)?!0:He.call(Ja,t)?!1:Pd.test(t)?Co[t]=!0:(Ja[t]=!0,!1)}function Dr(t,s,a){if(Od(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var i=s.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Br(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Ks(t,s,a,i){if(i===null)t.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+i)}}var er,la;function Ln(t){if(er===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);er=s&&s[1]||"",la=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+er+t+la}var Ur=!1;function Tn(t,s){if(!t||Ur)return"";Ur=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(s){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(re){var ae=re}Reflect.construct(t,[],fe)}else{try{fe.call()}catch(re){ae=re}t.call(fe.prototype)}}else{try{throw Error()}catch(re){ae=re}(fe=t())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(re){if(re&&ae&&typeof re.stack=="string")return[re.stack,ae.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=i.DetermineComponentFrameRoot(),w=m[0],k=m[1];if(w&&k){var $=w.split(`
`),se=k.split(`
`);for(h=i=0;i<$.length&&!$[i].includes("DetermineComponentFrameRoot");)i++;for(;h<se.length&&!se[h].includes("DetermineComponentFrameRoot");)h++;if(i===$.length||h===se.length)for(i=$.length-1,h=se.length-1;1<=i&&0<=h&&$[i]!==se[h];)h--;for(;1<=i&&0<=h;i--,h--)if($[i]!==se[h]){if(i!==1||h!==1)do if(i--,h--,0>h||$[i]!==se[h]){var he=`
`+$[i].replace(" at new "," at ");return t.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",t.displayName)),he}while(1<=i&&0<=h);break}}}finally{Ur=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ln(a):""}function Xe(t){switch(t.tag){case 26:case 27:case 5:return Ln(t.type);case 16:return Ln("Lazy");case 13:return Ln("Suspense");case 19:return Ln("SuspenseList");case 0:case 15:return Tn(t.type,!1);case 11:return Tn(t.type.render,!1);case 1:return Tn(t.type,!0);case 31:return Ln("Activity");default:return""}}function ct(t){try{var s="";do s+=Xe(t),t=t.return;while(t);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Ft(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function An(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function oa(t){var s=An(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),i=""+t[s];if(!t.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,m=a.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(w){i=""+w,m.call(this,w)}}),Object.defineProperty(t,s,{enumerable:a.enumerable}),{getValue:function(){return i},setValue:function(w){i=""+w},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ca(t){t._valueTracker||(t._valueTracker=oa(t))}function Ue(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),i="";return t&&(i=An(t)?t.checked?"true":"false":t.value),t=i,t!==a?(s.setValue(t),!0):!1}function dt(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var $i=/[\n"\\]/g;function qt(t){return t.replace($i,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Gt(t,s,a,i,h,m,w,k){t.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.type=w:t.removeAttribute("type"),s!=null?w==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Ft(s)):t.value!==""+Ft(s)&&(t.value=""+Ft(s)):w!=="submit"&&w!=="reset"||t.removeAttribute("value"),s!=null?da(t,w,Ft(s)):a!=null?da(t,w,Ft(a)):i!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?t.name=""+Ft(k):t.removeAttribute("name")}function Eo(t,s,a,i,h,m,w,k){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;a=a!=null?""+Ft(a):"",s=s!=null?""+Ft(s):a,k||s===t.value||(t.value=s),t.defaultValue=s}i=i??h,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=k?t.checked:!!i,t.defaultChecked=!!i,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.name=w)}function da(t,s,a){s==="number"&&dt(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function us(t,s,a,i){if(t=t.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=s.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&i&&(t[a].defaultSelected=!0)}else{for(a=""+Ft(a),s=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,i&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function gt(t,s,a){if(s!=null&&(s=""+Ft(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+Ft(a):""}function hn(t,s,a,i){if(s==null){if(i!=null){if(a!=null)throw Error(d(92));if(de(i)){if(1<i.length)throw Error(d(93));i=i[0]}a=i}a==null&&(a=""),s=a}a=Ft(s),t.defaultValue=a,i=t.textContent,i===a&&i!==""&&i!==null&&(t.value=i)}function Ps(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var tr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fr(t,s,a){var i=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?i?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":i?t.setProperty(s,a):typeof a!="number"||a===0||tr.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function ua(t,s,a){if(s!=null&&typeof s!="object")throw Error(d(62));if(t=t.style,a!=null){for(var i in a)!a.hasOwnProperty(i)||s!=null&&s.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var h in s)i=s[h],s.hasOwnProperty(h)&&a[h]!==i&&Fr(t,h,i)}else for(var m in s)s.hasOwnProperty(m)&&Fr(t,m,s[m])}function sr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ha(t){return qr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var nr=null;function ma(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mn=null,mn=null;function ko(t){var s=Cn(t);if(s&&(t=s.stateNode)){var a=t[Yt]||null;e:switch(t=s.stateNode,s.type){case"input":if(Gt(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+qt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var i=a[s];if(i!==t&&i.form===t.form){var h=i[Yt]||null;if(!h)throw Error(d(90));Gt(i,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)i=a[s],i.form===t.form&&Ue(i)}break e;case"textarea":gt(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&us(t,!!a.multiple,s,!1)}}}var ze=!1;function ys(t,s,a){if(ze)return t(s,a);ze=!0;try{var i=t(s);return i}finally{if(ze=!1,(Mn!==null||mn!==null)&&(_c(),Mn&&(s=Mn,t=mn,mn=Mn=null,ko(s),t)))for(s=0;s<t.length;s++)ko(t[s])}}function Je(t,s){var a=t.stateNode;if(a===null)return null;var i=a[Yt]||null;if(i===null)return null;a=i[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(d(231,s,typeof a));return a}var Os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ar=!1;if(Os)try{var Pn={};Object.defineProperty(Pn,"passive",{get:function(){ar=!0}}),window.addEventListener("test",Pn,Pn),window.removeEventListener("test",Pn,Pn)}catch{ar=!1}var zs=null,Qs=null,fa=null;function pa(){if(fa)return fa;var t,s=Qs,a=s.length,i,h="value"in zs?zs.value:zs.textContent,m=h.length;for(t=0;t<a&&s[t]===h[t];t++);var w=a-t;for(i=1;i<=w&&s[a-i]===h[m-i];i++);return fa=h.slice(t,1<i?1-i:void 0)}function jt(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ds(){return!0}function Yi(){return!1}function Ht(t){function s(a,i,h,m,w){this._reactName=a,this._targetInst=h,this.type=i,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var k in t)t.hasOwnProperty(k)&&(a=t[k],this[k]=a?a(m):m[k]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ds:Yi,this.isPropagationStopped=Yi,this}return N(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ds)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ds)},persist:function(){},isPersistent:Ds}),s}var On={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rr=Ht(On),zn=N({},On,{view:0,detail:0}),zd=Ht(zn),Hr,Ve,ir,Kt=N({},zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ir,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ir&&(ir&&t.type==="mousemove"?(Hr=t.screenX-ir.screenX,Ve=t.screenY-ir.screenY):Ve=Hr=0,ir=t),Hr)},movementY:function(t){return"movementY"in t?t.movementY:Ve}}),xa=Ht(Kt),Ro=N({},Kt,{dataTransfer:0}),Dd=Ht(Ro),Gi=N({},zn,{relatedTarget:0}),Ki=Ht(Gi),Lo=N({},On,{animationName:0,elapsedTime:0,pseudoElement:0}),Bd=Ht(Lo),Ud=N({},On,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Qi=Ht(Ud),Fd=N({},On,{data:0}),bs=Ht(Fd),qd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},To={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ao(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=fn[t])?!!s[t]:!1}function Ir(){return Ao}var Xi=N({},zn,{key:function(t){if(t.key){var s=qd[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=jt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?To[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ir,charCode:function(t){return t.type==="keypress"?jt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hd=Ht(Xi),Mo=N({},Kt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wi=Ht(Mo),Id=N({},zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ir}),Zd=Ht(Id),Ji=N({},On,{propertyName:0,elapsedTime:0,pseudoElement:0}),$d=Ht(Ji),Po=N({},Kt,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Oo=Ht(Po),Zr=N({},On,{newState:0,oldState:0}),Dn=Ht(Zr),Vd=[9,13,27,32],Bn=Os&&"CompositionEvent"in window,Ot=null;Os&&"documentMode"in document&&(Ot=document.documentMode);var zo=Os&&"TextEvent"in window&&!Ot,el=Os&&(!Bn||Ot&&8<Ot&&11>=Ot),Do=" ",$r=!1;function Vr(t,s){switch(t){case"keyup":return Vd.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ga=!1;function Uo(t,s){switch(t){case"compositionend":return Bo(s);case"keypress":return s.which!==32?null:($r=!0,Do);case"textInput":return t=s.data,t===Do&&$r?null:t;default:return null}}function Yd(t,s){if(ga)return t==="compositionend"||!Bn&&Vr(t,s)?(t=pa(),fa=Qs=zs=null,ga=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return el&&s.locale!=="ko"?null:s.data;default:return null}}var vs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!vs[t.type]:s==="textarea"}function Fo(t,s,a,i){Mn?mn?mn.push(i):mn=[i]:Mn=i,s=kc(s,"onChange"),0<s.length&&(a=new rr("onChange","change",null,a,i),t.push({event:a,listeners:s}))}var ss=null,lr=null;function ya(t){Pp(t,0)}function Yr(t){var s=Ms(t);if(Ue(s))return t}function ba(t,s){if(t==="change")return s}var tl=!1;if(Os){var va;if(Os){var sl="oninput"in document;if(!sl){var Xs=document.createElement("div");Xs.setAttribute("oninput","return;"),sl=typeof Xs.oninput=="function"}va=sl}else va=!1;tl=va&&(!document.documentMode||9<document.documentMode)}function or(){ss&&(ss.detachEvent("onpropertychange",qo),lr=ss=null)}function qo(t){if(t.propertyName==="value"&&Yr(lr)){var s=[];Fo(s,lr,t,ma(t)),ys(ya,s)}}function nl(t,s,a){t==="focusin"?(or(),ss=s,lr=a,ss.attachEvent("onpropertychange",qo)):t==="focusout"&&or()}function Gd(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yr(lr)}function Ws(t,s){if(t==="click")return Yr(s)}function Kd(t,s){if(t==="input"||t==="change")return Yr(s)}function ja(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var ns=typeof Object.is=="function"?Object.is:ja;function as(t,s){if(ns(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),i=Object.keys(s);if(a.length!==i.length)return!1;for(i=0;i<a.length;i++){var h=a[i];if(!He.call(s,h)||!ns(t[h],s[h]))return!1}return!0}function cr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function al(t,s){var a=cr(t);t=0;for(var i;a;){if(a.nodeType===3){if(i=t+a.textContent.length,t<=s&&i>=s)return{node:a,offset:s-t};t=i}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=cr(a)}}function Gr(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Gr(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function dr(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=dt(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=dt(t.document)}return s}function ur(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var Kr=Os&&"documentMode"in document&&11>=document.documentMode,js=null,_a=null,Fn=null,Qr=!1;function Ho(t,s,a){var i=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Qr||js==null||js!==dt(i)||(i=js,"selectionStart"in i&&ur(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Fn&&as(Fn,i)||(Fn=i,i=kc(_a,"onSelect"),0<i.length&&(s=new rr("onSelect","select",null,s,a),t.push({event:s,listeners:i}),s.target=js)))}function Bs(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Na={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionrun:Bs("Transition","TransitionRun"),transitionstart:Bs("Transition","TransitionStart"),transitioncancel:Bs("Transition","TransitionCancel"),transitionend:Bs("Transition","TransitionEnd")},Xr={},Io={};Os&&(Io=document.createElement("div").style,"AnimationEvent"in window||(delete Na.animationend.animation,delete Na.animationiteration.animation,delete Na.animationstart.animation),"TransitionEvent"in window||delete Na.transitionend.transition);function pn(t){if(Xr[t])return Xr[t];if(!Na[t])return t;var s=Na[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Io)return Xr[t]=s[a];return t}var Zo=pn("animationend"),_s=pn("animationiteration"),hr=pn("animationstart"),Qd=pn("transitionrun"),Wr=pn("transitionstart"),Xd=pn("transitioncancel"),rl=pn("transitionend"),$o=new Map,qn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qn.push("scrollEnd");function Ns(t,s){$o.set(t,s),kn(s,[t])}var Hn=new WeakMap;function rs(t,s){if(typeof t=="object"&&t!==null){var a=Hn.get(t);return a!==void 0?a:(s={value:t,source:s,stack:ct(s)},Hn.set(t,s),s)}return{value:t,source:s,stack:ct(s)}}var is=[],wa=0,ws=0;function mr(){for(var t=wa,s=ws=wa=0;s<t;){var a=is[s];is[s++]=null;var i=is[s];is[s++]=null;var h=is[s];is[s++]=null;var m=is[s];if(is[s++]=null,i!==null&&h!==null){var w=i.pending;w===null?h.next=h:(h.next=w.next,w.next=h),i.pending=h}m!==0&&pr(a,h,m)}}function fr(t,s,a,i){is[wa++]=t,is[wa++]=s,is[wa++]=a,is[wa++]=i,ws|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function In(t,s,a,i){return fr(t,s,a,i),xn(t)}function Sa(t,s){return fr(t,null,null,s),xn(t)}function pr(t,s,a){t.lanes|=a;var i=t.alternate;i!==null&&(i.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,i=m.alternate,i!==null&&(i.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&s!==null&&(h=31-ts(a),t=m.hiddenUpdates,i=t[h],i===null?t[h]=[s]:i.push(s),s.lane=a|536870912),m):null}function xn(t){if(50<kl)throw kl=0,Gu=null,Error(d(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Zn={};function Vo(t,s,a,i){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(t,s,a,i){return new Vo(t,s,a,i)}function Jr(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Us(t,s){var a=t.alternate;return a===null?(a=ls(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function il(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function xr(t,s,a,i,h,m){var w=0;if(i=t,typeof t=="function")Jr(t)&&(w=1);else if(typeof t=="string")w=Ly(t,a,xe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case O:return t=ls(31,a,s,h),t.elementType=O,t.lanes=m,t;case B:return gn(a.children,h,m,s);case S:w=8,h|=24;break;case M:return t=ls(12,a,s,h|2),t.elementType=M,t.lanes=m,t;case q:return t=ls(13,a,s,h),t.elementType=q,t.lanes=m,t;case A:return t=ls(19,a,s,h),t.elementType=A,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F:case T:w=10;break e;case I:w=9;break e;case H:w=11;break e;case D:w=14;break e;case V:w=16,i=null;break e}w=29,a=Error(d(130,t===null?"null":typeof t,"")),i=null}return s=ls(w,a,s,h),s.elementType=t,s.type=i,s.lanes=m,s}function gn(t,s,a,i){return t=ls(7,t,i,s),t.lanes=a,t}function ll(t,s,a){return t=ls(6,t,null,s),t.lanes=a,t}function ei(t,s,a){return s=ls(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var $n=[],Ca=0,n=null,r=0,u=[],p=0,v=null,C=1,Z="";function ee(t,s){$n[Ca++]=r,$n[Ca++]=n,n=t,r=s}function ie(t,s,a){u[p++]=C,u[p++]=Z,u[p++]=v,v=t;var i=C;t=Z;var h=32-ts(i)-1;i&=~(1<<h),a+=1;var m=32-ts(s)+h;if(30<m){var w=h-h%5;m=(i&(1<<w)-1).toString(32),i>>=w,h-=w,C=1<<32-ts(s)+h|a<<h|i,Z=m+t}else C=1<<m|a<<h|i,Z=t}function pe(t){t.return!==null&&(ee(t,1),ie(t,1,0))}function Ne(t){for(;t===n;)n=$n[--Ca],$n[Ca]=null,r=$n[--Ca],$n[Ca]=null;for(;t===v;)v=u[--p],u[p]=null,Z=u[--p],u[p]=null,C=u[--p],u[p]=null}var we=null,Ce=null,Oe=!1,ut=null,yt=!1,zt=Error(d(519));function hs(t){var s=Error(d(418,""));throw ka(rs(s,t)),zt}function Yo(t){var s=t.stateNode,a=t.type,i=t.memoizedProps;switch(s[Pt]=t,s[Yt]=i,a){case"dialog":Ke("cancel",s),Ke("close",s);break;case"iframe":case"object":case"embed":Ke("load",s);break;case"video":case"audio":for(a=0;a<Ll.length;a++)Ke(Ll[a],s);break;case"source":Ke("error",s);break;case"img":case"image":case"link":Ke("error",s),Ke("load",s);break;case"details":Ke("toggle",s);break;case"input":Ke("invalid",s),Eo(s,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),ca(s);break;case"select":Ke("invalid",s);break;case"textarea":Ke("invalid",s),hn(s,i.value,i.defaultValue,i.children),ca(s)}a=i.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||i.suppressHydrationWarning===!0||Bp(s.textContent,a)?(i.popover!=null&&(Ke("beforetoggle",s),Ke("toggle",s)),i.onScroll!=null&&Ke("scroll",s),i.onScrollEnd!=null&&Ke("scrollend",s),i.onClick!=null&&(s.onclick=Rc),s=!0):s=!1,s||hs(t)}function Go(t){for(we=t.return;we;)switch(we.tag){case 5:case 13:yt=!1;return;case 27:case 3:yt=!0;return;default:we=we.return}}function gr(t){if(t!==we)return!1;if(!Oe)return Go(t),Oe=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||dh(t.type,t.memoizedProps)),a=!a),a&&Ce&&hs(t),Go(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(d(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(s===0){Ce=sn(t.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;t=t.nextSibling}Ce=null}}else s===27?(s=Ce,Ia(t.type)?(t=fh,fh=null,Ce=t):Ce=s):Ce=we?sn(t.stateNode.nextSibling):null;return!0}function Ea(){Ce=we=null,Oe=!1}function Ko(){var t=ut;return t!==null&&(ps===null?ps=t:ps.push.apply(ps,t),ut=null),t}function ka(t){ut===null?ut=[t]:ut.push(t)}var ft=ne(null),Fs=null,Js=null;function yn(t,s,a){oe(ft,s._currentValue),s._currentValue=a}function en(t){t._currentValue=ft.current,ge(ft)}function yr(t,s,a){for(;t!==null;){var i=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,i!==null&&(i.childLanes|=s)):i!==null&&(i.childLanes&s)!==s&&(i.childLanes|=s),t===a)break;t=t.return}}function ti(t,s,a,i){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var w=h.child;m=m.firstContext;e:for(;m!==null;){var k=m;m=h;for(var $=0;$<s.length;$++)if(k.context===s[$]){m.lanes|=a,k=m.alternate,k!==null&&(k.lanes|=a),yr(m.return,a,t),i||(w=null);break e}m=k.next}}else if(h.tag===18){if(w=h.return,w===null)throw Error(d(341));w.lanes|=a,m=w.alternate,m!==null&&(m.lanes|=a),yr(w,a,t),w=null}else w=h.child;if(w!==null)w.return=h;else for(w=h;w!==null;){if(w===t){w=null;break}if(h=w.sibling,h!==null){h.return=w.return,w=h;break}w=w.return}h=w}}function br(t,s,a,i){t=null;for(var h=s,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var w=h.alternate;if(w===null)throw Error(d(387));if(w=w.memoizedProps,w!==null){var k=h.type;ns(h.pendingProps.value,w.value)||(t!==null?t.push(k):t=[k])}}else if(h===Le.current){if(w=h.alternate,w===null)throw Error(d(387));w.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(zl):t=[zl])}h=h.return}t!==null&&ti(s,t,a,i),s.flags|=262144}function Qo(t){for(t=t.firstContext;t!==null;){if(!ns(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function vr(t){Fs=t,Js=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qt(t){return Nm(Fs,t)}function Xo(t,s){return Fs===null&&vr(t),Nm(t,s)}function Nm(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Js===null){if(t===null)throw Error(d(308));Js=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Js=Js.next=s;return a}var R0=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,i){t.push(i)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},L0=l.unstable_scheduleCallback,T0=l.unstable_NormalPriority,At={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wd(){return{controller:new R0,data:new Map,refCount:0}}function ol(t){t.refCount--,t.refCount===0&&L0(T0,function(){t.controller.abort()})}var cl=null,Jd=0,si=0,ni=null;function A0(t,s){if(cl===null){var a=cl=[];Jd=0,si=th(),ni={status:"pending",value:void 0,then:function(i){a.push(i)}}}return Jd++,s.then(wm,wm),s}function wm(){if(--Jd===0&&cl!==null){ni!==null&&(ni.status="fulfilled");var t=cl;cl=null,si=0,ni=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function M0(t,s){var a=[],i={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){i.status="fulfilled",i.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(i.status="rejected",i.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),i}var Sm=z.S;z.S=function(t,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&A0(t,s),Sm!==null&&Sm(t,s)};var jr=ne(null);function eu(){var t=jr.current;return t!==null?t:ht.pooledCache}function Wo(t,s){s===null?oe(jr,jr.current):oe(jr,s.pool)}function Cm(){var t=eu();return t===null?null:{parent:At._currentValue,pool:t}}var dl=Error(d(460)),Em=Error(d(474)),Jo=Error(d(542)),tu={then:function(){}};function km(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ec(){}function Rm(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(ec,ec),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Tm(t),t;default:if(typeof s.status=="string")s.then(ec,ec);else{if(t=ht,t!==null&&100<t.shellSuspendCounter)throw Error(d(482));t=s,t.status="pending",t.then(function(i){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=i}},function(i){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=i}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Tm(t),t}throw ul=s,dl}}var ul=null;function Lm(){if(ul===null)throw Error(d(459));var t=ul;return ul=null,t}function Tm(t){if(t===dl||t===Jo)throw Error(d(483))}var Ra=!1;function su(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nu(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function La(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ta(t,s,a){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,(tt&2)!==0){var h=i.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),i.pending=s,s=xn(t),pr(t,null,a),s}return fr(t,i,s,a),xn(t)}function hl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var i=s.lanes;i&=t.pendingLanes,a|=i,s.lanes=a,jo(t,a)}}function au(t,s){var a=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,a===i)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?h=m=s:m=m.next=s}else h=m=s;a={baseState:i.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:i.shared,callbacks:i.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var ru=!1;function ml(){if(ru){var t=ni;if(t!==null)throw t}}function fl(t,s,a,i){ru=!1;var h=t.updateQueue;Ra=!1;var m=h.firstBaseUpdate,w=h.lastBaseUpdate,k=h.shared.pending;if(k!==null){h.shared.pending=null;var $=k,se=$.next;$.next=null,w===null?m=se:w.next=se,w=$;var he=t.alternate;he!==null&&(he=he.updateQueue,k=he.lastBaseUpdate,k!==w&&(k===null?he.firstBaseUpdate=se:k.next=se,he.lastBaseUpdate=$))}if(m!==null){var fe=h.baseState;w=0,he=se=$=null,k=m;do{var ae=k.lane&-536870913,re=ae!==k.lane;if(re?(We&ae)===ae:(i&ae)===ae){ae!==0&&ae===si&&(ru=!0),he!==null&&(he=he.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Me=t,Te=k;ae=s;var it=a;switch(Te.tag){case 1:if(Me=Te.payload,typeof Me=="function"){fe=Me.call(it,fe,ae);break e}fe=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Te.payload,ae=typeof Me=="function"?Me.call(it,fe,ae):Me,ae==null)break e;fe=N({},fe,ae);break e;case 2:Ra=!0}}ae=k.callback,ae!==null&&(t.flags|=64,re&&(t.flags|=8192),re=h.callbacks,re===null?h.callbacks=[ae]:re.push(ae))}else re={lane:ae,tag:k.tag,payload:k.payload,callback:k.callback,next:null},he===null?(se=he=re,$=fe):he=he.next=re,w|=ae;if(k=k.next,k===null){if(k=h.shared.pending,k===null)break;re=k,k=re.next,re.next=null,h.lastBaseUpdate=re,h.shared.pending=null}}while(!0);he===null&&($=fe),h.baseState=$,h.firstBaseUpdate=se,h.lastBaseUpdate=he,m===null&&(h.shared.lanes=0),Ua|=w,t.lanes=w,t.memoizedState=fe}}function Am(t,s){if(typeof t!="function")throw Error(d(191,t));t.call(s)}function Mm(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Am(a[t],s)}var ai=ne(null),tc=ne(0);function Pm(t,s){t=Wn,oe(tc,t),oe(ai,s),Wn=t|s.baseLanes}function iu(){oe(tc,Wn),oe(ai,ai.current)}function lu(){Wn=tc.current,ge(ai),ge(tc)}var Aa=0,$e=null,at=null,kt=null,sc=!1,ri=!1,_r=!1,nc=0,pl=0,ii=null,P0=0;function Nt(){throw Error(d(321))}function ou(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!ns(t[a],s[a]))return!1;return!0}function cu(t,s,a,i,h,m){return Aa=m,$e=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,z.H=t===null||t.memoizedState===null?yf:bf,_r=!1,m=a(i,h),_r=!1,ri&&(m=zm(s,a,i,h)),Om(t),m}function Om(t){z.H=cc;var s=at!==null&&at.next!==null;if(Aa=0,kt=at=$e=null,sc=!1,pl=0,ii=null,s)throw Error(d(300));t===null||Dt||(t=t.dependencies,t!==null&&Qo(t)&&(Dt=!0))}function zm(t,s,a,i){$e=t;var h=0;do{if(ri&&(ii=null),pl=0,ri=!1,25<=h)throw Error(d(301));if(h+=1,kt=at=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}z.H=q0,m=s(a,i)}while(ri);return m}function O0(){var t=z.H,s=t.useState()[0];return s=typeof s.then=="function"?xl(s):s,t=t.useState()[0],(at!==null?at.memoizedState:null)!==t&&($e.flags|=1024),s}function du(){var t=nc!==0;return nc=0,t}function uu(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function hu(t){if(sc){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}sc=!1}Aa=0,kt=at=$e=null,ri=!1,pl=nc=0,ii=null}function ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?$e.memoizedState=kt=t:kt=kt.next=t,kt}function Rt(){if(at===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var s=kt===null?$e.memoizedState:kt.next;if(s!==null)kt=s,at=t;else{if(t===null)throw $e.alternate===null?Error(d(467)):Error(d(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},kt===null?$e.memoizedState=kt=t:kt=kt.next=t}return kt}function mu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xl(t){var s=pl;return pl+=1,ii===null&&(ii=[]),t=Rm(ii,t,s),s=$e,(kt===null?s.memoizedState:kt.next)===null&&(s=s.alternate,z.H=s===null||s.memoizedState===null?yf:bf),t}function ac(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return xl(t);if(t.$$typeof===T)return Qt(t)}throw Error(d(438,String(t)))}function fu(t){var s=null,a=$e.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var i=$e.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(s={data:i.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=mu(),$e.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),i=0;i<t;i++)a[i]=G;return s.index++,a}function Vn(t,s){return typeof s=="function"?s(t):s}function rc(t){var s=Rt();return pu(s,at,t)}function pu(t,s,a){var i=t.queue;if(i===null)throw Error(d(311));i.lastRenderedReducer=a;var h=t.baseQueue,m=i.pending;if(m!==null){if(h!==null){var w=h.next;h.next=m.next,m.next=w}s.baseQueue=h=m,i.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{s=h.next;var k=w=null,$=null,se=s,he=!1;do{var fe=se.lane&-536870913;if(fe!==se.lane?(We&fe)===fe:(Aa&fe)===fe){var ae=se.revertLane;if(ae===0)$!==null&&($=$.next={lane:0,revertLane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),fe===si&&(he=!0);else if((Aa&ae)===ae){se=se.next,ae===si&&(he=!0);continue}else fe={lane:0,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},$===null?(k=$=fe,w=m):$=$.next=fe,$e.lanes|=ae,Ua|=ae;fe=se.action,_r&&a(m,fe),m=se.hasEagerState?se.eagerState:a(m,fe)}else ae={lane:fe,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},$===null?(k=$=ae,w=m):$=$.next=ae,$e.lanes|=fe,Ua|=fe;se=se.next}while(se!==null&&se!==s);if($===null?w=m:$.next=k,!ns(m,t.memoizedState)&&(Dt=!0,he&&(a=ni,a!==null)))throw a;t.memoizedState=m,t.baseState=w,t.baseQueue=$,i.lastRenderedState=m}return h===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function xu(t){var s=Rt(),a=s.queue;if(a===null)throw Error(d(311));a.lastRenderedReducer=t;var i=a.dispatch,h=a.pending,m=s.memoizedState;if(h!==null){a.pending=null;var w=h=h.next;do m=t(m,w.action),w=w.next;while(w!==h);ns(m,s.memoizedState)||(Dt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,i]}function Dm(t,s,a){var i=$e,h=Rt(),m=Oe;if(m){if(a===void 0)throw Error(d(407));a=a()}else a=s();var w=!ns((at||h).memoizedState,a);w&&(h.memoizedState=a,Dt=!0),h=h.queue;var k=Fm.bind(null,i,h,t);if(gl(2048,8,k,[t]),h.getSnapshot!==s||w||kt!==null&&kt.memoizedState.tag&1){if(i.flags|=2048,li(9,ic(),Um.bind(null,i,h,a,s),null),ht===null)throw Error(d(349));m||(Aa&124)!==0||Bm(i,s,a)}return a}function Bm(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=$e.updateQueue,s===null?(s=mu(),$e.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Um(t,s,a,i){s.value=a,s.getSnapshot=i,qm(s)&&Hm(t)}function Fm(t,s,a){return a(function(){qm(s)&&Hm(t)})}function qm(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!ns(t,a)}catch{return!0}}function Hm(t){var s=Sa(t,2);s!==null&&Rs(s,t,2)}function gu(t){var s=ms();if(typeof t=="function"){var a=t;if(t=a(),_r){Ys(!0);try{a()}finally{Ys(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vn,lastRenderedState:t},s}function Im(t,s,a,i){return t.baseState=a,pu(t,at,typeof i=="function"?i:Vn)}function z0(t,s,a,i,h){if(oc(t))throw Error(d(485));if(t=s.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){m.listeners.push(w)}};z.T!==null?a(!0):m.isTransition=!1,i(m),a=s.pending,a===null?(m.next=s.pending=m,Zm(s,m)):(m.next=a.next,s.pending=a.next=m)}}function Zm(t,s){var a=s.action,i=s.payload,h=t.state;if(s.isTransition){var m=z.T,w={};z.T=w;try{var k=a(h,i),$=z.S;$!==null&&$(w,k),$m(t,s,k)}catch(se){yu(t,s,se)}finally{z.T=m}}else try{m=a(h,i),$m(t,s,m)}catch(se){yu(t,s,se)}}function $m(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(i){Vm(t,s,i)},function(i){return yu(t,s,i)}):Vm(t,s,a)}function Vm(t,s,a){s.status="fulfilled",s.value=a,Ym(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Zm(t,a)))}function yu(t,s,a){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do s.status="rejected",s.reason=a,Ym(s),s=s.next;while(s!==i)}t.action=null}function Ym(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Gm(t,s){return s}function Km(t,s){if(Oe){var a=ht.formState;if(a!==null){e:{var i=$e;if(Oe){if(Ce){t:{for(var h=Ce,m=yt;h.nodeType!==8;){if(!m){h=null;break t}if(h=sn(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){Ce=sn(h.nextSibling),i=h.data==="F!";break e}}hs(i)}i=!1}i&&(s=a[0])}}return a=ms(),a.memoizedState=a.baseState=s,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gm,lastRenderedState:s},a.queue=i,a=pf.bind(null,$e,i),i.dispatch=a,i=gu(!1),m=Nu.bind(null,$e,!1,i.queue),i=ms(),h={state:s,dispatch:null,action:t,pending:null},i.queue=h,a=z0.bind(null,$e,h,m,a),h.dispatch=a,i.memoizedState=t,[s,a,!1]}function Qm(t){var s=Rt();return Xm(s,at,t)}function Xm(t,s,a){if(s=pu(t,s,Gm)[0],t=rc(Vn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var i=xl(s)}catch(w){throw w===dl?Jo:w}else i=s;s=Rt();var h=s.queue,m=h.dispatch;return a!==s.memoizedState&&($e.flags|=2048,li(9,ic(),D0.bind(null,h,a),null)),[i,m,t]}function D0(t,s){t.action=s}function Wm(t){var s=Rt(),a=at;if(a!==null)return Xm(s,a,t);Rt(),s=s.memoizedState,a=Rt();var i=a.queue.dispatch;return a.memoizedState=t,[s,i,!1]}function li(t,s,a,i){return t={tag:t,create:a,deps:i,inst:s,next:null},s=$e.updateQueue,s===null&&(s=mu(),$e.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(i=a.next,a.next=t,t.next=i,s.lastEffect=t),t}function ic(){return{destroy:void 0,resource:void 0}}function Jm(){return Rt().memoizedState}function lc(t,s,a,i){var h=ms();i=i===void 0?null:i,$e.flags|=t,h.memoizedState=li(1|s,ic(),a,i)}function gl(t,s,a,i){var h=Rt();i=i===void 0?null:i;var m=h.memoizedState.inst;at!==null&&i!==null&&ou(i,at.memoizedState.deps)?h.memoizedState=li(s,m,a,i):($e.flags|=t,h.memoizedState=li(1|s,m,a,i))}function ef(t,s){lc(8390656,8,t,s)}function tf(t,s){gl(2048,8,t,s)}function sf(t,s){return gl(4,2,t,s)}function nf(t,s){return gl(4,4,t,s)}function af(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function rf(t,s,a){a=a!=null?a.concat([t]):null,gl(4,4,af.bind(null,s,t),a)}function bu(){}function lf(t,s){var a=Rt();s=s===void 0?null:s;var i=a.memoizedState;return s!==null&&ou(s,i[1])?i[0]:(a.memoizedState=[t,s],t)}function of(t,s){var a=Rt();s=s===void 0?null:s;var i=a.memoizedState;if(s!==null&&ou(s,i[1]))return i[0];if(i=t(),_r){Ys(!0);try{t()}finally{Ys(!1)}}return a.memoizedState=[i,s],i}function vu(t,s,a){return a===void 0||(Aa&1073741824)!==0?t.memoizedState=s:(t.memoizedState=a,t=up(),$e.lanes|=t,Ua|=t,a)}function cf(t,s,a,i){return ns(a,s)?a:ai.current!==null?(t=vu(t,a,i),ns(t,s)||(Dt=!0),t):(Aa&42)===0?(Dt=!0,t.memoizedState=a):(t=up(),$e.lanes|=t,Ua|=t,s)}function df(t,s,a,i,h){var m=J.p;J.p=m!==0&&8>m?m:8;var w=z.T,k={};z.T=k,Nu(t,!1,s,a);try{var $=h(),se=z.S;if(se!==null&&se(k,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var he=M0($,i);yl(t,s,he,ks(t))}else yl(t,s,i,ks(t))}catch(fe){yl(t,s,{then:function(){},status:"rejected",reason:fe},ks())}finally{J.p=m,z.T=w}}function B0(){}function ju(t,s,a,i){if(t.tag!==5)throw Error(d(476));var h=uf(t).queue;df(t,h,s,W,a===null?B0:function(){return hf(t),a(i)})}function uf(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vn,lastRenderedState:W},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vn,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function hf(t){var s=uf(t).next.queue;yl(t,s,{},ks())}function _u(){return Qt(zl)}function mf(){return Rt().memoizedState}function ff(){return Rt().memoizedState}function U0(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=ks();t=La(a);var i=Ta(s,t,a);i!==null&&(Rs(i,s,a),hl(i,s,a)),s={cache:Wd()},t.payload=s;return}s=s.return}}function F0(t,s,a){var i=ks();a={lane:i,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},oc(t)?xf(s,a):(a=In(t,s,a,i),a!==null&&(Rs(a,t,i),gf(a,s,i)))}function pf(t,s,a){var i=ks();yl(t,s,a,i)}function yl(t,s,a,i){var h={lane:i,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(oc(t))xf(s,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var w=s.lastRenderedState,k=m(w,a);if(h.hasEagerState=!0,h.eagerState=k,ns(k,w))return fr(t,s,h,0),ht===null&&mr(),!1}catch{}finally{}if(a=In(t,s,h,i),a!==null)return Rs(a,t,i),gf(a,s,i),!0}return!1}function Nu(t,s,a,i){if(i={lane:2,revertLane:th(),action:i,hasEagerState:!1,eagerState:null,next:null},oc(t)){if(s)throw Error(d(479))}else s=In(t,a,i,2),s!==null&&Rs(s,t,2)}function oc(t){var s=t.alternate;return t===$e||s!==null&&s===$e}function xf(t,s){ri=sc=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function gf(t,s,a){if((a&4194048)!==0){var i=s.lanes;i&=t.pendingLanes,a|=i,s.lanes=a,jo(t,a)}}var cc={readContext:Qt,use:ac,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt},yf={readContext:Qt,use:ac,useCallback:function(t,s){return ms().memoizedState=[t,s===void 0?null:s],t},useContext:Qt,useEffect:ef,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,lc(4194308,4,af.bind(null,s,t),a)},useLayoutEffect:function(t,s){return lc(4194308,4,t,s)},useInsertionEffect:function(t,s){lc(4,2,t,s)},useMemo:function(t,s){var a=ms();s=s===void 0?null:s;var i=t();if(_r){Ys(!0);try{t()}finally{Ys(!1)}}return a.memoizedState=[i,s],i},useReducer:function(t,s,a){var i=ms();if(a!==void 0){var h=a(s);if(_r){Ys(!0);try{a(s)}finally{Ys(!1)}}}else h=s;return i.memoizedState=i.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},i.queue=t,t=t.dispatch=F0.bind(null,$e,t),[i.memoizedState,t]},useRef:function(t){var s=ms();return t={current:t},s.memoizedState=t},useState:function(t){t=gu(t);var s=t.queue,a=pf.bind(null,$e,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:bu,useDeferredValue:function(t,s){var a=ms();return vu(a,t,s)},useTransition:function(){var t=gu(!1);return t=df.bind(null,$e,t.queue,!0,!1),ms().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var i=$e,h=ms();if(Oe){if(a===void 0)throw Error(d(407));a=a()}else{if(a=s(),ht===null)throw Error(d(349));(We&124)!==0||Bm(i,s,a)}h.memoizedState=a;var m={value:a,getSnapshot:s};return h.queue=m,ef(Fm.bind(null,i,m,t),[t]),i.flags|=2048,li(9,ic(),Um.bind(null,i,m,a,s),null),a},useId:function(){var t=ms(),s=ht.identifierPrefix;if(Oe){var a=Z,i=C;a=(i&~(1<<32-ts(i)-1)).toString(32)+a,s=""+s+"R"+a,a=nc++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=P0++,s=""+s+"r"+a.toString(32)+"";return t.memoizedState=s},useHostTransitionStatus:_u,useFormState:Km,useActionState:Km,useOptimistic:function(t){var s=ms();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Nu.bind(null,$e,!0,a),a.dispatch=s,[t,s]},useMemoCache:fu,useCacheRefresh:function(){return ms().memoizedState=U0.bind(null,$e)}},bf={readContext:Qt,use:ac,useCallback:lf,useContext:Qt,useEffect:tf,useImperativeHandle:rf,useInsertionEffect:sf,useLayoutEffect:nf,useMemo:of,useReducer:rc,useRef:Jm,useState:function(){return rc(Vn)},useDebugValue:bu,useDeferredValue:function(t,s){var a=Rt();return cf(a,at.memoizedState,t,s)},useTransition:function(){var t=rc(Vn)[0],s=Rt().memoizedState;return[typeof t=="boolean"?t:xl(t),s]},useSyncExternalStore:Dm,useId:mf,useHostTransitionStatus:_u,useFormState:Qm,useActionState:Qm,useOptimistic:function(t,s){var a=Rt();return Im(a,at,t,s)},useMemoCache:fu,useCacheRefresh:ff},q0={readContext:Qt,use:ac,useCallback:lf,useContext:Qt,useEffect:tf,useImperativeHandle:rf,useInsertionEffect:sf,useLayoutEffect:nf,useMemo:of,useReducer:xu,useRef:Jm,useState:function(){return xu(Vn)},useDebugValue:bu,useDeferredValue:function(t,s){var a=Rt();return at===null?vu(a,t,s):cf(a,at.memoizedState,t,s)},useTransition:function(){var t=xu(Vn)[0],s=Rt().memoizedState;return[typeof t=="boolean"?t:xl(t),s]},useSyncExternalStore:Dm,useId:mf,useHostTransitionStatus:_u,useFormState:Wm,useActionState:Wm,useOptimistic:function(t,s){var a=Rt();return at!==null?Im(a,at,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:fu,useCacheRefresh:ff},oi=null,bl=0;function dc(t){var s=bl;return bl+=1,oi===null&&(oi=[]),Rm(oi,t,s)}function vl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function uc(t,s){throw s.$$typeof===E?Error(d(525)):(t=Object.prototype.toString.call(s),Error(d(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function vf(t){var s=t._init;return s(t._payload)}function jf(t){function s(X,Y){if(t){var te=X.deletions;te===null?(X.deletions=[Y],X.flags|=16):te.push(Y)}}function a(X,Y){if(!t)return null;for(;Y!==null;)s(X,Y),Y=Y.sibling;return null}function i(X){for(var Y=new Map;X!==null;)X.key!==null?Y.set(X.key,X):Y.set(X.index,X),X=X.sibling;return Y}function h(X,Y){return X=Us(X,Y),X.index=0,X.sibling=null,X}function m(X,Y,te){return X.index=te,t?(te=X.alternate,te!==null?(te=te.index,te<Y?(X.flags|=67108866,Y):te):(X.flags|=67108866,Y)):(X.flags|=1048576,Y)}function w(X){return t&&X.alternate===null&&(X.flags|=67108866),X}function k(X,Y,te,me){return Y===null||Y.tag!==6?(Y=ll(te,X.mode,me),Y.return=X,Y):(Y=h(Y,te),Y.return=X,Y)}function $(X,Y,te,me){var Se=te.type;return Se===B?he(X,Y,te.props.children,me,te.key):Y!==null&&(Y.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===V&&vf(Se)===Y.type)?(Y=h(Y,te.props),vl(Y,te),Y.return=X,Y):(Y=xr(te.type,te.key,te.props,null,X.mode,me),vl(Y,te),Y.return=X,Y)}function se(X,Y,te,me){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==te.containerInfo||Y.stateNode.implementation!==te.implementation?(Y=ei(te,X.mode,me),Y.return=X,Y):(Y=h(Y,te.children||[]),Y.return=X,Y)}function he(X,Y,te,me,Se){return Y===null||Y.tag!==7?(Y=gn(te,X.mode,me,Se),Y.return=X,Y):(Y=h(Y,te),Y.return=X,Y)}function fe(X,Y,te){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=ll(""+Y,X.mode,te),Y.return=X,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case P:return te=xr(Y.type,Y.key,Y.props,null,X.mode,te),vl(te,Y),te.return=X,te;case R:return Y=ei(Y,X.mode,te),Y.return=X,Y;case V:var me=Y._init;return Y=me(Y._payload),fe(X,Y,te)}if(de(Y)||Q(Y))return Y=gn(Y,X.mode,te,null),Y.return=X,Y;if(typeof Y.then=="function")return fe(X,dc(Y),te);if(Y.$$typeof===T)return fe(X,Xo(X,Y),te);uc(X,Y)}return null}function ae(X,Y,te,me){var Se=Y!==null?Y.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return Se!==null?null:k(X,Y,""+te,me);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case P:return te.key===Se?$(X,Y,te,me):null;case R:return te.key===Se?se(X,Y,te,me):null;case V:return Se=te._init,te=Se(te._payload),ae(X,Y,te,me)}if(de(te)||Q(te))return Se!==null?null:he(X,Y,te,me,null);if(typeof te.then=="function")return ae(X,Y,dc(te),me);if(te.$$typeof===T)return ae(X,Y,Xo(X,te),me);uc(X,te)}return null}function re(X,Y,te,me,Se){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return X=X.get(te)||null,k(Y,X,""+me,Se);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case P:return X=X.get(me.key===null?te:me.key)||null,$(Y,X,me,Se);case R:return X=X.get(me.key===null?te:me.key)||null,se(Y,X,me,Se);case V:var Ye=me._init;return me=Ye(me._payload),re(X,Y,te,me,Se)}if(de(me)||Q(me))return X=X.get(te)||null,he(Y,X,me,Se,null);if(typeof me.then=="function")return re(X,Y,te,dc(me),Se);if(me.$$typeof===T)return re(X,Y,te,Xo(Y,me),Se);uc(Y,me)}return null}function Me(X,Y,te,me){for(var Se=null,Ye=null,Re=Y,Ae=Y=0,Ut=null;Re!==null&&Ae<te.length;Ae++){Re.index>Ae?(Ut=Re,Re=null):Ut=Re.sibling;var et=ae(X,Re,te[Ae],me);if(et===null){Re===null&&(Re=Ut);break}t&&Re&&et.alternate===null&&s(X,Re),Y=m(et,Y,Ae),Ye===null?Se=et:Ye.sibling=et,Ye=et,Re=Ut}if(Ae===te.length)return a(X,Re),Oe&&ee(X,Ae),Se;if(Re===null){for(;Ae<te.length;Ae++)Re=fe(X,te[Ae],me),Re!==null&&(Y=m(Re,Y,Ae),Ye===null?Se=Re:Ye.sibling=Re,Ye=Re);return Oe&&ee(X,Ae),Se}for(Re=i(Re);Ae<te.length;Ae++)Ut=re(Re,X,Ae,te[Ae],me),Ut!==null&&(t&&Ut.alternate!==null&&Re.delete(Ut.key===null?Ae:Ut.key),Y=m(Ut,Y,Ae),Ye===null?Se=Ut:Ye.sibling=Ut,Ye=Ut);return t&&Re.forEach(function(Ga){return s(X,Ga)}),Oe&&ee(X,Ae),Se}function Te(X,Y,te,me){if(te==null)throw Error(d(151));for(var Se=null,Ye=null,Re=Y,Ae=Y=0,Ut=null,et=te.next();Re!==null&&!et.done;Ae++,et=te.next()){Re.index>Ae?(Ut=Re,Re=null):Ut=Re.sibling;var Ga=ae(X,Re,et.value,me);if(Ga===null){Re===null&&(Re=Ut);break}t&&Re&&Ga.alternate===null&&s(X,Re),Y=m(Ga,Y,Ae),Ye===null?Se=Ga:Ye.sibling=Ga,Ye=Ga,Re=Ut}if(et.done)return a(X,Re),Oe&&ee(X,Ae),Se;if(Re===null){for(;!et.done;Ae++,et=te.next())et=fe(X,et.value,me),et!==null&&(Y=m(et,Y,Ae),Ye===null?Se=et:Ye.sibling=et,Ye=et);return Oe&&ee(X,Ae),Se}for(Re=i(Re);!et.done;Ae++,et=te.next())et=re(Re,X,Ae,et.value,me),et!==null&&(t&&et.alternate!==null&&Re.delete(et.key===null?Ae:et.key),Y=m(et,Y,Ae),Ye===null?Se=et:Ye.sibling=et,Ye=et);return t&&Re.forEach(function(Hy){return s(X,Hy)}),Oe&&ee(X,Ae),Se}function it(X,Y,te,me){if(typeof te=="object"&&te!==null&&te.type===B&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case P:e:{for(var Se=te.key;Y!==null;){if(Y.key===Se){if(Se=te.type,Se===B){if(Y.tag===7){a(X,Y.sibling),me=h(Y,te.props.children),me.return=X,X=me;break e}}else if(Y.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===V&&vf(Se)===Y.type){a(X,Y.sibling),me=h(Y,te.props),vl(me,te),me.return=X,X=me;break e}a(X,Y);break}else s(X,Y);Y=Y.sibling}te.type===B?(me=gn(te.props.children,X.mode,me,te.key),me.return=X,X=me):(me=xr(te.type,te.key,te.props,null,X.mode,me),vl(me,te),me.return=X,X=me)}return w(X);case R:e:{for(Se=te.key;Y!==null;){if(Y.key===Se)if(Y.tag===4&&Y.stateNode.containerInfo===te.containerInfo&&Y.stateNode.implementation===te.implementation){a(X,Y.sibling),me=h(Y,te.children||[]),me.return=X,X=me;break e}else{a(X,Y);break}else s(X,Y);Y=Y.sibling}me=ei(te,X.mode,me),me.return=X,X=me}return w(X);case V:return Se=te._init,te=Se(te._payload),it(X,Y,te,me)}if(de(te))return Me(X,Y,te,me);if(Q(te)){if(Se=Q(te),typeof Se!="function")throw Error(d(150));return te=Se.call(te),Te(X,Y,te,me)}if(typeof te.then=="function")return it(X,Y,dc(te),me);if(te.$$typeof===T)return it(X,Y,Xo(X,te),me);uc(X,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,Y!==null&&Y.tag===6?(a(X,Y.sibling),me=h(Y,te),me.return=X,X=me):(a(X,Y),me=ll(te,X.mode,me),me.return=X,X=me),w(X)):a(X,Y)}return function(X,Y,te,me){try{bl=0;var Se=it(X,Y,te,me);return oi=null,Se}catch(Re){if(Re===dl||Re===Jo)throw Re;var Ye=ls(29,Re,null,X.mode);return Ye.lanes=me,Ye.return=X,Ye}finally{}}}var ci=jf(!0),_f=jf(!1),qs=ne(null),bn=null;function Ma(t){var s=t.alternate;oe(Mt,Mt.current&1),oe(qs,t),bn===null&&(s===null||ai.current!==null||s.memoizedState!==null)&&(bn=t)}function Nf(t){if(t.tag===22){if(oe(Mt,Mt.current),oe(qs,t),bn===null){var s=t.alternate;s!==null&&s.memoizedState!==null&&(bn=t)}}else Pa()}function Pa(){oe(Mt,Mt.current),oe(qs,qs.current)}function Yn(t){ge(qs),bn===t&&(bn=null),ge(Mt)}var Mt=ne(0);function hc(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||mh(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function wu(t,s,a,i){s=t.memoizedState,a=a(i,s),a=a==null?s:N({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Su={enqueueSetState:function(t,s,a){t=t._reactInternals;var i=ks(),h=La(i);h.payload=s,a!=null&&(h.callback=a),s=Ta(t,h,i),s!==null&&(Rs(s,t,i),hl(s,t,i))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var i=ks(),h=La(i);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=Ta(t,h,i),s!==null&&(Rs(s,t,i),hl(s,t,i))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=ks(),i=La(a);i.tag=2,s!=null&&(i.callback=s),s=Ta(t,i,a),s!==null&&(Rs(s,t,a),hl(s,t,a))}};function wf(t,s,a,i,h,m,w){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,m,w):s.prototype&&s.prototype.isPureReactComponent?!as(a,i)||!as(h,m):!0}function Sf(t,s,a,i){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,i),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,i),s.state!==t&&Su.enqueueReplaceState(s,s.state,null)}function Nr(t,s){var a=s;if("ref"in s){a={};for(var i in s)i!=="ref"&&(a[i]=s[i])}if(t=t.defaultProps){a===s&&(a=N({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var mc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Cf(t){mc(t)}function Ef(t){console.error(t)}function kf(t){mc(t)}function fc(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(i){setTimeout(function(){throw i})}}function Rf(t,s,a){try{var i=t.onCaughtError;i(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Cu(t,s,a){return a=La(a),a.tag=3,a.payload={element:null},a.callback=function(){fc(t,s)},a}function Lf(t){return t=La(t),t.tag=3,t}function Tf(t,s,a,i){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=i.value;t.payload=function(){return h(m)},t.callback=function(){Rf(s,a,i)}}var w=a.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(t.callback=function(){Rf(s,a,i),typeof h!="function"&&(Fa===null?Fa=new Set([this]):Fa.add(this));var k=i.stack;this.componentDidCatch(i.value,{componentStack:k!==null?k:""})})}function H0(t,s,a,i,h){if(a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(s=a.alternate,s!==null&&br(s,a,h,!0),a=qs.current,a!==null){switch(a.tag){case 13:return bn===null?Qu():a.alternate===null&&_t===0&&(_t=3),a.flags&=-257,a.flags|=65536,a.lanes=h,i===tu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([i]):s.add(i),Wu(t,i,h)),!1;case 22:return a.flags|=65536,i===tu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([i])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([i]):a.add(i)),Wu(t,i,h)),!1}throw Error(d(435,a.tag))}return Wu(t,i,h),Qu(),!1}if(Oe)return s=qs.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,i!==zt&&(t=Error(d(422),{cause:i}),ka(rs(t,a)))):(i!==zt&&(s=Error(d(423),{cause:i}),ka(rs(s,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,i=rs(i,a),h=Cu(t.stateNode,i,h),au(t,h),_t!==4&&(_t=2)),!1;var m=Error(d(520),{cause:i});if(m=rs(m,a),El===null?El=[m]:El.push(m),_t!==4&&(_t=2),s===null)return!0;i=rs(i,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Cu(a.stateNode,i,t),au(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Fa===null||!Fa.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Lf(h),Tf(h,t,a,i),au(a,h),!1}a=a.return}while(a!==null);return!1}var Af=Error(d(461)),Dt=!1;function It(t,s,a,i){s.child=t===null?_f(s,null,a,i):ci(s,t.child,a,i)}function Mf(t,s,a,i,h){a=a.render;var m=s.ref;if("ref"in i){var w={};for(var k in i)k!=="ref"&&(w[k]=i[k])}else w=i;return vr(s),i=cu(t,s,a,w,m,h),k=du(),t!==null&&!Dt?(uu(t,s,h),Gn(t,s,h)):(Oe&&k&&pe(s),s.flags|=1,It(t,s,i,h),s.child)}function Pf(t,s,a,i,h){if(t===null){var m=a.type;return typeof m=="function"&&!Jr(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,Of(t,s,m,i,h)):(t=xr(a.type,null,i,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!Pu(t,h)){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:as,a(w,i)&&t.ref===s.ref)return Gn(t,s,h)}return s.flags|=1,t=Us(m,i),t.ref=s.ref,t.return=s,s.child=t}function Of(t,s,a,i,h){if(t!==null){var m=t.memoizedProps;if(as(m,i)&&t.ref===s.ref)if(Dt=!1,s.pendingProps=i=m,Pu(t,h))(t.flags&131072)!==0&&(Dt=!0);else return s.lanes=t.lanes,Gn(t,s,h)}return Eu(t,s,a,i,h)}function zf(t,s,a){var i=s.pendingProps,h=i.children,m=t!==null?t.memoizedState:null;if(i.mode==="hidden"){if((s.flags&128)!==0){if(i=m!==null?m.baseLanes|a:a,t!==null){for(h=s.child=t.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;s.childLanes=m&~i}else s.childLanes=0,s.child=null;return Df(t,s,i,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Wo(s,m!==null?m.cachePool:null),m!==null?Pm(s,m):iu(),Nf(s);else return s.lanes=s.childLanes=536870912,Df(t,s,m!==null?m.baseLanes|a:a,a)}else m!==null?(Wo(s,m.cachePool),Pm(s,m),Pa(),s.memoizedState=null):(t!==null&&Wo(s,null),iu(),Pa());return It(t,s,h,a),s.child}function Df(t,s,a,i){var h=eu();return h=h===null?null:{parent:At._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},t!==null&&Wo(s,null),iu(),Nf(s),t!==null&&br(t,s,i,!0),null}function pc(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(d(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function Eu(t,s,a,i,h){return vr(s),a=cu(t,s,a,i,void 0,h),i=du(),t!==null&&!Dt?(uu(t,s,h),Gn(t,s,h)):(Oe&&i&&pe(s),s.flags|=1,It(t,s,a,h),s.child)}function Bf(t,s,a,i,h,m){return vr(s),s.updateQueue=null,a=zm(s,i,a,h),Om(t),i=du(),t!==null&&!Dt?(uu(t,s,m),Gn(t,s,m)):(Oe&&i&&pe(s),s.flags|=1,It(t,s,a,m),s.child)}function Uf(t,s,a,i,h){if(vr(s),s.stateNode===null){var m=Zn,w=a.contextType;typeof w=="object"&&w!==null&&(m=Qt(w)),m=new a(i,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Su,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=i,m.state=s.memoizedState,m.refs={},su(s),w=a.contextType,m.context=typeof w=="object"&&w!==null?Qt(w):Zn,m.state=s.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(wu(s,a,w,i),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(w=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),w!==m.state&&Su.enqueueReplaceState(m,m.state,null),fl(s,i,m,h),ml(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),i=!0}else if(t===null){m=s.stateNode;var k=s.memoizedProps,$=Nr(a,k);m.props=$;var se=m.context,he=a.contextType;w=Zn,typeof he=="object"&&he!==null&&(w=Qt(he));var fe=a.getDerivedStateFromProps;he=typeof fe=="function"||typeof m.getSnapshotBeforeUpdate=="function",k=s.pendingProps!==k,he||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(k||se!==w)&&Sf(s,m,i,w),Ra=!1;var ae=s.memoizedState;m.state=ae,fl(s,i,m,h),ml(),se=s.memoizedState,k||ae!==se||Ra?(typeof fe=="function"&&(wu(s,a,fe,i),se=s.memoizedState),($=Ra||wf(s,a,$,i,ae,se,w))?(he||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=i,s.memoizedState=se),m.props=i,m.state=se,m.context=w,i=$):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),i=!1)}else{m=s.stateNode,nu(t,s),w=s.memoizedProps,he=Nr(a,w),m.props=he,fe=s.pendingProps,ae=m.context,se=a.contextType,$=Zn,typeof se=="object"&&se!==null&&($=Qt(se)),k=a.getDerivedStateFromProps,(se=typeof k=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==fe||ae!==$)&&Sf(s,m,i,$),Ra=!1,ae=s.memoizedState,m.state=ae,fl(s,i,m,h),ml();var re=s.memoizedState;w!==fe||ae!==re||Ra||t!==null&&t.dependencies!==null&&Qo(t.dependencies)?(typeof k=="function"&&(wu(s,a,k,i),re=s.memoizedState),(he=Ra||wf(s,a,he,i,ae,re,$)||t!==null&&t.dependencies!==null&&Qo(t.dependencies))?(se||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(i,re,$),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(i,re,$)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===t.memoizedProps&&ae===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&ae===t.memoizedState||(s.flags|=1024),s.memoizedProps=i,s.memoizedState=re),m.props=i,m.state=re,m.context=$,i=he):(typeof m.componentDidUpdate!="function"||w===t.memoizedProps&&ae===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&ae===t.memoizedState||(s.flags|=1024),i=!1)}return m=i,pc(t,s),i=(s.flags&128)!==0,m||i?(m=s.stateNode,a=i&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&i?(s.child=ci(s,t.child,null,h),s.child=ci(s,null,a,h)):It(t,s,a,h),s.memoizedState=m.state,t=s.child):t=Gn(t,s,h),t}function Ff(t,s,a,i){return Ea(),s.flags|=256,It(t,s,a,i),s.child}var ku={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ru(t){return{baseLanes:t,cachePool:Cm()}}function Lu(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Hs),t}function qf(t,s,a){var i=s.pendingProps,h=!1,m=(s.flags&128)!==0,w;if((w=m)||(w=t!==null&&t.memoizedState===null?!1:(Mt.current&2)!==0),w&&(h=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,t===null){if(Oe){if(h?Ma(s):Pa(),Oe){var k=Ce,$;if($=k){e:{for($=k,k=yt;$.nodeType!==8;){if(!k){k=null;break e}if($=sn($.nextSibling),$===null){k=null;break e}}k=$}k!==null?(s.memoizedState={dehydrated:k,treeContext:v!==null?{id:C,overflow:Z}:null,retryLane:536870912,hydrationErrors:null},$=ls(18,null,null,0),$.stateNode=k,$.return=s,s.child=$,we=s,Ce=null,$=!0):$=!1}$||hs(s)}if(k=s.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return mh(k)?s.lanes=32:s.lanes=536870912,null;Yn(s)}return k=i.children,i=i.fallback,h?(Pa(),h=s.mode,k=xc({mode:"hidden",children:k},h),i=gn(i,h,a,null),k.return=s,i.return=s,k.sibling=i,s.child=k,h=s.child,h.memoizedState=Ru(a),h.childLanes=Lu(t,w,a),s.memoizedState=ku,i):(Ma(s),Tu(s,k))}if($=t.memoizedState,$!==null&&(k=$.dehydrated,k!==null)){if(m)s.flags&256?(Ma(s),s.flags&=-257,s=Au(t,s,a)):s.memoizedState!==null?(Pa(),s.child=t.child,s.flags|=128,s=null):(Pa(),h=i.fallback,k=s.mode,i=xc({mode:"visible",children:i.children},k),h=gn(h,k,a,null),h.flags|=2,i.return=s,h.return=s,i.sibling=h,s.child=i,ci(s,t.child,null,a),i=s.child,i.memoizedState=Ru(a),i.childLanes=Lu(t,w,a),s.memoizedState=ku,s=h);else if(Ma(s),mh(k)){if(w=k.nextSibling&&k.nextSibling.dataset,w)var se=w.dgst;w=se,i=Error(d(419)),i.stack="",i.digest=w,ka({value:i,source:null,stack:null}),s=Au(t,s,a)}else if(Dt||br(t,s,a,!1),w=(a&t.childLanes)!==0,Dt||w){if(w=ht,w!==null&&(i=a&-a,i=(i&42)!==0?1:qi(i),i=(i&(w.suspendedLanes|a))!==0?0:i,i!==0&&i!==$.retryLane))throw $.retryLane=i,Sa(t,i),Rs(w,t,i),Af;k.data==="$?"||Qu(),s=Au(t,s,a)}else k.data==="$?"?(s.flags|=192,s.child=t.child,s=null):(t=$.treeContext,Ce=sn(k.nextSibling),we=s,Oe=!0,ut=null,yt=!1,t!==null&&(u[p++]=C,u[p++]=Z,u[p++]=v,C=t.id,Z=t.overflow,v=s),s=Tu(s,i.children),s.flags|=4096);return s}return h?(Pa(),h=i.fallback,k=s.mode,$=t.child,se=$.sibling,i=Us($,{mode:"hidden",children:i.children}),i.subtreeFlags=$.subtreeFlags&65011712,se!==null?h=Us(se,h):(h=gn(h,k,a,null),h.flags|=2),h.return=s,i.return=s,i.sibling=h,s.child=i,i=h,h=s.child,k=t.child.memoizedState,k===null?k=Ru(a):($=k.cachePool,$!==null?(se=At._currentValue,$=$.parent!==se?{parent:se,pool:se}:$):$=Cm(),k={baseLanes:k.baseLanes|a,cachePool:$}),h.memoizedState=k,h.childLanes=Lu(t,w,a),s.memoizedState=ku,i):(Ma(s),a=t.child,t=a.sibling,a=Us(a,{mode:"visible",children:i.children}),a.return=s,a.sibling=null,t!==null&&(w=s.deletions,w===null?(s.deletions=[t],s.flags|=16):w.push(t)),s.child=a,s.memoizedState=null,a)}function Tu(t,s){return s=xc({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function xc(t,s){return t=ls(22,t,null,s),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Au(t,s,a){return ci(s,t.child,null,a),t=Tu(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Hf(t,s,a){t.lanes|=s;var i=t.alternate;i!==null&&(i.lanes|=s),yr(t.return,s,a)}function Mu(t,s,a,i,h){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:i,tail:a,tailMode:h}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=i,m.tail=a,m.tailMode=h)}function If(t,s,a){var i=s.pendingProps,h=i.revealOrder,m=i.tail;if(It(t,s,i.children,a),i=Mt.current,(i&2)!==0)i=i&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hf(t,a,s);else if(t.tag===19)Hf(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}switch(oe(Mt,i),h){case"forwards":for(a=s.child,h=null;a!==null;)t=a.alternate,t!==null&&hc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),Mu(s,!1,h,a,m);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&hc(t)===null){s.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Mu(s,!0,a,null,m);break;case"together":Mu(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Gn(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Ua|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(br(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(d(153));if(s.child!==null){for(t=s.child,a=Us(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=Us(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function Pu(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Qo(t)))}function I0(t,s,a){switch(s.tag){case 3:De(s,s.stateNode.containerInfo),yn(s,At,t.memoizedState.cache),Ea();break;case 27:case 5:cs(s);break;case 4:De(s,s.stateNode.containerInfo);break;case 10:yn(s,s.type,s.memoizedProps.value);break;case 13:var i=s.memoizedState;if(i!==null)return i.dehydrated!==null?(Ma(s),s.flags|=128,null):(a&s.child.childLanes)!==0?qf(t,s,a):(Ma(s),t=Gn(t,s,a),t!==null?t.sibling:null);Ma(s);break;case 19:var h=(t.flags&128)!==0;if(i=(a&s.childLanes)!==0,i||(br(t,s,a,!1),i=(a&s.childLanes)!==0),h){if(i)return If(t,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),oe(Mt,Mt.current),i)break;return null;case 22:case 23:return s.lanes=0,zf(t,s,a);case 24:yn(s,At,t.memoizedState.cache)}return Gn(t,s,a)}function Zf(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)Dt=!0;else{if(!Pu(t,a)&&(s.flags&128)===0)return Dt=!1,I0(t,s,a);Dt=(t.flags&131072)!==0}else Dt=!1,Oe&&(s.flags&1048576)!==0&&ie(s,r,s.index);switch(s.lanes=0,s.tag){case 16:e:{t=s.pendingProps;var i=s.elementType,h=i._init;if(i=h(i._payload),s.type=i,typeof i=="function")Jr(i)?(t=Nr(i,t),s.tag=1,s=Uf(null,s,i,t,a)):(s.tag=0,s=Eu(null,s,i,t,a));else{if(i!=null){if(h=i.$$typeof,h===H){s.tag=11,s=Mf(null,s,i,t,a);break e}else if(h===D){s.tag=14,s=Pf(null,s,i,t,a);break e}}throw s=le(i)||i,Error(d(306,s,""))}}return s;case 0:return Eu(t,s,s.type,s.pendingProps,a);case 1:return i=s.type,h=Nr(i,s.pendingProps),Uf(t,s,i,h,a);case 3:e:{if(De(s,s.stateNode.containerInfo),t===null)throw Error(d(387));i=s.pendingProps;var m=s.memoizedState;h=m.element,nu(t,s),fl(s,i,null,a);var w=s.memoizedState;if(i=w.cache,yn(s,At,i),i!==m.cache&&ti(s,[At],a,!0),ml(),i=w.element,m.isDehydrated)if(m={element:i,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Ff(t,s,i,a);break e}else if(i!==h){h=rs(Error(d(424)),s),ka(h),s=Ff(t,s,i,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ce=sn(t.firstChild),we=s,Oe=!0,ut=null,yt=!0,a=_f(s,null,i,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ea(),i===h){s=Gn(t,s,a);break e}It(t,s,i,a)}s=s.child}return s;case 26:return pc(t,s),t===null?(a=Gp(s.type,null,s.pendingProps,null))?s.memoizedState=a:Oe||(a=s.type,t=s.pendingProps,i=Lc(ye.current).createElement(a),i[Pt]=s,i[Yt]=t,$t(i,a,t),Et(i),s.stateNode=i):s.memoizedState=Gp(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return cs(s),t===null&&Oe&&(i=s.stateNode=$p(s.type,s.pendingProps,ye.current),we=s,yt=!0,h=Ce,Ia(s.type)?(fh=h,Ce=sn(i.firstChild)):Ce=h),It(t,s,s.pendingProps.children,a),pc(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Oe&&((h=i=Ce)&&(i=gy(i,s.type,s.pendingProps,yt),i!==null?(s.stateNode=i,we=s,Ce=sn(i.firstChild),yt=!1,h=!0):h=!1),h||hs(s)),cs(s),h=s.type,m=s.pendingProps,w=t!==null?t.memoizedProps:null,i=m.children,dh(h,m)?i=null:w!==null&&dh(h,w)&&(s.flags|=32),s.memoizedState!==null&&(h=cu(t,s,O0,null,null,a),zl._currentValue=h),pc(t,s),It(t,s,i,a),s.child;case 6:return t===null&&Oe&&((t=a=Ce)&&(a=yy(a,s.pendingProps,yt),a!==null?(s.stateNode=a,we=s,Ce=null,t=!0):t=!1),t||hs(s)),null;case 13:return qf(t,s,a);case 4:return De(s,s.stateNode.containerInfo),i=s.pendingProps,t===null?s.child=ci(s,null,i,a):It(t,s,i,a),s.child;case 11:return Mf(t,s,s.type,s.pendingProps,a);case 7:return It(t,s,s.pendingProps,a),s.child;case 8:return It(t,s,s.pendingProps.children,a),s.child;case 12:return It(t,s,s.pendingProps.children,a),s.child;case 10:return i=s.pendingProps,yn(s,s.type,i.value),It(t,s,i.children,a),s.child;case 9:return h=s.type._context,i=s.pendingProps.children,vr(s),h=Qt(h),i=i(h),s.flags|=1,It(t,s,i,a),s.child;case 14:return Pf(t,s,s.type,s.pendingProps,a);case 15:return Of(t,s,s.type,s.pendingProps,a);case 19:return If(t,s,a);case 31:return i=s.pendingProps,a=s.mode,i={mode:i.mode,children:i.children},t===null?(a=xc(i,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=Us(t.child,i),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return zf(t,s,a);case 24:return vr(s),i=Qt(At),t===null?(h=eu(),h===null&&(h=ht,m=Wd(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),s.memoizedState={parent:i,cache:h},su(s),yn(s,At,h)):((t.lanes&a)!==0&&(nu(t,s),fl(s,null,null,a),ml()),h=t.memoizedState,m=s.memoizedState,h.parent!==i?(h={parent:i,cache:i},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),yn(s,At,i)):(i=m.cache,yn(s,At,i),i!==h.cache&&ti(s,[At],a,!0))),It(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(d(156,s.tag))}function Kn(t){t.flags|=4}function $f(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Jp(s)){if(s=qs.current,s!==null&&((We&4194048)===We?bn!==null:(We&62914560)!==We&&(We&536870912)===0||s!==bn))throw ul=tu,Em;t.flags|=8192}}function gc(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Fi():536870912,t.lanes|=s,mi|=s)}function jl(t,s){if(!Oe)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function bt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,i=0;if(s)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,i|=h.subtreeFlags&65011712,i|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,i|=h.subtreeFlags,i|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=i,t.childLanes=a,s}function Z0(t,s,a){var i=s.pendingProps;switch(Ne(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(s),null;case 1:return bt(s),null;case 3:return a=s.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),s.memoizedState.cache!==i&&(s.flags|=2048),en(At),Tt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(gr(s)?Kn(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ko())),bt(s),null;case 26:return a=s.memoizedState,t===null?(Kn(s),a!==null?(bt(s),$f(s,a)):(bt(s),s.flags&=-16777217)):a?a!==t.memoizedState?(Kn(s),bt(s),$f(s,a)):(bt(s),s.flags&=-16777217):(t.memoizedProps!==i&&Kn(s),bt(s),s.flags&=-16777217),null;case 27:je(s),a=ye.current;var h=s.type;if(t!==null&&s.stateNode!=null)t.memoizedProps!==i&&Kn(s);else{if(!i){if(s.stateNode===null)throw Error(d(166));return bt(s),null}t=xe.current,gr(s)?Yo(s):(t=$p(h,i,a),s.stateNode=t,Kn(s))}return bt(s),null;case 5:if(je(s),a=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==i&&Kn(s);else{if(!i){if(s.stateNode===null)throw Error(d(166));return bt(s),null}if(t=xe.current,gr(s))Yo(s);else{switch(h=Lc(ye.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof i.is=="string"?h.createElement("select",{is:i.is}):h.createElement("select"),i.multiple?t.multiple=!0:i.size&&(t.size=i.size);break;default:t=typeof i.is=="string"?h.createElement(a,{is:i.is}):h.createElement(a)}}t[Pt]=s,t[Yt]=i;e:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=t;e:switch($t(t,a,i),a){case"button":case"input":case"select":case"textarea":t=!!i.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Kn(s)}}return bt(s),s.flags&=-16777217,null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==i&&Kn(s);else{if(typeof i!="string"&&s.stateNode===null)throw Error(d(166));if(t=ye.current,gr(s)){if(t=s.stateNode,a=s.memoizedProps,i=null,h=we,h!==null)switch(h.tag){case 27:case 5:i=h.memoizedProps}t[Pt]=s,t=!!(t.nodeValue===a||i!==null&&i.suppressHydrationWarning===!0||Bp(t.nodeValue,a)),t||hs(s)}else t=Lc(t).createTextNode(i),t[Pt]=s,s.stateNode=t}return bt(s),null;case 13:if(i=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=gr(s),i!==null&&i.dehydrated!==null){if(t===null){if(!h)throw Error(d(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(d(317));h[Pt]=s}else Ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;bt(s),h=!1}else h=Ko(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(Yn(s),s):(Yn(s),null)}if(Yn(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=i!==null,t=t!==null&&t.memoizedState!==null,a){i=s.child,h=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(h=i.alternate.memoizedState.cachePool.pool);var m=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(m=i.memoizedState.cachePool.pool),m!==h&&(i.flags|=2048)}return a!==t&&a&&(s.child.flags|=8192),gc(s,s.updateQueue),bt(s),null;case 4:return Tt(),t===null&&rh(s.stateNode.containerInfo),bt(s),null;case 10:return en(s.type),bt(s),null;case 19:if(ge(Mt),h=s.memoizedState,h===null)return bt(s),null;if(i=(s.flags&128)!==0,m=h.rendering,m===null)if(i)jl(h,!1);else{if(_t!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=hc(t),m!==null){for(s.flags|=128,jl(h,!1),t=m.updateQueue,s.updateQueue=t,gc(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)il(a,t),a=a.sibling;return oe(Mt,Mt.current&1|2),s.child}t=t.sibling}h.tail!==null&&es()>vc&&(s.flags|=128,i=!0,jl(h,!1),s.lanes=4194304)}else{if(!i)if(t=hc(m),t!==null){if(s.flags|=128,i=!0,t=t.updateQueue,s.updateQueue=t,gc(s,t),jl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!Oe)return bt(s),null}else 2*es()-h.renderingStartTime>vc&&a!==536870912&&(s.flags|=128,i=!0,jl(h,!1),s.lanes=4194304);h.isBackwards?(m.sibling=s.child,s.child=m):(t=h.last,t!==null?t.sibling=m:s.child=m,h.last=m)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=es(),s.sibling=null,t=Mt.current,oe(Mt,i?t&1|2:t&1),s):(bt(s),null);case 22:case 23:return Yn(s),lu(),i=s.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(s.flags|=8192):i&&(s.flags|=8192),i?(a&536870912)!==0&&(s.flags&128)===0&&(bt(s),s.subtreeFlags&6&&(s.flags|=8192)):bt(s),a=s.updateQueue,a!==null&&gc(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(s.flags|=2048),t!==null&&ge(jr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),en(At),bt(s),null;case 25:return null;case 30:return null}throw Error(d(156,s.tag))}function $0(t,s){switch(Ne(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return en(At),Tt(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return je(s),null;case 13:if(Yn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(d(340));Ea()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return ge(Mt),null;case 4:return Tt(),null;case 10:return en(s.type),null;case 22:case 23:return Yn(s),lu(),t!==null&&ge(jr),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return en(At),null;case 25:return null;default:return null}}function Vf(t,s){switch(Ne(s),s.tag){case 3:en(At),Tt();break;case 26:case 27:case 5:je(s);break;case 4:Tt();break;case 13:Yn(s);break;case 19:ge(Mt);break;case 10:en(s.type);break;case 22:case 23:Yn(s),lu(),t!==null&&ge(jr);break;case 24:en(At)}}function _l(t,s){try{var a=s.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var h=i.next;a=h;do{if((a.tag&t)===t){i=void 0;var m=a.create,w=a.inst;i=m(),w.destroy=i}a=a.next}while(a!==h)}}catch(k){lt(s,s.return,k)}}function Oa(t,s,a){try{var i=s.updateQueue,h=i!==null?i.lastEffect:null;if(h!==null){var m=h.next;i=m;do{if((i.tag&t)===t){var w=i.inst,k=w.destroy;if(k!==void 0){w.destroy=void 0,h=s;var $=a,se=k;try{se()}catch(he){lt(h,$,he)}}}i=i.next}while(i!==m)}}catch(he){lt(s,s.return,he)}}function Yf(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Mm(s,a)}catch(i){lt(t,t.return,i)}}}function Gf(t,s,a){a.props=Nr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(i){lt(t,s,i)}}function Nl(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof a=="function"?t.refCleanup=a(i):a.current=i}}catch(h){lt(t,s,h)}}function vn(t,s){var a=t.ref,i=t.refCleanup;if(a!==null)if(typeof i=="function")try{i()}catch(h){lt(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){lt(t,s,h)}else a.current=null}function Kf(t){var s=t.type,a=t.memoizedProps,i=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&i.focus();break e;case"img":a.src?i.src=a.src:a.srcSet&&(i.srcset=a.srcSet)}}catch(h){lt(t,t.return,h)}}function Ou(t,s,a){try{var i=t.stateNode;hy(i,t.type,a,s),i[Yt]=s}catch(h){lt(t,t.return,h)}}function Qf(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ia(t.type)||t.tag===4}function zu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ia(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Du(t,s,a){var i=t.tag;if(i===5||i===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Rc));else if(i!==4&&(i===27&&Ia(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Du(t,s,a),t=t.sibling;t!==null;)Du(t,s,a),t=t.sibling}function yc(t,s,a){var i=t.tag;if(i===5||i===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(i!==4&&(i===27&&Ia(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(yc(t,s,a),t=t.sibling;t!==null;)yc(t,s,a),t=t.sibling}function Xf(t){var s=t.stateNode,a=t.memoizedProps;try{for(var i=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);$t(s,i,a),s[Pt]=t,s[Yt]=a}catch(m){lt(t,t.return,m)}}var Qn=!1,wt=!1,Bu=!1,Wf=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function V0(t,s){if(t=t.containerInfo,oh=zc,t=dr(t),ur(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var i=a.getSelection&&a.getSelection();if(i&&i.rangeCount!==0){a=i.anchorNode;var h=i.anchorOffset,m=i.focusNode;i=i.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,k=-1,$=-1,se=0,he=0,fe=t,ae=null;t:for(;;){for(var re;fe!==a||h!==0&&fe.nodeType!==3||(k=w+h),fe!==m||i!==0&&fe.nodeType!==3||($=w+i),fe.nodeType===3&&(w+=fe.nodeValue.length),(re=fe.firstChild)!==null;)ae=fe,fe=re;for(;;){if(fe===t)break t;if(ae===a&&++se===h&&(k=w),ae===m&&++he===i&&($=w),(re=fe.nextSibling)!==null)break;fe=ae,ae=fe.parentNode}fe=re}a=k===-1||$===-1?null:{start:k,end:$}}else a=null}a=a||{start:0,end:0}}else a=null;for(ch={focusedElem:t,selectionRange:a},zc=!1,Bt=s;Bt!==null;)if(s=Bt,t=s.child,(s.subtreeFlags&1024)!==0&&t!==null)t.return=s,Bt=t;else for(;Bt!==null;){switch(s=Bt,m=s.alternate,t=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,h=m.memoizedProps,m=m.memoizedState,i=a.stateNode;try{var Me=Nr(a.type,h,a.elementType===a.type);t=i.getSnapshotBeforeUpdate(Me,m),i.__reactInternalSnapshotBeforeUpdate=t}catch(Te){lt(a,a.return,Te)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)hh(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":hh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(d(163))}if(t=s.sibling,t!==null){t.return=s.return,Bt=t;break}Bt=s.return}}function Jf(t,s,a){var i=a.flags;switch(a.tag){case 0:case 11:case 15:za(t,a),i&4&&_l(5,a);break;case 1:if(za(t,a),i&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(w){lt(a,a.return,w)}else{var h=Nr(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(w){lt(a,a.return,w)}}i&64&&Yf(a),i&512&&Nl(a,a.return);break;case 3:if(za(t,a),i&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Mm(t,s)}catch(w){lt(a,a.return,w)}}break;case 27:s===null&&i&4&&Xf(a);case 26:case 5:za(t,a),s===null&&i&4&&Kf(a),i&512&&Nl(a,a.return);break;case 12:za(t,a);break;case 13:za(t,a),i&4&&sp(t,a),i&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=ty.bind(null,a),by(t,a))));break;case 22:if(i=a.memoizedState!==null||Qn,!i){s=s!==null&&s.memoizedState!==null||wt,h=Qn;var m=wt;Qn=i,(wt=s)&&!m?Da(t,a,(a.subtreeFlags&8772)!==0):za(t,a),Qn=h,wt=m}break;case 30:break;default:za(t,a)}}function ep(t){var s=t.alternate;s!==null&&(t.alternate=null,ep(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&zr(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var pt=null,fs=!1;function Xn(t,s,a){for(a=a.child;a!==null;)tp(t,s,a),a=a.sibling}function tp(t,s,a){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(Sn,a)}catch{}switch(a.tag){case 26:wt||vn(a,s),Xn(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:wt||vn(a,s);var i=pt,h=fs;Ia(a.type)&&(pt=a.stateNode,fs=!1),Xn(t,s,a),Al(a.stateNode),pt=i,fs=h;break;case 5:wt||vn(a,s);case 6:if(i=pt,h=fs,pt=null,Xn(t,s,a),pt=i,fs=h,pt!==null)if(fs)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(m){lt(a,s,m)}else try{pt.removeChild(a.stateNode)}catch(m){lt(a,s,m)}break;case 18:pt!==null&&(fs?(t=pt,Ip(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Fl(t)):Ip(pt,a.stateNode));break;case 4:i=pt,h=fs,pt=a.stateNode.containerInfo,fs=!0,Xn(t,s,a),pt=i,fs=h;break;case 0:case 11:case 14:case 15:wt||Oa(2,a,s),wt||Oa(4,a,s),Xn(t,s,a);break;case 1:wt||(vn(a,s),i=a.stateNode,typeof i.componentWillUnmount=="function"&&Gf(a,s,i)),Xn(t,s,a);break;case 21:Xn(t,s,a);break;case 22:wt=(i=wt)||a.memoizedState!==null,Xn(t,s,a),wt=i;break;default:Xn(t,s,a)}}function sp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Fl(t)}catch(a){lt(s,s.return,a)}}function Y0(t){switch(t.tag){case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Wf),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Wf),s;default:throw Error(d(435,t.tag))}}function Uu(t,s){var a=Y0(t);s.forEach(function(i){var h=sy.bind(null,t,i);a.has(i)||(a.add(i),i.then(h,h))})}function Ss(t,s){var a=s.deletions;if(a!==null)for(var i=0;i<a.length;i++){var h=a[i],m=t,w=s,k=w;e:for(;k!==null;){switch(k.tag){case 27:if(Ia(k.type)){pt=k.stateNode,fs=!1;break e}break;case 5:pt=k.stateNode,fs=!1;break e;case 3:case 4:pt=k.stateNode.containerInfo,fs=!0;break e}k=k.return}if(pt===null)throw Error(d(160));tp(m,w,h),pt=null,fs=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)np(s,t),s=s.sibling}var tn=null;function np(t,s){var a=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ss(s,t),Cs(t),i&4&&(Oa(3,t,t.return),_l(3,t),Oa(5,t,t.return));break;case 1:Ss(s,t),Cs(t),i&512&&(wt||a===null||vn(a,a.return)),i&64&&Qn&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?i:a.concat(i))));break;case 26:var h=tn;if(Ss(s,t),Cs(t),i&512&&(wt||a===null||vn(a,a.return)),i&4){var m=a!==null?a.memoizedState:null;if(i=t.memoizedState,a===null)if(i===null)if(t.stateNode===null){e:{i=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(i){case"title":m=h.getElementsByTagName("title")[0],(!m||m[ia]||m[Pt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(i),h.head.insertBefore(m,h.querySelector("head > title"))),$t(m,i,a),m[Pt]=t,Et(m),i=m;break e;case"link":var w=Xp("link","href",h).get(i+(a.href||""));if(w){for(var k=0;k<w.length;k++)if(m=w[k],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){w.splice(k,1);break t}}m=h.createElement(i),$t(m,i,a),h.head.appendChild(m);break;case"meta":if(w=Xp("meta","content",h).get(i+(a.content||""))){for(k=0;k<w.length;k++)if(m=w[k],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){w.splice(k,1);break t}}m=h.createElement(i),$t(m,i,a),h.head.appendChild(m);break;default:throw Error(d(468,i))}m[Pt]=t,Et(m),i=m}t.stateNode=i}else Wp(h,t.type,t.stateNode);else t.stateNode=Qp(h,i,t.memoizedProps);else m!==i?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,i===null?Wp(h,t.type,t.stateNode):Qp(h,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Ou(t,t.memoizedProps,a.memoizedProps)}break;case 27:Ss(s,t),Cs(t),i&512&&(wt||a===null||vn(a,a.return)),a!==null&&i&4&&Ou(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Ss(s,t),Cs(t),i&512&&(wt||a===null||vn(a,a.return)),t.flags&32){h=t.stateNode;try{Ps(h,"")}catch(re){lt(t,t.return,re)}}i&4&&t.stateNode!=null&&(h=t.memoizedProps,Ou(t,h,a!==null?a.memoizedProps:h)),i&1024&&(Bu=!0);break;case 6:if(Ss(s,t),Cs(t),i&4){if(t.stateNode===null)throw Error(d(162));i=t.memoizedProps,a=t.stateNode;try{a.nodeValue=i}catch(re){lt(t,t.return,re)}}break;case 3:if(Mc=null,h=tn,tn=Tc(s.containerInfo),Ss(s,t),tn=h,Cs(t),i&4&&a!==null&&a.memoizedState.isDehydrated)try{Fl(s.containerInfo)}catch(re){lt(t,t.return,re)}Bu&&(Bu=!1,ap(t));break;case 4:i=tn,tn=Tc(t.stateNode.containerInfo),Ss(s,t),Cs(t),tn=i;break;case 12:Ss(s,t),Cs(t);break;case 13:Ss(s,t),Cs(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&($u=es()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Uu(t,i)));break;case 22:h=t.memoizedState!==null;var $=a!==null&&a.memoizedState!==null,se=Qn,he=wt;if(Qn=se||h,wt=he||$,Ss(s,t),wt=he,Qn=se,Cs(t),i&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||$||Qn||wt||wr(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){$=a=s;try{if(m=$.stateNode,h)w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{k=$.stateNode;var fe=$.memoizedProps.style,ae=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;k.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(re){lt($,$.return,re)}}}else if(s.tag===6){if(a===null){$=s;try{$.stateNode.nodeValue=h?"":$.memoizedProps}catch(re){lt($,$.return,re)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}i&4&&(i=t.updateQueue,i!==null&&(a=i.retryQueue,a!==null&&(i.retryQueue=null,Uu(t,a))));break;case 19:Ss(s,t),Cs(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Uu(t,i)));break;case 30:break;case 21:break;default:Ss(s,t),Cs(t)}}function Cs(t){var s=t.flags;if(s&2){try{for(var a,i=t.return;i!==null;){if(Qf(i)){a=i;break}i=i.return}if(a==null)throw Error(d(160));switch(a.tag){case 27:var h=a.stateNode,m=zu(t);yc(t,m,h);break;case 5:var w=a.stateNode;a.flags&32&&(Ps(w,""),a.flags&=-33);var k=zu(t);yc(t,k,w);break;case 3:case 4:var $=a.stateNode.containerInfo,se=zu(t);Du(t,se,$);break;default:throw Error(d(161))}}catch(he){lt(t,t.return,he)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function ap(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;ap(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function za(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Jf(t,s.alternate,s),s=s.sibling}function wr(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Oa(4,s,s.return),wr(s);break;case 1:vn(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Gf(s,s.return,a),wr(s);break;case 27:Al(s.stateNode);case 26:case 5:vn(s,s.return),wr(s);break;case 22:s.memoizedState===null&&wr(s);break;case 30:wr(s);break;default:wr(s)}t=t.sibling}}function Da(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var i=s.alternate,h=t,m=s,w=m.flags;switch(m.tag){case 0:case 11:case 15:Da(h,m,a),_l(4,m);break;case 1:if(Da(h,m,a),i=m,h=i.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(se){lt(i,i.return,se)}if(i=m,h=i.updateQueue,h!==null){var k=i.stateNode;try{var $=h.shared.hiddenCallbacks;if($!==null)for(h.shared.hiddenCallbacks=null,h=0;h<$.length;h++)Am($[h],k)}catch(se){lt(i,i.return,se)}}a&&w&64&&Yf(m),Nl(m,m.return);break;case 27:Xf(m);case 26:case 5:Da(h,m,a),a&&i===null&&w&4&&Kf(m),Nl(m,m.return);break;case 12:Da(h,m,a);break;case 13:Da(h,m,a),a&&w&4&&sp(h,m);break;case 22:m.memoizedState===null&&Da(h,m,a),Nl(m,m.return);break;case 30:break;default:Da(h,m,a)}s=s.sibling}}function Fu(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ol(a))}function qu(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&ol(t))}function jn(t,s,a,i){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)rp(t,s,a,i),s=s.sibling}function rp(t,s,a,i){var h=s.flags;switch(s.tag){case 0:case 11:case 15:jn(t,s,a,i),h&2048&&_l(9,s);break;case 1:jn(t,s,a,i);break;case 3:jn(t,s,a,i),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&ol(t)));break;case 12:if(h&2048){jn(t,s,a,i),t=s.stateNode;try{var m=s.memoizedProps,w=m.id,k=m.onPostCommit;typeof k=="function"&&k(w,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch($){lt(s,s.return,$)}}else jn(t,s,a,i);break;case 13:jn(t,s,a,i);break;case 23:break;case 22:m=s.stateNode,w=s.alternate,s.memoizedState!==null?m._visibility&2?jn(t,s,a,i):wl(t,s):m._visibility&2?jn(t,s,a,i):(m._visibility|=2,di(t,s,a,i,(s.subtreeFlags&10256)!==0)),h&2048&&Fu(w,s);break;case 24:jn(t,s,a,i),h&2048&&qu(s.alternate,s);break;default:jn(t,s,a,i)}}function di(t,s,a,i,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=t,w=s,k=a,$=i,se=w.flags;switch(w.tag){case 0:case 11:case 15:di(m,w,k,$,h),_l(8,w);break;case 23:break;case 22:var he=w.stateNode;w.memoizedState!==null?he._visibility&2?di(m,w,k,$,h):wl(m,w):(he._visibility|=2,di(m,w,k,$,h)),h&&se&2048&&Fu(w.alternate,w);break;case 24:di(m,w,k,$,h),h&&se&2048&&qu(w.alternate,w);break;default:di(m,w,k,$,h)}s=s.sibling}}function wl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,i=s,h=i.flags;switch(i.tag){case 22:wl(a,i),h&2048&&Fu(i.alternate,i);break;case 24:wl(a,i),h&2048&&qu(i.alternate,i);break;default:wl(a,i)}s=s.sibling}}var Sl=8192;function ui(t){if(t.subtreeFlags&Sl)for(t=t.child;t!==null;)ip(t),t=t.sibling}function ip(t){switch(t.tag){case 26:ui(t),t.flags&Sl&&t.memoizedState!==null&&Ay(tn,t.memoizedState,t.memoizedProps);break;case 5:ui(t);break;case 3:case 4:var s=tn;tn=Tc(t.stateNode.containerInfo),ui(t),tn=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=Sl,Sl=16777216,ui(t),Sl=s):ui(t));break;default:ui(t)}}function lp(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Cl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var i=s[a];Bt=i,cp(i,t)}lp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)op(t),t=t.sibling}function op(t){switch(t.tag){case 0:case 11:case 15:Cl(t),t.flags&2048&&Oa(9,t,t.return);break;case 3:Cl(t);break;case 12:Cl(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,bc(t)):Cl(t);break;default:Cl(t)}}function bc(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var i=s[a];Bt=i,cp(i,t)}lp(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Oa(8,s,s.return),bc(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,bc(s));break;default:bc(s)}t=t.sibling}}function cp(t,s){for(;Bt!==null;){var a=Bt;switch(a.tag){case 0:case 11:case 15:Oa(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var i=a.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:ol(a.memoizedState.cache)}if(i=a.child,i!==null)i.return=a,Bt=i;else e:for(a=t;Bt!==null;){i=Bt;var h=i.sibling,m=i.return;if(ep(i),i===a){Bt=null;break e}if(h!==null){h.return=m,Bt=h;break e}Bt=m}}}var G0={getCacheForType:function(t){var s=Qt(At),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a}},K0=typeof WeakMap=="function"?WeakMap:Map,tt=0,ht=null,Ge=null,We=0,st=0,Es=null,Ba=!1,hi=!1,Hu=!1,Wn=0,_t=0,Ua=0,Sr=0,Iu=0,Hs=0,mi=0,El=null,ps=null,Zu=!1,$u=0,vc=1/0,jc=null,Fa=null,Zt=0,qa=null,fi=null,pi=0,Vu=0,Yu=null,dp=null,kl=0,Gu=null;function ks(){if((tt&2)!==0&&We!==0)return We&-We;if(z.T!==null){var t=si;return t!==0?t:th()}return _o()}function up(){Hs===0&&(Hs=(We&536870912)===0||Oe?bo():536870912);var t=qs.current;return t!==null&&(t.flags|=32),Hs}function Rs(t,s,a){(t===ht&&(st===2||st===9)||t.cancelPendingCommit!==null)&&(xi(t,0),Ha(t,We,Hs,!1)),aa(t,a),((tt&2)===0||t!==ht)&&(t===ht&&((tt&2)===0&&(Sr|=a),_t===4&&Ha(t,We,Hs,!1)),_n(t))}function hp(t,s,a){if((tt&6)!==0)throw Error(d(327));var i=!a&&(s&124)===0&&(s&t.expiredLanes)===0||Gs(t,s),h=i?W0(t,s):Xu(t,s,!0),m=i;do{if(h===0){hi&&!i&&Ha(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!Q0(a)){h=Xu(t,s,!1),m=!1;continue}if(h===2){if(m=s,t.errorRecoveryDisabledLanes&m)var w=0;else w=t.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var k=t;h=El;var $=k.current.memoizedState.isDehydrated;if($&&(xi(k,w).flags|=256),w=Xu(k,w,!1),w!==2){if(Hu&&!$){k.errorRecoveryDisabledLanes|=m,Sr|=m,h=4;break e}m=ps,ps=h,m!==null&&(ps===null?ps=m:ps.push.apply(ps,m))}h=w}if(m=!1,h!==2)continue}}if(h===1){xi(t,0),Ha(t,s,0,!0);break}e:{switch(i=t,m=h,m){case 0:case 1:throw Error(d(345));case 4:if((s&4194048)!==s)break;case 6:Ha(i,s,Hs,!Ba);break e;case 2:ps=null;break;case 3:case 5:break;default:throw Error(d(329))}if((s&62914560)===s&&(h=$u+300-es(),10<h)){if(Ha(i,s,Hs,!Ba),Pr(i,0,!0)!==0)break e;i.timeoutHandle=qp(mp.bind(null,i,a,ps,jc,Zu,s,Hs,Sr,mi,Ba,m,2,-0,0),h);break e}mp(i,a,ps,jc,Zu,s,Hs,Sr,mi,Ba,m,0,-0,0)}}break}while(!0);_n(t)}function mp(t,s,a,i,h,m,w,k,$,se,he,fe,ae,re){if(t.timeoutHandle=-1,fe=s.subtreeFlags,(fe&8192||(fe&16785408)===16785408)&&(Ol={stylesheets:null,count:0,unsuspend:Ty},ip(s),fe=My(),fe!==null)){t.cancelPendingCommit=fe(vp.bind(null,t,s,m,a,i,h,w,k,$,he,1,ae,re)),Ha(t,m,w,!se);return}vp(t,s,m,a,i,h,w,k,$)}function Q0(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var i=0;i<a.length;i++){var h=a[i],m=h.getSnapshot;h=h.value;try{if(!ns(m(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ha(t,s,a,i){s&=~Iu,s&=~Sr,t.suspendedLanes|=s,t.pingedLanes&=~s,i&&(t.warmLanes|=s),i=t.expirationTimes;for(var h=s;0<h;){var m=31-ts(h),w=1<<m;i[m]=-1,h&=~w}a!==0&&vo(t,a,s)}function _c(){return(tt&6)===0?(Rl(0),!1):!0}function Ku(){if(Ge!==null){if(st===0)var t=Ge.return;else t=Ge,Js=Fs=null,hu(t),oi=null,bl=0,t=Ge;for(;t!==null;)Vf(t.alternate,t),t=t.return;Ge=null}}function xi(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,fy(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ku(),ht=t,Ge=a=Us(t.current,null),We=s,st=0,Es=null,Ba=!1,hi=Gs(t,s),Hu=!1,mi=Hs=Iu=Sr=Ua=_t=0,ps=El=null,Zu=!1,(s&8)!==0&&(s|=s&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=s;0<i;){var h=31-ts(i),m=1<<h;s|=t[h],i&=~m}return Wn=s,mr(),a}function fp(t,s){$e=null,z.H=cc,s===dl||s===Jo?(s=Lm(),st=3):s===Em?(s=Lm(),st=4):st=s===Af?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Es=s,Ge===null&&(_t=1,fc(t,rs(s,t.current)))}function pp(){var t=z.H;return z.H=cc,t===null?cc:t}function xp(){var t=z.A;return z.A=G0,t}function Qu(){_t=4,Ba||(We&4194048)!==We&&qs.current!==null||(hi=!0),(Ua&134217727)===0&&(Sr&134217727)===0||ht===null||Ha(ht,We,Hs,!1)}function Xu(t,s,a){var i=tt;tt|=2;var h=pp(),m=xp();(ht!==t||We!==s)&&(jc=null,xi(t,s)),s=!1;var w=_t;e:do try{if(st!==0&&Ge!==null){var k=Ge,$=Es;switch(st){case 8:Ku(),w=6;break e;case 3:case 2:case 9:case 6:qs.current===null&&(s=!0);var se=st;if(st=0,Es=null,gi(t,k,$,se),a&&hi){w=0;break e}break;default:se=st,st=0,Es=null,gi(t,k,$,se)}}X0(),w=_t;break}catch(he){fp(t,he)}while(!0);return s&&t.shellSuspendCounter++,Js=Fs=null,tt=i,z.H=h,z.A=m,Ge===null&&(ht=null,We=0,mr()),w}function X0(){for(;Ge!==null;)gp(Ge)}function W0(t,s){var a=tt;tt|=2;var i=pp(),h=xp();ht!==t||We!==s?(jc=null,vc=es()+500,xi(t,s)):hi=Gs(t,s);e:do try{if(st!==0&&Ge!==null){s=Ge;var m=Es;t:switch(st){case 1:st=0,Es=null,gi(t,s,m,1);break;case 2:case 9:if(km(m)){st=0,Es=null,yp(s);break}s=function(){st!==2&&st!==9||ht!==t||(st=7),_n(t)},m.then(s,s);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:km(m)?(st=0,Es=null,yp(s)):(st=0,Es=null,gi(t,s,m,7));break;case 5:var w=null;switch(Ge.tag){case 26:w=Ge.memoizedState;case 5:case 27:var k=Ge;if(!w||Jp(w)){st=0,Es=null;var $=k.sibling;if($!==null)Ge=$;else{var se=k.return;se!==null?(Ge=se,Nc(se)):Ge=null}break t}}st=0,Es=null,gi(t,s,m,5);break;case 6:st=0,Es=null,gi(t,s,m,6);break;case 8:Ku(),_t=6;break e;default:throw Error(d(462))}}J0();break}catch(he){fp(t,he)}while(!0);return Js=Fs=null,z.H=i,z.A=h,tt=a,Ge!==null?0:(ht=null,We=0,mr(),_t)}function J0(){for(;Ge!==null&&!nt();)gp(Ge)}function gp(t){var s=Zf(t.alternate,t,Wn);t.memoizedProps=t.pendingProps,s===null?Nc(t):Ge=s}function yp(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=Bf(a,s,s.pendingProps,s.type,void 0,We);break;case 11:s=Bf(a,s,s.pendingProps,s.type.render,s.ref,We);break;case 5:hu(s);default:Vf(a,s),s=Ge=il(s,Wn),s=Zf(a,s,Wn)}t.memoizedProps=t.pendingProps,s===null?Nc(t):Ge=s}function gi(t,s,a,i){Js=Fs=null,hu(s),oi=null,bl=0;var h=s.return;try{if(H0(t,h,s,a,We)){_t=1,fc(t,rs(a,t.current)),Ge=null;return}}catch(m){if(h!==null)throw Ge=h,m;_t=1,fc(t,rs(a,t.current)),Ge=null;return}s.flags&32768?(Oe||i===1?t=!0:hi||(We&536870912)!==0?t=!1:(Ba=t=!0,(i===2||i===9||i===3||i===6)&&(i=qs.current,i!==null&&i.tag===13&&(i.flags|=16384))),bp(s,t)):Nc(s)}function Nc(t){var s=t;do{if((s.flags&32768)!==0){bp(s,Ba);return}t=s.return;var a=Z0(s.alternate,s,Wn);if(a!==null){Ge=a;return}if(s=s.sibling,s!==null){Ge=s;return}Ge=s=t}while(s!==null);_t===0&&(_t=5)}function bp(t,s){do{var a=$0(t.alternate,t);if(a!==null){a.flags&=32767,Ge=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Ge=t;return}Ge=t=a}while(t!==null);_t=6,Ge=null}function vp(t,s,a,i,h,m,w,k,$){t.cancelPendingCommit=null;do wc();while(Zt!==0);if((tt&6)!==0)throw Error(d(327));if(s!==null){if(s===t.current)throw Error(d(177));if(m=s.lanes|s.childLanes,m|=ws,Md(t,a,m,w,k,$),t===ht&&(Ge=ht=null,We=0),fi=s,qa=t,pi=a,Vu=m,Yu=h,dp=i,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ny(sa,function(){return Sp(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||i){i=z.T,z.T=null,h=J.p,J.p=2,w=tt,tt|=4;try{V0(t,s,a)}finally{tt=w,J.p=h,z.T=i}}Zt=1,jp(),_p(),Np()}}function jp(){if(Zt===1){Zt=0;var t=qa,s=fi,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=z.T,z.T=null;var i=J.p;J.p=2;var h=tt;tt|=4;try{np(s,t);var m=ch,w=dr(t.containerInfo),k=m.focusedElem,$=m.selectionRange;if(w!==k&&k&&k.ownerDocument&&Gr(k.ownerDocument.documentElement,k)){if($!==null&&ur(k)){var se=$.start,he=$.end;if(he===void 0&&(he=se),"selectionStart"in k)k.selectionStart=se,k.selectionEnd=Math.min(he,k.value.length);else{var fe=k.ownerDocument||document,ae=fe&&fe.defaultView||window;if(ae.getSelection){var re=ae.getSelection(),Me=k.textContent.length,Te=Math.min($.start,Me),it=$.end===void 0?Te:Math.min($.end,Me);!re.extend&&Te>it&&(w=it,it=Te,Te=w);var X=al(k,Te),Y=al(k,it);if(X&&Y&&(re.rangeCount!==1||re.anchorNode!==X.node||re.anchorOffset!==X.offset||re.focusNode!==Y.node||re.focusOffset!==Y.offset)){var te=fe.createRange();te.setStart(X.node,X.offset),re.removeAllRanges(),Te>it?(re.addRange(te),re.extend(Y.node,Y.offset)):(te.setEnd(Y.node,Y.offset),re.addRange(te))}}}}for(fe=[],re=k;re=re.parentNode;)re.nodeType===1&&fe.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<fe.length;k++){var me=fe[k];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}zc=!!oh,ch=oh=null}finally{tt=h,J.p=i,z.T=a}}t.current=s,Zt=2}}function _p(){if(Zt===2){Zt=0;var t=qa,s=fi,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=z.T,z.T=null;var i=J.p;J.p=2;var h=tt;tt|=4;try{Jf(t,s.alternate,s)}finally{tt=h,J.p=i,z.T=a}}Zt=3}}function Np(){if(Zt===4||Zt===3){Zt=0,As();var t=qa,s=fi,a=pi,i=dp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Zt=5:(Zt=0,fi=qa=null,wp(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Fa=null),Hi(a),s=s.stateNode,Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(Sn,s,void 0,(s.current.flags&128)===128)}catch{}if(i!==null){s=z.T,h=J.p,J.p=2,z.T=null;try{for(var m=t.onRecoverableError,w=0;w<i.length;w++){var k=i[w];m(k.value,{componentStack:k.stack})}}finally{z.T=s,J.p=h}}(pi&3)!==0&&wc(),_n(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Gu?kl++:(kl=0,Gu=t):kl=0,Rl(0)}}function wp(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,ol(s)))}function wc(t){return jp(),_p(),Np(),Sp()}function Sp(){if(Zt!==5)return!1;var t=qa,s=Vu;Vu=0;var a=Hi(pi),i=z.T,h=J.p;try{J.p=32>a?32:a,z.T=null,a=Yu,Yu=null;var m=qa,w=pi;if(Zt=0,fi=qa=null,pi=0,(tt&6)!==0)throw Error(d(331));var k=tt;if(tt|=4,op(m.current),rp(m,m.current,w,a),tt=k,Rl(0,!1),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(Sn,m)}catch{}return!0}finally{J.p=h,z.T=i,wp(t,s)}}function Cp(t,s,a){s=rs(a,s),s=Cu(t.stateNode,s,2),t=Ta(t,s,2),t!==null&&(aa(t,2),_n(t))}function lt(t,s,a){if(t.tag===3)Cp(t,t,a);else for(;s!==null;){if(s.tag===3){Cp(s,t,a);break}else if(s.tag===1){var i=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Fa===null||!Fa.has(i))){t=rs(a,t),a=Lf(2),i=Ta(s,a,2),i!==null&&(Tf(a,i,s,t),aa(i,2),_n(i));break}}s=s.return}}function Wu(t,s,a){var i=t.pingCache;if(i===null){i=t.pingCache=new K0;var h=new Set;i.set(s,h)}else h=i.get(s),h===void 0&&(h=new Set,i.set(s,h));h.has(a)||(Hu=!0,h.add(a),t=ey.bind(null,t,s,a),s.then(t,t))}function ey(t,s,a){var i=t.pingCache;i!==null&&i.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ht===t&&(We&a)===a&&(_t===4||_t===3&&(We&62914560)===We&&300>es()-$u?(tt&2)===0&&xi(t,0):Iu|=a,mi===We&&(mi=0)),_n(t)}function Ep(t,s){s===0&&(s=Fi()),t=Sa(t,s),t!==null&&(aa(t,s),_n(t))}function ty(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),Ep(t,a)}function sy(t,s){var a=0;switch(t.tag){case 13:var i=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(d(314))}i!==null&&i.delete(s),Ep(t,a)}function ny(t,s){return Ze(t,s)}var Sc=null,yi=null,Ju=!1,Cc=!1,eh=!1,Cr=0;function _n(t){t!==yi&&t.next===null&&(yi===null?Sc=yi=t:yi=yi.next=t),Cc=!0,Ju||(Ju=!0,ry())}function Rl(t,s){if(!eh&&Cc){eh=!0;do for(var a=!1,i=Sc;i!==null;){if(t!==0){var h=i.pendingLanes;if(h===0)var m=0;else{var w=i.suspendedLanes,k=i.pingedLanes;m=(1<<31-ts(42|t)+1)-1,m&=h&~(w&~k),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Tp(i,m))}else m=We,m=Pr(i,i===ht?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(m&3)===0||Gs(i,m)||(a=!0,Tp(i,m));i=i.next}while(a);eh=!1}}function ay(){kp()}function kp(){Cc=Ju=!1;var t=0;Cr!==0&&(my()&&(t=Cr),Cr=0);for(var s=es(),a=null,i=Sc;i!==null;){var h=i.next,m=Rp(i,s);m===0?(i.next=null,a===null?Sc=h:a.next=h,h===null&&(yi=a)):(a=i,(t!==0||(m&3)!==0)&&(Cc=!0)),i=h}Rl(t)}function Rp(t,s){for(var a=t.suspendedLanes,i=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var w=31-ts(m),k=1<<w,$=h[w];$===-1?((k&a)===0||(k&i)!==0)&&(h[w]=Ad(k,s)):$<=s&&(t.expiredLanes|=k),m&=~k}if(s=ht,a=We,a=Pr(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,a===0||t===s&&(st===2||st===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&Be(i),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Gs(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(i!==null&&Be(i),Hi(a)){case 2:case 8:a=Bi;break;case 32:a=sa;break;case 268435456:a=Ui;break;default:a=sa}return i=Lp.bind(null,t),a=Ze(a,i),t.callbackPriority=s,t.callbackNode=a,s}return i!==null&&i!==null&&Be(i),t.callbackPriority=2,t.callbackNode=null,2}function Lp(t,s){if(Zt!==0&&Zt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(wc()&&t.callbackNode!==a)return null;var i=We;return i=Pr(t,t===ht?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(hp(t,i,s),Rp(t,es()),t.callbackNode!=null&&t.callbackNode===a?Lp.bind(null,t):null)}function Tp(t,s){if(wc())return null;hp(t,s,!0)}function ry(){py(function(){(tt&6)!==0?Ze(po,ay):kp()})}function th(){return Cr===0&&(Cr=bo()),Cr}function Ap(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ha(""+t)}function Mp(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function iy(t,s,a,i,h){if(s==="submit"&&a&&a.stateNode===h){var m=Ap((h[Yt]||null).action),w=i.submitter;w&&(s=(s=w[Yt]||null)?Ap(s.formAction):w.getAttribute("formAction"),s!==null&&(m=s,w=null));var k=new rr("action","action",null,i,h);t.push({event:k,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Cr!==0){var $=w?Mp(h,w):new FormData(h);ju(a,{pending:!0,data:$,method:h.method,action:m},null,$)}}else typeof m=="function"&&(k.preventDefault(),$=w?Mp(h,w):new FormData(h),ju(a,{pending:!0,data:$,method:h.method,action:m},m,$))},currentTarget:h}]})}}for(var sh=0;sh<qn.length;sh++){var nh=qn[sh],ly=nh.toLowerCase(),oy=nh[0].toUpperCase()+nh.slice(1);Ns(ly,"on"+oy)}Ns(Zo,"onAnimationEnd"),Ns(_s,"onAnimationIteration"),Ns(hr,"onAnimationStart"),Ns("dblclick","onDoubleClick"),Ns("focusin","onFocus"),Ns("focusout","onBlur"),Ns(Qd,"onTransitionRun"),Ns(Wr,"onTransitionStart"),Ns(Xd,"onTransitionCancel"),Ns(rl,"onTransitionEnd"),Rn("onMouseEnter",["mouseout","mouseover"]),Rn("onMouseLeave",["mouseout","mouseover"]),Rn("onPointerEnter",["pointerout","pointerover"]),Rn("onPointerLeave",["pointerout","pointerover"]),kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function Pp(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var i=t[a],h=i.event;i=i.listeners;e:{var m=void 0;if(s)for(var w=i.length-1;0<=w;w--){var k=i[w],$=k.instance,se=k.currentTarget;if(k=k.listener,$!==m&&h.isPropagationStopped())break e;m=k,h.currentTarget=se;try{m(h)}catch(he){mc(he)}h.currentTarget=null,m=$}else for(w=0;w<i.length;w++){if(k=i[w],$=k.instance,se=k.currentTarget,k=k.listener,$!==m&&h.isPropagationStopped())break e;m=k,h.currentTarget=se;try{m(h)}catch(he){mc(he)}h.currentTarget=null,m=$}}}}function Ke(t,s){var a=s[ds];a===void 0&&(a=s[ds]=new Set);var i=t+"__bubble";a.has(i)||(Op(s,t,2,!1),a.add(i))}function ah(t,s,a){var i=0;s&&(i|=4),Op(a,t,i,s)}var Ec="_reactListening"+Math.random().toString(36).slice(2);function rh(t){if(!t[Ec]){t[Ec]=!0,wo.forEach(function(a){a!=="selectionchange"&&(cy.has(a)||ah(a,!1,t),ah(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Ec]||(s[Ec]=!0,ah("selectionchange",!1,s))}}function Op(t,s,a,i){switch(rx(s)){case 2:var h=zy;break;case 8:h=Dy;break;default:h=bh}a=h.bind(null,s,a,t),h=void 0,!ar||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),i?h!==void 0?t.addEventListener(s,a,{capture:!0,passive:h}):t.addEventListener(s,a,!0):h!==void 0?t.addEventListener(s,a,{passive:h}):t.addEventListener(s,a,!1)}function ih(t,s,a,i,h){var m=i;if((s&1)===0&&(s&2)===0&&i!==null)e:for(;;){if(i===null)return;var w=i.tag;if(w===3||w===4){var k=i.stateNode.containerInfo;if(k===h)break;if(w===4)for(w=i.return;w!==null;){var $=w.tag;if(($===3||$===4)&&w.stateNode.containerInfo===h)return;w=w.return}for(;k!==null;){if(w=un(k),w===null)return;if($=w.tag,$===5||$===6||$===26||$===27){i=m=w;continue e}k=k.parentNode}}i=i.return}ys(function(){var se=m,he=ma(a),fe=[];e:{var ae=$o.get(t);if(ae!==void 0){var re=rr,Me=t;switch(t){case"keypress":if(jt(a)===0)break e;case"keydown":case"keyup":re=Hd;break;case"focusin":Me="focus",re=Ki;break;case"focusout":Me="blur",re=Ki;break;case"beforeblur":case"afterblur":re=Ki;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=xa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Zd;break;case Zo:case _s:case hr:re=Bd;break;case rl:re=$d;break;case"scroll":case"scrollend":re=zd;break;case"wheel":re=Oo;break;case"copy":case"cut":case"paste":re=Qi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Wi;break;case"toggle":case"beforetoggle":re=Dn}var Te=(s&4)!==0,it=!Te&&(t==="scroll"||t==="scrollend"),X=Te?ae!==null?ae+"Capture":null:ae;Te=[];for(var Y=se,te;Y!==null;){var me=Y;if(te=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||te===null||X===null||(me=Je(Y,X),me!=null&&Te.push(Tl(Y,me,te))),it)break;Y=Y.return}0<Te.length&&(ae=new re(ae,Me,null,a,he),fe.push({event:ae,listeners:Te}))}}if((s&7)===0){e:{if(ae=t==="mouseover"||t==="pointerover",re=t==="mouseout"||t==="pointerout",ae&&a!==nr&&(Me=a.relatedTarget||a.fromElement)&&(un(Me)||Me[ra]))break e;if((re||ae)&&(ae=he.window===he?he:(ae=he.ownerDocument)?ae.defaultView||ae.parentWindow:window,re?(Me=a.relatedTarget||a.toElement,re=se,Me=Me?un(Me):null,Me!==null&&(it=x(Me),Te=Me.tag,Me!==it||Te!==5&&Te!==27&&Te!==6)&&(Me=null)):(re=null,Me=se),re!==Me)){if(Te=xa,me="onMouseLeave",X="onMouseEnter",Y="mouse",(t==="pointerout"||t==="pointerover")&&(Te=Wi,me="onPointerLeave",X="onPointerEnter",Y="pointer"),it=re==null?ae:Ms(re),te=Me==null?ae:Ms(Me),ae=new Te(me,Y+"leave",re,a,he),ae.target=it,ae.relatedTarget=te,me=null,un(he)===se&&(Te=new Te(X,Y+"enter",Me,a,he),Te.target=te,Te.relatedTarget=it,me=Te),it=me,re&&Me)t:{for(Te=re,X=Me,Y=0,te=Te;te;te=bi(te))Y++;for(te=0,me=X;me;me=bi(me))te++;for(;0<Y-te;)Te=bi(Te),Y--;for(;0<te-Y;)X=bi(X),te--;for(;Y--;){if(Te===X||X!==null&&Te===X.alternate)break t;Te=bi(Te),X=bi(X)}Te=null}else Te=null;re!==null&&zp(fe,ae,re,Te,!1),Me!==null&&it!==null&&zp(fe,it,Me,Te,!0)}}e:{if(ae=se?Ms(se):window,re=ae.nodeName&&ae.nodeName.toLowerCase(),re==="select"||re==="input"&&ae.type==="file")var Se=ba;else if(Un(ae))if(tl)Se=Kd;else{Se=Gd;var Ye=nl}else re=ae.nodeName,!re||re.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?se&&sr(se.elementType)&&(Se=ba):Se=Ws;if(Se&&(Se=Se(t,se))){Fo(fe,Se,a,he);break e}Ye&&Ye(t,ae,se),t==="focusout"&&se&&ae.type==="number"&&se.memoizedProps.value!=null&&da(ae,"number",ae.value)}switch(Ye=se?Ms(se):window,t){case"focusin":(Un(Ye)||Ye.contentEditable==="true")&&(js=Ye,_a=se,Fn=null);break;case"focusout":Fn=_a=js=null;break;case"mousedown":Qr=!0;break;case"contextmenu":case"mouseup":case"dragend":Qr=!1,Ho(fe,a,he);break;case"selectionchange":if(Kr)break;case"keydown":case"keyup":Ho(fe,a,he)}var Re;if(Bn)e:{switch(t){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else ga?Vr(t,a)&&(Ae="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(el&&a.locale!=="ko"&&(ga||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&ga&&(Re=pa()):(zs=he,Qs="value"in zs?zs.value:zs.textContent,ga=!0)),Ye=kc(se,Ae),0<Ye.length&&(Ae=new bs(Ae,t,null,a,he),fe.push({event:Ae,listeners:Ye}),Re?Ae.data=Re:(Re=Bo(a),Re!==null&&(Ae.data=Re)))),(Re=zo?Uo(t,a):Yd(t,a))&&(Ae=kc(se,"onBeforeInput"),0<Ae.length&&(Ye=new bs("onBeforeInput","beforeinput",null,a,he),fe.push({event:Ye,listeners:Ae}),Ye.data=Re)),iy(fe,t,se,a,he)}Pp(fe,s)})}function Tl(t,s,a){return{instance:t,listener:s,currentTarget:a}}function kc(t,s){for(var a=s+"Capture",i=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=Je(t,a),h!=null&&i.unshift(Tl(t,h,m)),h=Je(t,s),h!=null&&i.push(Tl(t,h,m))),t.tag===3)return i;t=t.return}return[]}function bi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function zp(t,s,a,i,h){for(var m=s._reactName,w=[];a!==null&&a!==i;){var k=a,$=k.alternate,se=k.stateNode;if(k=k.tag,$!==null&&$===i)break;k!==5&&k!==26&&k!==27||se===null||($=se,h?(se=Je(a,m),se!=null&&w.unshift(Tl(a,se,$))):h||(se=Je(a,m),se!=null&&w.push(Tl(a,se,$)))),a=a.return}w.length!==0&&t.push({event:s,listeners:w})}var dy=/\r\n?/g,uy=/\u0000|\uFFFD/g;function Dp(t){return(typeof t=="string"?t:""+t).replace(dy,`
`).replace(uy,"")}function Bp(t,s){return s=Dp(s),Dp(t)===s}function Rc(){}function rt(t,s,a,i,h,m){switch(a){case"children":typeof i=="string"?s==="body"||s==="textarea"&&i===""||Ps(t,i):(typeof i=="number"||typeof i=="bigint")&&s!=="body"&&Ps(t,""+i);break;case"className":Br(t,"class",i);break;case"tabIndex":Br(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Br(t,a,i);break;case"style":ua(t,i,m);break;case"data":if(s!=="object"){Br(t,"data",i);break}case"src":case"href":if(i===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(a);break}i=ha(""+i),t.setAttribute(a,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&rt(t,s,"name",h.name,h,null),rt(t,s,"formEncType",h.formEncType,h,null),rt(t,s,"formMethod",h.formMethod,h,null),rt(t,s,"formTarget",h.formTarget,h,null)):(rt(t,s,"encType",h.encType,h,null),rt(t,s,"method",h.method,h,null),rt(t,s,"target",h.target,h,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(a);break}i=ha(""+i),t.setAttribute(a,i);break;case"onClick":i!=null&&(t.onclick=Rc);break;case"onScroll":i!=null&&Ke("scroll",t);break;case"onScrollEnd":i!=null&&Ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(d(61));if(a=i.__html,a!=null){if(h.children!=null)throw Error(d(60));t.innerHTML=a}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}a=ha(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(a,""+i):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":i===!0?t.setAttribute(a,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(a,i):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(a,i):t.removeAttribute(a);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(a):t.setAttribute(a,i);break;case"popover":Ke("beforetoggle",t),Ke("toggle",t),Dr(t,"popover",i);break;case"xlinkActuate":Ks(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Ks(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Ks(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Ks(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Ks(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Ks(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Ks(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Ks(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Ks(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Dr(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Vi.get(a)||a,Dr(t,a,i))}}function lh(t,s,a,i,h,m){switch(a){case"style":ua(t,i,m);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(d(61));if(a=i.__html,a!=null){if(h.children!=null)throw Error(d(60));t.innerHTML=a}}break;case"children":typeof i=="string"?Ps(t,i):(typeof i=="number"||typeof i=="bigint")&&Ps(t,""+i);break;case"onScroll":i!=null&&Ke("scroll",t);break;case"onScrollEnd":i!=null&&Ke("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Rc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!So.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),m=t[Yt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,h),typeof i=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,i,h);break e}a in t?t[a]=i:i===!0?t.setAttribute(a,""):Dr(t,a,i)}}}function $t(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",t),Ke("load",t);var i=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var w=a[m];if(w!=null)switch(m){case"src":i=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,s));default:rt(t,s,m,w,a,null)}}h&&rt(t,s,"srcSet",a.srcSet,a,null),i&&rt(t,s,"src",a.src,a,null);return;case"input":Ke("invalid",t);var k=m=w=h=null,$=null,se=null;for(i in a)if(a.hasOwnProperty(i)){var he=a[i];if(he!=null)switch(i){case"name":h=he;break;case"type":w=he;break;case"checked":$=he;break;case"defaultChecked":se=he;break;case"value":m=he;break;case"defaultValue":k=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(d(137,s));break;default:rt(t,s,i,he,a,null)}}Eo(t,m,k,$,se,w,h,!1),ca(t);return;case"select":Ke("invalid",t),i=w=m=null;for(h in a)if(a.hasOwnProperty(h)&&(k=a[h],k!=null))switch(h){case"value":m=k;break;case"defaultValue":w=k;break;case"multiple":i=k;default:rt(t,s,h,k,a,null)}s=m,a=w,t.multiple=!!i,s!=null?us(t,!!i,s,!1):a!=null&&us(t,!!i,a,!0);return;case"textarea":Ke("invalid",t),m=h=i=null;for(w in a)if(a.hasOwnProperty(w)&&(k=a[w],k!=null))switch(w){case"value":i=k;break;case"defaultValue":h=k;break;case"children":m=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(d(91));break;default:rt(t,s,w,k,a,null)}hn(t,i,h,m),ca(t);return;case"option":for($ in a)if(a.hasOwnProperty($)&&(i=a[$],i!=null))switch($){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:rt(t,s,$,i,a,null)}return;case"dialog":Ke("beforetoggle",t),Ke("toggle",t),Ke("cancel",t),Ke("close",t);break;case"iframe":case"object":Ke("load",t);break;case"video":case"audio":for(i=0;i<Ll.length;i++)Ke(Ll[i],t);break;case"image":Ke("error",t),Ke("load",t);break;case"details":Ke("toggle",t);break;case"embed":case"source":case"link":Ke("error",t),Ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in a)if(a.hasOwnProperty(se)&&(i=a[se],i!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,s));default:rt(t,s,se,i,a,null)}return;default:if(sr(s)){for(he in a)a.hasOwnProperty(he)&&(i=a[he],i!==void 0&&lh(t,s,he,i,a,void 0));return}}for(k in a)a.hasOwnProperty(k)&&(i=a[k],i!=null&&rt(t,s,k,i,a,null))}function hy(t,s,a,i){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,w=null,k=null,$=null,se=null,he=null;for(re in a){var fe=a[re];if(a.hasOwnProperty(re)&&fe!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":$=fe;default:i.hasOwnProperty(re)||rt(t,s,re,null,i,fe)}}for(var ae in i){var re=i[ae];if(fe=a[ae],i.hasOwnProperty(ae)&&(re!=null||fe!=null))switch(ae){case"type":m=re;break;case"name":h=re;break;case"checked":se=re;break;case"defaultChecked":he=re;break;case"value":w=re;break;case"defaultValue":k=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(d(137,s));break;default:re!==fe&&rt(t,s,ae,re,i,fe)}}Gt(t,w,k,$,se,he,m,h);return;case"select":re=w=k=ae=null;for(m in a)if($=a[m],a.hasOwnProperty(m)&&$!=null)switch(m){case"value":break;case"multiple":re=$;default:i.hasOwnProperty(m)||rt(t,s,m,null,i,$)}for(h in i)if(m=i[h],$=a[h],i.hasOwnProperty(h)&&(m!=null||$!=null))switch(h){case"value":ae=m;break;case"defaultValue":k=m;break;case"multiple":w=m;default:m!==$&&rt(t,s,h,m,i,$)}s=k,a=w,i=re,ae!=null?us(t,!!a,ae,!1):!!i!=!!a&&(s!=null?us(t,!!a,s,!0):us(t,!!a,a?[]:"",!1));return;case"textarea":re=ae=null;for(k in a)if(h=a[k],a.hasOwnProperty(k)&&h!=null&&!i.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:rt(t,s,k,null,i,h)}for(w in i)if(h=i[w],m=a[w],i.hasOwnProperty(w)&&(h!=null||m!=null))switch(w){case"value":ae=h;break;case"defaultValue":re=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(d(91));break;default:h!==m&&rt(t,s,w,h,i,m)}gt(t,ae,re);return;case"option":for(var Me in a)if(ae=a[Me],a.hasOwnProperty(Me)&&ae!=null&&!i.hasOwnProperty(Me))switch(Me){case"selected":t.selected=!1;break;default:rt(t,s,Me,null,i,ae)}for($ in i)if(ae=i[$],re=a[$],i.hasOwnProperty($)&&ae!==re&&(ae!=null||re!=null))switch($){case"selected":t.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:rt(t,s,$,ae,i,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)ae=a[Te],a.hasOwnProperty(Te)&&ae!=null&&!i.hasOwnProperty(Te)&&rt(t,s,Te,null,i,ae);for(se in i)if(ae=i[se],re=a[se],i.hasOwnProperty(se)&&ae!==re&&(ae!=null||re!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(d(137,s));break;default:rt(t,s,se,ae,i,re)}return;default:if(sr(s)){for(var it in a)ae=a[it],a.hasOwnProperty(it)&&ae!==void 0&&!i.hasOwnProperty(it)&&lh(t,s,it,void 0,i,ae);for(he in i)ae=i[he],re=a[he],!i.hasOwnProperty(he)||ae===re||ae===void 0&&re===void 0||lh(t,s,he,ae,i,re);return}}for(var X in a)ae=a[X],a.hasOwnProperty(X)&&ae!=null&&!i.hasOwnProperty(X)&&rt(t,s,X,null,i,ae);for(fe in i)ae=i[fe],re=a[fe],!i.hasOwnProperty(fe)||ae===re||ae==null&&re==null||rt(t,s,fe,ae,i,re)}var oh=null,ch=null;function Lc(t){return t.nodeType===9?t:t.ownerDocument}function Up(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fp(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function dh(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var uh=null;function my(){var t=window.event;return t&&t.type==="popstate"?t===uh?!1:(uh=t,!0):(uh=null,!1)}var qp=typeof setTimeout=="function"?setTimeout:void 0,fy=typeof clearTimeout=="function"?clearTimeout:void 0,Hp=typeof Promise=="function"?Promise:void 0,py=typeof queueMicrotask=="function"?queueMicrotask:typeof Hp<"u"?function(t){return Hp.resolve(null).then(t).catch(xy)}:qp;function xy(t){setTimeout(function(){throw t})}function Ia(t){return t==="head"}function Ip(t,s){var a=s,i=0,h=0;do{var m=a.nextSibling;if(t.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<i&&8>i){a=i;var w=t.ownerDocument;if(a&1&&Al(w.documentElement),a&2&&Al(w.body),a&4)for(a=w.head,Al(a),w=a.firstChild;w;){var k=w.nextSibling,$=w.nodeName;w[ia]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&w.rel.toLowerCase()==="stylesheet"||a.removeChild(w),w=k}}if(h===0){t.removeChild(m),Fl(s);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:i=a.charCodeAt(0)-48;else i=0;a=m}while(a);Fl(s)}function hh(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":hh(a),zr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function gy(t,s,a,i){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[ia])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=sn(t.nextSibling),t===null)break}return null}function yy(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=sn(t.nextSibling),t===null))return null;return t}function mh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function by(t,s){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")s();else{var i=function(){s(),a.removeEventListener("DOMContentLoaded",i)};a.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function sn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return t}var fh=null;function Zp(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return t;s--}else a==="/$"&&s++}t=t.previousSibling}return null}function $p(t,s,a){switch(s=Lc(a),t){case"html":if(t=s.documentElement,!t)throw Error(d(452));return t;case"head":if(t=s.head,!t)throw Error(d(453));return t;case"body":if(t=s.body,!t)throw Error(d(454));return t;default:throw Error(d(451))}}function Al(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);zr(t)}var Is=new Map,Vp=new Set;function Tc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Jn=J.d;J.d={f:vy,r:jy,D:_y,C:Ny,L:wy,m:Sy,X:Ey,S:Cy,M:ky};function vy(){var t=Jn.f(),s=_c();return t||s}function jy(t){var s=Cn(t);s!==null&&s.tag===5&&s.type==="form"?hf(s):Jn.r(t)}var vi=typeof document>"u"?null:document;function Yp(t,s,a){var i=vi;if(i&&typeof s=="string"&&s){var h=qt(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Vp.has(h)||(Vp.add(h),t={rel:t,crossOrigin:a,href:s},i.querySelector(h)===null&&(s=i.createElement("link"),$t(s,"link",t),Et(s),i.head.appendChild(s)))}}function _y(t){Jn.D(t),Yp("dns-prefetch",t,null)}function Ny(t,s){Jn.C(t,s),Yp("preconnect",t,s)}function wy(t,s,a){Jn.L(t,s,a);var i=vi;if(i&&t&&s){var h='link[rel="preload"][as="'+qt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+qt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+qt(a.imageSizes)+'"]')):h+='[href="'+qt(t)+'"]';var m=h;switch(s){case"style":m=ji(t);break;case"script":m=_i(t)}Is.has(m)||(t=N({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),Is.set(m,t),i.querySelector(h)!==null||s==="style"&&i.querySelector(Ml(m))||s==="script"&&i.querySelector(Pl(m))||(s=i.createElement("link"),$t(s,"link",t),Et(s),i.head.appendChild(s)))}}function Sy(t,s){Jn.m(t,s);var a=vi;if(a&&t){var i=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+qt(i)+'"][href="'+qt(t)+'"]',m=h;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=_i(t)}if(!Is.has(m)&&(t=N({rel:"modulepreload",href:t},s),Is.set(m,t),a.querySelector(h)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Pl(m)))return}i=a.createElement("link"),$t(i,"link",t),Et(i),a.head.appendChild(i)}}}function Cy(t,s,a){Jn.S(t,s,a);var i=vi;if(i&&t){var h=En(i).hoistableStyles,m=ji(t);s=s||"default";var w=h.get(m);if(!w){var k={loading:0,preload:null};if(w=i.querySelector(Ml(m)))k.loading=5;else{t=N({rel:"stylesheet",href:t,"data-precedence":s},a),(a=Is.get(m))&&ph(t,a);var $=w=i.createElement("link");Et($),$t($,"link",t),$._p=new Promise(function(se,he){$.onload=se,$.onerror=he}),$.addEventListener("load",function(){k.loading|=1}),$.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Ac(w,s,i)}w={type:"stylesheet",instance:w,count:1,state:k},h.set(m,w)}}}function Ey(t,s){Jn.X(t,s);var a=vi;if(a&&t){var i=En(a).hoistableScripts,h=_i(t),m=i.get(h);m||(m=a.querySelector(Pl(h)),m||(t=N({src:t,async:!0},s),(s=Is.get(h))&&xh(t,s),m=a.createElement("script"),Et(m),$t(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},i.set(h,m))}}function ky(t,s){Jn.M(t,s);var a=vi;if(a&&t){var i=En(a).hoistableScripts,h=_i(t),m=i.get(h);m||(m=a.querySelector(Pl(h)),m||(t=N({src:t,async:!0,type:"module"},s),(s=Is.get(h))&&xh(t,s),m=a.createElement("script"),Et(m),$t(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},i.set(h,m))}}function Gp(t,s,a,i){var h=(h=ye.current)?Tc(h):null;if(!h)throw Error(d(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=ji(a.href),a=En(h).hoistableStyles,i=a.get(s),i||(i={type:"style",instance:null,count:0,state:null},a.set(s,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ji(a.href);var m=En(h).hoistableStyles,w=m.get(t);if(w||(h=h.ownerDocument||h,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,w),(m=h.querySelector(Ml(t)))&&!m._p&&(w.instance=m,w.state.loading=5),Is.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Is.set(t,a),m||Ry(h,t,a,w.state))),s&&i===null)throw Error(d(528,""));return w}if(s&&i!==null)throw Error(d(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=_i(a),a=En(h).hoistableScripts,i=a.get(s),i||(i={type:"script",instance:null,count:0,state:null},a.set(s,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,t))}}function ji(t){return'href="'+qt(t)+'"'}function Ml(t){return'link[rel="stylesheet"]['+t+"]"}function Kp(t){return N({},t,{"data-precedence":t.precedence,precedence:null})}function Ry(t,s,a,i){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?i.loading=1:(s=t.createElement("link"),i.preload=s,s.addEventListener("load",function(){return i.loading|=1}),s.addEventListener("error",function(){return i.loading|=2}),$t(s,"link",a),Et(s),t.head.appendChild(s))}function _i(t){return'[src="'+qt(t)+'"]'}function Pl(t){return"script[async]"+t}function Qp(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var i=t.querySelector('style[data-href~="'+qt(a.href)+'"]');if(i)return s.instance=i,Et(i),i;var h=N({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),Et(i),$t(i,"style",h),Ac(i,a.precedence,t),s.instance=i;case"stylesheet":h=ji(a.href);var m=t.querySelector(Ml(h));if(m)return s.state.loading|=4,s.instance=m,Et(m),m;i=Kp(a),(h=Is.get(h))&&ph(i,h),m=(t.ownerDocument||t).createElement("link"),Et(m);var w=m;return w._p=new Promise(function(k,$){w.onload=k,w.onerror=$}),$t(m,"link",i),s.state.loading|=4,Ac(m,a.precedence,t),s.instance=m;case"script":return m=_i(a.src),(h=t.querySelector(Pl(m)))?(s.instance=h,Et(h),h):(i=a,(h=Is.get(m))&&(i=N({},a),xh(i,h)),t=t.ownerDocument||t,h=t.createElement("script"),Et(h),$t(h,"link",i),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(d(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(i=s.instance,s.state.loading|=4,Ac(i,a.precedence,t));return s.instance}function Ac(t,s,a){for(var i=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=i.length?i[i.length-1]:null,m=h,w=0;w<i.length;w++){var k=i[w];if(k.dataset.precedence===s)m=k;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function ph(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function xh(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Mc=null;function Xp(t,s,a){if(Mc===null){var i=new Map,h=Mc=new Map;h.set(a,i)}else h=Mc,i=h.get(a),i||(i=new Map,h.set(a,i));if(i.has(t))return i;for(i.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[ia]||m[Pt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var w=m.getAttribute(s)||"";w=t+w;var k=i.get(w);k?k.push(m):i.set(w,[m])}}return i}function Wp(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function Ly(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Jp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Ol=null;function Ty(){}function Ay(t,s,a){if(Ol===null)throw Error(d(475));var i=Ol;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=ji(a.href),m=t.querySelector(Ml(h));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(i.count++,i=Pc.bind(i),t.then(i,i)),s.state.loading|=4,s.instance=m,Et(m);return}m=t.ownerDocument||t,a=Kp(a),(h=Is.get(h))&&ph(a,h),m=m.createElement("link"),Et(m);var w=m;w._p=new Promise(function(k,$){w.onload=k,w.onerror=$}),$t(m,"link",a),s.instance=m}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(i.count++,s=Pc.bind(i),t.addEventListener("load",s),t.addEventListener("error",s))}}function My(){if(Ol===null)throw Error(d(475));var t=Ol;return t.stylesheets&&t.count===0&&gh(t,t.stylesheets),0<t.count?function(s){var a=setTimeout(function(){if(t.stylesheets&&gh(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Pc(){if(this.count--,this.count===0){if(this.stylesheets)gh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Oc=null;function gh(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Oc=new Map,s.forEach(Py,t),Oc=null,Pc.call(t))}function Py(t,s){if(!(s.state.loading&4)){var a=Oc.get(t);if(a)var i=a.get(null);else{a=new Map,Oc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var w=h[m];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(a.set(w.dataset.precedence,w),i=w)}i&&a.set(null,i)}h=s.instance,w=h.getAttribute("data-precedence"),m=a.get(w)||i,m===i&&a.set(null,h),a.set(w,h),this.count++,i=Pc.bind(this),h.addEventListener("load",i),h.addEventListener("error",i),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var zl={$$typeof:T,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function Oy(t,s,a,i,h,m,w,k){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Or(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Or(0),this.hiddenUpdates=Or(null),this.identifierPrefix=i,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function ex(t,s,a,i,h,m,w,k,$,se,he,fe){return t=new Oy(t,s,a,w,k,$,se,fe),s=1,m===!0&&(s|=24),m=ls(3,null,null,s),t.current=m,m.stateNode=t,s=Wd(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:i,isDehydrated:a,cache:s},su(m),t}function tx(t){return t?(t=Zn,t):Zn}function sx(t,s,a,i,h,m){h=tx(h),i.context===null?i.context=h:i.pendingContext=h,i=La(s),i.payload={element:a},m=m===void 0?null:m,m!==null&&(i.callback=m),a=Ta(t,i,s),a!==null&&(Rs(a,t,s),hl(a,t,s))}function nx(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function yh(t,s){nx(t,s),(t=t.alternate)&&nx(t,s)}function ax(t){if(t.tag===13){var s=Sa(t,67108864);s!==null&&Rs(s,t,67108864),yh(t,67108864)}}var zc=!0;function zy(t,s,a,i){var h=z.T;z.T=null;var m=J.p;try{J.p=2,bh(t,s,a,i)}finally{J.p=m,z.T=h}}function Dy(t,s,a,i){var h=z.T;z.T=null;var m=J.p;try{J.p=8,bh(t,s,a,i)}finally{J.p=m,z.T=h}}function bh(t,s,a,i){if(zc){var h=vh(i);if(h===null)ih(t,s,i,Dc,a),ix(t,i);else if(Uy(h,t,s,a,i))i.stopPropagation();else if(ix(t,i),s&4&&-1<By.indexOf(t)){for(;h!==null;){var m=Cn(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var w=cn(m.pendingLanes);if(w!==0){var k=m;for(k.pendingLanes|=2,k.entangledLanes|=2;w;){var $=1<<31-ts(w);k.entanglements[1]|=$,w&=~$}_n(m),(tt&6)===0&&(vc=es()+500,Rl(0))}}break;case 13:k=Sa(m,2),k!==null&&Rs(k,m,2),_c(),yh(m,2)}if(m=vh(i),m===null&&ih(t,s,i,Dc,a),m===h)break;h=m}h!==null&&i.stopPropagation()}else ih(t,s,i,null,a)}}function vh(t){return t=ma(t),jh(t)}var Dc=null;function jh(t){if(Dc=null,t=un(t),t!==null){var s=x(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=y(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Dc=t,null}function rx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mr()){case po:return 2;case Bi:return 8;case sa:case xo:return 32;case Ui:return 268435456;default:return 32}default:return 32}}var _h=!1,Za=null,$a=null,Va=null,Dl=new Map,Bl=new Map,Ya=[],By="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ix(t,s){switch(t){case"focusin":case"focusout":Za=null;break;case"dragenter":case"dragleave":$a=null;break;case"mouseover":case"mouseout":Va=null;break;case"pointerover":case"pointerout":Dl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bl.delete(s.pointerId)}}function Ul(t,s,a,i,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:i,nativeEvent:m,targetContainers:[h]},s!==null&&(s=Cn(s),s!==null&&ax(s)),t):(t.eventSystemFlags|=i,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function Uy(t,s,a,i,h){switch(s){case"focusin":return Za=Ul(Za,t,s,a,i,h),!0;case"dragenter":return $a=Ul($a,t,s,a,i,h),!0;case"mouseover":return Va=Ul(Va,t,s,a,i,h),!0;case"pointerover":var m=h.pointerId;return Dl.set(m,Ul(Dl.get(m)||null,t,s,a,i,h)),!0;case"gotpointercapture":return m=h.pointerId,Bl.set(m,Ul(Bl.get(m)||null,t,s,a,i,h)),!0}return!1}function lx(t){var s=un(t.target);if(s!==null){var a=x(s);if(a!==null){if(s=a.tag,s===13){if(s=y(a),s!==null){t.blockedOn=s,Ii(t.priority,function(){if(a.tag===13){var i=ks();i=qi(i);var h=Sa(a,i);h!==null&&Rs(h,a,i),yh(a,i)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bc(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=vh(t.nativeEvent);if(a===null){a=t.nativeEvent;var i=new a.constructor(a.type,a);nr=i,a.target.dispatchEvent(i),nr=null}else return s=Cn(a),s!==null&&ax(s),t.blockedOn=a,!1;s.shift()}return!0}function ox(t,s,a){Bc(t)&&a.delete(s)}function Fy(){_h=!1,Za!==null&&Bc(Za)&&(Za=null),$a!==null&&Bc($a)&&($a=null),Va!==null&&Bc(Va)&&(Va=null),Dl.forEach(ox),Bl.forEach(ox)}function Uc(t,s){t.blockedOn===s&&(t.blockedOn=null,_h||(_h=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Fy)))}var Fc=null;function cx(t){Fc!==t&&(Fc=t,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Fc===t&&(Fc=null);for(var s=0;s<t.length;s+=3){var a=t[s],i=t[s+1],h=t[s+2];if(typeof i!="function"){if(jh(i||a)===null)continue;break}var m=Cn(a);m!==null&&(t.splice(s,3),s-=3,ju(m,{pending:!0,data:h,method:a.method,action:i},i,h))}}))}function Fl(t){function s($){return Uc($,t)}Za!==null&&Uc(Za,t),$a!==null&&Uc($a,t),Va!==null&&Uc(Va,t),Dl.forEach(s),Bl.forEach(s);for(var a=0;a<Ya.length;a++){var i=Ya[a];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Ya.length&&(a=Ya[0],a.blockedOn===null);)lx(a),a.blockedOn===null&&Ya.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(i=0;i<a.length;i+=3){var h=a[i],m=a[i+1],w=h[Yt]||null;if(typeof m=="function")w||cx(a);else if(w){var k=null;if(m&&m.hasAttribute("formAction")){if(h=m,w=m[Yt]||null)k=w.formAction;else if(jh(h)!==null)continue}else k=w.action;typeof k=="function"?a[i+1]=k:(a.splice(i,3),i-=3),cx(a)}}}function Nh(t){this._internalRoot=t}qc.prototype.render=Nh.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(d(409));var a=s.current,i=ks();sx(a,i,t,s,null,null)},qc.prototype.unmount=Nh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;sx(t.current,2,null,t,null,null),_c(),s[ra]=null}};function qc(t){this._internalRoot=t}qc.prototype.unstable_scheduleHydration=function(t){if(t){var s=_o();t={blockedOn:null,target:t,priority:s};for(var a=0;a<Ya.length&&s!==0&&s<Ya[a].priority;a++);Ya.splice(a,0,t),a===0&&lx(t)}};var dx=o.version;if(dx!=="19.1.0")throw Error(d(527,dx,"19.1.0"));J.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(d(188)):(t=Object.keys(t).join(","),Error(d(268,t)));return t=g(s),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var qy={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{Sn=Hc.inject(qy),Vt=Hc}catch{}}return Hl.createRoot=function(t,s){if(!f(t))throw Error(d(299));var a=!1,i="",h=Cf,m=Ef,w=kf,k=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(k=s.unstable_transitionCallbacks)),s=ex(t,1,!1,null,null,a,i,h,m,w,k,null),t[ra]=s.current,rh(t),new Nh(s)},Hl.hydrateRoot=function(t,s,a){if(!f(t))throw Error(d(299));var i=!1,h="",m=Cf,w=Ef,k=kf,$=null,se=null;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(w=a.onCaughtError),a.onRecoverableError!==void 0&&(k=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&($=a.unstable_transitionCallbacks),a.formState!==void 0&&(se=a.formState)),s=ex(t,1,!0,s,a??null,i,h,m,w,k,$,se),s.context=tx(null),a=s.current,i=ks(),i=qi(i),h=La(i),h.callback=null,Ta(a,h,i),a=i,s.current.lanes=a,aa(s,a),_n(s),t[ra]=s.current,rh(t),new qc(s)},Hl.version="19.1.0",Hl}var vx;function Qy(){if(vx)return Ch.exports;vx=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(o){console.error(o)}}return l(),Ch.exports=Ky(),Ch.exports}var Xy=Qy();/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var jx="popstate";function Wy(l={}){function o(d,f){let{pathname:x,search:y,hash:_}=d.location;return qh("",{pathname:x,search:y,hash:_},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function c(d,f){return typeof f=="string"?f:eo(f)}return eb(o,c,null,l)}function xt(l,o){if(l===!1||l===null||typeof l>"u")throw new Error(o)}function Zs(l,o){if(!l){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function Jy(){return Math.random().toString(36).substring(2,10)}function _x(l,o){return{usr:l.state,key:l.key,idx:o}}function qh(l,o,c=null,d){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof o=="string"?Li(o):o,state:c,key:o&&o.key||d||Jy()}}function eo({pathname:l="/",search:o="",hash:c=""}){return o&&o!=="?"&&(l+=o.charAt(0)==="?"?o:"?"+o),c&&c!=="#"&&(l+=c.charAt(0)==="#"?c:"#"+c),l}function Li(l){let o={};if(l){let c=l.indexOf("#");c>=0&&(o.hash=l.substring(c),l=l.substring(0,c));let d=l.indexOf("?");d>=0&&(o.search=l.substring(d),l=l.substring(0,d)),l&&(o.pathname=l)}return o}function eb(l,o,c,d={}){let{window:f=document.defaultView,v5Compat:x=!1}=d,y=f.history,_="POP",g=null,b=N();b==null&&(b=0,y.replaceState({...y.state,idx:b},""));function N(){return(y.state||{idx:null}).idx}function E(){_="POP";let M=N(),F=M==null?null:M-b;b=M,g&&g({action:_,location:S.location,delta:F})}function P(M,F){_="PUSH";let I=qh(S.location,M,F);b=N()+1;let T=_x(I,b),H=S.createHref(I);try{y.pushState(T,"",H)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;f.location.assign(H)}x&&g&&g({action:_,location:S.location,delta:1})}function R(M,F){_="REPLACE";let I=qh(S.location,M,F);b=N();let T=_x(I,b),H=S.createHref(I);y.replaceState(T,"",H),x&&g&&g({action:_,location:S.location,delta:0})}function B(M){return tb(M)}let S={get action(){return _},get location(){return l(f,y)},listen(M){if(g)throw new Error("A history only accepts one active listener");return f.addEventListener(jx,E),g=M,()=>{f.removeEventListener(jx,E),g=null}},createHref(M){return o(f,M)},createURL:B,encodeLocation(M){let F=B(M);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:P,replace:R,go(M){return y.go(M)}};return S}function tb(l,o=!1){let c="http://localhost";typeof window<"u"&&(c=window.location.origin!=="null"?window.location.origin:window.location.href),xt(c,"No window.location.(origin|href) available to create URL");let d=typeof l=="string"?l:eo(l);return d=d.replace(/ $/,"%20"),!o&&d.startsWith("//")&&(d=c+d),new URL(d,c)}function dg(l,o,c="/"){return sb(l,o,c,!1)}function sb(l,o,c,d){let f=typeof o=="string"?Li(o):o,x=ta(f.pathname||"/",c);if(x==null)return null;let y=ug(l);nb(y);let _=null;for(let g=0;_==null&&g<y.length;++g){let b=fb(x);_=hb(y[g],b,d)}return _}function ug(l,o=[],c=[],d=""){let f=(x,y,_)=>{let g={relativePath:_===void 0?x.path||"":_,caseSensitive:x.caseSensitive===!0,childrenIndex:y,route:x};g.relativePath.startsWith("/")&&(xt(g.relativePath.startsWith(d),`Absolute route path "${g.relativePath}" nested under path "${d}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(d.length));let b=ea([d,g.relativePath]),N=c.concat(g);x.children&&x.children.length>0&&(xt(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),ug(x.children,o,N,b)),!(x.path==null&&!x.index)&&o.push({path:b,score:db(b,x.index),routesMeta:N})};return l.forEach((x,y)=>{var _;if(x.path===""||!((_=x.path)!=null&&_.includes("?")))f(x,y);else for(let g of hg(x.path))f(x,y,g)}),o}function hg(l){let o=l.split("/");if(o.length===0)return[];let[c,...d]=o,f=c.endsWith("?"),x=c.replace(/\?$/,"");if(d.length===0)return f?[x,""]:[x];let y=hg(d.join("/")),_=[];return _.push(...y.map(g=>g===""?x:[x,g].join("/"))),f&&_.push(...y),_.map(g=>l.startsWith("/")&&g===""?"/":g)}function nb(l){l.sort((o,c)=>o.score!==c.score?c.score-o.score:ub(o.routesMeta.map(d=>d.childrenIndex),c.routesMeta.map(d=>d.childrenIndex)))}var ab=/^:[\w-]+$/,rb=3,ib=2,lb=1,ob=10,cb=-2,Nx=l=>l==="*";function db(l,o){let c=l.split("/"),d=c.length;return c.some(Nx)&&(d+=cb),o&&(d+=ib),c.filter(f=>!Nx(f)).reduce((f,x)=>f+(ab.test(x)?rb:x===""?lb:ob),d)}function ub(l,o){return l.length===o.length&&l.slice(0,-1).every((d,f)=>d===o[f])?l[l.length-1]-o[o.length-1]:0}function hb(l,o,c=!1){let{routesMeta:d}=l,f={},x="/",y=[];for(let _=0;_<d.length;++_){let g=d[_],b=_===d.length-1,N=x==="/"?o:o.slice(x.length)||"/",E=sd({path:g.relativePath,caseSensitive:g.caseSensitive,end:b},N),P=g.route;if(!E&&b&&c&&!d[d.length-1].route.index&&(E=sd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},N)),!E)return null;Object.assign(f,E.params),y.push({params:f,pathname:ea([x,E.pathname]),pathnameBase:yb(ea([x,E.pathnameBase])),route:P}),E.pathnameBase!=="/"&&(x=ea([x,E.pathnameBase]))}return y}function sd(l,o){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[c,d]=mb(l.path,l.caseSensitive,l.end),f=o.match(c);if(!f)return null;let x=f[0],y=x.replace(/(.)\/+$/,"$1"),_=f.slice(1);return{params:d.reduce((b,{paramName:N,isOptional:E},P)=>{if(N==="*"){let B=_[P]||"";y=x.slice(0,x.length-B.length).replace(/(.)\/+$/,"$1")}const R=_[P];return E&&!R?b[N]=void 0:b[N]=(R||"").replace(/%2F/g,"/"),b},{}),pathname:x,pathnameBase:y,pattern:l}}function mb(l,o=!1,c=!0){Zs(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let d=[],f="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,_,g)=>(d.push({paramName:_,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return l.endsWith("*")?(d.push({paramName:"*"}),f+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?f+="\\/*$":l!==""&&l!=="/"&&(f+="(?:(?=\\/|$))"),[new RegExp(f,o?void 0:"i"),d]}function fb(l){try{return l.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return Zs(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${o}).`),l}}function ta(l,o){if(o==="/")return l;if(!l.toLowerCase().startsWith(o.toLowerCase()))return null;let c=o.endsWith("/")?o.length-1:o.length,d=l.charAt(c);return d&&d!=="/"?null:l.slice(c)||"/"}function pb(l,o="/"){let{pathname:c,search:d="",hash:f=""}=typeof l=="string"?Li(l):l;return{pathname:c?c.startsWith("/")?c:xb(c,o):o,search:bb(d),hash:vb(f)}}function xb(l,o){let c=o.replace(/\/+$/,"").split("/");return l.split("/").forEach(f=>{f===".."?c.length>1&&c.pop():f!=="."&&c.push(f)}),c.length>1?c.join("/"):"/"}function Lh(l,o,c,d){return`Cannot include a '${l}' character in a manually specified \`to.${o}\` field [${JSON.stringify(d)}].  Please separate it out to the \`to.${c}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gb(l){return l.filter((o,c)=>c===0||o.route.path&&o.route.path.length>0)}function nm(l){let o=gb(l);return o.map((c,d)=>d===o.length-1?c.pathname:c.pathnameBase)}function am(l,o,c,d=!1){let f;typeof l=="string"?f=Li(l):(f={...l},xt(!f.pathname||!f.pathname.includes("?"),Lh("?","pathname","search",f)),xt(!f.pathname||!f.pathname.includes("#"),Lh("#","pathname","hash",f)),xt(!f.search||!f.search.includes("#"),Lh("#","search","hash",f)));let x=l===""||f.pathname==="",y=x?"/":f.pathname,_;if(y==null)_=c;else{let E=o.length-1;if(!d&&y.startsWith("..")){let P=y.split("/");for(;P[0]==="..";)P.shift(),E-=1;f.pathname=P.join("/")}_=E>=0?o[E]:"/"}let g=pb(f,_),b=y&&y!=="/"&&y.endsWith("/"),N=(x||y===".")&&c.endsWith("/");return!g.pathname.endsWith("/")&&(b||N)&&(g.pathname+="/"),g}var ea=l=>l.join("/").replace(/\/\/+/g,"/"),yb=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),bb=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,vb=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function jb(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}var mg=["POST","PUT","PATCH","DELETE"];new Set(mg);var _b=["GET",...mg];new Set(_b);var Ti=j.createContext(null);Ti.displayName="DataRouter";var fd=j.createContext(null);fd.displayName="DataRouterState";j.createContext(!1);var fg=j.createContext({isTransitioning:!1});fg.displayName="ViewTransition";var Nb=j.createContext(new Map);Nb.displayName="Fetchers";var wb=j.createContext(null);wb.displayName="Await";var an=j.createContext(null);an.displayName="Navigation";var ao=j.createContext(null);ao.displayName="Location";var rn=j.createContext({outlet:null,matches:[],isDataRoute:!1});rn.displayName="Route";var rm=j.createContext(null);rm.displayName="RouteError";function Sb(l,{relative:o}={}){xt(Ai(),"useHref() may be used only in the context of a <Router> component.");let{basename:c,navigator:d}=j.useContext(an),{hash:f,pathname:x,search:y}=ro(l,{relative:o}),_=x;return c!=="/"&&(_=x==="/"?c:ea([c,x])),d.createHref({pathname:_,search:y,hash:f})}function Ai(){return j.useContext(ao)!=null}function $s(){return xt(Ai(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(ao).location}var pg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xg(l){j.useContext(an).static||j.useLayoutEffect(l)}function Lt(){let{isDataRoute:l}=j.useContext(rn);return l?Ub():Cb()}function Cb(){xt(Ai(),"useNavigate() may be used only in the context of a <Router> component.");let l=j.useContext(Ti),{basename:o,navigator:c}=j.useContext(an),{matches:d}=j.useContext(rn),{pathname:f}=$s(),x=JSON.stringify(nm(d)),y=j.useRef(!1);return xg(()=>{y.current=!0}),j.useCallback((g,b={})=>{if(Zs(y.current,pg),!y.current)return;if(typeof g=="number"){c.go(g);return}let N=am(g,JSON.parse(x),f,b.relative==="path");l==null&&o!=="/"&&(N.pathname=N.pathname==="/"?o:ea([o,N.pathname])),(b.replace?c.replace:c.push)(N,b.state,b)},[o,c,x,f,l])}j.createContext(null);function Eb(){let{matches:l}=j.useContext(rn),o=l[l.length-1];return o?o.params:{}}function ro(l,{relative:o}={}){let{matches:c}=j.useContext(rn),{pathname:d}=$s(),f=JSON.stringify(nm(c));return j.useMemo(()=>am(l,JSON.parse(f),d,o==="path"),[l,f,d,o])}function kb(l,o){return gg(l,o)}function gg(l,o,c,d){var F;xt(Ai(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:f}=j.useContext(an),{matches:x}=j.useContext(rn),y=x[x.length-1],_=y?y.params:{},g=y?y.pathname:"/",b=y?y.pathnameBase:"/",N=y&&y.route;{let I=N&&N.path||"";yg(g,!N||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let E=$s(),P;if(o){let I=typeof o=="string"?Li(o):o;xt(b==="/"||((F=I.pathname)==null?void 0:F.startsWith(b)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${I.pathname}" was given in the \`location\` prop.`),P=I}else P=E;let R=P.pathname||"/",B=R;if(b!=="/"){let I=b.replace(/^\//,"").split("/");B="/"+R.replace(/^\//,"").split("/").slice(I.length).join("/")}let S=dg(l,{pathname:B});Zs(N||S!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),Zs(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=Mb(S&&S.map(I=>Object.assign({},I,{params:Object.assign({},_,I.params),pathname:ea([b,f.encodeLocation?f.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?b:ea([b,f.encodeLocation?f.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),x,c,d);return o&&M?j.createElement(ao.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},M):M}function Rb(){let l=Bb(),o=jb(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),c=l instanceof Error?l.stack:null,d="rgba(200,200,200, 0.5)",f={padding:"0.5rem",backgroundColor:d},x={padding:"2px 4px",backgroundColor:d},y=null;return console.error("Error handled by React Router default ErrorBoundary:",l),y=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:x},"ErrorBoundary")," or"," ",j.createElement("code",{style:x},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},o),c?j.createElement("pre",{style:f},c):null,y)}var Lb=j.createElement(Rb,null),Tb=class extends j.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,o){return o.location!==l.location||o.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:o.error,location:o.location,revalidation:l.revalidation||o.revalidation}}componentDidCatch(l,o){console.error("React Router caught the following error during render",l,o)}render(){return this.state.error!==void 0?j.createElement(rn.Provider,{value:this.props.routeContext},j.createElement(rm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ab({routeContext:l,match:o,children:c}){let d=j.useContext(Ti);return d&&d.static&&d.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=o.route.id),j.createElement(rn.Provider,{value:l},c)}function Mb(l,o=[],c=null,d=null){if(l==null){if(!c)return null;if(c.errors)l=c.matches;else if(o.length===0&&!c.initialized&&c.matches.length>0)l=c.matches;else return null}let f=l,x=c==null?void 0:c.errors;if(x!=null){let g=f.findIndex(b=>b.route.id&&(x==null?void 0:x[b.route.id])!==void 0);xt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),f=f.slice(0,Math.min(f.length,g+1))}let y=!1,_=-1;if(c)for(let g=0;g<f.length;g++){let b=f[g];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(_=g),b.route.id){let{loaderData:N,errors:E}=c,P=b.route.loader&&!N.hasOwnProperty(b.route.id)&&(!E||E[b.route.id]===void 0);if(b.route.lazy||P){y=!0,_>=0?f=f.slice(0,_+1):f=[f[0]];break}}}return f.reduceRight((g,b,N)=>{let E,P=!1,R=null,B=null;c&&(E=x&&b.route.id?x[b.route.id]:void 0,R=b.route.errorElement||Lb,y&&(_<0&&N===0?(yg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,B=null):_===N&&(P=!0,B=b.route.hydrateFallbackElement||null)));let S=o.concat(f.slice(0,N+1)),M=()=>{let F;return E?F=R:P?F=B:b.route.Component?F=j.createElement(b.route.Component,null):b.route.element?F=b.route.element:F=g,j.createElement(Ab,{match:b,routeContext:{outlet:g,matches:S,isDataRoute:c!=null},children:F})};return c&&(b.route.ErrorBoundary||b.route.errorElement||N===0)?j.createElement(Tb,{location:c.location,revalidation:c.revalidation,component:R,error:E,children:M(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):M()},null)}function im(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Pb(l){let o=j.useContext(Ti);return xt(o,im(l)),o}function Ob(l){let o=j.useContext(fd);return xt(o,im(l)),o}function zb(l){let o=j.useContext(rn);return xt(o,im(l)),o}function lm(l){let o=zb(l),c=o.matches[o.matches.length-1];return xt(c.route.id,`${l} can only be used on routes that contain a unique "id"`),c.route.id}function Db(){return lm("useRouteId")}function Bb(){var d;let l=j.useContext(rm),o=Ob("useRouteError"),c=lm("useRouteError");return l!==void 0?l:(d=o.errors)==null?void 0:d[c]}function Ub(){let{router:l}=Pb("useNavigate"),o=lm("useNavigate"),c=j.useRef(!1);return xg(()=>{c.current=!0}),j.useCallback(async(f,x={})=>{Zs(c.current,pg),c.current&&(typeof f=="number"?l.navigate(f):await l.navigate(f,{fromRouteId:o,...x}))},[l,o])}var wx={};function yg(l,o,c){!o&&!wx[l]&&(wx[l]=!0,Zs(!1,c))}j.memo(Fb);function Fb({routes:l,future:o,state:c}){return gg(l,void 0,c,o)}function nd({to:l,replace:o,state:c,relative:d}){xt(Ai(),"<Navigate> may be used only in the context of a <Router> component.");let{static:f}=j.useContext(an);Zs(!f,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:x}=j.useContext(rn),{pathname:y}=$s(),_=Lt(),g=am(l,nm(x),y,d==="path"),b=JSON.stringify(g);return j.useEffect(()=>{_(JSON.parse(b),{replace:o,state:c,relative:d})},[_,b,d,o,c]),null}function Qe(l){xt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qb({basename:l="/",children:o=null,location:c,navigationType:d="POP",navigator:f,static:x=!1}){xt(!Ai(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=l.replace(/^\/*/,"/"),_=j.useMemo(()=>({basename:y,navigator:f,static:x,future:{}}),[y,f,x]);typeof c=="string"&&(c=Li(c));let{pathname:g="/",search:b="",hash:N="",state:E=null,key:P="default"}=c,R=j.useMemo(()=>{let B=ta(g,y);return B==null?null:{location:{pathname:B,search:b,hash:N,state:E,key:P},navigationType:d}},[y,g,b,N,E,P,d]);return Zs(R!=null,`<Router basename="${y}"> is not able to match the URL "${g}${b}${N}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:j.createElement(an.Provider,{value:_},j.createElement(ao.Provider,{children:o,value:R}))}function Hb({children:l,location:o}){return kb(Hh(l),o)}function Hh(l,o=[]){let c=[];return j.Children.forEach(l,(d,f)=>{if(!j.isValidElement(d))return;let x=[...o,f];if(d.type===j.Fragment){c.push.apply(c,Hh(d.props.children,x));return}xt(d.type===Qe,`[${typeof d.type=="string"?d.type:d.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xt(!d.props.index||!d.props.children,"An index route cannot have child routes.");let y={id:d.props.id||x.join("-"),caseSensitive:d.props.caseSensitive,element:d.props.element,Component:d.props.Component,index:d.props.index,path:d.props.path,loader:d.props.loader,action:d.props.action,hydrateFallbackElement:d.props.hydrateFallbackElement,HydrateFallback:d.props.HydrateFallback,errorElement:d.props.errorElement,ErrorBoundary:d.props.ErrorBoundary,hasErrorBoundary:d.props.hasErrorBoundary===!0||d.props.ErrorBoundary!=null||d.props.errorElement!=null,shouldRevalidate:d.props.shouldRevalidate,handle:d.props.handle,lazy:d.props.lazy};d.props.children&&(y.children=Hh(d.props.children,x)),c.push(y)}),c}var Gc="get",Kc="application/x-www-form-urlencoded";function pd(l){return l!=null&&typeof l.tagName=="string"}function Ib(l){return pd(l)&&l.tagName.toLowerCase()==="button"}function Zb(l){return pd(l)&&l.tagName.toLowerCase()==="form"}function $b(l){return pd(l)&&l.tagName.toLowerCase()==="input"}function Vb(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function Yb(l,o){return l.button===0&&(!o||o==="_self")&&!Vb(l)}function Ih(l=""){return new URLSearchParams(typeof l=="string"||Array.isArray(l)||l instanceof URLSearchParams?l:Object.keys(l).reduce((o,c)=>{let d=l[c];return o.concat(Array.isArray(d)?d.map(f=>[c,f]):[[c,d]])},[]))}function Gb(l,o){let c=Ih(l);return o&&o.forEach((d,f)=>{c.has(f)||o.getAll(f).forEach(x=>{c.append(f,x)})}),c}var Ic=null;function Kb(){if(Ic===null)try{new FormData(document.createElement("form"),0),Ic=!1}catch{Ic=!0}return Ic}var Qb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Th(l){return l!=null&&!Qb.has(l)?(Zs(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kc}"`),null):l}function Xb(l,o){let c,d,f,x,y;if(Zb(l)){let _=l.getAttribute("action");d=_?ta(_,o):null,c=l.getAttribute("method")||Gc,f=Th(l.getAttribute("enctype"))||Kc,x=new FormData(l)}else if(Ib(l)||$b(l)&&(l.type==="submit"||l.type==="image")){let _=l.form;if(_==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=l.getAttribute("formaction")||_.getAttribute("action");if(d=g?ta(g,o):null,c=l.getAttribute("formmethod")||_.getAttribute("method")||Gc,f=Th(l.getAttribute("formenctype"))||Th(_.getAttribute("enctype"))||Kc,x=new FormData(_,l),!Kb()){let{name:b,type:N,value:E}=l;if(N==="image"){let P=b?`${b}.`:"";x.append(`${P}x`,"0"),x.append(`${P}y`,"0")}else b&&x.append(b,E)}}else{if(pd(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');c=Gc,d=null,f=Kc,y=l}return x&&f==="text/plain"&&(y=x,x=void 0),{action:d,method:c.toLowerCase(),encType:f,formData:x,body:y}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function om(l,o){if(l===!1||l===null||typeof l>"u")throw new Error(o)}function Wb(l,o,c){let d=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return d.pathname==="/"?d.pathname=`_root.${c}`:o&&ta(d.pathname,o)==="/"?d.pathname=`${o.replace(/\/$/,"")}/_root.${c}`:d.pathname=`${d.pathname.replace(/\/$/,"")}.${c}`,d}async function Jb(l,o){if(l.id in o)return o[l.id];try{let c=await import(l.module);return o[l.id]=c,c}catch(c){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(c),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ev(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function tv(l,o,c){let d=await Promise.all(l.map(async f=>{let x=o.routes[f.route.id];if(x){let y=await Jb(x,c);return y.links?y.links():[]}return[]}));return rv(d.flat(1).filter(ev).filter(f=>f.rel==="stylesheet"||f.rel==="preload").map(f=>f.rel==="stylesheet"?{...f,rel:"prefetch",as:"style"}:{...f,rel:"prefetch"}))}function Sx(l,o,c,d,f,x){let y=(g,b)=>c[b]?g.route.id!==c[b].route.id:!0,_=(g,b)=>{var N;return c[b].pathname!==g.pathname||((N=c[b].route.path)==null?void 0:N.endsWith("*"))&&c[b].params["*"]!==g.params["*"]};return x==="assets"?o.filter((g,b)=>y(g,b)||_(g,b)):x==="data"?o.filter((g,b)=>{var E;let N=d.routes[g.route.id];if(!N||!N.hasLoader)return!1;if(y(g,b)||_(g,b))return!0;if(g.route.shouldRevalidate){let P=g.route.shouldRevalidate({currentUrl:new URL(f.pathname+f.search+f.hash,window.origin),currentParams:((E=c[0])==null?void 0:E.params)||{},nextUrl:new URL(l,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof P=="boolean")return P}return!0}):[]}function sv(l,o,{includeHydrateFallback:c}={}){return nv(l.map(d=>{let f=o.routes[d.route.id];if(!f)return[];let x=[f.module];return f.clientActionModule&&(x=x.concat(f.clientActionModule)),f.clientLoaderModule&&(x=x.concat(f.clientLoaderModule)),c&&f.hydrateFallbackModule&&(x=x.concat(f.hydrateFallbackModule)),f.imports&&(x=x.concat(f.imports)),x}).flat(1))}function nv(l){return[...new Set(l)]}function av(l){let o={},c=Object.keys(l).sort();for(let d of c)o[d]=l[d];return o}function rv(l,o){let c=new Set;return new Set(o),l.reduce((d,f)=>{let x=JSON.stringify(av(f));return c.has(x)||(c.add(x),d.push({key:x,link:f})),d},[])}function bg(){let l=j.useContext(Ti);return om(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function iv(){let l=j.useContext(fd);return om(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var cm=j.createContext(void 0);cm.displayName="FrameworkContext";function vg(){let l=j.useContext(cm);return om(l,"You must render this element inside a <HydratedRouter> element"),l}function lv(l,o){let c=j.useContext(cm),[d,f]=j.useState(!1),[x,y]=j.useState(!1),{onFocus:_,onBlur:g,onMouseEnter:b,onMouseLeave:N,onTouchStart:E}=o,P=j.useRef(null);j.useEffect(()=>{if(l==="render"&&y(!0),l==="viewport"){let S=F=>{F.forEach(I=>{y(I.isIntersecting)})},M=new IntersectionObserver(S,{threshold:.5});return P.current&&M.observe(P.current),()=>{M.disconnect()}}},[l]),j.useEffect(()=>{if(d){let S=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(S)}}},[d]);let R=()=>{f(!0)},B=()=>{f(!1),y(!1)};return c?l!=="intent"?[x,P,{}]:[x,P,{onFocus:Il(_,R),onBlur:Il(g,B),onMouseEnter:Il(b,R),onMouseLeave:Il(N,B),onTouchStart:Il(E,R)}]:[!1,P,{}]}function Il(l,o){return c=>{l&&l(c),c.defaultPrevented||o(c)}}function ov({page:l,...o}){let{router:c}=bg(),d=j.useMemo(()=>dg(c.routes,l,c.basename),[c.routes,l,c.basename]);return d?j.createElement(dv,{page:l,matches:d,...o}):null}function cv(l){let{manifest:o,routeModules:c}=vg(),[d,f]=j.useState([]);return j.useEffect(()=>{let x=!1;return tv(l,o,c).then(y=>{x||f(y)}),()=>{x=!0}},[l,o,c]),d}function dv({page:l,matches:o,...c}){let d=$s(),{manifest:f,routeModules:x}=vg(),{basename:y}=bg(),{loaderData:_,matches:g}=iv(),b=j.useMemo(()=>Sx(l,o,g,f,d,"data"),[l,o,g,f,d]),N=j.useMemo(()=>Sx(l,o,g,f,d,"assets"),[l,o,g,f,d]),E=j.useMemo(()=>{if(l===d.pathname+d.search+d.hash)return[];let B=new Set,S=!1;if(o.forEach(F=>{var T;let I=f.routes[F.route.id];!I||!I.hasLoader||(!b.some(H=>H.route.id===F.route.id)&&F.route.id in _&&((T=x[F.route.id])!=null&&T.shouldRevalidate)||I.hasClientLoader?S=!0:B.add(F.route.id))}),B.size===0)return[];let M=Wb(l,y,"data");return S&&B.size>0&&M.searchParams.set("_routes",o.filter(F=>B.has(F.route.id)).map(F=>F.route.id).join(",")),[M.pathname+M.search]},[y,_,d,f,b,o,l,x]),P=j.useMemo(()=>sv(N,f),[N,f]),R=cv(N);return j.createElement(j.Fragment,null,E.map(B=>j.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...c})),P.map(B=>j.createElement("link",{key:B,rel:"modulepreload",href:B,...c})),R.map(({key:B,link:S})=>j.createElement("link",{key:B,...S})))}function uv(...l){return o=>{l.forEach(c=>{typeof c=="function"?c(o):c!=null&&(c.current=o)})}}var jg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jg&&(window.__reactRouterVersion="7.7.0")}catch{}function hv({basename:l,children:o,window:c}){let d=j.useRef();d.current==null&&(d.current=Wy({window:c,v5Compat:!0}));let f=d.current,[x,y]=j.useState({action:f.action,location:f.location}),_=j.useCallback(g=>{j.startTransition(()=>y(g))},[y]);return j.useLayoutEffect(()=>f.listen(_),[f,_]),j.createElement(qb,{basename:l,children:o,location:x.location,navigationType:x.action,navigator:f})}var _g=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wt=j.forwardRef(function({onClick:o,discover:c="render",prefetch:d="none",relative:f,reloadDocument:x,replace:y,state:_,target:g,to:b,preventScrollReset:N,viewTransition:E,...P},R){let{basename:B}=j.useContext(an),S=typeof b=="string"&&_g.test(b),M,F=!1;if(typeof b=="string"&&S&&(M=b,jg))try{let O=new URL(window.location.href),G=b.startsWith("//")?new URL(O.protocol+b):new URL(b),K=ta(G.pathname,B);G.origin===O.origin&&K!=null?b=K+G.search+G.hash:F=!0}catch{Zs(!1,`<Link to="${b}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let I=Sb(b,{relative:f}),[T,H,q]=lv(d,P),A=pv(b,{replace:y,state:_,target:g,preventScrollReset:N,relative:f,viewTransition:E});function D(O){o&&o(O),O.defaultPrevented||A(O)}let V=j.createElement("a",{...P,...q,href:M||I,onClick:F||x?o:D,ref:uv(R,H),target:g,"data-discover":!S&&c==="render"?"true":void 0});return T&&!S?j.createElement(j.Fragment,null,V,j.createElement(ov,{page:I})):V});Wt.displayName="Link";var Ee=j.forwardRef(function({"aria-current":o="page",caseSensitive:c=!1,className:d="",end:f=!1,style:x,to:y,viewTransition:_,children:g,...b},N){let E=ro(y,{relative:b.relative}),P=$s(),R=j.useContext(fd),{navigator:B,basename:S}=j.useContext(an),M=R!=null&&jv(E)&&_===!0,F=B.encodeLocation?B.encodeLocation(E).pathname:E.pathname,I=P.pathname,T=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;c||(I=I.toLowerCase(),T=T?T.toLowerCase():null,F=F.toLowerCase()),T&&S&&(T=ta(T,S)||T);const H=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let q=I===F||!f&&I.startsWith(F)&&I.charAt(H)==="/",A=T!=null&&(T===F||!f&&T.startsWith(F)&&T.charAt(F.length)==="/"),D={isActive:q,isPending:A,isTransitioning:M},V=q?o:void 0,O;typeof d=="function"?O=d(D):O=[d,q?"active":null,A?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let G=typeof x=="function"?x(D):x;return j.createElement(Wt,{...b,"aria-current":V,className:O,ref:N,style:G,to:y,viewTransition:_},typeof g=="function"?g(D):g)});Ee.displayName="NavLink";var mv=j.forwardRef(({discover:l="render",fetcherKey:o,navigate:c,reloadDocument:d,replace:f,state:x,method:y=Gc,action:_,onSubmit:g,relative:b,preventScrollReset:N,viewTransition:E,...P},R)=>{let B=bv(),S=vv(_,{relative:b}),M=y.toLowerCase()==="get"?"get":"post",F=typeof _=="string"&&_g.test(_),I=T=>{if(g&&g(T),T.defaultPrevented)return;T.preventDefault();let H=T.nativeEvent.submitter,q=(H==null?void 0:H.getAttribute("formmethod"))||y;B(H||T.currentTarget,{fetcherKey:o,method:q,navigate:c,replace:f,state:x,relative:b,preventScrollReset:N,viewTransition:E})};return j.createElement("form",{ref:R,method:M,action:S,onSubmit:d?g:I,...P,"data-discover":!F&&l==="render"?"true":void 0})});mv.displayName="Form";function fv(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ng(l){let o=j.useContext(Ti);return xt(o,fv(l)),o}function pv(l,{target:o,replace:c,state:d,preventScrollReset:f,relative:x,viewTransition:y}={}){let _=Lt(),g=$s(),b=ro(l,{relative:x});return j.useCallback(N=>{if(Yb(N,o)){N.preventDefault();let E=c!==void 0?c:eo(g)===eo(b);_(l,{replace:E,state:d,preventScrollReset:f,relative:x,viewTransition:y})}},[g,_,b,c,d,o,l,f,x,y])}function xv(l){Zs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let o=j.useRef(Ih(l)),c=j.useRef(!1),d=$s(),f=j.useMemo(()=>Gb(d.search,c.current?null:o.current),[d.search]),x=Lt(),y=j.useCallback((_,g)=>{const b=Ih(typeof _=="function"?_(new URLSearchParams(f)):_);c.current=!0,x("?"+b,g)},[x,f]);return[f,y]}var gv=0,yv=()=>`__${String(++gv)}__`;function bv(){let{router:l}=Ng("useSubmit"),{basename:o}=j.useContext(an),c=Db();return j.useCallback(async(d,f={})=>{let{action:x,method:y,encType:_,formData:g,body:b}=Xb(d,o);if(f.navigate===!1){let N=f.fetcherKey||yv();await l.fetch(N,c,f.action||x,{preventScrollReset:f.preventScrollReset,formData:g,body:b,formMethod:f.method||y,formEncType:f.encType||_,flushSync:f.flushSync})}else await l.navigate(f.action||x,{preventScrollReset:f.preventScrollReset,formData:g,body:b,formMethod:f.method||y,formEncType:f.encType||_,replace:f.replace,state:f.state,fromRouteId:c,flushSync:f.flushSync,viewTransition:f.viewTransition})},[l,o,c])}function vv(l,{relative:o}={}){let{basename:c}=j.useContext(an),d=j.useContext(rn);xt(d,"useFormAction must be used inside a RouteContext");let[f]=d.matches.slice(-1),x={...ro(l||".",{relative:o})},y=$s();if(l==null){x.search=y.search;let _=new URLSearchParams(x.search),g=_.getAll("index");if(g.some(N=>N==="")){_.delete("index"),g.filter(E=>E).forEach(E=>_.append("index",E));let N=_.toString();x.search=N?`?${N}`:""}}return(!l||l===".")&&f.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),c!=="/"&&(x.pathname=x.pathname==="/"?c:ea([c,x.pathname])),eo(x)}function jv(l,o={}){let c=j.useContext(fg);xt(c!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:d}=Ng("useViewTransitionState"),f=ro(l,{relative:o.relative});if(!c.isTransitioning)return!1;let x=ta(c.currentLocation.pathname,d)||c.currentLocation.pathname,y=ta(c.nextLocation.pathname,d)||c.nextLocation.pathname;return sd(f.pathname,y)!=null||sd(f.pathname,x)!=null}cg();function wg(l,o){return function(){return l.apply(o,arguments)}}const{toString:_v}=Object.prototype,{getPrototypeOf:dm}=Object,{iterator:xd,toStringTag:Sg}=Symbol,gd=(l=>o=>{const c=_v.call(o);return l[c]||(l[c]=c.slice(8,-1).toLowerCase())})(Object.create(null)),ln=l=>(l=l.toLowerCase(),o=>gd(o)===l),yd=l=>o=>typeof o===l,{isArray:Mi}=Array,to=yd("undefined");function Nv(l){return l!==null&&!to(l)&&l.constructor!==null&&!to(l.constructor)&&xs(l.constructor.isBuffer)&&l.constructor.isBuffer(l)}const Cg=ln("ArrayBuffer");function wv(l){let o;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?o=ArrayBuffer.isView(l):o=l&&l.buffer&&Cg(l.buffer),o}const Sv=yd("string"),xs=yd("function"),Eg=yd("number"),bd=l=>l!==null&&typeof l=="object",Cv=l=>l===!0||l===!1,Qc=l=>{if(gd(l)!=="object")return!1;const o=dm(l);return(o===null||o===Object.prototype||Object.getPrototypeOf(o)===null)&&!(Sg in l)&&!(xd in l)},Ev=ln("Date"),kv=ln("File"),Rv=ln("Blob"),Lv=ln("FileList"),Tv=l=>bd(l)&&xs(l.pipe),Av=l=>{let o;return l&&(typeof FormData=="function"&&l instanceof FormData||xs(l.append)&&((o=gd(l))==="formdata"||o==="object"&&xs(l.toString)&&l.toString()==="[object FormData]"))},Mv=ln("URLSearchParams"),[Pv,Ov,zv,Dv]=["ReadableStream","Request","Response","Headers"].map(ln),Bv=l=>l.trim?l.trim():l.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function io(l,o,{allOwnKeys:c=!1}={}){if(l===null||typeof l>"u")return;let d,f;if(typeof l!="object"&&(l=[l]),Mi(l))for(d=0,f=l.length;d<f;d++)o.call(null,l[d],d,l);else{const x=c?Object.getOwnPropertyNames(l):Object.keys(l),y=x.length;let _;for(d=0;d<y;d++)_=x[d],o.call(null,l[_],_,l)}}function kg(l,o){o=o.toLowerCase();const c=Object.keys(l);let d=c.length,f;for(;d-- >0;)if(f=c[d],o===f.toLowerCase())return f;return null}const kr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis,Rg=l=>!to(l)&&l!==kr;function Zh(){const{caseless:l}=Rg(this)&&this||{},o={},c=(d,f)=>{const x=l&&kg(o,f)||f;Qc(o[x])&&Qc(d)?o[x]=Zh(o[x],d):Qc(d)?o[x]=Zh({},d):Mi(d)?o[x]=d.slice():o[x]=d};for(let d=0,f=arguments.length;d<f;d++)arguments[d]&&io(arguments[d],c);return o}const Uv=(l,o,c,{allOwnKeys:d}={})=>(io(o,(f,x)=>{c&&xs(f)?l[x]=wg(f,c):l[x]=f},{allOwnKeys:d}),l),Fv=l=>(l.charCodeAt(0)===65279&&(l=l.slice(1)),l),qv=(l,o,c,d)=>{l.prototype=Object.create(o.prototype,d),l.prototype.constructor=l,Object.defineProperty(l,"super",{value:o.prototype}),c&&Object.assign(l.prototype,c)},Hv=(l,o,c,d)=>{let f,x,y;const _={};if(o=o||{},l==null)return o;do{for(f=Object.getOwnPropertyNames(l),x=f.length;x-- >0;)y=f[x],(!d||d(y,l,o))&&!_[y]&&(o[y]=l[y],_[y]=!0);l=c!==!1&&dm(l)}while(l&&(!c||c(l,o))&&l!==Object.prototype);return o},Iv=(l,o,c)=>{l=String(l),(c===void 0||c>l.length)&&(c=l.length),c-=o.length;const d=l.indexOf(o,c);return d!==-1&&d===c},Zv=l=>{if(!l)return null;if(Mi(l))return l;let o=l.length;if(!Eg(o))return null;const c=new Array(o);for(;o-- >0;)c[o]=l[o];return c},$v=(l=>o=>l&&o instanceof l)(typeof Uint8Array<"u"&&dm(Uint8Array)),Vv=(l,o)=>{const d=(l&&l[xd]).call(l);let f;for(;(f=d.next())&&!f.done;){const x=f.value;o.call(l,x[0],x[1])}},Yv=(l,o)=>{let c;const d=[];for(;(c=l.exec(o))!==null;)d.push(c);return d},Gv=ln("HTMLFormElement"),Kv=l=>l.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(c,d,f){return d.toUpperCase()+f}),Cx=(({hasOwnProperty:l})=>(o,c)=>l.call(o,c))(Object.prototype),Qv=ln("RegExp"),Lg=(l,o)=>{const c=Object.getOwnPropertyDescriptors(l),d={};io(c,(f,x)=>{let y;(y=o(f,x,l))!==!1&&(d[x]=y||f)}),Object.defineProperties(l,d)},Xv=l=>{Lg(l,(o,c)=>{if(xs(l)&&["arguments","caller","callee"].indexOf(c)!==-1)return!1;const d=l[c];if(xs(d)){if(o.enumerable=!1,"writable"in o){o.writable=!1;return}o.set||(o.set=()=>{throw Error("Can not rewrite read-only method '"+c+"'")})}})},Wv=(l,o)=>{const c={},d=f=>{f.forEach(x=>{c[x]=!0})};return Mi(l)?d(l):d(String(l).split(o)),c},Jv=()=>{},ej=(l,o)=>l!=null&&Number.isFinite(l=+l)?l:o;function tj(l){return!!(l&&xs(l.append)&&l[Sg]==="FormData"&&l[xd])}const sj=l=>{const o=new Array(10),c=(d,f)=>{if(bd(d)){if(o.indexOf(d)>=0)return;if(!("toJSON"in d)){o[f]=d;const x=Mi(d)?[]:{};return io(d,(y,_)=>{const g=c(y,f+1);!to(g)&&(x[_]=g)}),o[f]=void 0,x}}return d};return c(l,0)},nj=ln("AsyncFunction"),aj=l=>l&&(bd(l)||xs(l))&&xs(l.then)&&xs(l.catch),Tg=((l,o)=>l?setImmediate:o?((c,d)=>(kr.addEventListener("message",({source:f,data:x})=>{f===kr&&x===c&&d.length&&d.shift()()},!1),f=>{d.push(f),kr.postMessage(c,"*")}))(`axios@${Math.random()}`,[]):c=>setTimeout(c))(typeof setImmediate=="function",xs(kr.postMessage)),rj=typeof queueMicrotask<"u"?queueMicrotask.bind(kr):typeof process<"u"&&process.nextTick||Tg,ij=l=>l!=null&&xs(l[xd]),ce={isArray:Mi,isArrayBuffer:Cg,isBuffer:Nv,isFormData:Av,isArrayBufferView:wv,isString:Sv,isNumber:Eg,isBoolean:Cv,isObject:bd,isPlainObject:Qc,isReadableStream:Pv,isRequest:Ov,isResponse:zv,isHeaders:Dv,isUndefined:to,isDate:Ev,isFile:kv,isBlob:Rv,isRegExp:Qv,isFunction:xs,isStream:Tv,isURLSearchParams:Mv,isTypedArray:$v,isFileList:Lv,forEach:io,merge:Zh,extend:Uv,trim:Bv,stripBOM:Fv,inherits:qv,toFlatObject:Hv,kindOf:gd,kindOfTest:ln,endsWith:Iv,toArray:Zv,forEachEntry:Vv,matchAll:Yv,isHTMLForm:Gv,hasOwnProperty:Cx,hasOwnProp:Cx,reduceDescriptors:Lg,freezeMethods:Xv,toObjectSet:Wv,toCamelCase:Kv,noop:Jv,toFiniteNumber:ej,findKey:kg,global:kr,isContextDefined:Rg,isSpecCompliantForm:tj,toJSONObject:sj,isAsyncFn:nj,isThenable:aj,setImmediate:Tg,asap:rj,isIterable:ij};function Fe(l,o,c,d,f){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=l,this.name="AxiosError",o&&(this.code=o),c&&(this.config=c),d&&(this.request=d),f&&(this.response=f,this.status=f.status?f.status:null)}ce.inherits(Fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ce.toJSONObject(this.config),code:this.code,status:this.status}}});const Ag=Fe.prototype,Mg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(l=>{Mg[l]={value:l}});Object.defineProperties(Fe,Mg);Object.defineProperty(Ag,"isAxiosError",{value:!0});Fe.from=(l,o,c,d,f,x)=>{const y=Object.create(Ag);return ce.toFlatObject(l,y,function(g){return g!==Error.prototype},_=>_!=="isAxiosError"),Fe.call(y,l.message,o,c,d,f),y.cause=l,y.name=l.name,x&&Object.assign(y,x),y};const lj=null;function $h(l){return ce.isPlainObject(l)||ce.isArray(l)}function Pg(l){return ce.endsWith(l,"[]")?l.slice(0,-2):l}function Ex(l,o,c){return l?l.concat(o).map(function(f,x){return f=Pg(f),!c&&x?"["+f+"]":f}).join(c?".":""):o}function oj(l){return ce.isArray(l)&&!l.some($h)}const cj=ce.toFlatObject(ce,{},null,function(o){return/^is[A-Z]/.test(o)});function vd(l,o,c){if(!ce.isObject(l))throw new TypeError("target must be an object");o=o||new FormData,c=ce.toFlatObject(c,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,M){return!ce.isUndefined(M[S])});const d=c.metaTokens,f=c.visitor||N,x=c.dots,y=c.indexes,g=(c.Blob||typeof Blob<"u"&&Blob)&&ce.isSpecCompliantForm(o);if(!ce.isFunction(f))throw new TypeError("visitor must be a function");function b(B){if(B===null)return"";if(ce.isDate(B))return B.toISOString();if(ce.isBoolean(B))return B.toString();if(!g&&ce.isBlob(B))throw new Fe("Blob is not supported. Use a Buffer instead.");return ce.isArrayBuffer(B)||ce.isTypedArray(B)?g&&typeof Blob=="function"?new Blob([B]):Buffer.from(B):B}function N(B,S,M){let F=B;if(B&&!M&&typeof B=="object"){if(ce.endsWith(S,"{}"))S=d?S:S.slice(0,-2),B=JSON.stringify(B);else if(ce.isArray(B)&&oj(B)||(ce.isFileList(B)||ce.endsWith(S,"[]"))&&(F=ce.toArray(B)))return S=Pg(S),F.forEach(function(T,H){!(ce.isUndefined(T)||T===null)&&o.append(y===!0?Ex([S],H,x):y===null?S:S+"[]",b(T))}),!1}return $h(B)?!0:(o.append(Ex(M,S,x),b(B)),!1)}const E=[],P=Object.assign(cj,{defaultVisitor:N,convertValue:b,isVisitable:$h});function R(B,S){if(!ce.isUndefined(B)){if(E.indexOf(B)!==-1)throw Error("Circular reference detected in "+S.join("."));E.push(B),ce.forEach(B,function(F,I){(!(ce.isUndefined(F)||F===null)&&f.call(o,F,ce.isString(I)?I.trim():I,S,P))===!0&&R(F,S?S.concat(I):[I])}),E.pop()}}if(!ce.isObject(l))throw new TypeError("data must be an object");return R(l),o}function kx(l){const o={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(l).replace(/[!'()~]|%20|%00/g,function(d){return o[d]})}function um(l,o){this._pairs=[],l&&vd(l,this,o)}const Og=um.prototype;Og.append=function(o,c){this._pairs.push([o,c])};Og.toString=function(o){const c=o?function(d){return o.call(this,d,kx)}:kx;return this._pairs.map(function(f){return c(f[0])+"="+c(f[1])},"").join("&")};function dj(l){return encodeURIComponent(l).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zg(l,o,c){if(!o)return l;const d=c&&c.encode||dj;ce.isFunction(c)&&(c={serialize:c});const f=c&&c.serialize;let x;if(f?x=f(o,c):x=ce.isURLSearchParams(o)?o.toString():new um(o,c).toString(d),x){const y=l.indexOf("#");y!==-1&&(l=l.slice(0,y)),l+=(l.indexOf("?")===-1?"?":"&")+x}return l}class Rx{constructor(){this.handlers=[]}use(o,c,d){return this.handlers.push({fulfilled:o,rejected:c,synchronous:d?d.synchronous:!1,runWhen:d?d.runWhen:null}),this.handlers.length-1}eject(o){this.handlers[o]&&(this.handlers[o]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(o){ce.forEach(this.handlers,function(d){d!==null&&o(d)})}}const Dg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},uj=typeof URLSearchParams<"u"?URLSearchParams:um,hj=typeof FormData<"u"?FormData:null,mj=typeof Blob<"u"?Blob:null,fj={isBrowser:!0,classes:{URLSearchParams:uj,FormData:hj,Blob:mj},protocols:["http","https","file","blob","url","data"]},hm=typeof window<"u"&&typeof document<"u",Vh=typeof navigator=="object"&&navigator||void 0,pj=hm&&(!Vh||["ReactNative","NativeScript","NS"].indexOf(Vh.product)<0),xj=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",gj=hm&&window.location.href||"http://localhost",yj=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hm,hasStandardBrowserEnv:pj,hasStandardBrowserWebWorkerEnv:xj,navigator:Vh,origin:gj},Symbol.toStringTag,{value:"Module"})),Jt={...yj,...fj};function bj(l,o){return vd(l,new Jt.classes.URLSearchParams,Object.assign({visitor:function(c,d,f,x){return Jt.isNode&&ce.isBuffer(c)?(this.append(d,c.toString("base64")),!1):x.defaultVisitor.apply(this,arguments)}},o))}function vj(l){return ce.matchAll(/\w+|\[(\w*)]/g,l).map(o=>o[0]==="[]"?"":o[1]||o[0])}function jj(l){const o={},c=Object.keys(l);let d;const f=c.length;let x;for(d=0;d<f;d++)x=c[d],o[x]=l[x];return o}function Bg(l){function o(c,d,f,x){let y=c[x++];if(y==="__proto__")return!0;const _=Number.isFinite(+y),g=x>=c.length;return y=!y&&ce.isArray(f)?f.length:y,g?(ce.hasOwnProp(f,y)?f[y]=[f[y],d]:f[y]=d,!_):((!f[y]||!ce.isObject(f[y]))&&(f[y]=[]),o(c,d,f[y],x)&&ce.isArray(f[y])&&(f[y]=jj(f[y])),!_)}if(ce.isFormData(l)&&ce.isFunction(l.entries)){const c={};return ce.forEachEntry(l,(d,f)=>{o(vj(d),f,c,0)}),c}return null}function _j(l,o,c){if(ce.isString(l))try{return(o||JSON.parse)(l),ce.trim(l)}catch(d){if(d.name!=="SyntaxError")throw d}return(c||JSON.stringify)(l)}const lo={transitional:Dg,adapter:["xhr","http","fetch"],transformRequest:[function(o,c){const d=c.getContentType()||"",f=d.indexOf("application/json")>-1,x=ce.isObject(o);if(x&&ce.isHTMLForm(o)&&(o=new FormData(o)),ce.isFormData(o))return f?JSON.stringify(Bg(o)):o;if(ce.isArrayBuffer(o)||ce.isBuffer(o)||ce.isStream(o)||ce.isFile(o)||ce.isBlob(o)||ce.isReadableStream(o))return o;if(ce.isArrayBufferView(o))return o.buffer;if(ce.isURLSearchParams(o))return c.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),o.toString();let _;if(x){if(d.indexOf("application/x-www-form-urlencoded")>-1)return bj(o,this.formSerializer).toString();if((_=ce.isFileList(o))||d.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return vd(_?{"files[]":o}:o,g&&new g,this.formSerializer)}}return x||f?(c.setContentType("application/json",!1),_j(o)):o}],transformResponse:[function(o){const c=this.transitional||lo.transitional,d=c&&c.forcedJSONParsing,f=this.responseType==="json";if(ce.isResponse(o)||ce.isReadableStream(o))return o;if(o&&ce.isString(o)&&(d&&!this.responseType||f)){const y=!(c&&c.silentJSONParsing)&&f;try{return JSON.parse(o)}catch(_){if(y)throw _.name==="SyntaxError"?Fe.from(_,Fe.ERR_BAD_RESPONSE,this,null,this.response):_}}return o}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Jt.classes.FormData,Blob:Jt.classes.Blob},validateStatus:function(o){return o>=200&&o<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ce.forEach(["delete","get","head","post","put","patch"],l=>{lo.headers[l]={}});const Nj=ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wj=l=>{const o={};let c,d,f;return l&&l.split(`
`).forEach(function(y){f=y.indexOf(":"),c=y.substring(0,f).trim().toLowerCase(),d=y.substring(f+1).trim(),!(!c||o[c]&&Nj[c])&&(c==="set-cookie"?o[c]?o[c].push(d):o[c]=[d]:o[c]=o[c]?o[c]+", "+d:d)}),o},Lx=Symbol("internals");function Zl(l){return l&&String(l).trim().toLowerCase()}function Xc(l){return l===!1||l==null?l:ce.isArray(l)?l.map(Xc):String(l)}function Sj(l){const o=Object.create(null),c=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let d;for(;d=c.exec(l);)o[d[1]]=d[2];return o}const Cj=l=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(l.trim());function Ah(l,o,c,d,f){if(ce.isFunction(d))return d.call(this,o,c);if(f&&(o=c),!!ce.isString(o)){if(ce.isString(d))return o.indexOf(d)!==-1;if(ce.isRegExp(d))return d.test(o)}}function Ej(l){return l.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(o,c,d)=>c.toUpperCase()+d)}function kj(l,o){const c=ce.toCamelCase(" "+o);["get","set","has"].forEach(d=>{Object.defineProperty(l,d+c,{value:function(f,x,y){return this[d].call(this,o,f,x,y)},configurable:!0})})}let gs=class{constructor(o){o&&this.set(o)}set(o,c,d){const f=this;function x(_,g,b){const N=Zl(g);if(!N)throw new Error("header name must be a non-empty string");const E=ce.findKey(f,N);(!E||f[E]===void 0||b===!0||b===void 0&&f[E]!==!1)&&(f[E||g]=Xc(_))}const y=(_,g)=>ce.forEach(_,(b,N)=>x(b,N,g));if(ce.isPlainObject(o)||o instanceof this.constructor)y(o,c);else if(ce.isString(o)&&(o=o.trim())&&!Cj(o))y(wj(o),c);else if(ce.isObject(o)&&ce.isIterable(o)){let _={},g,b;for(const N of o){if(!ce.isArray(N))throw TypeError("Object iterator must return a key-value pair");_[b=N[0]]=(g=_[b])?ce.isArray(g)?[...g,N[1]]:[g,N[1]]:N[1]}y(_,c)}else o!=null&&x(c,o,d);return this}get(o,c){if(o=Zl(o),o){const d=ce.findKey(this,o);if(d){const f=this[d];if(!c)return f;if(c===!0)return Sj(f);if(ce.isFunction(c))return c.call(this,f,d);if(ce.isRegExp(c))return c.exec(f);throw new TypeError("parser must be boolean|regexp|function")}}}has(o,c){if(o=Zl(o),o){const d=ce.findKey(this,o);return!!(d&&this[d]!==void 0&&(!c||Ah(this,this[d],d,c)))}return!1}delete(o,c){const d=this;let f=!1;function x(y){if(y=Zl(y),y){const _=ce.findKey(d,y);_&&(!c||Ah(d,d[_],_,c))&&(delete d[_],f=!0)}}return ce.isArray(o)?o.forEach(x):x(o),f}clear(o){const c=Object.keys(this);let d=c.length,f=!1;for(;d--;){const x=c[d];(!o||Ah(this,this[x],x,o,!0))&&(delete this[x],f=!0)}return f}normalize(o){const c=this,d={};return ce.forEach(this,(f,x)=>{const y=ce.findKey(d,x);if(y){c[y]=Xc(f),delete c[x];return}const _=o?Ej(x):String(x).trim();_!==x&&delete c[x],c[_]=Xc(f),d[_]=!0}),this}concat(...o){return this.constructor.concat(this,...o)}toJSON(o){const c=Object.create(null);return ce.forEach(this,(d,f)=>{d!=null&&d!==!1&&(c[f]=o&&ce.isArray(d)?d.join(", "):d)}),c}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([o,c])=>o+": "+c).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(o){return o instanceof this?o:new this(o)}static concat(o,...c){const d=new this(o);return c.forEach(f=>d.set(f)),d}static accessor(o){const d=(this[Lx]=this[Lx]={accessors:{}}).accessors,f=this.prototype;function x(y){const _=Zl(y);d[_]||(kj(f,y),d[_]=!0)}return ce.isArray(o)?o.forEach(x):x(o),this}};gs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ce.reduceDescriptors(gs.prototype,({value:l},o)=>{let c=o[0].toUpperCase()+o.slice(1);return{get:()=>l,set(d){this[c]=d}}});ce.freezeMethods(gs);function Mh(l,o){const c=this||lo,d=o||c,f=gs.from(d.headers);let x=d.data;return ce.forEach(l,function(_){x=_.call(c,x,f.normalize(),o?o.status:void 0)}),f.normalize(),x}function Ug(l){return!!(l&&l.__CANCEL__)}function Pi(l,o,c){Fe.call(this,l??"canceled",Fe.ERR_CANCELED,o,c),this.name="CanceledError"}ce.inherits(Pi,Fe,{__CANCEL__:!0});function Fg(l,o,c){const d=c.config.validateStatus;!c.status||!d||d(c.status)?l(c):o(new Fe("Request failed with status code "+c.status,[Fe.ERR_BAD_REQUEST,Fe.ERR_BAD_RESPONSE][Math.floor(c.status/100)-4],c.config,c.request,c))}function Rj(l){const o=/^([-+\w]{1,25})(:?\/\/|:)/.exec(l);return o&&o[1]||""}function Lj(l,o){l=l||10;const c=new Array(l),d=new Array(l);let f=0,x=0,y;return o=o!==void 0?o:1e3,function(g){const b=Date.now(),N=d[x];y||(y=b),c[f]=g,d[f]=b;let E=x,P=0;for(;E!==f;)P+=c[E++],E=E%l;if(f=(f+1)%l,f===x&&(x=(x+1)%l),b-y<o)return;const R=N&&b-N;return R?Math.round(P*1e3/R):void 0}}function Tj(l,o){let c=0,d=1e3/o,f,x;const y=(b,N=Date.now())=>{c=N,f=null,x&&(clearTimeout(x),x=null),l.apply(null,b)};return[(...b)=>{const N=Date.now(),E=N-c;E>=d?y(b,N):(f=b,x||(x=setTimeout(()=>{x=null,y(f)},d-E)))},()=>f&&y(f)]}const ad=(l,o,c=3)=>{let d=0;const f=Lj(50,250);return Tj(x=>{const y=x.loaded,_=x.lengthComputable?x.total:void 0,g=y-d,b=f(g),N=y<=_;d=y;const E={loaded:y,total:_,progress:_?y/_:void 0,bytes:g,rate:b||void 0,estimated:b&&_&&N?(_-y)/b:void 0,event:x,lengthComputable:_!=null,[o?"download":"upload"]:!0};l(E)},c)},Tx=(l,o)=>{const c=l!=null;return[d=>o[0]({lengthComputable:c,total:l,loaded:d}),o[1]]},Ax=l=>(...o)=>ce.asap(()=>l(...o)),Aj=Jt.hasStandardBrowserEnv?((l,o)=>c=>(c=new URL(c,Jt.origin),l.protocol===c.protocol&&l.host===c.host&&(o||l.port===c.port)))(new URL(Jt.origin),Jt.navigator&&/(msie|trident)/i.test(Jt.navigator.userAgent)):()=>!0,Mj=Jt.hasStandardBrowserEnv?{write(l,o,c,d,f,x){const y=[l+"="+encodeURIComponent(o)];ce.isNumber(c)&&y.push("expires="+new Date(c).toGMTString()),ce.isString(d)&&y.push("path="+d),ce.isString(f)&&y.push("domain="+f),x===!0&&y.push("secure"),document.cookie=y.join("; ")},read(l){const o=document.cookie.match(new RegExp("(^|;\\s*)("+l+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove(l){this.write(l,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Pj(l){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(l)}function Oj(l,o){return o?l.replace(/\/?\/$/,"")+"/"+o.replace(/^\/+/,""):l}function qg(l,o,c){let d=!Pj(o);return l&&(d||c==!1)?Oj(l,o):o}const Mx=l=>l instanceof gs?{...l}:l;function Lr(l,o){o=o||{};const c={};function d(b,N,E,P){return ce.isPlainObject(b)&&ce.isPlainObject(N)?ce.merge.call({caseless:P},b,N):ce.isPlainObject(N)?ce.merge({},N):ce.isArray(N)?N.slice():N}function f(b,N,E,P){if(ce.isUndefined(N)){if(!ce.isUndefined(b))return d(void 0,b,E,P)}else return d(b,N,E,P)}function x(b,N){if(!ce.isUndefined(N))return d(void 0,N)}function y(b,N){if(ce.isUndefined(N)){if(!ce.isUndefined(b))return d(void 0,b)}else return d(void 0,N)}function _(b,N,E){if(E in o)return d(b,N);if(E in l)return d(void 0,b)}const g={url:x,method:x,data:x,baseURL:y,transformRequest:y,transformResponse:y,paramsSerializer:y,timeout:y,timeoutMessage:y,withCredentials:y,withXSRFToken:y,adapter:y,responseType:y,xsrfCookieName:y,xsrfHeaderName:y,onUploadProgress:y,onDownloadProgress:y,decompress:y,maxContentLength:y,maxBodyLength:y,beforeRedirect:y,transport:y,httpAgent:y,httpsAgent:y,cancelToken:y,socketPath:y,responseEncoding:y,validateStatus:_,headers:(b,N,E)=>f(Mx(b),Mx(N),E,!0)};return ce.forEach(Object.keys(Object.assign({},l,o)),function(N){const E=g[N]||f,P=E(l[N],o[N],N);ce.isUndefined(P)&&E!==_||(c[N]=P)}),c}const Hg=l=>{const o=Lr({},l);let{data:c,withXSRFToken:d,xsrfHeaderName:f,xsrfCookieName:x,headers:y,auth:_}=o;o.headers=y=gs.from(y),o.url=zg(qg(o.baseURL,o.url,o.allowAbsoluteUrls),l.params,l.paramsSerializer),_&&y.set("Authorization","Basic "+btoa((_.username||"")+":"+(_.password?unescape(encodeURIComponent(_.password)):"")));let g;if(ce.isFormData(c)){if(Jt.hasStandardBrowserEnv||Jt.hasStandardBrowserWebWorkerEnv)y.setContentType(void 0);else if((g=y.getContentType())!==!1){const[b,...N]=g?g.split(";").map(E=>E.trim()).filter(Boolean):[];y.setContentType([b||"multipart/form-data",...N].join("; "))}}if(Jt.hasStandardBrowserEnv&&(d&&ce.isFunction(d)&&(d=d(o)),d||d!==!1&&Aj(o.url))){const b=f&&x&&Mj.read(x);b&&y.set(f,b)}return o},zj=typeof XMLHttpRequest<"u",Dj=zj&&function(l){return new Promise(function(c,d){const f=Hg(l);let x=f.data;const y=gs.from(f.headers).normalize();let{responseType:_,onUploadProgress:g,onDownloadProgress:b}=f,N,E,P,R,B;function S(){R&&R(),B&&B(),f.cancelToken&&f.cancelToken.unsubscribe(N),f.signal&&f.signal.removeEventListener("abort",N)}let M=new XMLHttpRequest;M.open(f.method.toUpperCase(),f.url,!0),M.timeout=f.timeout;function F(){if(!M)return;const T=gs.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),q={data:!_||_==="text"||_==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:T,config:l,request:M};Fg(function(D){c(D),S()},function(D){d(D),S()},q),M=null}"onloadend"in M?M.onloadend=F:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(F)},M.onabort=function(){M&&(d(new Fe("Request aborted",Fe.ECONNABORTED,l,M)),M=null)},M.onerror=function(){d(new Fe("Network Error",Fe.ERR_NETWORK,l,M)),M=null},M.ontimeout=function(){let H=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded";const q=f.transitional||Dg;f.timeoutErrorMessage&&(H=f.timeoutErrorMessage),d(new Fe(H,q.clarifyTimeoutError?Fe.ETIMEDOUT:Fe.ECONNABORTED,l,M)),M=null},x===void 0&&y.setContentType(null),"setRequestHeader"in M&&ce.forEach(y.toJSON(),function(H,q){M.setRequestHeader(q,H)}),ce.isUndefined(f.withCredentials)||(M.withCredentials=!!f.withCredentials),_&&_!=="json"&&(M.responseType=f.responseType),b&&([P,B]=ad(b,!0),M.addEventListener("progress",P)),g&&M.upload&&([E,R]=ad(g),M.upload.addEventListener("progress",E),M.upload.addEventListener("loadend",R)),(f.cancelToken||f.signal)&&(N=T=>{M&&(d(!T||T.type?new Pi(null,l,M):T),M.abort(),M=null)},f.cancelToken&&f.cancelToken.subscribe(N),f.signal&&(f.signal.aborted?N():f.signal.addEventListener("abort",N)));const I=Rj(f.url);if(I&&Jt.protocols.indexOf(I)===-1){d(new Fe("Unsupported protocol "+I+":",Fe.ERR_BAD_REQUEST,l));return}M.send(x||null)})},Bj=(l,o)=>{const{length:c}=l=l?l.filter(Boolean):[];if(o||c){let d=new AbortController,f;const x=function(b){if(!f){f=!0,_();const N=b instanceof Error?b:this.reason;d.abort(N instanceof Fe?N:new Pi(N instanceof Error?N.message:N))}};let y=o&&setTimeout(()=>{y=null,x(new Fe(`timeout ${o} of ms exceeded`,Fe.ETIMEDOUT))},o);const _=()=>{l&&(y&&clearTimeout(y),y=null,l.forEach(b=>{b.unsubscribe?b.unsubscribe(x):b.removeEventListener("abort",x)}),l=null)};l.forEach(b=>b.addEventListener("abort",x));const{signal:g}=d;return g.unsubscribe=()=>ce.asap(_),g}},Uj=function*(l,o){let c=l.byteLength;if(c<o){yield l;return}let d=0,f;for(;d<c;)f=d+o,yield l.slice(d,f),d=f},Fj=async function*(l,o){for await(const c of qj(l))yield*Uj(c,o)},qj=async function*(l){if(l[Symbol.asyncIterator]){yield*l;return}const o=l.getReader();try{for(;;){const{done:c,value:d}=await o.read();if(c)break;yield d}}finally{await o.cancel()}},Px=(l,o,c,d)=>{const f=Fj(l,o);let x=0,y,_=g=>{y||(y=!0,d&&d(g))};return new ReadableStream({async pull(g){try{const{done:b,value:N}=await f.next();if(b){_(),g.close();return}let E=N.byteLength;if(c){let P=x+=E;c(P)}g.enqueue(new Uint8Array(N))}catch(b){throw _(b),b}},cancel(g){return _(g),f.return()}},{highWaterMark:2})},jd=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Ig=jd&&typeof ReadableStream=="function",Hj=jd&&(typeof TextEncoder=="function"?(l=>o=>l.encode(o))(new TextEncoder):async l=>new Uint8Array(await new Response(l).arrayBuffer())),Zg=(l,...o)=>{try{return!!l(...o)}catch{return!1}},Ij=Ig&&Zg(()=>{let l=!1;const o=new Request(Jt.origin,{body:new ReadableStream,method:"POST",get duplex(){return l=!0,"half"}}).headers.has("Content-Type");return l&&!o}),Ox=64*1024,Yh=Ig&&Zg(()=>ce.isReadableStream(new Response("").body)),rd={stream:Yh&&(l=>l.body)};jd&&(l=>{["text","arrayBuffer","blob","formData","stream"].forEach(o=>{!rd[o]&&(rd[o]=ce.isFunction(l[o])?c=>c[o]():(c,d)=>{throw new Fe(`Response type '${o}' is not supported`,Fe.ERR_NOT_SUPPORT,d)})})})(new Response);const Zj=async l=>{if(l==null)return 0;if(ce.isBlob(l))return l.size;if(ce.isSpecCompliantForm(l))return(await new Request(Jt.origin,{method:"POST",body:l}).arrayBuffer()).byteLength;if(ce.isArrayBufferView(l)||ce.isArrayBuffer(l))return l.byteLength;if(ce.isURLSearchParams(l)&&(l=l+""),ce.isString(l))return(await Hj(l)).byteLength},$j=async(l,o)=>{const c=ce.toFiniteNumber(l.getContentLength());return c??Zj(o)},Vj=jd&&(async l=>{let{url:o,method:c,data:d,signal:f,cancelToken:x,timeout:y,onDownloadProgress:_,onUploadProgress:g,responseType:b,headers:N,withCredentials:E="same-origin",fetchOptions:P}=Hg(l);b=b?(b+"").toLowerCase():"text";let R=Bj([f,x&&x.toAbortSignal()],y),B;const S=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let M;try{if(g&&Ij&&c!=="get"&&c!=="head"&&(M=await $j(N,d))!==0){let q=new Request(o,{method:"POST",body:d,duplex:"half"}),A;if(ce.isFormData(d)&&(A=q.headers.get("content-type"))&&N.setContentType(A),q.body){const[D,V]=Tx(M,ad(Ax(g)));d=Px(q.body,Ox,D,V)}}ce.isString(E)||(E=E?"include":"omit");const F="credentials"in Request.prototype;B=new Request(o,{...P,signal:R,method:c.toUpperCase(),headers:N.normalize().toJSON(),body:d,duplex:"half",credentials:F?E:void 0});let I=await fetch(B,P);const T=Yh&&(b==="stream"||b==="response");if(Yh&&(_||T&&S)){const q={};["status","statusText","headers"].forEach(O=>{q[O]=I[O]});const A=ce.toFiniteNumber(I.headers.get("content-length")),[D,V]=_&&Tx(A,ad(Ax(_),!0))||[];I=new Response(Px(I.body,Ox,D,()=>{V&&V(),S&&S()}),q)}b=b||"text";let H=await rd[ce.findKey(rd,b)||"text"](I,l);return!T&&S&&S(),await new Promise((q,A)=>{Fg(q,A,{data:H,headers:gs.from(I.headers),status:I.status,statusText:I.statusText,config:l,request:B})})}catch(F){throw S&&S(),F&&F.name==="TypeError"&&/Load failed|fetch/i.test(F.message)?Object.assign(new Fe("Network Error",Fe.ERR_NETWORK,l,B),{cause:F.cause||F}):Fe.from(F,F&&F.code,l,B)}}),Gh={http:lj,xhr:Dj,fetch:Vj};ce.forEach(Gh,(l,o)=>{if(l){try{Object.defineProperty(l,"name",{value:o})}catch{}Object.defineProperty(l,"adapterName",{value:o})}});const zx=l=>`- ${l}`,Yj=l=>ce.isFunction(l)||l===null||l===!1,$g={getAdapter:l=>{l=ce.isArray(l)?l:[l];const{length:o}=l;let c,d;const f={};for(let x=0;x<o;x++){c=l[x];let y;if(d=c,!Yj(c)&&(d=Gh[(y=String(c)).toLowerCase()],d===void 0))throw new Fe(`Unknown adapter '${y}'`);if(d)break;f[y||"#"+x]=d}if(!d){const x=Object.entries(f).map(([_,g])=>`adapter ${_} `+(g===!1?"is not supported by the environment":"is not available in the build"));let y=o?x.length>1?`since :
`+x.map(zx).join(`
`):" "+zx(x[0]):"as no adapter specified";throw new Fe("There is no suitable adapter to dispatch the request "+y,"ERR_NOT_SUPPORT")}return d},adapters:Gh};function Ph(l){if(l.cancelToken&&l.cancelToken.throwIfRequested(),l.signal&&l.signal.aborted)throw new Pi(null,l)}function Dx(l){return Ph(l),l.headers=gs.from(l.headers),l.data=Mh.call(l,l.transformRequest),["post","put","patch"].indexOf(l.method)!==-1&&l.headers.setContentType("application/x-www-form-urlencoded",!1),$g.getAdapter(l.adapter||lo.adapter)(l).then(function(d){return Ph(l),d.data=Mh.call(l,l.transformResponse,d),d.headers=gs.from(d.headers),d},function(d){return Ug(d)||(Ph(l),d&&d.response&&(d.response.data=Mh.call(l,l.transformResponse,d.response),d.response.headers=gs.from(d.response.headers))),Promise.reject(d)})}const Vg="1.10.0",_d={};["object","boolean","number","function","string","symbol"].forEach((l,o)=>{_d[l]=function(d){return typeof d===l||"a"+(o<1?"n ":" ")+l}});const Bx={};_d.transitional=function(o,c,d){function f(x,y){return"[Axios v"+Vg+"] Transitional option '"+x+"'"+y+(d?". "+d:"")}return(x,y,_)=>{if(o===!1)throw new Fe(f(y," has been removed"+(c?" in "+c:"")),Fe.ERR_DEPRECATED);return c&&!Bx[y]&&(Bx[y]=!0,console.warn(f(y," has been deprecated since v"+c+" and will be removed in the near future"))),o?o(x,y,_):!0}};_d.spelling=function(o){return(c,d)=>(console.warn(`${d} is likely a misspelling of ${o}`),!0)};function Gj(l,o,c){if(typeof l!="object")throw new Fe("options must be an object",Fe.ERR_BAD_OPTION_VALUE);const d=Object.keys(l);let f=d.length;for(;f-- >0;){const x=d[f],y=o[x];if(y){const _=l[x],g=_===void 0||y(_,x,l);if(g!==!0)throw new Fe("option "+x+" must be "+g,Fe.ERR_BAD_OPTION_VALUE);continue}if(c!==!0)throw new Fe("Unknown option "+x,Fe.ERR_BAD_OPTION)}}const Wc={assertOptions:Gj,validators:_d},Nn=Wc.validators;let Rr=class{constructor(o){this.defaults=o||{},this.interceptors={request:new Rx,response:new Rx}}async request(o,c){try{return await this._request(o,c)}catch(d){if(d instanceof Error){let f={};Error.captureStackTrace?Error.captureStackTrace(f):f=new Error;const x=f.stack?f.stack.replace(/^.+\n/,""):"";try{d.stack?x&&!String(d.stack).endsWith(x.replace(/^.+\n.+\n/,""))&&(d.stack+=`
`+x):d.stack=x}catch{}}throw d}}_request(o,c){typeof o=="string"?(c=c||{},c.url=o):c=o||{},c=Lr(this.defaults,c);const{transitional:d,paramsSerializer:f,headers:x}=c;d!==void 0&&Wc.assertOptions(d,{silentJSONParsing:Nn.transitional(Nn.boolean),forcedJSONParsing:Nn.transitional(Nn.boolean),clarifyTimeoutError:Nn.transitional(Nn.boolean)},!1),f!=null&&(ce.isFunction(f)?c.paramsSerializer={serialize:f}:Wc.assertOptions(f,{encode:Nn.function,serialize:Nn.function},!0)),c.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?c.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:c.allowAbsoluteUrls=!0),Wc.assertOptions(c,{baseUrl:Nn.spelling("baseURL"),withXsrfToken:Nn.spelling("withXSRFToken")},!0),c.method=(c.method||this.defaults.method||"get").toLowerCase();let y=x&&ce.merge(x.common,x[c.method]);x&&ce.forEach(["delete","get","head","post","put","patch","common"],B=>{delete x[B]}),c.headers=gs.concat(y,x);const _=[];let g=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(c)===!1||(g=g&&S.synchronous,_.unshift(S.fulfilled,S.rejected))});const b=[];this.interceptors.response.forEach(function(S){b.push(S.fulfilled,S.rejected)});let N,E=0,P;if(!g){const B=[Dx.bind(this),void 0];for(B.unshift.apply(B,_),B.push.apply(B,b),P=B.length,N=Promise.resolve(c);E<P;)N=N.then(B[E++],B[E++]);return N}P=_.length;let R=c;for(E=0;E<P;){const B=_[E++],S=_[E++];try{R=B(R)}catch(M){S.call(this,M);break}}try{N=Dx.call(this,R)}catch(B){return Promise.reject(B)}for(E=0,P=b.length;E<P;)N=N.then(b[E++],b[E++]);return N}getUri(o){o=Lr(this.defaults,o);const c=qg(o.baseURL,o.url,o.allowAbsoluteUrls);return zg(c,o.params,o.paramsSerializer)}};ce.forEach(["delete","get","head","options"],function(o){Rr.prototype[o]=function(c,d){return this.request(Lr(d||{},{method:o,url:c,data:(d||{}).data}))}});ce.forEach(["post","put","patch"],function(o){function c(d){return function(x,y,_){return this.request(Lr(_||{},{method:o,headers:d?{"Content-Type":"multipart/form-data"}:{},url:x,data:y}))}}Rr.prototype[o]=c(),Rr.prototype[o+"Form"]=c(!0)});let Kj=class Yg{constructor(o){if(typeof o!="function")throw new TypeError("executor must be a function.");let c;this.promise=new Promise(function(x){c=x});const d=this;this.promise.then(f=>{if(!d._listeners)return;let x=d._listeners.length;for(;x-- >0;)d._listeners[x](f);d._listeners=null}),this.promise.then=f=>{let x;const y=new Promise(_=>{d.subscribe(_),x=_}).then(f);return y.cancel=function(){d.unsubscribe(x)},y},o(function(x,y,_){d.reason||(d.reason=new Pi(x,y,_),c(d.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(o){if(this.reason){o(this.reason);return}this._listeners?this._listeners.push(o):this._listeners=[o]}unsubscribe(o){if(!this._listeners)return;const c=this._listeners.indexOf(o);c!==-1&&this._listeners.splice(c,1)}toAbortSignal(){const o=new AbortController,c=d=>{o.abort(d)};return this.subscribe(c),o.signal.unsubscribe=()=>this.unsubscribe(c),o.signal}static source(){let o;return{token:new Yg(function(f){o=f}),cancel:o}}};function Qj(l){return function(c){return l.apply(null,c)}}function Xj(l){return ce.isObject(l)&&l.isAxiosError===!0}const Kh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Kh).forEach(([l,o])=>{Kh[o]=l});function Gg(l){const o=new Rr(l),c=wg(Rr.prototype.request,o);return ce.extend(c,Rr.prototype,o,{allOwnKeys:!0}),ce.extend(c,o,null,{allOwnKeys:!0}),c.create=function(f){return Gg(Lr(l,f))},c}const be=Gg(lo);be.Axios=Rr;be.CanceledError=Pi;be.CancelToken=Kj;be.isCancel=Ug;be.VERSION=Vg;be.toFormData=vd;be.AxiosError=Fe;be.Cancel=be.CanceledError;be.all=function(o){return Promise.all(o)};be.spread=Qj;be.isAxiosError=Xj;be.mergeConfig=Lr;be.AxiosHeaders=gs;be.formToJSON=l=>Bg(ce.isHTMLForm(l)?new FormData(l):l);be.getAdapter=$g.getAdapter;be.HttpStatusCode=Kh;be.default=be;const{Axios:TS,AxiosError:AS,CanceledError:MS,isCancel:PS,CancelToken:OS,VERSION:zS,all:DS,Cancel:BS,isAxiosError:US,spread:FS,toFormData:qS,AxiosHeaders:HS,HttpStatusCode:IS,formToJSON:ZS,getAdapter:$S,mergeConfig:VS}=be,Kg=j.createContext(),Wj=({children:l})=>{const[o,c]=j.useState(null),[d,f]=j.useState(!0),[x,y]=j.useState(null);j.useEffect(()=>{(async()=>{var H,q;try{const A=localStorage.getItem("user");if(A){const D=JSON.parse(A),V="http://localhost/FARMMASTER-Backend";try{const O=await be.get(`${V}/api/users/session`,{withCredentials:!0,timeout:1e4});if(O.data.status==="success"){const G=O.data.data.user_data,K={id:G.user_id,user_id:G.user_id,role:G.user_role,name:G.first_name+" "+G.last_name,first_name:G.first_name,last_name:G.last_name,email:G.email,phone:G.phone};c(K),localStorage.setItem("user",JSON.stringify(K))}else console.log("Session verification failed:",O.data.message||"Unknown error"),D!=null&&D.id&&localStorage.removeItem(`cartItems_${D.id}`),localStorage.removeItem("user"),c(null)}catch(O){((H=O.response)==null?void 0:H.status)===401?(console.log("Session expired or unauthorized - clearing user data"),D!=null&&D.id&&localStorage.removeItem(`cartItems_${D.id}`),localStorage.removeItem("user"),c(null)):O.code==="ECONNREFUSED"||O.code==="ENOTFOUND"?(console.warn("Cannot connect to server for session verification, keeping user logged in locally"),c(D)):(console.warn("Session verification failed:",((q=O.response)==null?void 0:q.status)||O.message),O.response?(D!=null&&D.id&&localStorage.removeItem(`cartItems_${D.id}`),localStorage.removeItem("user"),c(null)):c(D))}}}catch(A){console.error("Failed to parse stored user",A),localStorage.removeItem("user"),c(null)}f(!1)})(),o&&(()=>{x&&clearInterval(x);const H=setInterval(async()=>{var q;try{(await be.get("http://localhost/FARMMASTER-Backend/api/users/session",{withCredentials:!0,timeout:5e3})).data.status!=="success"&&(console.log("Periodic session check failed - logging out user"),o!=null&&o.id&&localStorage.removeItem(`cartItems_${o.id}`),localStorage.removeItem("user"),c(null))}catch(A){((q=A.response)==null?void 0:q.status)===401&&(console.log("Session expired during periodic check - logging out user"),o!=null&&o.id&&localStorage.removeItem(`cartItems_${o.id}`),localStorage.removeItem("user"),c(null))}},3e4);y(H)})();const I=H=>{sessionStorage.setItem("closingBrowser","true")},T=()=>{if(!sessionStorage.getItem("closingBrowser")){const q=localStorage.getItem("user");if(q)try{const A=JSON.parse(q);A!=null&&A.id&&localStorage.removeItem(`cartItems_${A.id}`)}catch(A){console.warn("Failed to parse user data for cart cleanup",A)}localStorage.removeItem("user"),c(null)}sessionStorage.removeItem("closingBrowser")};return window.addEventListener("beforeunload",I),window.addEventListener("load",T),()=>{x&&clearInterval(x),window.removeEventListener("beforeunload",I),window.removeEventListener("load",T)}},[o]);const _=M=>{var I,T;const F={...M,first_name:M.first_name||((I=M.name)==null?void 0:I.split(" ")[0])||"",last_name:M.last_name||((T=M.name)==null?void 0:T.split(" ").slice(1).join(" "))||"",name:M.name||(M.first_name&&M.last_name?M.first_name+" "+M.last_name:"")};localStorage.setItem("user",JSON.stringify(F)),c(F)},g=async()=>{var M,F,I;try{x&&clearInterval(x),console.log("Starting logout process...");const T="http://localhost/FARMMASTER-Backend";console.log("Calling logout API:",`${T}/api/auth/logout`);const H=await be.post(`${T}/api/auth/logout`,{},{withCredentials:!0,timeout:5e3});console.log("Logout API response:",H.data)}catch(T){console.error("Backend logout failed:"),console.error("- Status:",(M=T.response)==null?void 0:M.status),console.error("- Status Text:",(F=T.response)==null?void 0:F.statusText),console.error("- Response Data:",(I=T.response)==null?void 0:I.data),console.error("- Error Message:",T.message),console.error("- Error Code:",T.code),console.warn("Continuing with local logout despite backend error")}o!=null&&o.id&&(localStorage.removeItem(`cartItems_${o.id}`),console.log("Cleared cart data for user:",o.id)),localStorage.removeItem("user"),c(null),console.log("Local logout completed successfully")},b=()=>o!==null,N=async()=>{var M,F,I;try{const H=await be.get("http://localhost/FARMMASTER-Backend/api/users/session",{withCredentials:!0,timeout:5e3});return H.data.status==="success"&&((M=H.data.data)!=null&&M.user_data)?!0:(console.log("Session verification failed - logging out user"),g(),!1)}catch(T){return console.error("Session verification error:",T),((F=T.response)==null?void 0:F.status)===401||((I=T.response)==null?void 0:I.status)===403?(console.log("Session expired during verification - logging out user"),g(),!1):!0}},E=M=>{if(!o||!M||M.length===0)return!1;const F=o.role,I={Landowner:"Landowner",Supervisor:"Supervisor",Buyer:"Buyer","Operational Manager":"Operational_Manager","Financial Manager":"Financial_Manager",Operational_Manager:"Operational_Manager",Financial_Manager:"Financial_Manager"},T=I[F]||F;return M.some(H=>I[H]===T||H===T)},P=async M=>{var F,I;try{const H=await be.post("http://localhost/FARMMASTER-Backend/api/users/switch-role",{role:M},{withCredentials:!0});if(H.data.status==="success"){const q={...o,role:M,switched_from:o.role};return localStorage.setItem("user",JSON.stringify(q)),c(q),{success:!0,data:H.data}}else return{success:!1,error:H.data.message}}catch(T){return{success:!1,error:((I=(F=T.response)==null?void 0:F.data)==null?void 0:I.message)||"Failed to switch role"}}},R=async()=>{var M,F;try{const T=await be.post("http://localhost/FARMMASTER-Backend/api/users/reset-role",{},{withCredentials:!0});if(T.data.status==="success"){const H={...o,role:T.data.data.role,switched_from:void 0};return localStorage.setItem("user",JSON.stringify(H)),c(H),{success:!0,data:T.data}}else return{success:!1,error:T.data.message}}catch(I){return{success:!1,error:((F=(M=I.response)==null?void 0:M.data)==null?void 0:F.message)||"Failed to reset role"}}},B=()=>o?o.role==="Buyer"||o.role==="Landowner":!1,S=()=>!o||!B()?null:o.role==="Buyer"?"Landowner":"Buyer";return d?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Verifying session..."})]})}):e.jsx(Kg.Provider,{value:{user:o,login:_,logout:g,isAuthenticated:b,hasRole:E,switchRole:P,resetRole:R,canSwitchRole:B,getAvailableRole:S,verifySession:N,loading:d},children:l})},mt=()=>{const l=j.useContext(Kg);if(!l)throw new Error("useAuth must be used within an AuthProvider");return l},ot=({children:l,requiredRoles:o=[]})=>{const{user:c,loading:d}=mt(),f=$s();if(d)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Verifying access..."})]})});if(!c)return e.jsx(nd,{to:"/login",state:{from:f.pathname},replace:!0});if(o.length>0){const x=c.role,y={Landowner:"Landowner",Supervisor:"Supervisor",Buyer:"Buyer","Operational Manager":"Operational_Manager","Financial Manager":"Financial_Manager",Operational_Manager:"Operational_Manager",Financial_Manager:"Financial_Manager"},_=y[x]||x;if(!o.some(b=>y[b]===_||b===_)){const N={Landowner:"/landownerdashboard",Supervisor:"/fieldsupervisordashboard",Buyer:"/buyerdashboard",Operational_Manager:"/operationalmanagerdashboard","Operational Manager":"/operationalmanagerdashboard",Financial_Manager:"/financialmanagerdashboard","Financial Manager":"/financialmanagerdashboard"}[x]||"/";return e.jsx(nd,{to:N,replace:!0})}}return l},Jj=(l=60,o=2)=>{const{logout:c,user:d}=mt(),f=j.useRef(null),x=j.useRef(null),[y,_]=j.useState(!1),g=()=>{f.current&&clearTimeout(f.current),x.current&&clearTimeout(x.current),_(!1),d&&(x.current=setTimeout(()=>{_(!0)},(l-o)*60*1e3),f.current=setTimeout(()=>{console.log("Auto-logout due to inactivity"),c()},l*60*1e3))},b=()=>{d&&g()},N=()=>{_(!1),g()},E=()=>{_(!1),c()};return j.useEffect(()=>{if(d){g();const P=["mousedown","mousemove","keypress","scroll","touchstart","click"];return P.forEach(R=>{document.addEventListener(R,b,!0)}),()=>{f.current&&clearTimeout(f.current),x.current&&clearTimeout(x.current),P.forEach(R=>{document.removeEventListener(R,b,!0)})}}else _(!1)},[d,l,o]),j.useEffect(()=>()=>{f.current&&clearTimeout(f.current),x.current&&clearTimeout(x.current)},[]),{showWarning:y,onStayLoggedIn:N,onLogout:E}},Ts="/assets/logo-CqaX_6YW.png";/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),t_=l=>l.replace(/^([A-Z])|[\s-_]+(\w)/g,(o,c,d)=>d?d.toUpperCase():c.toLowerCase()),Ux=l=>{const o=t_(l);return o.charAt(0).toUpperCase()+o.slice(1)},Qg=(...l)=>l.filter((o,c,d)=>!!o&&o.trim()!==""&&d.indexOf(o)===c).join(" ").trim(),s_=l=>{for(const o in l)if(o.startsWith("aria-")||o==="role"||o==="title")return!0};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=j.forwardRef(({color:l="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:f="",children:x,iconNode:y,..._},g)=>j.createElement("svg",{ref:g,...n_,width:o,height:o,stroke:l,strokeWidth:d?Number(c)*24/Number(o):c,className:Qg("lucide",f),...!x&&!s_(_)&&{"aria-hidden":"true"},..._},[...y.map(([b,N])=>j.createElement(b,N)),...Array.isArray(x)?x:[x]]));/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=(l,o)=>{const c=j.forwardRef(({className:d,...f},x)=>j.createElement(a_,{ref:x,iconNode:o,className:Qg(`lucide-${e_(Ux(l))}`,`lucide-${l}`,d),...f}));return c.displayName=Ux(l),c};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Xg=Pe("activity",r_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],wn=Pe("arrow-left",i_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Wg=Pe("arrow-right",l_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Qh=Pe("bell",o_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],mm=Pe("calculator",c_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Oi=Pe("calendar",d_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],h_=Pe("chart-column",u_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],f_=Pe("chart-line",m_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],x_=Pe("check",p_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],y_=Pe("chevron-left",g_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],v_=Pe("chevron-right",b_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],id=Pe("circle-alert",j_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 8-4 4 4 4",key:"15vm53"}],["path",{d:"M16 12H8",key:"1fr5h0"}]],oo=Pe("circle-arrow-left",__);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],nn=Pe("circle-check-big",N_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ld=Pe("circle-x",w_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],C_=Pe("clipboard-list",S_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ci=Pe("clock",E_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Jg=Pe("credit-card",k_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Nd=Pe("dollar-sign",R_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],T_=Pe("download",L_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],so=Pe("eye-off",A_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ka=Pe("eye",M_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],os=Pe("file-text",P_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],wd=Pe("handshake",O_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],D_=Pe("history",z_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],zi=Pe("house",B_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],F_=Pe("info",U_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],od=Pe("leaf",q_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],I_=Pe("loader",H_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],co=Pe("log-out",Z_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],V_=Pe("mail",$_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Tr=Pe("map-pin",Y_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Di=Pe("menu",G_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],no=Pe("package",K_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Jc=Pe("plus",Q_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],W_=Pe("refresh-cw",X_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],eN=Pe("repeat",J_);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Fx=Pe("search",tN);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],nN=Pe("shield-check",sN);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Ei=Pe("shopping-cart",aN);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],iN=Pe("square-pen",rN);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],oN=Pe("store",lN);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Wl=Pe("trending-up",cN);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],wi=Pe("triangle-alert",dN);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],hN=Pe("user-cog",uN);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],cd=Pe("user",mN);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],pN=Pe("users",fN);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],on=Pe("x",xN),e0=j.createContext(),uo=()=>j.useContext(e0),gN=(l,o,c=30)=>{const d=new Date;d.setTime(d.getTime()+c*24*60*60*1e3),document.cookie=`${l}=${encodeURIComponent(JSON.stringify(o))}; expires=${d.toUTCString()}; path=/; SameSite=Lax`},yN=l=>{const o=l+"=",c=document.cookie.split(";");for(let d=0;d<c.length;d++){let f=c[d];for(;f.charAt(0)===" ";)f=f.substring(1,f.length);if(f.indexOf(o)===0)try{return JSON.parse(decodeURIComponent(f.substring(o.length,f.length)))}catch{return null}}return null},qx=l=>{document.cookie=`${l}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`},bN=({children:l})=>{const{user:o}=mt(),[c,d]=j.useState([]),[f,x]=j.useState(!1),y=(I=null)=>{const T=I||(o==null?void 0:o.id);return T?`cart_${T}`:"cart_guest"},_=(I=null)=>{try{const T=y(I),H=yN(T);return console.log(`Loading cart from cookie: ${T}`,H||[]),H||[]}catch(T){return console.error("Error loading cart from cookie:",T),[]}},g=(I,T=null)=>{try{const H=y(T);gN(H,I,30),console.log(`Cart saved to cookie: ${H}`,I)}catch(H){console.error("Error saving cart to cookie:",H)}};j.useEffect(()=>{console.log("CartContext: User effect triggered",{userId:o==null?void 0:o.id,userExists:!!o});const I=_(o==null?void 0:o.id);d(I),x(!0),console.log("CartContext: Cart loaded from cookie",I)},[o==null?void 0:o.id]),j.useEffect(()=>{f&&g(c,o==null?void 0:o.id)},[c,o==null?void 0:o.id,f]);const F={cartItems:c,setCartItems:d,addToCart:(I,T=1)=>{console.log("CartContext: Adding to cart",{product:I,quantity:T}),d(H=>{const q=H.findIndex(A=>A.name===I.name);if(q!==-1){const A=[...H];return A[q].quantity+=T,A}return[...H,{...I,quantity:T}]})},removeFromCart:I=>{console.log("CartContext: Removing from cart",I),d(T=>T.filter(H=>H.name!==I))},updateQuantity:(I,T)=>{console.log("CartContext: Updating quantity",{name:I,quantity:T}),d(H=>H.map(q=>q.name===I?{...q,quantity:Math.max(1,T)}:q))},clearCart:()=>{console.log("CartContext: Clearing cart"),d([]);const I=y();qx(I)},clearUserCart:I=>{if(console.log("CartContext: Clearing user cart for:",I),I){const T=`cart_${I}`;qx(T),I===(o==null?void 0:o.id)&&d([])}},saveCurrentCart:()=>{g(c,o==null?void 0:o.id)},reloadCart:()=>{console.log("CartContext: Force reloading cart from cookie");const I=_(o==null?void 0:o.id);d(I),console.log("CartContext: Cart reloaded from cookie:",I)},debugCartCookies:()=>{const T=document.cookie.split(";").filter(H=>H.trim().startsWith("cart_"));console.log("All cart cookies:",T),T.forEach(H=>{const[q,A]=H.split("=");try{const D=JSON.parse(decodeURIComponent(A));console.log(`${q.trim()}:`,D)}catch{console.log(`${q.trim()}:`,"Invalid JSON")}})},isInitialized:f};return e.jsx(e0.Provider,{value:F,children:l})},t0=j.createContext(),s0=()=>{const l=j.useContext(t0);return l||{searchQuery:"",updateSearchQuery:()=>{},clearSearch:()=>{}}},vN=({children:l})=>{const[o,c]=j.useState(""),d=x=>{c(x||"")},f=()=>{c("")};return e.jsx(t0.Provider,{value:{searchQuery:o,updateSearchQuery:d,clearSearch:f},children:l})},Qa=({isOpen:l,onClose:o,onConfirm:c,title:d,message:f,confirmText:x="Confirm",cancelText:y="Cancel",type:_="warning"})=>{if(!l)return null;const b={warning:{icon:wi,iconColor:"text-yellow-600",confirmButton:"bg-yellow-600 hover:bg-yellow-700 text-white"},danger:{icon:wi,iconColor:"text-red-600",confirmButton:"bg-red-600 hover:bg-red-700 text-white"},info:{icon:wi,iconColor:"text-blue-600",confirmButton:"bg-blue-600 hover:bg-blue-700 text-white"}}[_],N=b.icon;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 transform transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:`w-6 h-6 ${b.iconColor} mr-3`}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d})]}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(on,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:f})}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 p-6 border-t border-gray-200 bg-gray-50 rounded-b-lg",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:y}),e.jsx("button",{onClick:c,className:`px-4 py-2 text-sm font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ${b.confirmButton}`,children:x})]})]})})};function ho(){const[l,o]=j.useState(!1),[c,d]=j.useState(!1),[f,x]=j.useState(!1),[y,_]=j.useState(!1),[g,b]=j.useState(""),N=$s(),E=Lt(),{cartItems:P}=uo(),{user:R,logout:B}=mt(),{searchQuery:S,updateSearchQuery:M,clearSearch:F}=s0(),I=N.pathname.startsWith("/marketplace"),H=R?{Landowner:"/landownerdashboard",Supervisor:"/fieldsupervisordashboard",Buyer:"/buyerdashboard","Operational Manager":"/operationalmanagerdashboard","Financial Manager":"/financialmanagerdashboard"}[R.role]||"/profile":"/login",q="bg-green-600 text-white px-4 py-2 rounded-full shadow-md transition duration-300",A="text-black hover:text-green-700 px-4 py-2 rounded-full hover:bg-green-100 transition duration-300",D=P.length,V=le=>{le.preventDefault(),!R||R.role!=="Buyer"?x(!0):E("/buyercart")},O=async()=>{try{console.log("Navbar logout initiated..."),await B(),console.log("Navbar logout successful, navigating to home..."),E("/",{replace:!0})}catch(le){console.error("Navbar logout failed:",le),E("/",{replace:!0})}finally{_(!1)}},G=()=>{_(!0)},K=le=>{le.preventDefault(),M(g),I||E("/marketplace"),setTimeout(()=>{const de=document.getElementById("vegetables");de&&de.scrollIntoView({behavior:"smooth"})},100)},Q=le=>{const de=le.target.value;b(de),M(de)},ue=()=>{if(c&&g.trim()){M(g),I||E("/marketplace"),setTimeout(()=>{const le=document.getElementById("vegetables");le&&le.scrollIntoView({behavior:"smooth"})},100);return}d(!c),c&&(b(""),F())};return e.jsxs("nav",{style:{backgroundColor:"#F0FFED"},className:"fixed top-0 w-full z-50 py-2 px-6 md:px-12 flex items-center justify-between shadow-sm font-poppins",children:[e.jsx("div",{className:"flex items-center space-x-2 z-50",children:e.jsx(Ee,{to:"/",onClick:()=>o(!1),children:e.jsx("img",{src:Ts,alt:"FarmMaster Logo",className:"h-20 w-auto"})})}),e.jsx("ul",{className:"hidden md:flex space-x-6 font-semibold text-lg items-center absolute left-1/2 transform -translate-x-1/2",style:{pointerEvents:l?"none":"auto"},children:["/","/marketplace","/about","/contact"].map((le,de)=>e.jsx("li",{children:e.jsx(Ee,{to:le,className:({isActive:z})=>z?q:A,children:le==="/"?"Home":le.charAt(1).toUpperCase()+le.slice(2)})},de))}),e.jsxs("div",{className:"hidden md:flex items-center space-x-6 z-50",children:[I&&e.jsxs(e.Fragment,{children:[c&&e.jsx("form",{onSubmit:K,className:"flex items-center",children:e.jsx("input",{type:"text",value:g,onChange:Q,placeholder:"Search products...",className:"border border-gray-300 rounded-full px-4 py-1 w-48 outline-none focus:ring-2 focus:ring-green-300 transition duration-300",autoFocus:!0})}),e.jsx(Fx,{className:`cursor-pointer transition ${c&&g.trim()?"text-green-600 hover:text-green-800":"hover:text-green-700"}`,onClick:ue,title:c&&g.trim()?"Search products":"Toggle search"}),e.jsxs("button",{onClick:V,className:"relative",children:[e.jsx(Ei,{className:"hover:text-green-700 cursor-pointer transition"}),D>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:D})]})]}),R?e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Ee,{to:H,className:"text-green-700 hover:underline",children:e.jsx(cd,{})}),e.jsx("button",{onClick:G,className:"bg-white text-black font-bold border border-gray-300 px-4 py-2 rounded-full hover:bg-gray-100 transition cursor-pointer",children:"Logout"})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{to:"/register",children:e.jsx("button",{className:"bg-green-500 text-white font-bold px-4 py-2 rounded-full shadow-md hover:bg-green-600 transition cursor-pointer",children:"Register"})}),e.jsx(Ee,{to:"/login",children:e.jsx("button",{className:"bg-white text-black font-bold border border-gray-300 px-4 py-2 rounded-full hover:bg-gray-100 transition cursor-pointer",children:"Log In"})})]})]}),e.jsxs("div",{className:"flex md:hidden items-center space-x-5 z-50",children:[I&&e.jsxs(e.Fragment,{children:[c&&e.jsx("form",{onSubmit:K,className:"flex items-center",children:e.jsx("input",{type:"text",value:g,onChange:Q,placeholder:"Search products...",className:"border border-gray-300 rounded-full px-4 py-1 w-40 outline-none focus:ring-2 focus:ring-green-300 transition duration-300",autoFocus:!0})}),e.jsx(Fx,{className:`cursor-pointer transition ${c&&g.trim()?"text-green-600 hover:text-green-800":"hover:text-green-700"}`,onClick:ue,title:c&&g.trim()?"Search products":"Toggle search"}),e.jsxs("button",{onClick:V,className:"relative",children:[e.jsx(Ei,{className:"hover:text-green-700 cursor-pointer transition"}),D>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:D})]})]}),e.jsx(Ee,{to:R?H:"/login",className:"text-green-700",children:e.jsx(cd,{})}),e.jsx("button",{onClick:()=>o(!l),className:"ml-2 cursor-pointer",children:l?e.jsx(on,{size:24}):e.jsx(Di,{size:24})})]}),l&&e.jsxs("div",{className:"absolute top-20 left-0 w-full bg-green-50 shadow-md flex flex-col items-center space-y-4 py-4 md:hidden z-40",children:[["/","/marketplace","/about","/contact"].map((le,de)=>e.jsx(Ee,{to:le,className:({isActive:z})=>z?q:A,onClick:()=>o(!1),children:le==="/"?"Home":le.charAt(1).toUpperCase()+le.slice(2)},de)),R?e.jsx("button",{onClick:()=>{G(),o(!1)},className:"bg-white text-black font-bold border border-gray-300 px-4 py-2 rounded-full hover:bg-gray-100 transition cursor-pointer",children:"Logout"}):e.jsxs("div",{className:"flex flex-col items-center space-y-2 w-4/5",children:[e.jsx(Ee,{to:"/register",onClick:()=>o(!1),className:"w-full",children:e.jsx("button",{className:"bg-green-500 text-white font-bold px-4 py-2 rounded-full w-full shadow-md hover:bg-green-600 transition cursor-pointer",children:"Register"})}),e.jsx(Ee,{to:"/login",onClick:()=>o(!1),className:"w-full",children:e.jsx("button",{className:"bg-white text-black font-bold border border-gray-300 px-4 py-2 rounded-full w-full hover:bg-gray-100 transition cursor-pointer",children:"Log In"})})]})]}),f&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-[999]",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-sm w-full text-center border border-green-600",children:[e.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-800",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Only registered buyers can access the cart."}),e.jsxs("div",{className:"flex justify-center gap-4",children:[!R&&e.jsx("button",{onClick:()=>{E("/register"),x(!1)},className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"Go to Register"}),e.jsx("button",{onClick:()=>x(!1),className:"bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400 transition",children:"Cancel"})]})]})}),e.jsx(Qa,{isOpen:y,onClose:()=>_(!1),onConfirm:O,title:"Confirm Logout",message:"Are you sure you want to logout? You will be redirected to the home page and will need to login again to access your dashboard.",confirmText:"Yes, Logout",cancelText:"Cancel",type:"warning"})]})}const fm=()=>e.jsxs("footer",{className:"bg-gray-900 text-white px-6 py-10",children:[e.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"flex flex-col items-start space-y-3",children:[e.jsx("img",{src:Ts,alt:"Farm Master Logo",className:"h-20 w-auto"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Transforming agriculture through",e.jsx("br",{}),"technology and sustainable farming",e.jsx("br",{}),"practices."]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Services"}),e.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[e.jsx("li",{children:"Land Analysis"}),e.jsx("li",{children:"Crop Recommendations"}),e.jsx("li",{children:"Farm Management"}),e.jsx("li",{children:"Organic Marketplace"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Support"}),e.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[e.jsx("li",{children:"Help Center"}),e.jsx("li",{children:"Contact Us"}),e.jsx("li",{children:"Community"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Contact"}),e.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[e.jsx("li",{children:"support@farmmaster.lk"}),e.jsx("li",{children:"+94 77 123 4567"}),e.jsx("li",{children:"Badulla, Sri Lanka"})]})]})]}),e.jsx("div",{className:"border-t border-gray-700 mt-10 pt-4 text-center text-sm text-gray-500",children:" 2025 Farm Master. All rights reserved."})]}),jN="/assets/farm-hero-BAms5SL8.jpg",_N=()=>e.jsxs("section",{className:"max-w-[1240px] mx-auto mt-10 rounded-3xl overflow-hidden bg-[#E9FFE7] flex flex-col md:flex-row shadow-md",children:[e.jsx("div",{className:"w-full md:w-1/2 flex items-center justify-center px-8 py-10 md:py-16",children:e.jsxs("div",{className:"flex flex-col items-center text-center space-y-5 w-full max-w-md",children:[e.jsxs("h1",{className:"text-4xl md:text-7xl font-bold text-black leading-tight",children:["Farm",e.jsx("span",{className:"text-green-600",children:"Master"})]}),e.jsx("p",{className:"text-gray-500 text-base md:text-lg font-medium",children:"Organic Farming Management System"}),e.jsxs("p",{className:"text-xl md:text-2xl font-semibold text-black leading-snug",children:["Transform your Land into ",e.jsx("br",{className:"hidden md:block"}),"Profitable Organic Farms"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center pt-2",children:[e.jsx(Ee,{to:"/register",children:e.jsxs("button",{className:"bg-green-600 text-white px-6 py-2.5 rounded-full font-semibold flex items-center justify-center gap-2 hover:bg-green-700 transition",children:["Start Your Journey ",e.jsx(Wg,{size:18})]})}),e.jsx(Ee,{to:"/about",children:e.jsx("button",{className:"border border-black px-6 py-2.5 rounded-full font-semibold text-black hover:bg-gray-100 transition",children:"Learn More"})})]})]})}),e.jsx("div",{className:"w-full md:w-1/2 h-[300px] md:h-auto",children:e.jsx("img",{src:jN,alt:"Farm Master Hero",className:"w-full h-full object-cover"})})]}),NN=[{icon:e.jsx(od,{size:24}),title:"Professional Land Analysis",description:["Comprehensive soil testing","Environmental condition analysis","Professional field supervisor visits","Detailed digital reports"]},{icon:e.jsx(f_,{size:24}),title:"Smart Crop Recommendation",description:["Data-driven crop selection","Yield predictions","Market price analysis","Seasonal planning"]},{icon:e.jsx(os,{size:24}),title:"Profit Optimization",description:["Automated profit calculations","Transparent cost breakdown","Digital agreements","Regular financial reports"]},{icon:e.jsx(hN,{size:24}),title:"Expert Management",description:["Dedicated field supervisors","Operational management","Quality assurance","Regular progress updates"]},{icon:e.jsx(Ei,{size:24}),title:"Organic Marketplace",description:["Bulk product listings","Verified buyer network","Competitive pricing","Secure transactions"]},{icon:e.jsx(nN,{size:24}),title:"Secure & Transparent",description:["Digital contract management","Secure payment gateway","Real-time tracking","Data protection"]}],wN=()=>e.jsxs("section",{className:"max-w-7xl mx-auto px-4 md:px-8 py-16 mt-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Complete Farming Solution"}),e.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto leading-relaxed",children:"From land analysis to harvest sales, we provide everything you need for successful organic farming"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:NN.map((l,o)=>e.jsxs("div",{className:"border border-gray-200 rounded-xl p-6 shadow-sm bg-white transition hover:shadow-lg hover:-translate-y-1 duration-200",children:[e.jsx("div",{className:"mb-4 flex items-center justify-center w-12 h-12 bg-green-100 text-green-600 rounded-full",children:l.icon}),e.jsx("h3",{className:"font-semibold text-lg mb-3 text-gray-800",children:l.title}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1 list-disc list-inside",children:l.description.map((c,d)=>e.jsx("li",{children:c},d))})]},o))})]}),SN=[{number:1,title:"Request Land Report",description:"Submit your land details and make secure online payment for professional analysis"},{number:2,title:"Professional Assessment",description:"Certified field supervisors visit your land and conduct comprehensive soil analysis"},{number:3,title:"Get Recommendations",description:"Receive detailed crop recommendations and profit projections based on your land"},{number:4,title:"Start Earning",description:"Sign digital agreements and start earning from your land through organic cultivation"}],CN=()=>e.jsxs("section",{className:"max-w-7xl mx-auto px-4 md:px-8 py-16",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"How Farm Master Works"}),e.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto leading-relaxed",children:"Simple steps to transform your land into a profitable organic farm"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-10 text-center",children:SN.map((l,o)=>e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 text-white font-bold flex items-center justify-center text-lg",children:l.number}),e.jsx("h3",{className:"font-semibold text-base",children:l.title}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:l.description})]},o))})]}),EN=()=>e.jsx("section",{className:"bg-green-500 mt-30 py-10 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-4",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white",children:"Ready to Maximize Your Land's Potential?"}),e.jsx("p",{className:"text-white text-lg",children:"Join thousands of landowners who are already earning from sustainable organic farming"}),e.jsx(Ee,{to:"/register",children:e.jsx("button",{className:"mt-4 bg-white text-green-500 font-medium px-6 py-2 rounded hover:bg-green-100 transition",children:"Get Started Today"})})]})}),kN="/assets/hero-BtWQYEf4.png",RN=()=>e.jsxs("section",{className:"max-w-[1240px] mx-auto mt-10 rounded-3xl overflow-hidden bg-[#F0FFED] flex flex-col md:flex-row shadow-md",children:[e.jsx("div",{className:"w-full md:w-1/2 flex items-center justify-center px-8 py-10 md:py-16",children:e.jsxs("div",{className:"flex flex-col items-center text-center space-y-5 w-full max-w-md",children:[e.jsxs("h1",{className:"text-4xl md:text-7xl font-bold text-black leading-tight",children:["Market",e.jsx("span",{className:"text-green-600",children:"place"})]}),e.jsx("p",{className:"text-gray-500 text-base md:text-lg font-medium",children:"Fresh & Healthy Organic Foods"}),e.jsxs("p",{className:"text-xl md:text-2xl font-semibold text-black leading-snug",children:["Shop Fresh Organic Produce - ",e.jsx("br",{className:"hidden md:block"}),"Direct from the Farm!"]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center pt-2",children:e.jsx(Ee,{to:"/marketplace",children:e.jsxs("button",{className:"bg-green-600 text-white px-6 py-2.5 rounded-full font-semibold flex items-center justify-center gap-2 hover:bg-green-700 transition",children:["Shop Now ",e.jsx(Wg,{size:18})]})})})]})}),e.jsx("div",{className:"hidden md:block w-full md:w-1/2 h-[300px] md:h-auto",children:e.jsx("img",{src:kN,alt:"Marketplace Hero",className:"w-full h-full object-cover"})})]});function LN(){return e.jsxs("div",{className:"pt-24",children:[e.jsx(ho,{}),e.jsx(_N,{}),e.jsx(wN,{}),e.jsx(CN,{}),e.jsx(RN,{}),e.jsx(EN,{}),e.jsx(fm,{})]})}const TN="/assets/vegetables_hero1-DivzWOLo.png",AN=()=>e.jsxs("section",{style:{backgroundColor:"#F0FFED"},className:"flex flex-col md:flex-row rounded-2xl overflow-hidden max-w-5xl mx-auto mt-10 h-auto md:h-[400px]",children:[e.jsx("div",{className:"flex items-center justify-center w-full md:w-1/2 p-4 md:p-8",children:e.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[e.jsxs("h1",{className:"text-6xl font-bold",children:["Organic ",e.jsx("span",{className:"text-green-500",children:"Vegetables"})]}),e.jsx("p",{className:"text-gray-600 text-xl",children:"Eat Fresh. Live Healthy."}),e.jsxs("p",{className:"text-2xl font-medium",children:["Get 100% organic vegetables",e.jsx("br",{}),"grown with love and care"]})]})}),e.jsx("div",{className:"hidden md:block w-full md:w-1/2 h-[300px] md:h-auto",children:e.jsx("img",{src:TN,alt:"Vegetables",className:"w-full h-full object-cover"})})]}),MN="/assets/vegetablesnew-CtmRq64D.png",PN=()=>{const l=o=>{o.preventDefault();const c=document.getElementById("vegetables");c&&c.scrollIntoView({behavior:"smooth"})};return e.jsx("section",{className:"pt-16 mt-10",children:e.jsxs("div",{className:"relative z-10 max-w-4xl w-full mx-auto rounded-3xl shadow-2xl bg-white/95 p-10 flex flex-col md:flex-row items-center justify-between",children:[e.jsx("div",{className:"flex-1 flex justify-center items-center mb-8 md:mb-0 md:order-1",children:e.jsx("img",{src:MN,alt:"Vegetable Marketplace",className:"w-72 h-72 object-contain drop-shadow-xl",style:{background:"none"}})}),e.jsxs("div",{className:"flex-1 flex flex-col items-start justify-center px-2 md:px-6 md:order-2",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-green-700 mb-4 text-left drop-shadow-lg tracking-tight",children:"Organic Marketplace"}),e.jsx("p",{className:"text-gray-700 mb-6 text-left text-lg leading-relaxed",children:"Welcome to Sri Lanka's trusted online marketplace for organic vegetables. Browse, shop, and enjoy fresh, healthy produce delivered from local farms directly to your table."}),e.jsx("a",{href:"#vegetables",onClick:l,className:"bg-gradient-to-r from-green-600 to-lime-400 text-white px-8 py-3 rounded-full font-bold shadow-lg hover:scale-105 transition text-lg",children:"Shop Now"})]})]})})},ON="http://localhost/FARMMASTER-Backend",n0=j.createContext(),zN=({children:l})=>{const[o,c]=j.useState([]),[d,f]=j.useState(!0),[x,y]=j.useState(null),[_,g]=j.useState(Date.now()),b=async()=>{try{f(!0);const R=await be.get(`${ON}/api.php/products`,{withCredentials:!0});if(R.data.status==="success"){const B=R.data.data;if(Array.isArray(B)){const S=B.map(M=>({id:parseInt(M.product_id),product_id:parseInt(M.product_id),name:`Organic ${M.crop_name}`,crop_name:M.crop_name,image_url:M.image_url||"",description:M.description,price:parseFloat(M.price_per_unit),price_per_unit:parseFloat(M.price_per_unit),quantity:parseFloat(M.quantity),status:M.quantity===0?"sold":M.status?M.status.toLowerCase():"",is_featured:!!M.is_featured}));c(S),g(Date.now()),y(null),console.log("Products fetched successfully:",S.length,"items")}else c([])}else c([])}catch(R){c([]),console.error("Error fetching products:",R),y(R.message)}finally{f(!1)}};j.useEffect(()=>{b();const R=setInterval(()=>{console.log("Auto-refreshing products..."),b()},3e4);return()=>clearInterval(R)},[]),j.useEffect(()=>{const R=()=>{document.hidden||Date.now()-_>1e4&&(console.log("Tab became visible, refreshing products..."),b())};return document.addEventListener("visibilitychange",R),()=>document.removeEventListener("visibilitychange",R)},[_]);const P={products:o,loading:d,error:x,fetchProducts:b,forceRefresh:()=>{console.log("Force refreshing products..."),b()},updateProduct:(R,B)=>{c(S=>S.map(M=>M.id===R?{...M,...B}:M))},lastFetchTime:_};return e.jsx(n0.Provider,{value:P,children:l})},Sd=()=>j.useContext(n0),DN=()=>{j.useRef(null);const{products:l}=Sd(),[o,c]=j.useState(0),d=l.filter(b=>b.is_featured&&b.status!=="unavailable"),f=3,x=Math.ceil(d.length/f),y=b=>{c(b==="left"?N=>N>0?N-1:x-1:N=>N<x-1?N+1:0)},g=(()=>{const b=o*f;return d.slice(b,b+f)})();return e.jsx("section",{className:"flex justify-center py-20 px-4 md:px-10 mt-15",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-6xl w-full p-10 relative shadow-2xl",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-center mb-10 text-green-700 drop-shadow-lg",children:"Featured Products"}),d.length===0?e.jsx("p",{className:"text-gray-600 text-center",children:"No featured products available at the moment."}):e.jsxs(e.Fragment,{children:[x>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>y("left"),className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-20 bg-green-600 hover:bg-green-700 text-white p-3 rounded-full shadow-lg transition-all duration-300 hover:scale-110",children:e.jsx(y_,{size:24})}),e.jsx("button",{onClick:()=>y("right"),className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-20 bg-green-600 hover:bg-green-700 text-white p-3 rounded-full shadow-lg transition-all duration-300 hover:scale-110",children:e.jsx(v_,{size:24})})]}),e.jsx("div",{className:`grid gap-8 px-1 ${g.length===1?"grid-cols-1 justify-items-center":g.length===2?"grid-cols-1 md:grid-cols-2":"grid-cols-1 md:grid-cols-3"}`,children:g.map((b,N)=>e.jsxs("div",{className:"bg-white border border-green-200 rounded-xl p-6 text-center shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 h-[280px] flex flex-col justify-between relative max-w-sm mx-auto w-full",children:[e.jsxs("div",{children:[e.jsx("img",{src:b.image_url||"",alt:b.name,className:"w-28 h-28 mx-auto mb-4 object-contain"}),e.jsx("h3",{className:"text-lg font-semibold text-green-700 mb-1",children:b.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:b.description||"No description available"})]}),b.status==="sold"&&e.jsx("span",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs font-semibold px-2 py-1 rounded",children:"Sold Out"}),e.jsx("div",{className:"mt-auto",children:e.jsxs("p",{className:"text-green-600 font-semibold text-lg",children:["Rs. ",parseFloat(b.price||0).toFixed(2)]})})]},`${o}-${N}`))}),x>1&&e.jsx("div",{className:"flex justify-center mt-8 space-x-2",children:Array.from({length:x}).map((b,N)=>e.jsx("button",{onClick:()=>c(N),className:`w-3 h-3 rounded-full transition-all duration-300 ${N===o?"bg-green-600 scale-125":"bg-gray-300 hover:bg-gray-400"}`},N))}),x>1&&e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing"," ",o*f+1," -"," ",Math.min((o+1)*f,d.length)," ","of ",d.length," featured products"]})})]})]})})},BN="/assets/right-veg-CYP6YDgX.png",UN="/assets/left-veg1-DNfdpWGM.png",FN=()=>{const{products:l,forceRefresh:o}=Sd(),{addToCart:c}=uo(),{user:d}=mt(),{searchQuery:f,clearSearch:x}=s0(),y=Lt(),[_,g]=j.useState([]),[b,N]=j.useState(!1),[E,P]=j.useState(!1),[R,B]=j.useState({show:!1,message:"",availableQuantity:0,requestedQuantity:0,cropName:""});j.useEffect(()=>{g(l.map(()=>1))},[l]);const S=A=>{g(D=>D.map((V,O)=>O===A?V+1:V))},M=A=>{g(D=>D.map((V,O)=>O===A&&V>1?V-1:V))},F=async(A,D)=>{try{const V="http://localhost/FARMMASTER-Backend";console.log("Validation request:",{product_id:A.id||A.product_id,quantity:D,product_name:A.name,current_quantity_shown:A.quantity});const G=await(await fetch(`${V}/api/products/validate-quantity`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({product_id:A.id||A.product_id,quantity:D})})).json();return console.log("Validation response:",G),G}catch(V){return console.error("Error validating quantity:",V),{status:"error",message:"Failed to validate quantity. Please try again."}}},I=async(A,D)=>{var O;if(console.log("Add to cart attempt:",{product:A,requested_quantity:D,product_id:A.id||A.product_id,available_quantity:A.quantity}),!d||!d.id){console.log("User not logged in, showing register popup"),N(!0);return}if(d.role!=="Buyer"&&d.role!=="buyer"){console.log("User is not a buyer, showing role popup"),P(!0);return}if(D<=A.quantity){console.log("Quantity check passed locally, adding to cart:",A,"quantity:",D),c(A,D),setTimeout(()=>{console.log("Refreshing products after cart addition..."),o()},1e3),B({show:!0,message:`${D} Kg of ${A.name} added to cart successfully!`,availableQuantity:A.quantity,requestedQuantity:D,cropName:A.name,type:"success"});return}const V=await F(A,D);if(console.log("Validation result:",V),V.status==="success")console.log("Adding to cart:",A,"quantity:",D),c(A,D),B({show:!0,message:`${D} Kg of ${A.name} added to cart successfully!`,availableQuantity:((O=V.data)==null?void 0:O.available_quantity)||A.quantity,requestedQuantity:D,cropName:A.name,type:"success"});else{const G=V.data||{};console.log("Quantity validation failed:",{errorData:G,available_from_response:G.available_quantity,available_from_product:A.quantity}),B({show:!0,message:V.message||`Only ${G.available_quantity||A.quantity} Kg available for ${A.name}`,availableQuantity:G.available_quantity||A.quantity,requestedQuantity:G.requested_quantity||D,cropName:G.crop_name||A.name,type:"error"})}},T=(A,D)=>{if(!D||D.trim()==="")return A;const V=D.toLowerCase().trim();return A.filter(O=>{var G;return O.name.toLowerCase().includes(V)||O.description.toLowerCase().includes(V)||((G=O.category)==null?void 0:G.toLowerCase().includes(V))})},H=l.filter(A=>A.status==="available"||A.quantity===0),q=T(H,f);return j.useEffect(()=>{const A=()=>{console.log("Window focused, refreshing products..."),o()};return window.addEventListener("focus",A),()=>window.removeEventListener("focus",A)},[o]),e.jsx("section",{id:"vegetables",className:"relative flex justify-center py-20 px-4 md:px-10",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-5xl w-full pt-0 pb-10 overflow-hidden relative shadow-2xl",children:[e.jsxs("div",{className:"bg-green-600 text-white text-center py-10 px-4 relative rounded-t-2xl",children:[e.jsx("h2",{className:"text-3xl md:text-5xl font-extrabold drop-shadow-lg",children:f?`Search Results: "${f}"`:"All Organic Vegetables"}),f&&e.jsxs("p",{className:"text-green-100 mt-2",children:["Found ",q.length," product",q.length!==1?"s":""]}),e.jsx("img",{src:UN,alt:"Left Veg",className:"absolute left-0 top-4 w-28 md:w-30 hidden md:block"}),e.jsx("img",{src:BN,alt:"Right Veg",className:"absolute right-0 top-0 w-20 md:w-26 hidden md:block"})]}),e.jsxs("div",{className:"grid gap-8 px-8 mt-10",style:{gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))"},children:[q.map((A,D)=>e.jsxs("div",{className:"rounded-xl shadow-lg border border-gray-200 p-6 flex flex-col justify-between items-center text-center h-[420px] bg-white transition hover:scale-105 hover:shadow-xl",children:[e.jsx("img",{src:A.image_url||"",alt:A.name,className:"w-28 h-28 object-contain mb-2"}),e.jsx("h3",{className:"font-bold text-lg text-green-700 mb-1",children:A.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:A.description}),e.jsxs("p",{className:"text-green-600 font-semibold text-md mb-2",children:["Rs. ",parseFloat(A.price).toFixed(2)]}),e.jsxs("p",{className:"text-m text-gray-500 mb-2",children:["Available: ",A.quantity," Kg"]}),e.jsxs("div",{className:"border mt-1 rounded flex justify-between items-center w-32 text-l whitespace-nowrap",children:[e.jsx("button",{className:"px-3 cursor-pointer",onClick:()=>M(D),disabled:A.quantity===0,children:"-"}),e.jsxs("span",{className:"px-2",children:[_[D]," Kg"]}),e.jsx("button",{className:"px-3 cursor-pointer",onClick:()=>S(D),disabled:A.quantity===0,children:"+"})]}),_[D]>A.quantity&&A.quantity>0&&e.jsxs("div",{className:"mt-2 mb-1",children:[e.jsxs("p",{className:"text-xs text-red-600 font-semibold bg-red-50 px-2 py-1 rounded border border-red-200",children:["Only ",A.quantity," Kg available in stock!"]}),e.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["Please adjust quantity to ",A.quantity," Kg or less"]})]}),A.quantity===0?e.jsx("button",{disabled:!0,className:"mt-3 bg-red-500 text-white font-semibold px-4 py-1 rounded cursor-not-allowed text-sm",children:"Sold Out"}):e.jsx("button",{onClick:()=>I(A,_[D]),className:`mt-3 font-semibold px-4 py-1 rounded text-sm cursor-pointer transition-colors ${_[D]>A.quantity?"bg-orange-500 hover:bg-orange-600 text-white border-2 border-orange-600":"bg-green-600 hover:bg-green-700 text-white"}`,children:_[D]>A.quantity?"Check Quantity":"Add to Cart"})]},A.id)),q.length===0&&f&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Product Not Found"}),e.jsxs("p",{className:"text-gray-500 mb-2",children:['No products found for "',f,'"']}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Try searching with different keywords or check the spelling"}),e.jsx("button",{onClick:()=>{x()},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition",children:"Clear Search & View All Products"})]}),q.length===0&&!f&&e.jsx("p",{className:"text-center col-span-full text-gray-600",children:"No products to display at the moment."})]}),b&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-sm w-full text-center border border-green-600",children:[e.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-800",children:"Sign in as Buyer"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You must be logged in as a buyer to add items to your cart."}),e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsx("button",{onClick:()=>y("/login"),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"Sign In"}),e.jsx("button",{onClick:()=>y("/register"),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"Register"}),e.jsx("button",{onClick:()=>N(!1),className:"bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400 transition",children:"Cancel"})]})]})}),E&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-sm w-full text-center border border-green-600",children:[e.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-800",children:"Access Restricted"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Only users with a Buyer account can add items to the cart."}),e.jsx("div",{className:"flex justify-center gap-4",children:e.jsx("button",{onClick:()=>P(!1),className:"bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400 transition",children:"Close"})})]})}),R.show&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:e.jsxs("div",{className:`bg-white p-6 rounded-lg shadow-xl max-w-md w-full text-center border-2 ${R.type==="success"?"border-green-600":"border-red-600"}`,children:[e.jsx("div",{className:`text-4xl mb-4 ${R.type==="success"?"text-green-600":"text-red-600"}`,children:R.type==="success"?"Success":"Warning"}),e.jsx("h2",{className:`text-lg font-bold mb-3 ${R.type==="success"?"text-green-800":"text-red-800"}`,children:R.type==="success"?"Added to Cart!":"Quantity Not Available"}),e.jsx("p",{className:`mb-4 ${R.type==="success"?"text-green-700":"text-red-700"}`,children:R.message}),R.type==="error"&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg mb-4 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Available:"})," ",R.availableQuantity," Kg"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"You requested:"})," ",R.requestedQuantity," Kg"]}),e.jsxs("p",{className:"text-green-600 font-medium mt-2",children:["Tip: Adjust the quantity to ",R.availableQuantity," Kg or less"]})]}),e.jsx("div",{className:"flex justify-center gap-3",children:R.type==="success"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>y("/buyercart"),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"View Cart"}),e.jsx("button",{onClick:()=>B({...R,show:!1}),className:"bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400 transition",children:"Continue Shopping"})]}):e.jsx("button",{onClick:()=>B({...R,show:!1}),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"Got it"})})]})})]})})};function qN(){return e.jsx(vN,{children:e.jsxs("div",{className:"pt-24",children:[e.jsx(ho,{}),e.jsx(AN,{}),e.jsx(PN,{}),e.jsx(DN,{}),e.jsx("div",{id:"vegetables",children:e.jsx(FN,{})}),e.jsx(fm,{})]})})}const HN="/assets/about-hero-Cui6pvJj.png",IN=()=>e.jsx("section",{className:"max-w-[1240px] mx-auto my-12 px-4",children:e.jsxs("div",{className:"relative w-full h-[400px] md:h-[500px] rounded-3xl overflow-hidden shadow-md",children:[e.jsx("img",{src:HN,alt:"About FarmMaster",className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute left-0 top-0 h-full w-full md:w-1/2 flex items-center justify-center px-6",children:[e.jsx("div",{className:"bg-black/50 w-full h-full absolute top-0 left-0 z-0"}),e.jsxs("div",{className:"text-center space-y-3 relative z-10 px-4",children:[e.jsx("h2",{className:"text-white text-3xl md:text-5xl font-bold",children:"About FarmMaster"}),e.jsx("p",{className:"text-white text-base md:text-lg font-medium",children:"Empowering Organic Farming in Sri Lanka"})]})]})]})}),ZN=()=>e.jsxs("section",{className:"max-w-[1240px] mx-auto px-4 py-12 space-y-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-green-600 text-xl md:text-2xl font-bold mb-2",children:"Who We Are?"}),e.jsx("p",{className:"text-gray-700 text-base md:text-lg leading-relaxed text-justify",children:"Farm Master is a web-based organic farming management system designed to transform agriculture in Sri Lanka. Our mission is to empower landowners and promote sustainable organic farming through smart, digital solutions. We are a team of tech innovators and agriculture specialists committed to connecting underutilized land with the rising demand for organic produce helping communities grow, naturally and profitably."})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-green-600 text-xl md:text-2xl font-bold mb-4",children:"What We Do?"}),e.jsxs("ul",{className:"space-y-4 text-gray-700 text-base md:text-lg text-justify",children:[e.jsxs("li",{children:[e.jsx("strong",{children:" Soil & Land Analysis"}),e.jsx("br",{}),"Landowners can submit their land details and receive expert reports based on scientific parameters like pH, nutrients, and organic matter."]}),e.jsxs("li",{children:[e.jsx("strong",{children:" Intelligent Crop Recommendations"}),e.jsx("br",{}),"Our system analyzes soil data and recommends the most suitable crops to cultivate, ensuring maximum yield and sustainability."]}),e.jsxs("li",{children:[e.jsx("strong",{children:" Digital Proposals & Leasing"}),e.jsx("br",{}),"Landowners receive personalized cultivation proposals and can securely enter leasing agreements with clear profit-sharing terms."]}),e.jsxs("li",{children:[e.jsx("strong",{children:" Cultivation & Monitoring"}),e.jsx("br",{}),"Once agreements are in place, the system manages and tracks the cultivation process, costs, and income providing landowners with transparent profit breakdowns."]}),e.jsxs("li",{children:[e.jsx("strong",{children:" Online Organic Marketplace"}),e.jsx("br",{}),"After harvesting, organic fresh vegetables are sold through our integrated marketplaceallowing buyers to explore, select, and purchase high-quality produce online."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-green-600 text-xl md:text-2xl font-bold mb-3",children:"Why Choose Us?"}),e.jsxs("ul",{className:"list-disc list-inside text-gray-700 text-base md:text-lg space-y-2",children:[e.jsx("li",{children:"All-in-One Farming Management Solution"}),e.jsx("li",{children:"Secure, Transparent, and Role-Based System"}),e.jsx("li",{children:"Data-Driven Farming Decisions"}),e.jsx("li",{children:"Supports Sustainability and Local Communities"}),e.jsx("li",{children:"User-Friendly Design with Future Scalability"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-green-600 text-xl md:text-2xl font-bold mb-2",children:"Our Vision"}),e.jsx("p",{className:"text-gray-700 text-base md:text-lg leading-relaxed text-justify",children:"To become Sri Lankas leading platform for organic agriculture by combining technology, sustainability, and economic empowermentturning every piece of land into a thriving opportunity."})]})]}),$N=()=>e.jsxs("footer",{className:"w-full mt-16",children:[e.jsxs("div",{className:"bg-black py-10 px-4 text-center",children:[e.jsx("h2",{className:"text-green-500 text-2xl md:text-3xl font-bold mb-8",children:"Lets Grow Together"}),e.jsx("p",{className:"text-white text-base md:text-lg max-w-3xl mx-auto leading-relaxed text-justify mb-8",children:"Whether you're a landowner looking to put your land to good use or a buyer seeking fresh, organic vegetables  Farm Master is your digital farming partner for a better, greener future."})]}),e.jsx("div",{className:"bg-gray-100 text-center text-sm text-gray-500 py-4",children:" 2025 Farm Master. All rights reserved."})]});function VN(){return e.jsxs("div",{className:"pt-24",children:[e.jsx(ho,{}),e.jsx(IN,{}),e.jsx(ZN,{}),e.jsx($N,{})]})}const YN=()=>{const l="5ea296a1-2a68-483b-83f3-699f14ea4880",[o,c]=j.useState(""),[d,f]=j.useState(!1),[x,y]=j.useState(!1),_=async g=>{g.preventDefault(),c(""),f(!0);const b=new FormData(g.target);b.append("access_key",l);const N=Object.fromEntries(b),E=JSON.stringify(N);try{(await fetch("https://api.web3forms.com/submit",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:E}).then(R=>R.json())).success?(c("Message sent successfully!"),y(!1),g.target.reset()):(c("Failed to send message. Please try again."),y(!0))}catch{c("Network error. Please try again.")}f(!1)};return e.jsxs("main",{className:"bg-gradient-to-br from-green-50 via-white to-blue-50 text-black min-h-screen flex flex-col items-center justify-start px-4 pt-20 font-poppins relative",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-20 left-10 w-20 h-20 bg-green-200 rounded-full opacity-20 animate-pulse"}),e.jsx("div",{className:"absolute top-40 right-16 w-16 h-16 bg-blue-200 rounded-full opacity-20 animate-pulse delay-1000"}),e.jsx("div",{className:"absolute bottom-40 left-16 w-24 h-24 bg-purple-200 rounded-full opacity-20 animate-pulse delay-2000"}),e.jsx("div",{className:"absolute bottom-20 right-10 w-12 h-12 bg-green-300 rounded-full opacity-20 animate-pulse delay-500"})]}),e.jsxs("div",{className:"w-full max-w-xl relative z-10",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h1",{className:"text-5xl font-bold text-center mb-4 text-gray-800 drop-shadow-sm",children:"Contact Us"}),e.jsx("p",{className:"text-center text-green-600 mb-6 text-lg",children:"We're here to help! Reach out to us with any questions or inquiries you may have."}),e.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-green-400 to-green-600 mx-auto rounded-full mb-6"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-100 p-8 mb-8 backdrop-blur-sm bg-opacity-95",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Send us a Message"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Fill out the form below and we'll get back to you soon"})]}),e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Your Name"}),e.jsx("input",{type:"text",name:"name",placeholder:"Enter your name",required:!0,className:"w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition duration-300 hover:border-gray-300 bg-gradient-to-r from-white to-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Your Email"}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter your Email",required:!0,className:"w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition duration-300 hover:border-gray-300 bg-gradient-to-r from-white to-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Subject"}),e.jsx("input",{type:"text",name:"subject",placeholder:"Enter the subject",required:!0,className:"w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition duration-300 hover:border-gray-300 bg-gradient-to-r from-white to-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Description"}),e.jsx("textarea",{name:"message",placeholder:"Enter your message",rows:"5",required:!0,className:"w-full border-2 border-gray-200 rounded-lg px-4 py-3 resize-none focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition duration-300 hover:border-gray-300 bg-gradient-to-r from-white to-gray-50"})]}),e.jsx("div",{className:"text-center pt-2",children:e.jsx("button",{type:"submit",disabled:d,className:`bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold px-8 py-3 rounded-full transition duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl ${d?"opacity-70 cursor-not-allowed":""}`,children:d?"Sending...":"Send Message"})}),o&&e.jsx("div",{className:`text-center mt-6 p-4 rounded-lg backdrop-blur-sm ${x?"text-red-700 bg-red-100 border-2 border-red-200 bg-opacity-80":"text-green-700 bg-green-100 border-2 border-green-200 bg-opacity-80"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[x?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"font-semibold",children:o})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-white to-green-50 rounded-xl shadow-lg p-4 text-center hover:shadow-xl transition duration-300 hover:scale-105 border border-green-100",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsxs("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("h3",{className:"font-semibold text-gray-800 text-sm mb-1",children:"Visit Us"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Badulla, Sri Lanka"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 rounded-xl shadow-lg p-4 text-center hover:shadow-xl transition duration-300 hover:scale-105 border border-blue-100",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),e.jsx("h3",{className:"font-semibold text-gray-800 text-sm mb-1",children:"Call Us"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["+94 11 123 4567",e.jsx("br",{}),"+94 77 123 4567"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-white to-purple-50 rounded-xl shadow-lg p-4 text-center hover:shadow-xl transition duration-300 hover:scale-105 border border-purple-100",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("h3",{className:"font-semibold text-gray-800 text-sm mb-1",children:"Email Us"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["info@farmmaster.lk",e.jsx("br",{}),"support@farmmaster.lk"]})]})]}),e.jsxs("footer",{className:"text-center text-sm text-gray-500 mt-12 py-6 border-t border-gray-200 bg-white bg-opacity-50 rounded-lg backdrop-blur-sm",children:[e.jsx("p",{className:"font-medium",children:" 2025 Farm Master. All rights reserved."}),e.jsx("p",{className:"mt-1 text-xs",children:"Connecting farmers, landowners, and buyers for sustainable agriculture"})]})]})]})};function GN(){return e.jsxs("div",{className:"pt-20",children:[e.jsx(ho,{}),e.jsx(YN,{})]})}const KN=()=>{const[l,o]=j.useState(!1),[c,d]=j.useState(!1),[f,x]=j.useState(!1),y=Lt(),[_,g]=j.useState(""),[b,N]=j.useState(""),[E,P]=j.useState(""),[R,B]=j.useState("+94"),[S,M]=j.useState(""),[F,I]=j.useState(""),[T,H]=j.useState(""),q="http://localhost/FARMMASTER-Backend",[A,D]=j.useState(""),[V,O]=j.useState(!1),[G,K]=j.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",accountType:""}),Q=oe=>{G[oe]&&K(xe=>({...xe,[oe]:""}))},ue=(oe,xe)=>{K(_e=>({..._e,[oe]:xe}))},le=()=>{K({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",accountType:""})},de=(oe,xe)=>oe.trim()?/^[a-zA-Z\s]+$/.test(oe)?null:`${xe} should contain only letters and spaces.`:`${xe} is required.`,z=oe=>oe.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(oe)?null:"Please enter a valid email address.":"Email is required.",J=oe=>oe?oe.length<6?"Password must be at least 6 characters long.":/(?=.*[a-zA-Z])(?=.*\d)/.test(oe)?null:"Password must contain at least one letter and one number.":"Password is required.",W=oe=>{if(!oe||oe==="+94")return"Phone number is required.";let xe=oe;return oe.startsWith("+94")&&(xe=oe.substring(3)),/^\d{9}$/.test(xe)?null:"Phone number must be 9 digits after +94."},ve=oe=>{let xe=oe.target.value;xe.startsWith("+94")||(xe="+94"+xe.replace(/^\+?94?/,""));const _e=xe.substring(3).replace(/\D/g,"");_e.length<=9&&B("+94"+_e),Q("phone")},U=()=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl p-10 max-w-lg w-full text-center shadow-2xl transform scale-100 transition-all duration-300",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"w-24 h-24 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx(x_,{className:"w-12 h-12 text-white",strokeWidth:4})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Registration Successful!"}),e.jsxs("p",{className:"text-lg text-gray-600 leading-relaxed px-4",children:["Welcome to ",e.jsx("span",{className:"font-semibold text-green-600",children:"FarmMaster"}),"! Your account has been successfully created."]}),e.jsx("p",{className:"text-sm text-gray-500 px-4",children:"Please check your email to verify your account and complete the registration process."})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:ne,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-8 rounded-xl text-lg transition duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:"Continue to Login"}),e.jsx("p",{className:"text-xs text-gray-400",children:"You'll be redirected to the login page"})]})]})}),ne=()=>{x(!1),y("/login")},ge=async oe=>{var cs,je,He;oe.preventDefault(),D(""),le();let xe=!1;const _e=de(_,"First name");_e&&(ue("firstName",_e),xe=!0);const ye=de(b,"Last name");ye&&(ue("lastName",ye),xe=!0);const Le=z(E);Le&&(ue("email",Le),xe=!0);const De=W(R);De&&(ue("phone",De),xe=!0);const Tt=J(S);if(Tt&&(ue("password",Tt),xe=!0),T||(ue("accountType","Please select an account type."),xe=!0),S!==F&&(ue("confirmPassword","Passwords do not match."),xe=!0),!xe){O(!0);try{const Ze=await be.post(`${q}/api/users/register`,{first_name:_,last_name:b,email:E,phone:R,password:S,user_role:T},{headers:{"Content-Type":"application/json"}});if(O(!1),Ze.data.status==="success")g(""),N(""),P(""),B("+94"),M(""),I(""),H(""),x(!0);else{const Be=Ze.data.message,nt=Ze.data.errors;console.log("Backend error message:",Be),console.log("Backend field errors:",nt),nt?(nt.email&&ue("email","This email address is already registered."),nt.phone&&ue("phone","This phone number is already registered.")):Be==="Email already registered"?ue("email","This email address is already registered."):Be==="Phone number already registered"?ue("phone","This phone number is already registered."):Be.includes("Email")&&Be.includes("Phone")?(ue("email","This email address is already registered."),ue("phone","This phone number is already registered.")):D("ERROR: "+Ze.data.message)}}catch(Ze){if(O(!1),console.error("Registration failed:",Ze),console.log("Error response:",(cs=Ze.response)==null?void 0:cs.data),(He=(je=Ze.response)==null?void 0:je.data)!=null&&He.message){const Be=Ze.response.data.message,nt=Ze.response.data.errors;console.log("Server error message:",Be),console.log("Server field errors:",nt),nt?(nt.email&&ue("email","This email address is already registered."),nt.phone&&ue("phone","This phone number is already registered.")):Be==="Email already registered"?ue("email","This email address is already registered."):Be==="Phone number already registered"?ue("phone","This phone number is already registered."):Be.includes("Email")&&Be.includes("Phone")?(ue("email","This email address is already registered."),ue("phone","This phone number is already registered.")):D("ERROR: "+Be)}else D("Server error. Please try again.")}}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center px-4",children:[e.jsxs("div",{className:"mt-10 mb-6 text-center",children:[e.jsx("img",{src:Ts,alt:"FarmMaster",className:"w-32 h-auto mx-auto mb-1"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Start your organic farming journey today"})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-xl w-full max-w-2xl p-8 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Create Account"}),e.jsx("p",{className:"text-l text-gray-500",children:"Join Farm Master and unlock your land's potential"})]}),e.jsxs("form",{className:"space-y-4",onSubmit:ge,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"First Name *"}),e.jsx("input",{type:"text",value:_,onChange:oe=>{g(oe.target.value),Q("firstName")},placeholder:"John",className:`w-full border rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 ${G.firstName?"border-red-500":""}`,required:!0}),G.firstName&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Last Name *"}),e.jsx("input",{type:"text",value:b,onChange:oe=>{N(oe.target.value),Q("lastName")},placeholder:"Doe",className:`w-full border rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 ${G.lastName?"border-red-500":""}`,required:!0}),G.lastName&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.lastName})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:E,onChange:oe=>{P(oe.target.value),Q("email")},placeholder:"john@example.com",className:`w-full border rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 ${G.email?"border-red-500":""}`,required:!0}),G.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:R,onChange:ve,placeholder:"+94 771234567",className:`w-full border rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 ${G.phone?"border-red-500":""}`,maxLength:"12",required:!0}),G.phone?e.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.phone}):e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: +94 followed by 9 digits"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Account Type *"}),e.jsxs("select",{value:T,onChange:oe=>{H(oe.target.value),Q("accountType")},className:`w-full border rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 ${G.accountType?"border-red-500":""}`,required:!0,children:[e.jsx("option",{value:"",children:"Select your account type"}),e.jsx("option",{value:"Landowner",children:"Landowner"}),e.jsx("option",{value:"Buyer",children:"Buyer"})]}),G.accountType&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.accountType})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",value:S,onChange:oe=>{M(oe.target.value),Q("password"),F&&oe.target.value===F&&Q("confirmPassword")},placeholder:"Create a strong password",className:`w-full border rounded-md px-4 py-2 pr-10 focus:outline-none focus:ring-2 focus:ring-green-500 ${G.password?"border-red-500":""}`,required:!0,minLength:"6"}),e.jsx("div",{onClick:()=>o(!l),className:"absolute inset-y-0 right-3 flex items-center cursor-pointer text-gray-500",children:l?e.jsx(so,{size:18}):e.jsx(Ka,{size:18})})]}),G.password?e.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.password}):e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"At least 6 characters with one letter and one number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:c?"text":"password",value:F,onChange:oe=>{I(oe.target.value),Q("confirmPassword"),S&&oe.target.value&&S!==oe.target.value&&ue("confirmPassword","Passwords do not match.")},placeholder:"Confirm your password",className:`w-full border rounded-md px-4 py-2 pr-10 focus:outline-none focus:ring-2 focus:ring-green-500 ${G.confirmPassword?"border-red-500":""}`,required:!0}),e.jsx("div",{onClick:()=>d(!c),className:"absolute inset-y-0 right-3 flex items-center cursor-pointer text-gray-500",children:c?e.jsx(so,{size:18}):e.jsx(Ka,{size:18})})]}),G.confirmPassword&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.confirmPassword})]}),e.jsx("button",{type:"submit",disabled:V,className:"w-full bg-green-500 hover:bg-green-600 disabled:opacity-50 text-white font-semibold py-2 rounded-md transition",children:V?"Creating Account...":"Create Account"}),A&&e.jsx("div",{className:`text-center mt-2 text-sm ${A.includes("Success")?"text-green-600":"text-red-600"}`,children:A})]}),e.jsx("div",{className:"text-center text-sm text-gray-600 space-y-1",children:e.jsxs("p",{children:["Already have an account? ",e.jsx("a",{href:"/login",className:"text-green-600 font-medium hover:underline",children:"Sign In"})]})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("a",{href:"/",className:"flex items-center justify-center gap-2 border border-green-600 text-green-600 font-medium px-4 py-2 rounded-md hover:bg-green-600 hover:text-white transition",children:[e.jsx(wn,{size:18}),"Back to Home"]})}),e.jsx("p",{className:"mt-8 text-sm text-gray-400 text-center",children:" 2025 Farm Master. All rights reserved."})]}),f&&e.jsx(U,{})]})};var a0={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Hx=qe.createContext&&qe.createContext(a0),QN=["attr","size","title"];function XN(l,o){if(l==null)return{};var c=WN(l,o),d,f;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(l);for(f=0;f<x.length;f++)d=x[f],!(o.indexOf(d)>=0)&&Object.prototype.propertyIsEnumerable.call(l,d)&&(c[d]=l[d])}return c}function WN(l,o){if(l==null)return{};var c={};for(var d in l)if(Object.prototype.hasOwnProperty.call(l,d)){if(o.indexOf(d)>=0)continue;c[d]=l[d]}return c}function dd(){return dd=Object.assign?Object.assign.bind():function(l){for(var o=1;o<arguments.length;o++){var c=arguments[o];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(l[d]=c[d])}return l},dd.apply(this,arguments)}function Ix(l,o){var c=Object.keys(l);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(l);o&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(l,f).enumerable})),c.push.apply(c,d)}return c}function ud(l){for(var o=1;o<arguments.length;o++){var c=arguments[o]!=null?arguments[o]:{};o%2?Ix(Object(c),!0).forEach(function(d){JN(l,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(c)):Ix(Object(c)).forEach(function(d){Object.defineProperty(l,d,Object.getOwnPropertyDescriptor(c,d))})}return l}function JN(l,o,c){return o=ew(o),o in l?Object.defineProperty(l,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):l[o]=c,l}function ew(l){var o=tw(l,"string");return typeof o=="symbol"?o:o+""}function tw(l,o){if(typeof l!="object"||!l)return l;var c=l[Symbol.toPrimitive];if(c!==void 0){var d=c.call(l,o);if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(l)}function r0(l){return l&&l.map((o,c)=>qe.createElement(o.tag,ud({key:c},o.attr),r0(o.child)))}function Vs(l){return o=>qe.createElement(sw,dd({attr:ud({},l.attr)},o),r0(l.child))}function sw(l){var o=c=>{var{attr:d,size:f,title:x}=l,y=XN(l,QN),_=f||c.size||"1em",g;return c.className&&(g=c.className),l.className&&(g=(g?g+" ":"")+l.className),qe.createElement("svg",dd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},c.attr,d,y,{className:g,style:ud(ud({color:l.color||c.color},c.style),l.style),height:_,width:_,xmlns:"http://www.w3.org/2000/svg"}),x&&qe.createElement("title",null,x),l.children)};return Hx!==void 0?qe.createElement(Hx.Consumer,null,c=>o(c)):o(a0)}function Xh(l){return Vs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(l)}function Kl(l){return Vs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(l)}function nw(l){return Vs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(l)}function aw(l){return Vs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(l)}function rw(l){return Vs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(l)}function Zx(l){return Vs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(l)}function iw(l){return Vs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(l)}function lw(l){return Vs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(l)}function pm(l){return Vs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(l)}function ow(l){return Vs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(l)}function cw(l){return Vs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(l)}function Ql(l){return Vs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(l)}const Xa=({isOpen:l,onClose:o,type:c="info",title:d,message:f,showCloseButton:x=!0,autoClose:y=!1,autoCloseDelay:_=3e3})=>{if(qe.useEffect(()=>{if(y&&l){const N=setTimeout(()=>{o()},_);return()=>clearTimeout(N)}},[y,l,o,_]),!l)return null;const g=()=>{switch(c){case"success":return e.jsx(Kl,{className:"text-green-500 text-2xl"});case"error":return e.jsx(cw,{className:"text-red-500 text-2xl"});case"warning":return e.jsx(Xh,{className:"text-yellow-500 text-2xl"});default:return e.jsx(Xh,{className:"text-blue-500 text-2xl"})}},b=()=>{switch(c){case"success":return"border-green-200 bg-green-50";case"error":return"border-red-200 bg-red-50";case"warning":return"border-yellow-200 bg-yellow-50";default:return"border-blue-200 bg-blue-50"}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:`relative bg-white rounded-lg shadow-lg max-w-md w-full mx-4 border-2 ${b()}`,children:[x&&e.jsx("button",{onClick:o,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Ql,{className:"text-xl"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:g()}),e.jsxs("div",{className:"flex-1",children:[d&&e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:d}),e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:f})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors text-sm font-medium",children:"OK"})})]})]})})},dw=()=>{var A;const[l,o]=j.useState(!1),[c,d]=j.useState(""),[f,x]=j.useState(""),[y,_]=j.useState(""),[g,b]=j.useState(!1),[N,E]=j.useState({isOpen:!1,type:"info",title:"",message:""}),P=(D,V,O)=>{E({isOpen:!0,type:D,title:V,message:O})},R=()=>{E(D=>({...D,isOpen:!1}))},B="http://localhost/FARMMASTER-Backend",S=Lt(),M=$s(),{login:F,user:I}=mt(),T=((A=M.state)==null?void 0:A.from)||null;j.useEffect(()=>{if(I){const D=H[I.role];D&&S(D)}},[I,S]);const H={Landowner:"/landownerdashboard",Supervisor:"/fieldsupervisordashboard",Buyer:"/buyerdashboard","Operational Manager":"/operationalmanagerdashboard","Financial Manager":"/financialmanagerdashboard"},q=async D=>{if(D.preventDefault(),_(""),!c||!f){P("warning","Missing Information","Please fill in all fields.");return}if(!c.includes("@")){P("warning","Invalid Email","Please enter a valid email address.");return}if(f.length<6){P("warning","Password Too Short","Password must be at least 6 characters long.");return}b(!0);try{const V=await be.post(`${B}/api/users/login`,{email:c,password:f},{headers:{"Content-Type":"application/json"},withCredentials:!0});if(b(!1),V.data.status==="success"){const O={id:V.data.data.user_id,user_id:V.data.data.user_id,role:V.data.data.user_role,name:V.data.data.first_name+" "+V.data.data.last_name,email:V.data.data.email,phone:V.data.data.phone};F(O);const G=T||H[O.role];S(G)}else V.data.message.toLowerCase().includes("invalid")||V.data.message.toLowerCase().includes("incorrect")||V.data.message.toLowerCase().includes("wrong")?P("error","Login Failed","Invalid credentials. Please check your email and password."):P("error","Login Failed",V.data.message)}catch(V){b(!1),console.error("Login error:",V),V.response&&V.response.data&&V.response.data.message?V.response.data.message.toLowerCase().includes("invalid")||V.response.data.message.toLowerCase().includes("incorrect")||V.response.data.message.toLowerCase().includes("wrong")||V.response.data.message.toLowerCase().includes("not found")?P("error","Login Failed","Invalid credentials. Please check your email and password."):P("error","Login Failed",V.response.data.message):V.response&&V.response.status===401?P("error","Login Failed","Invalid credentials. Please check your email and password."):P("error","Server Error","Server error. Please try again.")}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center px-4",children:[e.jsxs("div",{className:"mt-10 mb-6 text-center",children:[e.jsx("img",{src:Ts,alt:"FarmMaster",className:"w-32 h-auto mx-auto mb-1"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Welcome back to your farming journey"})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-xl w-full max-w-md p-8 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Sign In"}),e.jsx("p",{className:"text-l text-gray-500",children:"Enter your credentials to access your account"})]}),e.jsxs("form",{className:"space-y-4",onSubmit:q,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),e.jsx("input",{type:"email",value:c,onChange:D=>d(D.target.value),placeholder:"Enter your email",className:"w-full border rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",value:f,onChange:D=>x(D.target.value),placeholder:"Enter your password",className:"w-full border rounded-md px-4 py-2 pr-10 focus:outline-none focus:ring-2 focus:ring-green-500",required:!0,minLength:"6"}),e.jsx("div",{onClick:()=>o(!l),className:"absolute inset-y-0 right-3 flex items-center cursor-pointer text-gray-500",children:l?e.jsx(so,{size:18}):e.jsx(Ka,{size:18})})]})]}),e.jsx("button",{type:"submit",disabled:g,className:"w-full bg-green-500 hover:bg-green-600 disabled:opacity-50 text-white font-semibold py-2 rounded-md transition",children:g?"Signing In...":"Sign In"}),y&&e.jsx("div",{className:`text-center mt-2 text-sm ${y.includes("Success")?"text-green-600":"text-red-600"}`,children:y}),e.jsxs("div",{className:"text-center text-sm text-gray-600 space-y-2",children:[e.jsx("p",{children:e.jsx("a",{href:"/forgot-password",className:"text-green-600 font-medium hover:underline",children:"Forgot your password?"})}),e.jsxs("p",{children:["Don't have an account? ",e.jsx("a",{href:"/register",className:"text-green-600 font-medium hover:underline",children:"Sign Up"})]})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("a",{href:"/",className:"flex items-center justify-center gap-2 border border-green-600 text-green-600 font-medium px-4 py-2 rounded-md hover:bg-green-600 hover:text-white transition",children:[e.jsx(wn,{size:18}),"Back to Home"]})}),e.jsx("p",{className:"mt-8 text-sm text-gray-400 text-center",children:" 2025 Farm Master. All rights reserved."}),e.jsx(Xa,{isOpen:N.isOpen,onClose:R,type:N.type,title:N.title,message:N.message})]})},uw=()=>{const[l,o]=j.useState(""),[c,d]=j.useState(!1),[f,x]=j.useState(!1),[y,_]=j.useState({isOpen:!1,type:"info",title:"",message:""}),g=(P,R,B)=>{_({isOpen:!0,type:P,title:R,message:B})},b=()=>{_(P=>({...P,isOpen:!1}))},N="http://localhost/FARMMASTER-Backend",E=async P=>{var R,B;if(P.preventDefault(),!l){g("error","Error","Please enter your email address");return}d(!0);try{const S=await be.post(`${N}/api/users/forgot-password`,{email:l});S.data.status==="success"&&(x(!0),g("success","Email Sent",S.data.message))}catch(S){const M=((B=(R=S.response)==null?void 0:R.data)==null?void 0:B.message)||"Failed to send password reset email. Please try again.";g("error","Error",M)}finally{d(!1)}};return f?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("img",{src:Ts,alt:"FARMMASTER Logo",className:"w-16 h-16 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Check Your Email"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(nn,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"We've sent a password reset link to your email address."}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Please check your email and follow the instructions to reset your password. The link will expire in 1 hour."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:()=>{x(!1),o("")},className:"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 transition-colors",children:"Send Another Email"}),e.jsx(Wt,{to:"/login",className:"block w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors text-center",children:"Back to Login"})]})]})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-4",children:[y.isOpen&&e.jsx(Xa,{type:y.type,title:y.title,message:y.message,onClose:b}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("img",{src:Ts,alt:"FARMMASTER Logo",className:"w-16 h-16 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Forgot Password"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your email address and we'll send you a link to reset your password."})]}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(V_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"email",id:"email",value:l,onChange:P=>o(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500",placeholder:"Enter your email",disabled:c,required:!0})]})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):"Send Reset Link"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(Wt,{to:"/login",className:"inline-flex items-center text-sm text-gray-600 hover:text-green-600 transition-colors",children:[e.jsx(wn,{className:"w-4 h-4 mr-1"}),"Back to Login"]})})]})]})},hw=()=>{const[l]=xv(),o=Lt(),c=l.get("token"),[d,f]=j.useState(""),[x,y]=j.useState(""),[_,g]=j.useState(!1),[b,N]=j.useState(!1),[E,P]=j.useState(!1),[R,B]=j.useState(!1),[S,M]=j.useState({isOpen:!1,type:"info",title:"",message:""}),F=(A,D,V)=>{M({isOpen:!0,type:A,title:D,message:V})},I=()=>{M(A=>({...A,isOpen:!1}))},T="http://localhost/FARMMASTER-Backend";j.useEffect(()=>{c||(F("error","Invalid Request","No reset token provided."),setTimeout(()=>{o("/forgot-password")},3e3))},[c,o]);const H=A=>A.length<6?"Password must be at least 6 characters long":/(?=.*[a-zA-Z])/.test(A)?/(?=.*\d)/.test(A)?null:"Password must contain at least one number":"Password must contain at least one letter",q=async A=>{var V,O,G,K,Q;if(A.preventDefault(),!d||!x){F("error","Error","Please fill in all fields");return}const D=H(d);if(D){F("error","Invalid Password",D);return}if(d!==x){F("error","Error","Passwords do not match");return}P(!0),console.log("Reset Password Debug Info:"),console.log("API URL:",T),console.log("Token:",c),console.log("Password length:",d.length),console.log("Full API endpoint:",`${T}/api/users/reset-password`);try{const ue=await be.post(`${T}/api/users/reset-password`,{token:c,password:d});console.log("API Response:",ue.data),ue.data.status==="success"&&(B(!0),F("success","Success",ue.data.message),setTimeout(()=>{o("/login")},3e3))}catch(ue){console.error("Reset Password Error:",ue),console.error("Error Response:",ue.response),console.error("Error Status:",(V=ue.response)==null?void 0:V.status),console.error("Error Data:",(O=ue.response)==null?void 0:O.data);const le=((K=(G=ue.response)==null?void 0:G.data)==null?void 0:K.message)||"Failed to reset password. Please try again.";F("error","Error",le),(((Q=ue.response)==null?void 0:Q.status)===400||le.includes("Invalid")||le.includes("expired"))&&setTimeout(()=>{o("/forgot-password")},3e3)}finally{P(!1)}};return R?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("img",{src:Ts,alt:"FARMMASTER Logo",className:"w-16 h-16 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Password Reset Successful"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(nn,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your password has been successfully reset. You can now login with your new password."}),e.jsx(Wt,{to:"/login",className:"block w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors text-center",children:"Go to Login"})]})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-4",children:[S.isOpen&&e.jsx(Xa,{type:S.type,title:S.title,message:S.message,onClose:I}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("img",{src:Ts,alt:"FARMMASTER Logo",className:"w-16 h-16 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your new password below."})]}),e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:_?"text":"password",id:"password",value:d,onChange:A=>f(A.target.value),className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500",placeholder:"Enter new password",disabled:E,required:!0}),e.jsx("button",{type:"button",onClick:()=>g(!_),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:E,children:_?e.jsx(so,{className:"h-4 w-4 text-gray-400"}):e.jsx(Ka,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:b?"text":"password",id:"confirmPassword",value:x,onChange:A=>y(A.target.value),className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500",placeholder:"Confirm new password",disabled:E,required:!0}),e.jsx("button",{type:"button",onClick:()=>N(!b),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:E,children:b?e.jsx(so,{className:"h-4 w-4 text-gray-400"}):e.jsx(Ka,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"Password must contain:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"At least 6 characters"}),e.jsx("li",{children:"At least one letter"}),e.jsx("li",{children:"At least one number"})]})]}),e.jsx("button",{type:"submit",disabled:E,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:E?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Resetting..."]}):"Reset Password"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(Wt,{to:"/login",className:"inline-flex items-center text-sm text-gray-600 hover:text-green-600 transition-colors",children:[e.jsx(wn,{className:"w-4 h-4 mr-1"}),"Back to Login"]})})]})]})},mw=()=>e.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center px-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-9xl font-bold text-green-500 mb-4",children:"404"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Page Not Found"}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md",children:"The page you're looking for doesn't exist or you don't have permission to access it."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(Wt,{to:"/",className:"inline-flex items-center px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition duration-200",children:[e.jsx(zi,{className:"w-4 h-4 mr-2"}),"Go Home"]}),e.jsxs("button",{onClick:()=>window.history.back(),className:"inline-flex items-center px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition duration-200",children:[e.jsx(wn,{className:"w-4 h-4 mr-2"}),"Go Back"]})]})]})});function fw(){const{user:l,isAuthenticated:o,loading:c,verifySession:d}=mt(),[f,x]=j.useState(!1),[y,_]=j.useState(!0);if(j.useEffect(()=>{(async()=>{if(l){const E=await d();_(E)}x(!0)})()},[l,d]),c||!f)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Verifying session..."})]})});if(!y||!o()||!l)return e.jsx(nd,{to:"/login",replace:!0});const b={Landowner:"/landownerdashboard",Supervisor:"/fieldsupervisordashboard",Buyer:"/buyerdashboard","Operational Manager":"/operationalmanagerdashboard","Financial Manager":"/financialmanagerdashboard"}[l.role];return b?e.jsx(nd,{to:b,replace:!0}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(ho,{}),e.jsx("div",{className:"flex-1 pt-24 pb-8 px-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Profile"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Personal Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Name:"}),e.jsxs("span",{className:"ml-2",children:[l.first_name," ",l.last_name]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Email:"}),e.jsx("span",{className:"ml-2",children:l.email})]}),l.phone&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Phone:"}),e.jsx("span",{className:"ml-2",children:l.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Role:"}),e.jsx("span",{className:"ml-2 bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm",children:l.role})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Quick Actions"}),e.jsx("div",{className:"space-y-3",children:e.jsx("button",{onClick:()=>{const E={Landowner:"/landownerdashboard",Supervisor:"/fieldsupervisordashboard",Buyer:"/buyerdashboard","Operational Manager":"/operationalmanagerdashboard","Financial Manager":"/financialmanagerdashboard"}[l.role];E&&(window.location.href=E)},className:"w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Go to Dashboard"})})]})]})]})})}),e.jsx(fm,{})]})}const i0=({className:l=""})=>{const{user:o,canSwitchRole:c,getAvailableRole:d,switchRole:f}=mt(),[x,y]=j.useState(!1),[_,g]=j.useState(!1),b=Lt();if(!c())return null;const N=d(),E=async()=>{if(!x){y(!0);try{const R=await f(N);if(R.success){const S={Buyer:"/buyerdashboard",Landowner:"/landownerdashboard"}[N];S&&b(S)}else alert(R.error||"Failed to switch role")}catch{alert("An error occurred while switching roles")}finally{y(!1),g(!1)}}},P=()=>{g(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:P,disabled:x,className:`border border-black px-4 py-2 rounded-md hover:bg-gray-100 flex items-center gap-2 font-bold text-black transition-colors ${x?"opacity-50 cursor-not-allowed":""} ${l}`,children:[x?e.jsx(I_,{size:20,className:"animate-spin"}):e.jsx(eN,{size:20}),x?"Switching...":`Switch to ${N}`]}),e.jsx(Qa,{isOpen:_,onClose:()=>g(!1),onConfirm:E,title:"Confirm Role Switch",message:`Are you sure you want to switch from ${o==null?void 0:o.role} to ${N}? You will be redirected to the ${N} dashboard.`,confirmText:`Yes, Switch to ${N}`,cancelText:"Cancel",type:"info"})]})},$x="http://localhost/FARMMASTER-Backend";function pw(){const[l,o]=j.useState(null),[c,d]=j.useState([]),[f,x]=j.useState([]),[y,_]=j.useState([]),[g,b]=j.useState(!0),{user:N}=mt(),E=(N==null?void 0:N.id)||32;j.useEffect(()=>{const T=JSON.parse(localStorage.getItem("user"));T&&o(T),P()},[]);const P=async()=>{b(!0);try{const[T,H]=await Promise.all([be.get(`${$x}/assessments?user_id=${E}`,{withCredentials:!0}),be.get(`${$x}/api/lands?user_id=${E}`,{withCredentials:!0})]);if(T.data.status==="success"){const q=T.data.data||[];x(q);const A=q.filter(D=>D.has_report);d(A)}H.data.status==="success"&&_(H.data.data||[])}catch(T){console.error("Error fetching dashboard data:",T)}finally{b(!1)}},R=T=>{switch(T==null?void 0:T.toLowerCase()){case"approved":return"text-green-600";case"rejected":return"text-red-600";default:return"text-yellow-600"}},B=f.length,S=f.filter(T=>T.has_report&&T.report_status==="Approved").length,M=f.filter(T=>T.overall_status==="Payment Pending"||T.overall_status==="Assessment Pending"||T.has_report&&!T.report_status).length,F=y.length,I=[...f.slice(0,5).map(T=>({type:T.has_report?"report":"request",title:T.has_report?`Land Report #${T.report_id}`:`Assessment Request #${T.land_id}`,subtitle:`${T.overall_status} - ${T.location}`,date:T.has_report?T.report_date:T.request_date,status:T.overall_status}))].sort((T,H)=>new Date(H.date)-new Date(T.date)).slice(0,5);return e.jsxs("div",{className:"p-4 md:p-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-8 mt-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Dashboard"}),e.jsxs("p",{className:"text-sm md:text-lg text-green-600 mt-2",children:["Welcome back, ",(l==null?void 0:l.name)||(N==null?void 0:N.name)||"Landowner"]})]}),e.jsx(i0,{className:"mt-4 md:mt-0"})]}),g?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"Loading dashboard data..."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-10",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-6",children:"Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"border rounded-md p-6 shadow-sm text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Requests"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:B})]}),e.jsxs("div",{className:"border rounded-md p-6 shadow-sm text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed Reports"}),e.jsx("p",{className:"text-2xl font-bold mt-1 text-green-600",children:S})]}),e.jsxs("div",{className:"border rounded-md p-6 shadow-sm text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Requests"}),e.jsx("p",{className:"text-2xl font-bold mt-1 text-yellow-600",children:M})]}),e.jsxs("div",{className:"border rounded-md p-6 shadow-sm text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Registered Lands"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:F})]})]})]}),e.jsxs("div",{className:"mb-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Recent Activity"}),I.length>0?e.jsx("ul",{className:"space-y-4 bg-green-50/50 p-4 rounded-md",children:I.map((T,H)=>e.jsxs("li",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-green-100 rounded-sm p-2",children:T.type==="report"?e.jsx(os,{className:"text-green-700",size:26}):T.type==="request"?e.jsx(Tr,{className:"text-green-700",size:26}):T.type==="proposal"?e.jsx(wd,{className:"text-green-700",size:26}):e.jsx(Tr,{className:"text-green-700",size:26})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:T.title}),e.jsx("p",{className:"text-sm text-gray-600",children:T.subtitle}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Oi,{size:14,className:"text-gray-400"}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(T.date).toLocaleDateString()}),T.status&&e.jsxs("span",{className:`text-xs ${R(T.status)}`,children:[" ",T.status]})]})]})]},H))}):e.jsxs("div",{className:"bg-gray-50 p-8 rounded-md text-center",children:[e.jsx(os,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No recent activity found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Start by requesting a land assessment"})]})]})]})]})}const mo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAANtElEQVR4nO1dC5AdRRXthKAI/kD8/wVRET8YFcRku9/mQ5QVEJ17Xz4llJZBBQUtf2WBKwKagID8AihSCEhpRA1GwRD2db9dCFgEFEQIUHxKkIAgkERIQghrnZ5JsjvT8968z/S898Kt6qqtfTPTd6a7771977m3hehSmrFs3i7915ZfWxriPUqVYLJtQ7wH/offiuavJ2na8kNfpSp0oDJ8jDK0SBq6Vhl6UBkezdboweieRcqUv4Zn4ZlFv1fX0Ixl83aRmqZLTQuk4ZVS0+bsHz97k5rulZoukIYDqQ95ZdHv3VEU3B68qM/Qp5ThxVLzxjwGoPbgoE9aisEBL2J7pT4TvE9qOkdq/q/vQVBpg2P4cfAE3sT2QqpS3k9qulJpfr7J2Xwn7peafmXFjuaFUvPxUVsY/s/+diWuVZqebXhwND8vDS3pM/QR0askdTBFGV6e/aMQPuSI1HSC1DzQZ2a/U2o5qfF+5STcG4pF+qE0fF0jgyQ1LStV+QDRKwQzVBm6JMuKkJoelZrOlLo8K0/TVergpehDGT5Laf5PphWj+eIZ1897jehaGh2cWDL0OcjlOnJ7wxalOnnl/B19sxksDnaAZYdJIzU/XWdwnoQJjntEN5HU/DZp6MY6s24tZD5WkOgQkjp4nTJ0ijK8rg7vK0pDc94quoH6TPnT0UxK0w1PKEODM1cEu4kOpZkrgt2gu+q+R4UPEZ1KUJ7Y0KXqCvt/uqSb5PDMcGAuqPVO0Hkdt3+BkqxlQUnDqyCnRZdSn+GpyvA/0sUY6enLg1eITqCp1bmvl4b/XsM6WViEsm434R2UoVPTVwvdAh0kiqSp1eDtStPdKavicVUpHyR6jKTmgVTLUfN92PMUxFiwpzK8OmUZ3yD13DeJHqWpVX6z1PzXlHdfjTCAV4agmNNWBnQJdIrocRpYObCz1PznlA3uvRDlXhiZdePcl0NepgzGpb2gLxq0LC9MEV+35e7ah3knNVdTZsVPxaiYILY3GhUTYPqmWV+5msRpHUvNl22Xg7GFRsUEZfiilIl6msjLunCZfNLQn5rxwvYaTV45f0enTgk3j4e237x1uxFugHJra2ddH4JOWl8IwrXN92W9oU5HIT3Wy6ZtszR9JHiLKwoqNV0PD7holaTmo13LsGTKB7f88B6lkqFPOnf0VTqyDcGlpKiCO0QURaODE/tMeV+p6avK8HmQ29Kwsc3KcFqE36QOPtiWGdkkSc0/cYmuKcPBq5t+qI30OezrIvYapSHeI3rJNO+Ay7/0MPxP00bmvMM3v9EW4Z8Ovi5qPgYeX3aan4fnU3ik6deV32CjeYafyzwQybYJIVhvu+eIpGbl+oZS0/4NP8zlTsdL5cJ5Gg/V4HCpaU0LAxEz0fkphJW9voPhSx0G0dWNPaRS3s/xQk/6Ci4FNs7N52f+0JqfzhAPH9vO8xUXh0seEyHJc/nDDTwEmKbEqA7myvnWvuUkafiK2uKHhqC4+4eDvQ+47uCXbbkXf5eGyu8FjtdeU0PMoQ9fG1pl+ESHfvt9ppuB2nPIvbW+YuAqxQURhYB/O22Y98r6LFxrBzclqATHoPBAUs/ePQGcCHXJPhlu5nOLMnNVtXxUymx+XFV4WrPP7TPlGWmQVamDL4mCzGBl6Oz6ploiGkbrfUB1EGlThtY7mL6zHQEfBNQQ23esvGd8BJQiXbIh9m6P1dxCRBCe+CxaLDwQLA+VFCmPthP/BLyYC6kIB2m7+qjZv0s31oISKcN/iN8ATGzejPaZ4GMOpfesqtDHc0KQbIr3118NPipyJnx8l3GRGgmM52dghvrYlUvNv3HorXNz7C9hUktNvxY5E1QCxFRsQDY4Q9423pFk8sy8mZwyMmdXh+5Yl6feCqFL9L+4rvSBrUL+SVIK8SdcF56WlG90YO4MGg4ceuvnRZjXJcOH5d5vpXyQw3A5xcXg32IiY6OPbFbXjJGaB/LuF+EDx0Q4K+9+sXmN56cgn3LcRchMdSRYjggPBCBAXJlLffhOefe7/4rgJXHljt298EAIVsX63QzRPeYCm7wS1x8neGHO0AOxAfmX8ETJFGu630e/UtNJCXFZ5ZljGEMeuH+xEfU9LgAmDd0oPFE8/o3dvI9+neav5qO3XWAT6+Oa3w9GNe7jkYaN8EToa/zq5LU++i0NBe9ySKRztjGmaSiu0D16QsdFAKWmu3z0G/V9T6zvf3tD0scTTzVds/UCafih2I93+GDM9q355iJmqQDiMLkXuclL3+E3X+XWnZaxeNyAlvpiTBm+PKHghugDefcLoIRDjl8mPJEDVLfJ/oC9hsMev9QfYxY94j0YJsMcwni/XxEFTkSY4lHmaWJAzvPFmNSz352YqYZX5RlijVDrdxVlyKT506y7KIxDZNjK+9QjBqAy/kJe/ZUMz3e8szf9kRawsnEZlyxVhr/vl7ngi45V8lAezj7kbMCa8jkBXIRvnFyh5X0FKrE5bOLjfDI366pZL3YXJqOr2ym6Qpwy/yU5+PSA79RmfOPECqkEk0WI0kgMyMnCM6kqs2OlhnGRdkBCRwcnujbAYR/lzwrPpAz/KKFDhoO9BWCWjpl5uiiApKElzg9maMlYuE+jhHvd0CY7+X4nCiBl+Iw4L0j72AKojs/KXxTB5JSRObsiYdI9KLyqGcQ9/EYuiypq9xRV4s8VjwmB2FjKifpRDUId20jSokPokZQPiDYCiGmtYpbAQUnNR9jaWCnPQR/e05fH8UjLxvGk6dmtohnb9vE/8m2iQJo2zHvBFV5jULBinoOpGoo5Ohst+vumusBszfc1ArjLg6Sh2+OGxdYfkZoWk6trik7inBHmwl9T88M20WBltZSj0a4kUc1rY9/8+pp5IB1RD2p0cCKQhWFJpxYHAshFZDAVmMQTy9mM8/fLrRdIzd8qAo/V2GaOjw8TcBocDE0Pw+bvpPq8rgCVMvyNMRfY6tGF7tazbuxKVZ4Jsxy6IqXy27rwNzod13ZiOT6p+QfJFTKmfJU1fWMIcV8B/1Zp5opgN+yl0Dq5Sl1tYAeQ8LN3j190Z8z0Xe8D/bG9kdSH7xQHBsLiSlzociuUquX+QrjuYUJaRaa0BPhzMl34ArVErvwbVaHPuBF1SYzt6k4wE3uGQq9IzFKk9QC6O69Xmv+YHL1Aeme8RwkqILlRpSWpN8BH5DAjL/fKdQ+TK+2iZHhOnWpx8S09b+yk6tPdSjalLX4+iua1dcMKADh0wyax2whIGofRtKjujf3D5fe7/ECpiscDBYuDHWwgDR6FavkolBNEDgnyH5Wmq7YUn8Hf9n/hb2fgWuzWcW+RO/YoOy2RBZz54BilueJYJd8THgNVfeF5H6cCfN2Oo5AsPNbW/aJTbO1dj74tV/wc3zjzA/oMlRxOuicS2/s2F5mRmo4NByCfw8BirqHNUdjhmDyL0tiT5hzeanzjhh6kNA07Ztn57Uab2MhenTIYKu/BMfwcjtcDL+Ap9wTTZhD+2H+4GLfYoRYJeCup+btNudNNgqcNdgZiBScS85toIU/faQcmrL9KH3JNtFKV+tqZrnxxi3GNhQ2WXNqEHLyoUtyxADoAumRTwFxRzdHBiRFYYh9ci3vCey06clMDIm2NMvTjVgYmBUWzuNUa5083VcUmcfxR8HnkvWf7GIxKbCeiAFg7E0/xLMhum1Km6Y5sK5AegShrJqQdryiHb4kimS29BBDhYx64sdEiMKgLVaNw/ZhG9yMq2Gf4PcITAZhmj9uL5zm62w0WWdgSwp6+3RbGcWwcAMoNfSwbD7fmXm0xobmCGitF7hMCRCINH5YIHDnEpzX/szpcw2+AdIuLpA7mFQYcsZUSYmlyDhk91FBVNU+EwyRT9mHxEyCKPbwlK9kj6GqcDSg13Yo0bNEdtXdvq/Eej7ZSw8sLqSrNTT1F0xYEoAXddJyF1HISTOA0cxo6taa3tkiK6hxuTlsV7di/FEVhhoBFuaSVHmyPsm7fUQ32MMY06+nsXjg9YXJ4+kEy/LpttSwsGu1pySIL05fzfNFjpKp0ZJpYlpq/XDR/iJ+MuDdUHIgeJekuKYUBqRbNW0rlZttWd/NhkmkUHmTsrj8/Dp9bFPVfG7wxXqJijDKHkj+xF3SIDFOpT0oNDWi6GyEE0QkECGfNo1c13drNh8SXbGJsipUVDsY14+pdddAMSlSHG7taEBvoFvztmIn2s1oBM9Sl7GgJAK9uHLkSU/ZPAf3dSekBKbnsJ7iK6MfOgz9CdAMhISVRiyrZngQSw/eZHhl8cLUHItxbaRRlFl1F1tNZ/jpKedd8ObhUDF+B+uyiiI1VeITSDKRHp7p9tq2KZxDw6mp4LU5ywyHxmYALGk5Je5pOkGdFVKQEwHy18j9eKyzVPcKLbR55r1BkqdSLN4xu0zUoLgbRQAtwMCOil02toFExITzKjg61zwoPD8t++IvmCmLjorfzI2hpM1AfibLcthIbXY2zP2DVRQN2XNQWRP+7ENm2KBjQDPAh5I2Wblf5MfawldBZ58oTHC2orcOAFp3DXihBnkcoxUtqmcu5NWt00FIcFtZKPZWepIGVAzsjtm1PpdZ0Sx7gOQuK03wz+kBfL5zl2wAdgKyuCh2IPPoIAbjcolMyDFRUegPlOZbjXqn5mwBev7AKctxNT7d44GBPWHBo+Dv8X+d6AerR/wH9l5bgaq4PXwAAAABJRU5ErkJggg==";function ki(){const[l,o]=j.useState(!1),[c,d]=j.useState(null),[f,x]=j.useState(!1),y=Lt(),{logout:_}=mt();j.useEffect(()=>{const R=JSON.parse(localStorage.getItem("user"));R&&d(R)},[]);const g="flex items-center gap-3 px-4 py-2 rounded-md transition text-sm font-medium",b="bg-green-100 text-green-700 font-semibold",N="text-black hover:bg-green-50",E=async()=>{try{console.log("Landowner logout initiated..."),await _(),console.log("Logout successful, navigating to home..."),y("/",{replace:!0})}catch(R){console.error("Logout failed:",R),y("/",{replace:!0})}finally{x(!1)}},P=()=>{x(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden flex items-start bg-white shadow px-4 py-6",children:e.jsx("button",{onClick:()=>o(!0),children:e.jsx(Di,{size:24})})}),e.jsxs("aside",{className:`fixed top-0 left-0 h-full w-64 bg-white shadow-sm font-poppins flex flex-col px-4 py-6 z-50 transform transition-transform ${l?"translate-x-0":"-translate-x-full"} md:translate-x-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(Ee,{to:"/",onClick:()=>o(!1),children:e.jsx("img",{src:Ts,alt:"FarmMaster Logo",className:"h-20 w-auto"})}),e.jsx("button",{className:"md:hidden text-gray-600 cursor-pointer",onClick:()=>o(!1),children:e.jsx(on,{size:24})})]}),e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx("img",{src:mo,alt:"Profile",className:"w-14 h-14 rounded-full object-cover mr-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold",children:(c==null?void 0:c.name)||"Landowner"}),e.jsx("p",{className:"text-sm text-green-600",children:"Landowner"})]})]}),e.jsxs("nav",{className:"flex flex-col gap-2",children:[e.jsxs(Ee,{to:"/landownerdashboard",className:({isActive:R})=>`${g} ${R?b:N}`,onClick:()=>o(!1),children:[e.jsx(zi,{size:16}),"Dashboard"]}),e.jsxs(Ee,{to:"/landreport",className:({isActive:R})=>`${g} ${R?b:N}`,onClick:()=>o(!1),children:[e.jsx(os,{size:16}),"Land Reports"]}),e.jsxs(Ee,{to:"/leaseproposal",className:({isActive:R})=>`${g} ${R?b:N}`,onClick:()=>o(!1),children:[e.jsx(wd,{size:16}),"Proposals"]}),e.jsxs(Ee,{to:"/landownerharvestincome",className:({isActive:R})=>`${g} ${R?b:N}`,onClick:()=>o(!1),children:[e.jsx(Nd,{size:16}),"Harvest Income"]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsxs(Ee,{to:"/",className:({isActive:R})=>`${g} ${R?b:N}`,onClick:()=>o(!1),children:[e.jsx(oo,{size:16}),"Go to Home"]}),e.jsxs("button",{className:`${g} text-red-600 hover:bg-red-50 mt-2 cursor-pointer`,onClick:P,children:[e.jsx(co,{size:16}),"Log out"]})]})]}),e.jsx(Qa,{isOpen:f,onClose:()=>x(!1),onConfirm:E,title:"Confirm Logout",message:"Are you sure you want to logout from your Landowner account? You will be redirected to the home page.",confirmText:"Yes, Logout",cancelText:"Cancel",type:"warning"})]})}function xw(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(ki,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(pw,{})})]})}var l0="basil",gw=function(o){return o===3?"v3":o},o0="https://js.stripe.com",yw="".concat(o0,"/").concat(l0,"/stripe.js"),bw=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,vw=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var jw=function(o){return bw.test(o)||vw.test(o)},_w=function(){for(var o=document.querySelectorAll('script[src^="'.concat(o0,'"]')),c=0;c<o.length;c++){var d=o[c];if(jw(d.src))return d}return null},Vx=function(o){var c="",d=document.createElement("script");d.src="".concat(yw).concat(c);var f=document.head||document.body;if(!f)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return f.appendChild(d),d},Nw=function(o,c){!o||!o._registerWrapper||o._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:c})},$l=null,Zc=null,$c=null,ww=function(o){return function(c){o(new Error("Failed to load Stripe.js",{cause:c}))}},Sw=function(o,c){return function(){window.Stripe?o(window.Stripe):c(new Error("Stripe.js not available"))}},Cw=function(o){return $l!==null?$l:($l=new Promise(function(c,d){if(typeof window>"u"||typeof document>"u"){c(null);return}if(window.Stripe){c(window.Stripe);return}try{var f=_w();if(!(f&&o)){if(!f)f=Vx(o);else if(f&&$c!==null&&Zc!==null){var x;f.removeEventListener("load",$c),f.removeEventListener("error",Zc),(x=f.parentNode)===null||x===void 0||x.removeChild(f),f=Vx(o)}}$c=Sw(c,d),Zc=ww(d),f.addEventListener("load",$c),f.addEventListener("error",Zc)}catch(y){d(y);return}}),$l.catch(function(c){return $l=null,Promise.reject(c)}))},Ew=function(o,c,d){if(o===null)return null;var f=c[0],x=f.match(/^pk_test/),y=gw(o.version),_=l0;x&&y!==_&&console.warn("Stripe.js@".concat(y," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(_,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var g=o.apply(void 0,c);return Nw(g,d),g},Vl,c0=!1,d0=function(){return Vl||(Vl=Cw(null).catch(function(o){return Vl=null,Promise.reject(o)}),Vl)};Promise.resolve().then(function(){return d0()}).catch(function(l){c0||console.warn(l)});var xm=function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];c0=!0;var f=Date.now();return d0().then(function(x){return Ew(x,c,f)})},Oh={exports:{}},zh,Yx;function kw(){if(Yx)return zh;Yx=1;var l="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return zh=l,zh}var Dh,Gx;function Rw(){if(Gx)return Dh;Gx=1;var l=kw();function o(){}function c(){}return c.resetWarningCache=o,Dh=function(){function d(y,_,g,b,N,E){if(E!==l){var P=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw P.name="Invariant Violation",P}}d.isRequired=d;function f(){return d}var x={array:d,bigint:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:f,element:d,elementType:d,instanceOf:f,node:d,objectOf:f,oneOf:f,oneOfType:f,shape:f,exact:f,checkPropTypes:c,resetWarningCache:o};return x.PropTypes=x,x},Dh}var Kx;function Lw(){return Kx||(Kx=1,Oh.exports=Rw()()),Oh.exports}var Tw=Lw();const vt=tm(Tw);function Qx(l,o){var c=Object.keys(l);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(l);o&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(l,f).enumerable})),c.push.apply(c,d)}return c}function Xx(l){for(var o=1;o<arguments.length;o++){var c=arguments[o]!=null?arguments[o]:{};o%2?Qx(Object(c),!0).forEach(function(d){u0(l,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(c)):Qx(Object(c)).forEach(function(d){Object.defineProperty(l,d,Object.getOwnPropertyDescriptor(c,d))})}return l}function ed(l){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ed=function(o){return typeof o}:ed=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ed(l)}function u0(l,o,c){return o in l?Object.defineProperty(l,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):l[o]=c,l}function Aw(l,o){if(l==null)return{};var c={},d=Object.keys(l),f,x;for(x=0;x<d.length;x++)f=d[x],!(o.indexOf(f)>=0)&&(c[f]=l[f]);return c}function Mw(l,o){if(l==null)return{};var c=Aw(l,o),d,f;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(l);for(f=0;f<x.length;f++)d=x[f],!(o.indexOf(d)>=0)&&Object.prototype.propertyIsEnumerable.call(l,d)&&(c[d]=l[d])}return c}function h0(l,o){return Pw(l)||Ow(l,o)||zw(l,o)||Dw()}function Pw(l){if(Array.isArray(l))return l}function Ow(l,o){var c=l&&(typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"]);if(c!=null){var d=[],f=!0,x=!1,y,_;try{for(c=c.call(l);!(f=(y=c.next()).done)&&(d.push(y.value),!(o&&d.length===o));f=!0);}catch(g){x=!0,_=g}finally{try{!f&&c.return!=null&&c.return()}finally{if(x)throw _}}return d}}function zw(l,o){if(l){if(typeof l=="string")return Wx(l,o);var c=Object.prototype.toString.call(l).slice(8,-1);if(c==="Object"&&l.constructor&&(c=l.constructor.name),c==="Map"||c==="Set")return Array.from(l);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Wx(l,o)}}function Wx(l,o){(o==null||o>l.length)&&(o=l.length);for(var c=0,d=new Array(o);c<o;c++)d[c]=l[c];return d}function Dw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ls=function(o,c,d){var f=!!d,x=qe.useRef(d);qe.useEffect(function(){x.current=d},[d]),qe.useEffect(function(){if(!f||!o)return function(){};var y=function(){x.current&&x.current.apply(x,arguments)};return o.on(c,y),function(){o.off(c,y)}},[f,c,o,x])},Wh=function(o){var c=qe.useRef(o);return qe.useEffect(function(){c.current=o},[o]),c.current},Ri=function(o){return o!==null&&ed(o)==="object"},Bw=function(o){return Ri(o)&&typeof o.then=="function"},Uw=function(o){return Ri(o)&&typeof o.elements=="function"&&typeof o.createToken=="function"&&typeof o.createPaymentMethod=="function"&&typeof o.confirmCardPayment=="function"},Jx="[object Object]",Fw=function l(o,c){if(!Ri(o)||!Ri(c))return o===c;var d=Array.isArray(o),f=Array.isArray(c);if(d!==f)return!1;var x=Object.prototype.toString.call(o)===Jx,y=Object.prototype.toString.call(c)===Jx;if(x!==y)return!1;if(!x&&!d)return o===c;var _=Object.keys(o),g=Object.keys(c);if(_.length!==g.length)return!1;for(var b={},N=0;N<_.length;N+=1)b[_[N]]=!0;for(var E=0;E<g.length;E+=1)b[g[E]]=!0;var P=Object.keys(b);if(P.length!==_.length)return!1;var R=o,B=c,S=function(F){return l(R[F],B[F])};return P.every(S)},m0=function(o,c,d){return Ri(o)?Object.keys(o).reduce(function(f,x){var y=!Ri(c)||!Fw(o[x],c[x]);return d.includes(x)?(y&&console.warn("Unsupported prop change: options.".concat(x," is not a mutable property.")),f):y?Xx(Xx({},f||{}),{},u0({},x,o[x])):f},null):null},f0="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",eg=function(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f0;if(o===null||Uw(o))return o;throw new Error(c)},qw=function(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f0;if(Bw(o))return{tag:"async",stripePromise:Promise.resolve(o).then(function(f){return eg(f,c)})};var d=eg(o,c);return d===null?{tag:"empty"}:{tag:"sync",stripe:d}},Hw=function(o){!o||!o._registerWrapper||!o.registerAppInfo||(o._registerWrapper({name:"react-stripe-js",version:"3.9.2"}),o.registerAppInfo({name:"react-stripe-js",version:"3.9.2",url:"https://stripe.com/docs/stripe-js/react"}))},Cd=qe.createContext(null);Cd.displayName="ElementsContext";var p0=function(o,c){if(!o)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(c," in an <Elements> provider."));return o},gm=function(o){var c=o.stripe,d=o.options,f=o.children,x=qe.useMemo(function(){return qw(c)},[c]),y=qe.useState(function(){return{stripe:x.tag==="sync"?x.stripe:null,elements:x.tag==="sync"?x.stripe.elements(d):null}}),_=h0(y,2),g=_[0],b=_[1];qe.useEffect(function(){var P=!0,R=function(S){b(function(M){return M.stripe?M:{stripe:S,elements:S.elements(d)}})};return x.tag==="async"&&!g.stripe?x.stripePromise.then(function(B){B&&P&&R(B)}):x.tag==="sync"&&!g.stripe&&R(x.stripe),function(){P=!1}},[x,g,d]);var N=Wh(c);qe.useEffect(function(){N!==null&&N!==c&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[N,c]);var E=Wh(d);return qe.useEffect(function(){if(g.elements){var P=m0(d,E,["clientSecret","fonts"]);P&&g.elements.update(P)}},[d,E,g.elements]),qe.useEffect(function(){Hw(g.stripe)},[g.stripe]),qe.createElement(Cd.Provider,{value:g},f)};gm.propTypes={stripe:vt.any,options:vt.object};var Iw=function(o){var c=qe.useContext(Cd);return p0(c,o)},x0=function(){var o=Iw("calls useElements()"),c=o.elements;return c};vt.func.isRequired;var g0=qe.createContext(null);g0.displayName="CheckoutSdkContext";var Zw=function(o,c){if(!o)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(c," in an <CheckoutProvider> provider."));return o},$w=qe.createContext(null);$w.displayName="CheckoutContext";vt.any,vt.shape({fetchClientSecret:vt.func.isRequired,elementsOptions:vt.object}).isRequired;var Jh=function(o){var c=qe.useContext(g0),d=qe.useContext(Cd);if(c&&d)throw new Error("You cannot wrap the part of your app that ".concat(o," in both <CheckoutProvider> and <Elements> providers."));return c?Zw(c,o):p0(d,o)},Vw=["mode"],Yw=function(o){return o.charAt(0).toUpperCase()+o.slice(1)},St=function(o,c){var d="".concat(Yw(o),"Element"),f=function(g){var b=g.id,N=g.className,E=g.options,P=E===void 0?{}:E,R=g.onBlur,B=g.onFocus,S=g.onReady,M=g.onChange,F=g.onEscape,I=g.onClick,T=g.onLoadError,H=g.onLoaderStart,q=g.onNetworksChange,A=g.onConfirm,D=g.onCancel,V=g.onShippingAddressChange,O=g.onShippingRateChange,G=Jh("mounts <".concat(d,">")),K="elements"in G?G.elements:null,Q="checkoutSdk"in G?G.checkoutSdk:null,ue=qe.useState(null),le=h0(ue,2),de=le[0],z=le[1],J=qe.useRef(null),W=qe.useRef(null);Ls(de,"blur",R),Ls(de,"focus",B),Ls(de,"escape",F),Ls(de,"click",I),Ls(de,"loaderror",T),Ls(de,"loaderstart",H),Ls(de,"networkschange",q),Ls(de,"confirm",A),Ls(de,"cancel",D),Ls(de,"shippingaddresschange",V),Ls(de,"shippingratechange",O),Ls(de,"change",M);var ve;S&&(o==="expressCheckout"?ve=S:ve=function(){S(de)}),Ls(de,"ready",ve),qe.useLayoutEffect(function(){if(J.current===null&&W.current!==null&&(K||Q)){var ne=null;if(Q)switch(o){case"payment":ne=Q.createPaymentElement(P);break;case"address":if("mode"in P){var ge=P.mode,oe=Mw(P,Vw);if(ge==="shipping")ne=Q.createShippingAddressElement(oe);else if(ge==="billing")ne=Q.createBillingAddressElement(oe);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":ne=Q.createExpressCheckoutElement(P);break;case"currencySelector":ne=Q.createCurrencySelectorElement();break;case"taxId":ne=Q.createTaxIdElement(P);break;default:throw new Error("Invalid Element type ".concat(d,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else K&&(ne=K.create(o,P));J.current=ne,z(ne),ne&&ne.mount(W.current)}},[K,Q,P]);var U=Wh(P);return qe.useEffect(function(){if(J.current){var ne=m0(P,U,["paymentRequest"]);ne&&"update"in J.current&&J.current.update(ne)}},[P,U]),qe.useLayoutEffect(function(){return function(){if(J.current&&typeof J.current.destroy=="function")try{J.current.destroy(),J.current=null}catch{}}},[]),qe.createElement("div",{id:b,className:N,ref:W})},x=function(g){Jh("mounts <".concat(d,">"));var b=g.id,N=g.className;return qe.createElement("div",{id:b,className:N})},y=c?x:f;return y.propTypes={id:vt.string,className:vt.string,onChange:vt.func,onBlur:vt.func,onFocus:vt.func,onReady:vt.func,onEscape:vt.func,onClick:vt.func,onLoadError:vt.func,onLoaderStart:vt.func,onNetworksChange:vt.func,onConfirm:vt.func,onCancel:vt.func,onShippingAddressChange:vt.func,onShippingRateChange:vt.func,options:vt.object},y.displayName=d,y.__elementType=o,y},Ct=typeof window>"u",Gw=qe.createContext(null);Gw.displayName="EmbeddedCheckoutProviderContext";var y0=function(){var o=Jh("calls useStripe()"),c=o.stripe;return c};St("auBankAccount",Ct);St("card",Ct);var hd=St("cardNumber",Ct),b0=St("cardExpiry",Ct),v0=St("cardCvc",Ct);St("fpxBank",Ct);St("iban",Ct);St("idealBank",Ct);St("p24Bank",Ct);St("epsBank",Ct);St("payment",Ct);St("expressCheckout",Ct);St("currencySelector",Ct);St("paymentRequestButton",Ct);St("linkAuthentication",Ct);St("address",Ct);St("shippingAddress",Ct);St("paymentMethodMessaging",Ct);St("affirmMessage",Ct);St("afterpayClearpayMessage",Ct);St("taxId",Ct);function Kw(l,o){const c=j.useRef(o);j.useEffect(function(){o!==c.current&&l.attributionControl!=null&&(c.current!=null&&l.attributionControl.removeAttribution(c.current),o!=null&&l.attributionControl.addAttribution(o)),c.current=o},[l,o])}const Qw=1;function Xw(l){return Object.freeze({__version:Qw,map:l})}function Ww(l,o){return Object.freeze({...l,...o})}const ym=j.createContext(null);function j0(){const l=j.use(ym);if(l==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return l}function Jw(l){function o(c,d){const{instance:f,context:x}=l(c).current;j.useImperativeHandle(d,()=>f);const{children:y}=c;return y==null?null:qe.createElement(ym,{value:x},y)}return j.forwardRef(o)}function e1(l){function o(c,d){const{instance:f}=l(c).current;return j.useImperativeHandle(d,()=>f),null}return j.forwardRef(o)}function t1(l,o){const c=j.useRef(void 0);j.useEffect(function(){return o!=null&&l.instance.on(o),c.current=o,function(){c.current!=null&&l.instance.off(c.current),c.current=null}},[l,o])}function _0(l,o){const c=l.pane??o.pane;return c?{...l,pane:c}:l}var Xl={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var s1=Xl.exports,tg;function n1(){return tg||(tg=1,function(l,o){(function(c,d){d(o)})(s1,function(c){var d="1.9.4";function f(n){var r,u,p,v;for(u=1,p=arguments.length;u<p;u++){v=arguments[u];for(r in v)n[r]=v[r]}return n}var x=Object.create||function(){function n(){}return function(r){return n.prototype=r,new n}}();function y(n,r){var u=Array.prototype.slice;if(n.bind)return n.bind.apply(n,u.call(arguments,1));var p=u.call(arguments,2);return function(){return n.apply(r,p.length?p.concat(u.call(arguments)):arguments)}}var _=0;function g(n){return"_leaflet_id"in n||(n._leaflet_id=++_),n._leaflet_id}function b(n,r,u){var p,v,C,Z;return Z=function(){p=!1,v&&(C.apply(u,v),v=!1)},C=function(){p?v=arguments:(n.apply(u,arguments),setTimeout(Z,r),p=!0)},C}function N(n,r,u){var p=r[1],v=r[0],C=p-v;return n===p&&u?n:((n-v)%C+C)%C+v}function E(){return!1}function P(n,r){if(r===!1)return n;var u=Math.pow(10,r===void 0?6:r);return Math.round(n*u)/u}function R(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function B(n){return R(n).split(/\s+/)}function S(n,r){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?x(n.options):{});for(var u in r)n.options[u]=r[u];return n.options}function M(n,r,u){var p=[];for(var v in n)p.push(encodeURIComponent(u?v.toUpperCase():v)+"="+encodeURIComponent(n[v]));return(!r||r.indexOf("?")===-1?"?":"&")+p.join("&")}var F=/\{ *([\w_ -]+) *\}/g;function I(n,r){return n.replace(F,function(u,p){var v=r[p];if(v===void 0)throw new Error("No value provided for variable "+u);return typeof v=="function"&&(v=v(r)),v})}var T=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function H(n,r){for(var u=0;u<n.length;u++)if(n[u]===r)return u;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function A(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var D=0;function V(n){var r=+new Date,u=Math.max(0,16-(r-D));return D=r+u,window.setTimeout(n,u)}var O=window.requestAnimationFrame||A("RequestAnimationFrame")||V,G=window.cancelAnimationFrame||A("CancelAnimationFrame")||A("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function K(n,r,u){if(u&&O===V)n.call(r);else return O.call(window,y(n,r))}function Q(n){n&&G.call(window,n)}var ue={__proto__:null,extend:f,create:x,bind:y,get lastId(){return _},stamp:g,throttle:b,wrapNum:N,falseFn:E,formatNum:P,trim:R,splitWords:B,setOptions:S,getParamString:M,template:I,isArray:T,indexOf:H,emptyImageUrl:q,requestFn:O,cancelFn:G,requestAnimFrame:K,cancelAnimFrame:Q};function le(){}le.extend=function(n){var r=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=r.__super__=this.prototype,p=x(u);p.constructor=r,r.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(r[v]=this[v]);return n.statics&&f(r,n.statics),n.includes&&(de(n.includes),f.apply(null,[p].concat(n.includes))),f(p,n),delete p.statics,delete p.includes,p.options&&(p.options=u.options?x(u.options):{},f(p.options,n.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var C=0,Z=p._initHooks.length;C<Z;C++)p._initHooks[C].call(this)}},r},le.include=function(n){var r=this.prototype.options;return f(this.prototype,n),n.options&&(this.prototype.options=r,this.mergeOptions(n.options)),this},le.mergeOptions=function(n){return f(this.prototype.options,n),this},le.addInitHook=function(n){var r=Array.prototype.slice.call(arguments,1),u=typeof n=="function"?n:function(){this[n].apply(this,r)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function de(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=T(n)?n:[n];for(var r=0;r<n.length;r++)n[r]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var z={on:function(n,r,u){if(typeof n=="object")for(var p in n)this._on(p,n[p],r);else{n=B(n);for(var v=0,C=n.length;v<C;v++)this._on(n[v],r,u)}return this},off:function(n,r,u){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var p in n)this._off(p,n[p],r);else{n=B(n);for(var v=arguments.length===1,C=0,Z=n.length;C<Z;C++)v?this._off(n[C]):this._off(n[C],r,u)}return this},_on:function(n,r,u,p){if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}if(this._listens(n,r,u)===!1){u===this&&(u=void 0);var v={fn:r,ctx:u};p&&(v.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(v)}},_off:function(n,r,u){var p,v,C;if(this._events&&(p=this._events[n],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,C=p.length;v<C;v++)p[v].fn=E;delete this._events[n];return}if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}var Z=this._listens(n,r,u);if(Z!==!1){var ee=p[Z];this._firingCount&&(ee.fn=E,this._events[n]=p=p.slice()),p.splice(Z,1)}}},fire:function(n,r,u){if(!this.listens(n,u))return this;var p=f({},r,{type:n,target:this,sourceTarget:r&&r.sourceTarget||this});if(this._events){var v=this._events[n];if(v){this._firingCount=this._firingCount+1||1;for(var C=0,Z=v.length;C<Z;C++){var ee=v[C],ie=ee.fn;ee.once&&this.off(n,ie,ee.ctx),ie.call(ee.ctx||this,p)}this._firingCount--}}return u&&this._propagateEvent(p),this},listens:function(n,r,u,p){typeof n!="string"&&console.warn('"string" type argument expected');var v=r;typeof r!="function"&&(p=!!r,v=void 0,u=void 0);var C=this._events&&this._events[n];if(C&&C.length&&this._listens(n,v,u)!==!1)return!0;if(p){for(var Z in this._eventParents)if(this._eventParents[Z].listens(n,r,u,p))return!0}return!1},_listens:function(n,r,u){if(!this._events)return!1;var p=this._events[n]||[];if(!r)return!!p.length;u===this&&(u=void 0);for(var v=0,C=p.length;v<C;v++)if(p[v].fn===r&&p[v].ctx===u)return v;return!1},once:function(n,r,u){if(typeof n=="object")for(var p in n)this._on(p,n[p],r,!0);else{n=B(n);for(var v=0,C=n.length;v<C;v++)this._on(n[v],r,u,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[g(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[g(n)],this},_propagateEvent:function(n){for(var r in this._eventParents)this._eventParents[r].fire(n.type,f({layer:n.target,propagatedFrom:n.target},n),!0)}};z.addEventListener=z.on,z.removeEventListener=z.clearAllEventListeners=z.off,z.addOneTimeEventListener=z.once,z.fireEvent=z.fire,z.hasEventListeners=z.listens;var J=le.extend(z);function W(n,r,u){this.x=u?Math.round(n):n,this.y=u?Math.round(r):r}var ve=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(n){return this.clone()._add(U(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(U(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new W(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new W(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ve(this.x),this.y=ve(this.y),this},distanceTo:function(n){n=U(n);var r=n.x-this.x,u=n.y-this.y;return Math.sqrt(r*r+u*u)},equals:function(n){return n=U(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=U(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+P(this.x)+", "+P(this.y)+")"}};function U(n,r,u){return n instanceof W?n:T(n)?new W(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new W(n.x,n.y):new W(n,r,u)}function ne(n,r){if(n)for(var u=r?[n,r]:n,p=0,v=u.length;p<v;p++)this.extend(u[p])}ne.prototype={extend:function(n){var r,u;if(!n)return this;if(n instanceof W||typeof n[0]=="number"||"x"in n)r=u=U(n);else if(n=ge(n),r=n.min,u=n.max,!r||!u)return this;return!this.min&&!this.max?(this.min=r.clone(),this.max=u.clone()):(this.min.x=Math.min(r.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(r.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(n){return U((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return U(this.min.x,this.max.y)},getTopRight:function(){return U(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var r,u;return typeof n[0]=="number"||n instanceof W?n=U(n):n=ge(n),n instanceof ne?(r=n.min,u=n.max):r=u=n,r.x>=this.min.x&&u.x<=this.max.x&&r.y>=this.min.y&&u.y<=this.max.y},intersects:function(n){n=ge(n);var r=this.min,u=this.max,p=n.min,v=n.max,C=v.x>=r.x&&p.x<=u.x,Z=v.y>=r.y&&p.y<=u.y;return C&&Z},overlaps:function(n){n=ge(n);var r=this.min,u=this.max,p=n.min,v=n.max,C=v.x>r.x&&p.x<u.x,Z=v.y>r.y&&p.y<u.y;return C&&Z},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var r=this.min,u=this.max,p=Math.abs(r.x-u.x)*n,v=Math.abs(r.y-u.y)*n;return ge(U(r.x-p,r.y-v),U(u.x+p,u.y+v))},equals:function(n){return n?(n=ge(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function ge(n,r){return!n||n instanceof ne?n:new ne(n,r)}function oe(n,r){if(n)for(var u=r?[n,r]:n,p=0,v=u.length;p<v;p++)this.extend(u[p])}oe.prototype={extend:function(n){var r=this._southWest,u=this._northEast,p,v;if(n instanceof _e)p=n,v=n;else if(n instanceof oe){if(p=n._southWest,v=n._northEast,!p||!v)return this}else return n?this.extend(ye(n)||xe(n)):this;return!r&&!u?(this._southWest=new _e(p.lat,p.lng),this._northEast=new _e(v.lat,v.lng)):(r.lat=Math.min(p.lat,r.lat),r.lng=Math.min(p.lng,r.lng),u.lat=Math.max(v.lat,u.lat),u.lng=Math.max(v.lng,u.lng)),this},pad:function(n){var r=this._southWest,u=this._northEast,p=Math.abs(r.lat-u.lat)*n,v=Math.abs(r.lng-u.lng)*n;return new oe(new _e(r.lat-p,r.lng-v),new _e(u.lat+p,u.lng+v))},getCenter:function(){return new _e((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new _e(this.getNorth(),this.getWest())},getSouthEast:function(){return new _e(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof _e||"lat"in n?n=ye(n):n=xe(n);var r=this._southWest,u=this._northEast,p,v;return n instanceof oe?(p=n.getSouthWest(),v=n.getNorthEast()):p=v=n,p.lat>=r.lat&&v.lat<=u.lat&&p.lng>=r.lng&&v.lng<=u.lng},intersects:function(n){n=xe(n);var r=this._southWest,u=this._northEast,p=n.getSouthWest(),v=n.getNorthEast(),C=v.lat>=r.lat&&p.lat<=u.lat,Z=v.lng>=r.lng&&p.lng<=u.lng;return C&&Z},overlaps:function(n){n=xe(n);var r=this._southWest,u=this._northEast,p=n.getSouthWest(),v=n.getNorthEast(),C=v.lat>r.lat&&p.lat<u.lat,Z=v.lng>r.lng&&p.lng<u.lng;return C&&Z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,r){return n?(n=xe(n),this._southWest.equals(n.getSouthWest(),r)&&this._northEast.equals(n.getNorthEast(),r)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function xe(n,r){return n instanceof oe?n:new oe(n,r)}function _e(n,r,u){if(isNaN(n)||isNaN(r))throw new Error("Invalid LatLng object: ("+n+", "+r+")");this.lat=+n,this.lng=+r,u!==void 0&&(this.alt=+u)}_e.prototype={equals:function(n,r){if(!n)return!1;n=ye(n);var u=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return u<=(r===void 0?1e-9:r)},toString:function(n){return"LatLng("+P(this.lat,n)+", "+P(this.lng,n)+")"},distanceTo:function(n){return De.distance(this,ye(n))},wrap:function(){return De.wrapLatLng(this)},toBounds:function(n){var r=180*n/40075017,u=r/Math.cos(Math.PI/180*this.lat);return xe([this.lat-r,this.lng-u],[this.lat+r,this.lng+u])},clone:function(){return new _e(this.lat,this.lng,this.alt)}};function ye(n,r,u){return n instanceof _e?n:T(n)&&typeof n[0]!="object"?n.length===3?new _e(n[0],n[1],n[2]):n.length===2?new _e(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new _e(n.lat,"lng"in n?n.lng:n.lon,n.alt):r===void 0?null:new _e(n,r,u)}var Le={latLngToPoint:function(n,r){var u=this.projection.project(n),p=this.scale(r);return this.transformation._transform(u,p)},pointToLatLng:function(n,r){var u=this.scale(r),p=this.transformation.untransform(n,u);return this.projection.unproject(p)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var r=this.projection.bounds,u=this.scale(n),p=this.transformation.transform(r.min,u),v=this.transformation.transform(r.max,u);return new ne(p,v)},infinite:!1,wrapLatLng:function(n){var r=this.wrapLng?N(n.lng,this.wrapLng,!0):n.lng,u=this.wrapLat?N(n.lat,this.wrapLat,!0):n.lat,p=n.alt;return new _e(u,r,p)},wrapLatLngBounds:function(n){var r=n.getCenter(),u=this.wrapLatLng(r),p=r.lat-u.lat,v=r.lng-u.lng;if(p===0&&v===0)return n;var C=n.getSouthWest(),Z=n.getNorthEast(),ee=new _e(C.lat-p,C.lng-v),ie=new _e(Z.lat-p,Z.lng-v);return new oe(ee,ie)}},De=f({},Le,{wrapLng:[-180,180],R:6371e3,distance:function(n,r){var u=Math.PI/180,p=n.lat*u,v=r.lat*u,C=Math.sin((r.lat-n.lat)*u/2),Z=Math.sin((r.lng-n.lng)*u/2),ee=C*C+Math.cos(p)*Math.cos(v)*Z*Z,ie=2*Math.atan2(Math.sqrt(ee),Math.sqrt(1-ee));return this.R*ie}}),Tt=6378137,cs={R:Tt,MAX_LATITUDE:85.0511287798,project:function(n){var r=Math.PI/180,u=this.MAX_LATITUDE,p=Math.max(Math.min(u,n.lat),-u),v=Math.sin(p*r);return new W(this.R*n.lng*r,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(n){var r=180/Math.PI;return new _e((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*r,n.x*r/this.R)},bounds:function(){var n=Tt*Math.PI;return new ne([-n,-n],[n,n])}()};function je(n,r,u,p){if(T(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=r,this._c=u,this._d=p}je.prototype={transform:function(n,r){return this._transform(n.clone(),r)},_transform:function(n,r){return r=r||1,n.x=r*(this._a*n.x+this._b),n.y=r*(this._c*n.y+this._d),n},untransform:function(n,r){return r=r||1,new W((n.x/r-this._b)/this._a,(n.y/r-this._d)/this._c)}};function He(n,r,u,p){return new je(n,r,u,p)}var Ze=f({},De,{code:"EPSG:3857",projection:cs,transformation:function(){var n=.5/(Math.PI*cs.R);return He(n,.5,-n,.5)}()}),Be=f({},Ze,{code:"EPSG:900913"});function nt(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function As(n,r){var u="",p,v,C,Z,ee,ie;for(p=0,C=n.length;p<C;p++){for(ee=n[p],v=0,Z=ee.length;v<Z;v++)ie=ee[v],u+=(v?"L":"M")+ie.x+" "+ie.y;u+=r?ke.svg?"z":"x":""}return u||"M0 0"}var es=document.documentElement.style,Mr="ActiveXObject"in window,po=Mr&&!document.addEventListener,Bi="msLaunchUri"in navigator&&!("documentMode"in document),sa=ds("webkit"),xo=ds("android"),Ui=ds("android 2")||ds("android 3"),Rd=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ld=xo&&ds("Google")&&Rd<537&&!("AudioNode"in window),Sn=!!window.opera,Vt=!Bi&&ds("chrome"),Ys=ds("gecko")&&!sa&&!Sn&&!Mr,ts=!Vt&&ds("safari"),go=ds("phantom"),yo="OTransition"in es,Td=navigator.platform.indexOf("Win")===0,Wa=Mr&&"transition"in es,na="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ui,cn="MozPerspective"in es,Pr=!window.L_DISABLE_3D&&(Wa||na||cn)&&!yo&&!go,Gs=typeof orientation<"u"||ds("mobile"),Ad=Gs&&sa,bo=Gs&&na,Fi=!window.PointerEvent&&window.MSPointerEvent,Or=!!(window.PointerEvent||Fi),aa="ontouchstart"in window||!!window.TouchEvent,Md=!window.L_NO_TOUCH&&(aa||Or),vo=Gs&&Sn,jo=Gs&&Ys,qi=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Hi=function(){var n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",E,r),window.removeEventListener("testPassiveEventSupport",E,r)}catch{}return n}(),_o=function(){return!!document.createElement("canvas").getContext}(),Ii=!!(document.createElementNS&&nt("svg").createSVGRect),dn=!!Ii&&function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Pt=!Ii&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var r=n.firstChild;return r.style.behavior="url(#default#VML)",r&&typeof r.adj=="object"}catch{return!1}}(),Yt=navigator.platform.indexOf("Mac")===0,ra=navigator.platform.indexOf("Linux")===0;function ds(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var ke={ie:Mr,ielt9:po,edge:Bi,webkit:sa,android:xo,android23:Ui,androidStock:Ld,opera:Sn,chrome:Vt,gecko:Ys,safari:ts,phantom:go,opera12:yo,win:Td,ie3d:Wa,webkit3d:na,gecko3d:cn,any3d:Pr,mobile:Gs,mobileWebkit:Ad,mobileWebkit3d:bo,msPointer:Fi,pointer:Or,touch:Md,touchNative:aa,mobileOpera:vo,mobileGecko:jo,retina:qi,passiveEvents:Hi,canvas:_o,svg:Ii,vml:Pt,inlineSvg:dn,mac:Yt,linux:ra},No=ke.msPointer?"MSPointerDown":"pointerdown",Zi=ke.msPointer?"MSPointerMove":"pointermove",ia=ke.msPointer?"MSPointerUp":"pointerup",zr=ke.msPointer?"MSPointerCancel":"pointercancel",un={touchstart:No,touchmove:Zi,touchend:ia,touchcancel:zr},Cn={touchstart:Co,touchmove:Ja,touchend:Ja,touchcancel:Ja},Ms={},En=!1;function Et(n,r,u){return r==="touchstart"&&Pd(),Cn[r]?(u=Cn[r].bind(this,u),n.addEventListener(un[r],u,!1),u):(console.warn("wrong event specified:",r),E)}function wo(n,r,u){if(!un[r]){console.warn("wrong event specified:",r);return}n.removeEventListener(un[r],u,!1)}function So(n){Ms[n.pointerId]=n}function kn(n){Ms[n.pointerId]&&(Ms[n.pointerId]=n)}function Rn(n){delete Ms[n.pointerId]}function Pd(){En||(document.addEventListener(No,So,!0),document.addEventListener(Zi,kn,!0),document.addEventListener(ia,Rn,!0),document.addEventListener(zr,Rn,!0),En=!0)}function Ja(n,r){if(r.pointerType!==(r.MSPOINTER_TYPE_MOUSE||"mouse")){r.touches=[];for(var u in Ms)r.touches.push(Ms[u]);r.changedTouches=[r],n(r)}}function Co(n,r){r.MSPOINTER_TYPE_TOUCH&&r.pointerType===r.MSPOINTER_TYPE_TOUCH&&jt(r),Ja(n,r)}function Od(n){var r={},u,p;for(p in n)u=n[p],r[p]=u&&u.bind?u.bind(n):u;return n=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var Dr=200;function Br(n,r){n.addEventListener("dblclick",r);var u=0,p;function v(C){if(C.detail!==1){p=C.detail;return}if(!(C.pointerType==="mouse"||C.sourceCapabilities&&!C.sourceCapabilities.firesTouchEvents)){var Z=Yi(C);if(!(Z.some(function(ie){return ie instanceof HTMLLabelElement&&ie.attributes.for})&&!Z.some(function(ie){return ie instanceof HTMLInputElement||ie instanceof HTMLSelectElement}))){var ee=Date.now();ee-u<=Dr?(p++,p===2&&r(Od(C))):p=1,u=ee}}}return n.addEventListener("click",v),{dblclick:r,simDblclick:v}}function Ks(n,r){n.removeEventListener("dblclick",r.dblclick),n.removeEventListener("click",r.simDblclick)}var er=da(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),la=da(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ln=la==="webkitTransition"||la==="OTransition"?la+"End":"transitionend";function Ur(n){return typeof n=="string"?document.getElementById(n):n}function Tn(n,r){var u=n.style[r]||n.currentStyle&&n.currentStyle[r];if((!u||u==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(n,null);u=p?p[r]:null}return u==="auto"?null:u}function Xe(n,r,u){var p=document.createElement(n);return p.className=r||"",u&&u.appendChild(p),p}function ct(n){var r=n.parentNode;r&&r.removeChild(n)}function Ft(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function An(n){var r=n.parentNode;r&&r.lastChild!==n&&r.appendChild(n)}function oa(n){var r=n.parentNode;r&&r.firstChild!==n&&r.insertBefore(n,r.firstChild)}function ca(n,r){if(n.classList!==void 0)return n.classList.contains(r);var u=qt(n);return u.length>0&&new RegExp("(^|\\s)"+r+"(\\s|$)").test(u)}function Ue(n,r){if(n.classList!==void 0)for(var u=B(r),p=0,v=u.length;p<v;p++)n.classList.add(u[p]);else if(!ca(n,r)){var C=qt(n);$i(n,(C?C+" ":"")+r)}}function dt(n,r){n.classList!==void 0?n.classList.remove(r):$i(n,R((" "+qt(n)+" ").replace(" "+r+" "," ")))}function $i(n,r){n.className.baseVal===void 0?n.className=r:n.className.baseVal=r}function qt(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function Gt(n,r){"opacity"in n.style?n.style.opacity=r:"filter"in n.style&&Eo(n,r)}function Eo(n,r){var u=!1,p="DXImageTransform.Microsoft.Alpha";try{u=n.filters.item(p)}catch{if(r===1)return}r=Math.round(r*100),u?(u.Enabled=r!==100,u.Opacity=r):n.style.filter+=" progid:"+p+"(opacity="+r+")"}function da(n){for(var r=document.documentElement.style,u=0;u<n.length;u++)if(n[u]in r)return n[u];return!1}function us(n,r,u){var p=r||new W(0,0);n.style[er]=(ke.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(u?" scale("+u+")":"")}function gt(n,r){n._leaflet_pos=r,ke.any3d?us(n,r):(n.style.left=r.x+"px",n.style.top=r.y+"px")}function hn(n){return n._leaflet_pos||new W(0,0)}var Ps,tr,Fr;if("onselectstart"in document)Ps=function(){ze(window,"selectstart",jt)},tr=function(){Je(window,"selectstart",jt)};else{var ua=da(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ps=function(){if(ua){var n=document.documentElement.style;Fr=n[ua],n[ua]="none"}},tr=function(){ua&&(document.documentElement.style[ua]=Fr,Fr=void 0)}}function sr(){ze(window,"dragstart",jt)}function Vi(){Je(window,"dragstart",jt)}var qr,ha;function nr(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(ma(),qr=n,ha=n.style.outlineStyle,n.style.outlineStyle="none",ze(window,"keydown",ma))}function ma(){qr&&(qr.style.outlineStyle=ha,qr=void 0,ha=void 0,Je(window,"keydown",ma))}function Mn(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function mn(n){var r=n.getBoundingClientRect();return{x:r.width/n.offsetWidth||1,y:r.height/n.offsetHeight||1,boundingClientRect:r}}var ko={__proto__:null,TRANSFORM:er,TRANSITION:la,TRANSITION_END:Ln,get:Ur,getStyle:Tn,create:Xe,remove:ct,empty:Ft,toFront:An,toBack:oa,hasClass:ca,addClass:Ue,removeClass:dt,setClass:$i,getClass:qt,setOpacity:Gt,testProp:da,setTransform:us,setPosition:gt,getPosition:hn,get disableTextSelection(){return Ps},get enableTextSelection(){return tr},disableImageDrag:sr,enableImageDrag:Vi,preventOutline:nr,restoreOutline:ma,getSizedParentNode:Mn,getScale:mn};function ze(n,r,u,p){if(r&&typeof r=="object")for(var v in r)Pn(n,v,r[v],u);else{r=B(r);for(var C=0,Z=r.length;C<Z;C++)Pn(n,r[C],u,p)}return this}var ys="_leaflet_events";function Je(n,r,u,p){if(arguments.length===1)Os(n),delete n[ys];else if(r&&typeof r=="object")for(var v in r)zs(n,v,r[v],u);else if(r=B(r),arguments.length===2)Os(n,function(ee){return H(r,ee)!==-1});else for(var C=0,Z=r.length;C<Z;C++)zs(n,r[C],u,p);return this}function Os(n,r){for(var u in n[ys]){var p=u.split(/\d/)[0];(!r||r(p))&&zs(n,p,null,null,u)}}var ar={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Pn(n,r,u,p){var v=r+g(u)+(p?"_"+g(p):"");if(n[ys]&&n[ys][v])return this;var C=function(ee){return u.call(p||n,ee||window.event)},Z=C;!ke.touchNative&&ke.pointer&&r.indexOf("touch")===0?C=Et(n,r,C):ke.touch&&r==="dblclick"?C=Br(n,C):"addEventListener"in n?r==="touchstart"||r==="touchmove"||r==="wheel"||r==="mousewheel"?n.addEventListener(ar[r]||r,C,ke.passiveEvents?{passive:!1}:!1):r==="mouseenter"||r==="mouseleave"?(C=function(ee){ee=ee||window.event,zn(n,ee)&&Z(ee)},n.addEventListener(ar[r],C,!1)):n.addEventListener(r,Z,!1):n.attachEvent("on"+r,C),n[ys]=n[ys]||{},n[ys][v]=C}function zs(n,r,u,p,v){v=v||r+g(u)+(p?"_"+g(p):"");var C=n[ys]&&n[ys][v];if(!C)return this;!ke.touchNative&&ke.pointer&&r.indexOf("touch")===0?wo(n,r,C):ke.touch&&r==="dblclick"?Ks(n,C):"removeEventListener"in n?n.removeEventListener(ar[r]||r,C,!1):n.detachEvent("on"+r,C),n[ys][v]=null}function Qs(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function fa(n){return Pn(n,"wheel",Qs),this}function pa(n){return ze(n,"mousedown touchstart dblclick contextmenu",Qs),n._leaflet_disable_click=!0,this}function jt(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function Ds(n){return jt(n),Qs(n),this}function Yi(n){if(n.composedPath)return n.composedPath();for(var r=[],u=n.target;u;)r.push(u),u=u.parentNode;return r}function Ht(n,r){if(!r)return new W(n.clientX,n.clientY);var u=mn(r),p=u.boundingClientRect;return new W((n.clientX-p.left)/u.x-r.clientLeft,(n.clientY-p.top)/u.y-r.clientTop)}var On=ke.linux&&ke.chrome?window.devicePixelRatio:ke.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function rr(n){return ke.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/On:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function zn(n,r){var u=r.relatedTarget;if(!u)return!0;try{for(;u&&u!==n;)u=u.parentNode}catch{return!1}return u!==n}var zd={__proto__:null,on:ze,off:Je,stopPropagation:Qs,disableScrollPropagation:fa,disableClickPropagation:pa,preventDefault:jt,stop:Ds,getPropagationPath:Yi,getMousePosition:Ht,getWheelDelta:rr,isExternalTarget:zn,addListener:ze,removeListener:Je},Hr=J.extend({run:function(n,r,u,p){this.stop(),this._el=n,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=hn(n),this._offset=r.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=K(this._animate,this),this._step()},_step:function(n){var r=+new Date-this._startTime,u=this._duration*1e3;r<u?this._runFrame(this._easeOut(r/u),n):(this._runFrame(1),this._complete())},_runFrame:function(n,r){var u=this._startPos.add(this._offset.multiplyBy(n));r&&u._round(),gt(this._el,u),this.fire("step")},_complete:function(){Q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),Ve=J.extend({options:{crs:Ze,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,r){r=S(this,r),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=y(this._onResize,this),this._initEvents(),r.maxBounds&&this.setMaxBounds(r.maxBounds),r.zoom!==void 0&&(this._zoom=this._limitZoom(r.zoom)),r.center&&r.zoom!==void 0&&this.setView(ye(r.center),r.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=la&&ke.any3d&&!ke.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ze(this._proxy,Ln,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,r,u){if(r=r===void 0?this._zoom:this._limitZoom(r),n=this._limitCenter(ye(n),r,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=f({animate:u.animate},u.zoom),u.pan=f({animate:u.animate,duration:u.duration},u.pan));var p=this._zoom!==r?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,r,u.zoom):this._tryAnimatedPan(n,u.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(n,r,u.pan&&u.pan.noMoveStart),this},setZoom:function(n,r){return this._loaded?this.setView(this.getCenter(),n,{zoom:r}):(this._zoom=n,this)},zoomIn:function(n,r){return n=n||(ke.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,r)},zoomOut:function(n,r){return n=n||(ke.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,r)},setZoomAround:function(n,r,u){var p=this.getZoomScale(r),v=this.getSize().divideBy(2),C=n instanceof W?n:this.latLngToContainerPoint(n),Z=C.subtract(v).multiplyBy(1-1/p),ee=this.containerPointToLatLng(v.add(Z));return this.setView(ee,r,{zoom:u})},_getBoundsCenterZoom:function(n,r){r=r||{},n=n.getBounds?n.getBounds():xe(n);var u=U(r.paddingTopLeft||r.padding||[0,0]),p=U(r.paddingBottomRight||r.padding||[0,0]),v=this.getBoundsZoom(n,!1,u.add(p));if(v=typeof r.maxZoom=="number"?Math.min(r.maxZoom,v):v,v===1/0)return{center:n.getCenter(),zoom:v};var C=p.subtract(u).divideBy(2),Z=this.project(n.getSouthWest(),v),ee=this.project(n.getNorthEast(),v),ie=this.unproject(Z.add(ee).divideBy(2).add(C),v);return{center:ie,zoom:v}},fitBounds:function(n,r){if(n=xe(n),!n.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(n,r);return this.setView(u.center,u.zoom,r)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,r){return this.setView(n,this._zoom,{pan:r})},panBy:function(n,r){if(n=U(n).round(),r=r||{},!n.x&&!n.y)return this.fire("moveend");if(r.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Hr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),r.noMoveStart||this.fire("movestart"),r.animate!==!1){Ue(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,u,r.duration||.25,r.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,r,u){if(u=u||{},u.animate===!1||!ke.any3d)return this.setView(n,r,u);this._stop();var p=this.project(this.getCenter()),v=this.project(n),C=this.getSize(),Z=this._zoom;n=ye(n),r=r===void 0?Z:r;var ee=Math.max(C.x,C.y),ie=ee*this.getZoomScale(Z,r),pe=v.distanceTo(p)||1,Ne=1.42,we=Ne*Ne;function Ce(ft){var Fs=ft?-1:1,Js=ft?ie:ee,yn=ie*ie-ee*ee+Fs*we*we*pe*pe,en=2*Js*we*pe,yr=yn/en,ti=Math.sqrt(yr*yr+1)-yr,br=ti<1e-9?-18:Math.log(ti);return br}function Oe(ft){return(Math.exp(ft)-Math.exp(-ft))/2}function ut(ft){return(Math.exp(ft)+Math.exp(-ft))/2}function yt(ft){return Oe(ft)/ut(ft)}var zt=Ce(0);function hs(ft){return ee*(ut(zt)/ut(zt+Ne*ft))}function Yo(ft){return ee*(ut(zt)*yt(zt+Ne*ft)-Oe(zt))/we}function Go(ft){return 1-Math.pow(1-ft,1.5)}var gr=Date.now(),Ea=(Ce(1)-zt)/Ne,Ko=u.duration?1e3*u.duration:1e3*Ea*.8;function ka(){var ft=(Date.now()-gr)/Ko,Fs=Go(ft)*Ea;ft<=1?(this._flyToFrame=K(ka,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(Yo(Fs)/pe)),Z),this.getScaleZoom(ee/hs(Fs),Z),{flyTo:!0})):this._move(n,r)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),ka.call(this),this},flyToBounds:function(n,r){var u=this._getBoundsCenterZoom(n,r);return this.flyTo(u.center,u.zoom,r)},setMaxBounds:function(n){return n=xe(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var r=this.options.minZoom;return this.options.minZoom=n,this._loaded&&r!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var r=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&r!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,r){this._enforcingBounds=!0;var u=this.getCenter(),p=this._limitCenter(u,this._zoom,xe(n));return u.equals(p)||this.panTo(p,r),this._enforcingBounds=!1,this},panInside:function(n,r){r=r||{};var u=U(r.paddingTopLeft||r.padding||[0,0]),p=U(r.paddingBottomRight||r.padding||[0,0]),v=this.project(this.getCenter()),C=this.project(n),Z=this.getPixelBounds(),ee=ge([Z.min.add(u),Z.max.subtract(p)]),ie=ee.getSize();if(!ee.contains(C)){this._enforcingBounds=!0;var pe=C.subtract(ee.getCenter()),Ne=ee.extend(C).getSize().subtract(ie);v.x+=pe.x<0?-Ne.x:Ne.x,v.y+=pe.y<0?-Ne.y:Ne.y,this.panTo(this.unproject(v),r),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=f({animate:!1,pan:!0},n===!0?{animate:!0}:n);var r=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),p=r.divideBy(2).round(),v=u.divideBy(2).round(),C=p.subtract(v);return!C.x&&!C.y?this:(n.animate&&n.pan?this.panBy(C):(n.pan&&this._rawPanBy(C),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(y(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:r,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=f({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var r=y(this._handleGeolocationResponse,this),u=y(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(r,u,n):navigator.geolocation.getCurrentPosition(r,u,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var r=n.code,u=n.message||(r===1?"permission denied":r===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:r,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var r=n.coords.latitude,u=n.coords.longitude,p=new _e(r,u),v=p.toBounds(n.coords.accuracy*2),C=this._locateOptions;if(C.setView){var Z=this.getBoundsZoom(v);this.setView(p,C.maxZoom?Math.min(Z,C.maxZoom):Z)}var ee={latlng:p,bounds:v,timestamp:n.timestamp};for(var ie in n.coords)typeof n.coords[ie]=="number"&&(ee[ie]=n.coords[ie]);this.fire("locationfound",ee)}},addHandler:function(n,r){if(!r)return this;var u=this[n]=new r(this);return this._handlers.push(u),this.options[n]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ct(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)ct(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,r){var u="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),p=Xe("div",u,r||this._mapPane);return n&&(this._panes[n]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),r=this.unproject(n.getBottomLeft()),u=this.unproject(n.getTopRight());return new oe(r,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,r,u){n=xe(n),u=U(u||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),C=this.getMaxZoom(),Z=n.getNorthWest(),ee=n.getSouthEast(),ie=this.getSize().subtract(u),pe=ge(this.project(ee,p),this.project(Z,p)).getSize(),Ne=ke.any3d?this.options.zoomSnap:1,we=ie.x/pe.x,Ce=ie.y/pe.y,Oe=r?Math.max(we,Ce):Math.min(we,Ce);return p=this.getScaleZoom(Oe,p),Ne&&(p=Math.round(p/(Ne/100))*(Ne/100),p=r?Math.ceil(p/Ne)*Ne:Math.floor(p/Ne)*Ne),Math.max(v,Math.min(C,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,r){var u=this._getTopLeftPoint(n,r);return new ne(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,r){var u=this.options.crs;return r=r===void 0?this._zoom:r,u.scale(n)/u.scale(r)},getScaleZoom:function(n,r){var u=this.options.crs;r=r===void 0?this._zoom:r;var p=u.zoom(n*u.scale(r));return isNaN(p)?1/0:p},project:function(n,r){return r=r===void 0?this._zoom:r,this.options.crs.latLngToPoint(ye(n),r)},unproject:function(n,r){return r=r===void 0?this._zoom:r,this.options.crs.pointToLatLng(U(n),r)},layerPointToLatLng:function(n){var r=U(n).add(this.getPixelOrigin());return this.unproject(r)},latLngToLayerPoint:function(n){var r=this.project(ye(n))._round();return r._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(ye(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(xe(n))},distance:function(n,r){return this.options.crs.distance(ye(n),ye(r))},containerPointToLayerPoint:function(n){return U(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return U(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var r=this.containerPointToLayerPoint(U(n));return this.layerPointToLatLng(r)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ye(n)))},mouseEventToContainerPoint:function(n){return Ht(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var r=this._container=Ur(n);if(r){if(r._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ze(r,"scroll",this._onScroll,this),this._containerId=g(r)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&ke.any3d,Ue(n,"leaflet-container"+(ke.touch?" leaflet-touch":"")+(ke.retina?" leaflet-retina":"")+(ke.ielt9?" leaflet-oldie":"")+(ke.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var r=Tn(n,"position");r!=="absolute"&&r!=="relative"&&r!=="fixed"&&r!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),gt(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ue(n.markerPane,"leaflet-zoom-hide"),Ue(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,r,u){gt(this._mapPane,new W(0,0));var p=!this._loaded;this._loaded=!0,r=this._limitZoom(r),this.fire("viewprereset");var v=this._zoom!==r;this._moveStart(v,u)._move(n,r)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(n,r){return n&&this.fire("zoomstart"),r||this.fire("movestart"),this},_move:function(n,r,u,p){r===void 0&&(r=this._zoom);var v=this._zoom!==r;return this._zoom=r,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),p?u&&u.pinch&&this.fire("zoom",u):((v||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){gt(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[g(this._container)]=this;var r=n?Je:ze;r(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&r(window,"resize",this._onResize,this),ke.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Q(this._resizeRequest),this._resizeRequest=K(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,r){for(var u=[],p,v=r==="mouseout"||r==="mouseover",C=n.target||n.srcElement,Z=!1;C;){if(p=this._targets[g(C)],p&&(r==="click"||r==="preclick")&&this._draggableMoved(p)){Z=!0;break}if(p&&p.listens(r,!0)&&(v&&!zn(C,n)||(u.push(p),v))||C===this._container)break;C=C.parentNode}return!u.length&&!Z&&!v&&this.listens(r,!0)&&(u=[this]),u},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var r=n.target||n.srcElement;if(!(!this._loaded||r._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(r))){var u=n.type;u==="mousedown"&&nr(r),this._fireDOMEvent(n,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,r,u){if(n.type==="click"){var p=f({},n);p.type="preclick",this._fireDOMEvent(p,p.type,u)}var v=this._findEventTargets(n,r);if(u){for(var C=[],Z=0;Z<u.length;Z++)u[Z].listens(r,!0)&&C.push(u[Z]);v=C.concat(v)}if(v.length){r==="contextmenu"&&jt(n);var ee=v[0],ie={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var pe=ee.getLatLng&&(!ee._radius||ee._radius<=10);ie.containerPoint=pe?this.latLngToContainerPoint(ee.getLatLng()):this.mouseEventToContainerPoint(n),ie.layerPoint=this.containerPointToLayerPoint(ie.containerPoint),ie.latlng=pe?ee.getLatLng():this.layerPointToLatLng(ie.layerPoint)}for(Z=0;Z<v.length;Z++)if(v[Z].fire(r,ie,!0),ie.originalEvent._stopped||v[Z].options.bubblingMouseEvents===!1&&H(this._mouseEvents,r)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,r=this._handlers.length;n<r;n++)this._handlers[n].disable()},whenReady:function(n,r){return this._loaded?n.call(r||this,{target:this}):this.on("load",n,r),this},_getMapPanePos:function(){return hn(this._mapPane)||new W(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,r){var u=n&&r!==void 0?this._getNewPixelOrigin(n,r):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,r){var u=this.getSize()._divideBy(2);return this.project(n,r)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,r,u){var p=this._getNewPixelOrigin(u,r);return this.project(n,r)._subtract(p)},_latLngBoundsToNewLayerBounds:function(n,r,u){var p=this._getNewPixelOrigin(u,r);return ge([this.project(n.getSouthWest(),r)._subtract(p),this.project(n.getNorthWest(),r)._subtract(p),this.project(n.getSouthEast(),r)._subtract(p),this.project(n.getNorthEast(),r)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,r,u){if(!u)return n;var p=this.project(n,r),v=this.getSize().divideBy(2),C=new ne(p.subtract(v),p.add(v)),Z=this._getBoundsOffset(C,u,r);return Math.abs(Z.x)<=1&&Math.abs(Z.y)<=1?n:this.unproject(p.add(Z),r)},_limitOffset:function(n,r){if(!r)return n;var u=this.getPixelBounds(),p=new ne(u.min.add(n),u.max.add(n));return n.add(this._getBoundsOffset(p,r))},_getBoundsOffset:function(n,r,u){var p=ge(this.project(r.getNorthEast(),u),this.project(r.getSouthWest(),u)),v=p.min.subtract(n.min),C=p.max.subtract(n.max),Z=this._rebound(v.x,-C.x),ee=this._rebound(v.y,-C.y);return new W(Z,ee)},_rebound:function(n,r){return n+r>0?Math.round(n-r)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(r))},_limitZoom:function(n){var r=this.getMinZoom(),u=this.getMaxZoom(),p=ke.any3d?this.options.zoomSnap:1;return p&&(n=Math.round(n/p)*p),Math.max(r,Math.min(u,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){dt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,r){var u=this._getCenterOffset(n)._trunc();return(r&&r.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,r),!0)},_createAnimProxy:function(){var n=this._proxy=Xe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(r){var u=er,p=this._proxy.style[u];us(this._proxy,this.project(r.center,r.zoom),this.getZoomScale(r.zoom,1)),p===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ct(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),r=this.getZoom();us(this._proxy,this.project(n,r),this.getZoomScale(r,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,r,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(r-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(r),v=this._getCenterOffset(n)._divideBy(1-1/p);return u.animate!==!0&&!this.getSize().contains(v)?!1:(K(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(n,r,!0)},this),!0)},_animateZoom:function(n,r,u,p){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=r,Ue(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:r,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(y(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&dt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ir(n,r){return new Ve(n,r)}var Kt=le.extend({options:{position:"topright"},initialize:function(n){S(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var r=this._map;return r&&r.removeControl(this),this.options.position=n,r&&r.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var r=this._container=this.onAdd(n),u=this.getPosition(),p=n._controlCorners[u];return Ue(r,"leaflet-control"),u.indexOf("bottom")!==-1?p.insertBefore(r,p.firstChild):p.appendChild(r),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ct(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),xa=function(n){return new Kt(n)};Ve.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},r="leaflet-",u=this._controlContainer=Xe("div",r+"control-container",this._container);function p(v,C){var Z=r+v+" "+r+C;n[v+C]=Xe("div",Z,u)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)ct(this._controlCorners[n]);ct(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ro=Kt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,r,u,p){return u<p?-1:p<u?1:0}},initialize:function(n,r,u){S(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in n)this._addLayer(n[p],p);for(p in r)this._addLayer(r[p],p,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return Kt.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,r){return this._addLayer(n,r),this._map?this._update():this},addOverlay:function(n,r){return this._addLayer(n,r,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var r=this._getLayer(g(n));return r&&this._layers.splice(this._layers.indexOf(r),1),this._map?this._update():this},expand:function(){Ue(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(Ue(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):dt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return dt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",r=this._container=Xe("div",n),u=this.options.collapsed;r.setAttribute("aria-haspopup",!0),pa(r),fa(r);var p=this._section=Xe("section",n+"-list");u&&(this._map.on("click",this.collapse,this),ze(r,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Xe("a",n+"-toggle",r);v.href="#",v.title="Layers",v.setAttribute("role","button"),ze(v,{keydown:function(C){C.keyCode===13&&this._expandSafely()},click:function(C){jt(C),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=Xe("div",n+"-base",p),this._separator=Xe("div",n+"-separator",p),this._overlaysList=Xe("div",n+"-overlays",p),r.appendChild(p)},_getLayer:function(n){for(var r=0;r<this._layers.length;r++)if(this._layers[r]&&g(this._layers[r].layer)===n)return this._layers[r]},_addLayer:function(n,r,u){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:r,overlay:u}),this.options.sortLayers&&this._layers.sort(y(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ft(this._baseLayersList),Ft(this._overlaysList),this._layerControlInputs=[];var n,r,u,p,v=0;for(u=0;u<this._layers.length;u++)p=this._layers[u],this._addItem(p),r=r||p.overlay,n=n||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(n=n&&v>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=r&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var r=this._getLayer(g(n.target)),u=r.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;u&&this._map.fire(u,r)},_createRadioElement:function(n,r){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(r?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=u,p.firstChild},_addItem:function(n){var r=document.createElement("label"),u=this._map.hasLayer(n.layer),p;n.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=u):p=this._createRadioElement("leaflet-base-layers_"+g(this),u),this._layerControlInputs.push(p),p.layerId=g(n.layer),ze(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+n.name;var C=document.createElement("span");r.appendChild(C),C.appendChild(p),C.appendChild(v);var Z=n.overlay?this._overlaysList:this._baseLayersList;return Z.appendChild(r),this._checkDisabledLayers(),r},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,r,u,p=[],v=[];this._handlingClick=!0;for(var C=n.length-1;C>=0;C--)r=n[C],u=this._getLayer(r.layerId).layer,r.checked?p.push(u):r.checked||v.push(u);for(C=0;C<v.length;C++)this._map.hasLayer(v[C])&&this._map.removeLayer(v[C]);for(C=0;C<p.length;C++)this._map.hasLayer(p[C])||this._map.addLayer(p[C]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,r,u,p=this._map.getZoom(),v=n.length-1;v>=0;v--)r=n[v],u=this._getLayer(r.layerId).layer,r.disabled=u.options.minZoom!==void 0&&p<u.options.minZoom||u.options.maxZoom!==void 0&&p>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,ze(n,"click",jt),this.expand();var r=this;setTimeout(function(){Je(n,"click",jt),r._preventClick=!1})}}),Dd=function(n,r,u){return new Ro(n,r,u)},Gi=Kt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var r="leaflet-control-zoom",u=Xe("div",r+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,r+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,r+"-out",u,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,r,u,p,v){var C=Xe("a",u,p);return C.innerHTML=n,C.href="#",C.title=r,C.setAttribute("role","button"),C.setAttribute("aria-label",r),pa(C),ze(C,"click",Ds),ze(C,"click",v,this),ze(C,"click",this._refocusOnMap,this),C},_updateDisabled:function(){var n=this._map,r="leaflet-disabled";dt(this._zoomInButton,r),dt(this._zoomOutButton,r),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(Ue(this._zoomOutButton,r),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(Ue(this._zoomInButton,r),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ve.mergeOptions({zoomControl:!0}),Ve.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Gi,this.addControl(this.zoomControl))});var Ki=function(n){return new Gi(n)},Lo=Kt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var r="leaflet-control-scale",u=Xe("div",r),p=this.options;return this._addScales(p,r+"-line",u),n.on(p.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),u},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,r,u){n.metric&&(this._mScale=Xe("div",r,u)),n.imperial&&(this._iScale=Xe("div",r,u))},_update:function(){var n=this._map,r=n.getSize().y/2,u=n.distance(n.containerPointToLatLng([0,r]),n.containerPointToLatLng([this.options.maxWidth,r]));this._updateScales(u)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var r=this._getRoundNum(n),u=r<1e3?r+" m":r/1e3+" km";this._updateScale(this._mScale,u,r/n)},_updateImperial:function(n){var r=n*3.2808399,u,p,v;r>5280?(u=r/5280,p=this._getRoundNum(u),this._updateScale(this._iScale,p+" mi",p/u)):(v=this._getRoundNum(r),this._updateScale(this._iScale,v+" ft",v/r))},_updateScale:function(n,r,u){n.style.width=Math.round(this.options.maxWidth*u)+"px",n.innerHTML=r},_getRoundNum:function(n){var r=Math.pow(10,(Math.floor(n)+"").length-1),u=n/r;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,r*u}}),Bd=function(n){return new Lo(n)},Ud='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Qi=Kt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ke.inlineSvg?Ud+" ":"")+"Leaflet</a>"},initialize:function(n){S(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=Xe("div","leaflet-control-attribution"),pa(this._container);for(var r in n._layers)n._layers[r].getAttribution&&this.addAttribution(n._layers[r].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var r in this._attributions)this._attributions[r]&&n.push(r);var u=[];this.options.prefix&&u.push(this.options.prefix),n.length&&u.push(n.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});Ve.mergeOptions({attributionControl:!0}),Ve.addInitHook(function(){this.options.attributionControl&&new Qi().addTo(this)});var Fd=function(n){return new Qi(n)};Kt.Layers=Ro,Kt.Zoom=Gi,Kt.Scale=Lo,Kt.Attribution=Qi,xa.layers=Dd,xa.zoom=Ki,xa.scale=Bd,xa.attribution=Fd;var bs=le.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});bs.addTo=function(n,r){return n.addHandler(r,this),this};var qd={Events:z},To=ke.touch?"touchstart mousedown":"mousedown",fn=J.extend({options:{clickTolerance:3},initialize:function(n,r,u,p){S(this,p),this._element=n,this._dragStartTarget=r||n,this._preventOutline=u},enable:function(){this._enabled||(ze(this._dragStartTarget,To,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(fn._dragging===this&&this.finishDrag(!0),Je(this._dragStartTarget,To,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!ca(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){fn._dragging===this&&this.finishDrag();return}if(!(fn._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(fn._dragging=this,this._preventOutline&&nr(this._element),sr(),Ps(),!this._moving)){this.fire("down");var r=n.touches?n.touches[0]:n,u=Mn(this._element);this._startPoint=new W(r.clientX,r.clientY),this._startPos=hn(this._element),this._parentScale=mn(u);var p=n.type==="mousedown";ze(document,p?"mousemove":"touchmove",this._onMove,this),ze(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var r=n.touches&&n.touches.length===1?n.touches[0]:n,u=new W(r.clientX,r.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,jt(n),this._moved||(this.fire("dragstart"),this._moved=!0,Ue(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ue(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),gt(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){dt(document.body,"leaflet-dragging"),this._lastTarget&&(dt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Je(document,"mousemove touchmove",this._onMove,this),Je(document,"mouseup touchend touchcancel",this._onUp,this),Vi(),tr();var r=this._moved&&this._moving;this._moving=!1,fn._dragging=!1,r&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function Ao(n,r,u){var p,v=[1,4,2,8],C,Z,ee,ie,pe,Ne,we,Ce;for(C=0,Ne=n.length;C<Ne;C++)n[C]._code=Dn(n[C],r);for(ee=0;ee<4;ee++){for(we=v[ee],p=[],C=0,Ne=n.length,Z=Ne-1;C<Ne;Z=C++)ie=n[C],pe=n[Z],ie._code&we?pe._code&we||(Ce=Zr(pe,ie,we,r,u),Ce._code=Dn(Ce,r),p.push(Ce)):(pe._code&we&&(Ce=Zr(pe,ie,we,r,u),Ce._code=Dn(Ce,r),p.push(Ce)),p.push(ie));n=p}return n}function Ir(n,r){var u,p,v,C,Z,ee,ie,pe,Ne;if(!n||n.length===0)throw new Error("latlngs not passed");Ot(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var we=ye([0,0]),Ce=xe(n),Oe=Ce.getNorthWest().distanceTo(Ce.getSouthWest())*Ce.getNorthEast().distanceTo(Ce.getNorthWest());Oe<1700&&(we=Xi(n));var ut=n.length,yt=[];for(u=0;u<ut;u++){var zt=ye(n[u]);yt.push(r.project(ye([zt.lat-we.lat,zt.lng-we.lng])))}for(ee=ie=pe=0,u=0,p=ut-1;u<ut;p=u++)v=yt[u],C=yt[p],Z=v.y*C.x-C.y*v.x,ie+=(v.x+C.x)*Z,pe+=(v.y+C.y)*Z,ee+=Z*3;ee===0?Ne=yt[0]:Ne=[ie/ee,pe/ee];var hs=r.unproject(U(Ne));return ye([hs.lat+we.lat,hs.lng+we.lng])}function Xi(n){for(var r=0,u=0,p=0,v=0;v<n.length;v++){var C=ye(n[v]);r+=C.lat,u+=C.lng,p++}return ye([r/p,u/p])}var Hd={__proto__:null,clipPolygon:Ao,polygonCenter:Ir,centroid:Xi};function Mo(n,r){if(!r||!n.length)return n.slice();var u=r*r;return n=$d(n,u),n=Zd(n,u),n}function Wi(n,r,u){return Math.sqrt(Bn(n,r,u,!0))}function Id(n,r,u){return Bn(n,r,u)}function Zd(n,r){var u=n.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(u);v[0]=v[u-1]=1,Ji(n,v,r,0,u-1);var C,Z=[];for(C=0;C<u;C++)v[C]&&Z.push(n[C]);return Z}function Ji(n,r,u,p,v){var C=0,Z,ee,ie;for(ee=p+1;ee<=v-1;ee++)ie=Bn(n[ee],n[p],n[v],!0),ie>C&&(Z=ee,C=ie);C>u&&(r[Z]=1,Ji(n,r,u,p,Z),Ji(n,r,u,Z,v))}function $d(n,r){for(var u=[n[0]],p=1,v=0,C=n.length;p<C;p++)Vd(n[p],n[v])>r&&(u.push(n[p]),v=p);return v<C-1&&u.push(n[C-1]),u}var Po;function Oo(n,r,u,p,v){var C=p?Po:Dn(n,u),Z=Dn(r,u),ee,ie,pe;for(Po=Z;;){if(!(C|Z))return[n,r];if(C&Z)return!1;ee=C||Z,ie=Zr(n,r,ee,u,v),pe=Dn(ie,u),ee===C?(n=ie,C=pe):(r=ie,Z=pe)}}function Zr(n,r,u,p,v){var C=r.x-n.x,Z=r.y-n.y,ee=p.min,ie=p.max,pe,Ne;return u&8?(pe=n.x+C*(ie.y-n.y)/Z,Ne=ie.y):u&4?(pe=n.x+C*(ee.y-n.y)/Z,Ne=ee.y):u&2?(pe=ie.x,Ne=n.y+Z*(ie.x-n.x)/C):u&1&&(pe=ee.x,Ne=n.y+Z*(ee.x-n.x)/C),new W(pe,Ne,v)}function Dn(n,r){var u=0;return n.x<r.min.x?u|=1:n.x>r.max.x&&(u|=2),n.y<r.min.y?u|=4:n.y>r.max.y&&(u|=8),u}function Vd(n,r){var u=r.x-n.x,p=r.y-n.y;return u*u+p*p}function Bn(n,r,u,p){var v=r.x,C=r.y,Z=u.x-v,ee=u.y-C,ie=Z*Z+ee*ee,pe;return ie>0&&(pe=((n.x-v)*Z+(n.y-C)*ee)/ie,pe>1?(v=u.x,C=u.y):pe>0&&(v+=Z*pe,C+=ee*pe)),Z=n.x-v,ee=n.y-C,p?Z*Z+ee*ee:new W(v,C)}function Ot(n){return!T(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function zo(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ot(n)}function el(n,r){var u,p,v,C,Z,ee,ie,pe;if(!n||n.length===0)throw new Error("latlngs not passed");Ot(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var Ne=ye([0,0]),we=xe(n),Ce=we.getNorthWest().distanceTo(we.getSouthWest())*we.getNorthEast().distanceTo(we.getNorthWest());Ce<1700&&(Ne=Xi(n));var Oe=n.length,ut=[];for(u=0;u<Oe;u++){var yt=ye(n[u]);ut.push(r.project(ye([yt.lat-Ne.lat,yt.lng-Ne.lng])))}for(u=0,p=0;u<Oe-1;u++)p+=ut[u].distanceTo(ut[u+1])/2;if(p===0)pe=ut[0];else for(u=0,C=0;u<Oe-1;u++)if(Z=ut[u],ee=ut[u+1],v=Z.distanceTo(ee),C+=v,C>p){ie=(C-p)/v,pe=[ee.x-ie*(ee.x-Z.x),ee.y-ie*(ee.y-Z.y)];break}var zt=r.unproject(U(pe));return ye([zt.lat+Ne.lat,zt.lng+Ne.lng])}var Do={__proto__:null,simplify:Mo,pointToSegmentDistance:Wi,closestPointOnSegment:Id,clipSegment:Oo,_getEdgeIntersection:Zr,_getBitCode:Dn,_sqClosestPointOnSegment:Bn,isFlat:Ot,_flat:zo,polylineCenter:el},$r={project:function(n){return new W(n.lng,n.lat)},unproject:function(n){return new _e(n.y,n.x)},bounds:new ne([-180,-90],[180,90])},Vr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ne([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var r=Math.PI/180,u=this.R,p=n.lat*r,v=this.R_MINOR/u,C=Math.sqrt(1-v*v),Z=C*Math.sin(p),ee=Math.tan(Math.PI/4-p/2)/Math.pow((1-Z)/(1+Z),C/2);return p=-u*Math.log(Math.max(ee,1e-10)),new W(n.lng*r*u,p)},unproject:function(n){for(var r=180/Math.PI,u=this.R,p=this.R_MINOR/u,v=Math.sqrt(1-p*p),C=Math.exp(-n.y/u),Z=Math.PI/2-2*Math.atan(C),ee=0,ie=.1,pe;ee<15&&Math.abs(ie)>1e-7;ee++)pe=v*Math.sin(Z),pe=Math.pow((1-pe)/(1+pe),v/2),ie=Math.PI/2-2*Math.atan(C*pe)-Z,Z+=ie;return new _e(Z*r,n.x*r/u)}},Bo={__proto__:null,LonLat:$r,Mercator:Vr,SphericalMercator:cs},ga=f({},De,{code:"EPSG:3395",projection:Vr,transformation:function(){var n=.5/(Math.PI*Vr.R);return He(n,.5,-n,.5)}()}),Uo=f({},De,{code:"EPSG:4326",projection:$r,transformation:He(1/180,1,-1/180,.5)}),Yd=f({},Le,{projection:$r,transformation:He(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,r){var u=r.lng-n.lng,p=r.lat-n.lat;return Math.sqrt(u*u+p*p)},infinite:!0});Le.Earth=De,Le.EPSG3395=ga,Le.EPSG3857=Ze,Le.EPSG900913=Be,Le.EPSG4326=Uo,Le.Simple=Yd;var vs=J.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[g(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[g(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var r=n.target;if(r.hasLayer(this)){if(this._map=r,this._zoomAnimated=r._zoomAnimated,this.getEvents){var u=this.getEvents();r.on(u,this),this.once("remove",function(){r.off(u,this)},this)}this.onAdd(r),this.fire("add"),r.fire("layeradd",{layer:this})}}});Ve.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var r=g(n);return this._layers[r]?this:(this._layers[r]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var r=g(n);return this._layers[r]?(this._loaded&&n.onRemove(this),delete this._layers[r],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return g(n)in this._layers},eachLayer:function(n,r){for(var u in this._layers)n.call(r,this._layers[u]);return this},_addLayers:function(n){n=n?T(n)?n:[n]:[];for(var r=0,u=n.length;r<u;r++)this.addLayer(n[r])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[g(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var r=g(n);this._zoomBoundLayers[r]&&(delete this._zoomBoundLayers[r],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,r=-1/0,u=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;n=v.minZoom===void 0?n:Math.min(n,v.minZoom),r=v.maxZoom===void 0?r:Math.max(r,v.maxZoom)}this._layersMaxZoom=r===-1/0?void 0:r,this._layersMinZoom=n===1/0?void 0:n,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Un=vs.extend({initialize:function(n,r){S(this,r),this._layers={};var u,p;if(n)for(u=0,p=n.length;u<p;u++)this.addLayer(n[u])},addLayer:function(n){var r=this.getLayerId(n);return this._layers[r]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var r=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[r]&&this._map.removeLayer(this._layers[r]),delete this._layers[r],this},hasLayer:function(n){var r=typeof n=="number"?n:this.getLayerId(n);return r in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var r=Array.prototype.slice.call(arguments,1),u,p;for(u in this._layers)p=this._layers[u],p[n]&&p[n].apply(p,r);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,r){for(var u in this._layers)n.call(r,this._layers[u]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return g(n)}}),Fo=function(n,r){return new Un(n,r)},ss=Un.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),Un.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),Un.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new oe;for(var r in this._layers){var u=this._layers[r];n.extend(u.getBounds?u.getBounds():u.getLatLng())}return n}}),lr=function(n,r){return new ss(n,r)},ya=le.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){S(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,r){var u=this._getIconUrl(n);if(!u){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(u,r&&r.tagName==="IMG"?r:null);return this._setIconStyles(p,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(n,r){var u=this.options,p=u[r+"Size"];typeof p=="number"&&(p=[p,p]);var v=U(p),C=U(r==="shadow"&&u.shadowAnchor||u.iconAnchor||v&&v.divideBy(2,!0));n.className="leaflet-marker-"+r+" "+(u.className||""),C&&(n.style.marginLeft=-C.x+"px",n.style.marginTop=-C.y+"px"),v&&(n.style.width=v.x+"px",n.style.height=v.y+"px")},_createImg:function(n,r){return r=r||document.createElement("img"),r.src=n,r},_getIconUrl:function(n){return ke.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function Yr(n){return new ya(n)}var ba=ya.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof ba.imagePath!="string"&&(ba.imagePath=this._detectIconPath()),(this.options.imagePath||ba.imagePath)+ya.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var r=function(u,p,v){var C=p.exec(u);return C&&C[v]};return n=r(n,/^url\((['"])?(.+)\1\)$/,2),n&&r(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=Xe("div","leaflet-default-icon-path",document.body),r=Tn(n,"background-image")||Tn(n,"backgroundImage");if(document.body.removeChild(n),r=this._stripUrl(r),r)return r;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),tl=bs.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new fn(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ue(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&dt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var r=this._marker,u=r._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,C=hn(r._icon),Z=u.getPixelBounds(),ee=u.getPixelOrigin(),ie=ge(Z.min._subtract(ee).add(v),Z.max._subtract(ee).subtract(v));if(!ie.contains(C)){var pe=U((Math.max(ie.max.x,C.x)-ie.max.x)/(Z.max.x-ie.max.x)-(Math.min(ie.min.x,C.x)-ie.min.x)/(Z.min.x-ie.min.x),(Math.max(ie.max.y,C.y)-ie.max.y)/(Z.max.y-ie.max.y)-(Math.min(ie.min.y,C.y)-ie.min.y)/(Z.min.y-ie.min.y)).multiplyBy(p);u.panBy(pe,{animate:!1}),this._draggable._newPos._add(pe),this._draggable._startPos._add(pe),gt(r._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=K(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(Q(this._panRequest),this._panRequest=K(this._adjustPan.bind(this,n)))},_onDrag:function(n){var r=this._marker,u=r._shadow,p=hn(r._icon),v=r._map.layerPointToLatLng(p);u&&gt(u,p),r._latlng=v,n.latlng=v,n.oldLatLng=this._oldLatLng,r.fire("move",n).fire("drag",n)},_onDragEnd:function(n){Q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),va=vs.extend({options:{icon:new ba,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,r){S(this,r),this._latlng=ye(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var r=this._latlng;return this._latlng=ye(n),this.update(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,r="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=n.icon.createIcon(this._icon),p=!1;u!==this._icon&&(this._icon&&this._removeIcon(),p=!0,n.title&&(u.title=n.title),u.tagName==="IMG"&&(u.alt=n.alt||"")),Ue(u,r),n.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(u,"focus",this._panOnFocus,this);var v=n.icon.createShadow(this._shadow),C=!1;v!==this._shadow&&(this._removeShadow(),C=!0),v&&(Ue(v,r),v.alt=""),this._shadow=v,n.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&C&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Je(this._icon,"focus",this._panOnFocus,this),ct(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ct(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&gt(this._icon,n),this._shadow&&gt(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(r)},_initInteraction:function(){if(this.options.interactive&&(Ue(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),tl)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new tl(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&Gt(this._icon,n),this._shadow&&Gt(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var r=this.options.icon.options,u=r.iconSize?U(r.iconSize):U(0,0),p=r.iconAnchor?U(r.iconAnchor):U(0,0);n.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:u.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function sl(n,r){return new va(n,r)}var Xs=vs.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return S(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),or=Xs.extend({options:{fill:!0,radius:10},initialize:function(n,r){S(this,r),this._latlng=ye(n),this._radius=this.options.radius},setLatLng:function(n){var r=this._latlng;return this._latlng=ye(n),this.redraw(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var r=n&&n.radius||this._radius;return Xs.prototype.setStyle.call(this,n),this.setRadius(r),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,r=this._radiusY||n,u=this._clickTolerance(),p=[n+u,r+u];this._pxBounds=new ne(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function qo(n,r){return new or(n,r)}var nl=or.extend({initialize:function(n,r,u){if(typeof r=="number"&&(r=f({},u,{radius:r})),S(this,r),this._latlng=ye(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new oe(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:Xs.prototype.setStyle,_project:function(){var n=this._latlng.lng,r=this._latlng.lat,u=this._map,p=u.options.crs;if(p.distance===De.distance){var v=Math.PI/180,C=this._mRadius/De.R/v,Z=u.project([r+C,n]),ee=u.project([r-C,n]),ie=Z.add(ee).divideBy(2),pe=u.unproject(ie).lat,Ne=Math.acos((Math.cos(C*v)-Math.sin(r*v)*Math.sin(pe*v))/(Math.cos(r*v)*Math.cos(pe*v)))/v;(isNaN(Ne)||Ne===0)&&(Ne=C/Math.cos(Math.PI/180*r)),this._point=ie.subtract(u.getPixelOrigin()),this._radius=isNaN(Ne)?0:ie.x-u.project([pe,n-Ne]).x,this._radiusY=ie.y-Z.y}else{var we=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(we).x}this._updateBounds()}});function Gd(n,r,u){return new nl(n,r,u)}var Ws=Xs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,r){S(this,r),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var r=1/0,u=null,p=Bn,v,C,Z=0,ee=this._parts.length;Z<ee;Z++)for(var ie=this._parts[Z],pe=1,Ne=ie.length;pe<Ne;pe++){v=ie[pe-1],C=ie[pe];var we=p(n,v,C,!0);we<r&&(r=we,u=p(n,v,C))}return u&&(u.distance=Math.sqrt(r)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return el(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,r){return r=r||this._defaultShape(),n=ye(n),r.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new oe,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return Ot(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var r=[],u=Ot(n),p=0,v=n.length;p<v;p++)u?(r[p]=ye(n[p]),this._bounds.extend(r[p])):r[p]=this._convertLatLngs(n[p]);return r},_project:function(){var n=new ne;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),r=new W(n,n);this._rawPxBounds&&(this._pxBounds=new ne([this._rawPxBounds.min.subtract(r),this._rawPxBounds.max.add(r)]))},_projectLatlngs:function(n,r,u){var p=n[0]instanceof _e,v=n.length,C,Z;if(p){for(Z=[],C=0;C<v;C++)Z[C]=this._map.latLngToLayerPoint(n[C]),u.extend(Z[C]);r.push(Z)}else for(C=0;C<v;C++)this._projectLatlngs(n[C],r,u)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var r=this._parts,u,p,v,C,Z,ee,ie;for(u=0,v=0,C=this._rings.length;u<C;u++)for(ie=this._rings[u],p=0,Z=ie.length;p<Z-1;p++)ee=Oo(ie[p],ie[p+1],n,p,!0),ee&&(r[v]=r[v]||[],r[v].push(ee[0]),(ee[1]!==ie[p+1]||p===Z-2)&&(r[v].push(ee[1]),v++))}},_simplifyPoints:function(){for(var n=this._parts,r=this.options.smoothFactor,u=0,p=n.length;u<p;u++)n[u]=Mo(n[u],r)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,r){var u,p,v,C,Z,ee,ie=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(u=0,C=this._parts.length;u<C;u++)for(ee=this._parts[u],p=0,Z=ee.length,v=Z-1;p<Z;v=p++)if(!(!r&&p===0)&&Wi(n,ee[v],ee[p])<=ie)return!0;return!1}});function Kd(n,r){return new Ws(n,r)}Ws._flat=zo;var ja=Ws.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ir(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var r=Ws.prototype._convertLatLngs.call(this,n),u=r.length;return u>=2&&r[0]instanceof _e&&r[0].equals(r[u-1])&&r.pop(),r},_setLatLngs:function(n){Ws.prototype._setLatLngs.call(this,n),Ot(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ot(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,r=this.options.weight,u=new W(r,r);if(n=new ne(n.min.subtract(u),n.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,C;p<v;p++)C=Ao(this._rings[p],n,!0),C.length&&this._parts.push(C)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var r=!1,u,p,v,C,Z,ee,ie,pe;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(C=0,ie=this._parts.length;C<ie;C++)for(u=this._parts[C],Z=0,pe=u.length,ee=pe-1;Z<pe;ee=Z++)p=u[Z],v=u[ee],p.y>n.y!=v.y>n.y&&n.x<(v.x-p.x)*(n.y-p.y)/(v.y-p.y)+p.x&&(r=!r);return r||Ws.prototype._containsPoint.call(this,n,!0)}});function ns(n,r){return new ja(n,r)}var as=ss.extend({initialize:function(n,r){S(this,r),this._layers={},n&&this.addData(n)},addData:function(n){var r=T(n)?n:n.features,u,p,v;if(r){for(u=0,p=r.length;u<p;u++)v=r[u],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var C=this.options;if(C.filter&&!C.filter(n))return this;var Z=cr(n,C);return Z?(Z.feature=_a(n),Z.defaultOptions=Z.options,this.resetStyle(Z),C.onEachFeature&&C.onEachFeature(n,Z),this.addLayer(Z)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=f({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(r){this._setLayerStyle(r,n)},this)},_setLayerStyle:function(n,r){n.setStyle&&(typeof r=="function"&&(r=r(n.feature)),n.setStyle(r))}});function cr(n,r){var u=n.type==="Feature"?n.geometry:n,p=u?u.coordinates:null,v=[],C=r&&r.pointToLayer,Z=r&&r.coordsToLatLng||Gr,ee,ie,pe,Ne;if(!p&&!u)return null;switch(u.type){case"Point":return ee=Z(p),al(C,n,ee,r);case"MultiPoint":for(pe=0,Ne=p.length;pe<Ne;pe++)ee=Z(p[pe]),v.push(al(C,n,ee,r));return new ss(v);case"LineString":case"MultiLineString":return ie=dr(p,u.type==="LineString"?0:1,Z),new Ws(ie,r);case"Polygon":case"MultiPolygon":return ie=dr(p,u.type==="Polygon"?1:2,Z),new ja(ie,r);case"GeometryCollection":for(pe=0,Ne=u.geometries.length;pe<Ne;pe++){var we=cr({geometry:u.geometries[pe],type:"Feature",properties:n.properties},r);we&&v.push(we)}return new ss(v);case"FeatureCollection":for(pe=0,Ne=u.features.length;pe<Ne;pe++){var Ce=cr(u.features[pe],r);Ce&&v.push(Ce)}return new ss(v);default:throw new Error("Invalid GeoJSON object.")}}function al(n,r,u,p){return n?n(r,u):new va(u,p&&p.markersInheritOptions&&p)}function Gr(n){return new _e(n[1],n[0],n[2])}function dr(n,r,u){for(var p=[],v=0,C=n.length,Z;v<C;v++)Z=r?dr(n[v],r-1,u):(u||Gr)(n[v]),p.push(Z);return p}function ur(n,r){return n=ye(n),n.alt!==void 0?[P(n.lng,r),P(n.lat,r),P(n.alt,r)]:[P(n.lng,r),P(n.lat,r)]}function Kr(n,r,u,p){for(var v=[],C=0,Z=n.length;C<Z;C++)v.push(r?Kr(n[C],Ot(n[C])?0:r-1,u,p):ur(n[C],p));return!r&&u&&v.length>0&&v.push(v[0].slice()),v}function js(n,r){return n.feature?f({},n.feature,{geometry:r}):_a(r)}function _a(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var Fn={toGeoJSON:function(n){return js(this,{type:"Point",coordinates:ur(this.getLatLng(),n)})}};va.include(Fn),nl.include(Fn),or.include(Fn),Ws.include({toGeoJSON:function(n){var r=!Ot(this._latlngs),u=Kr(this._latlngs,r?1:0,!1,n);return js(this,{type:(r?"Multi":"")+"LineString",coordinates:u})}}),ja.include({toGeoJSON:function(n){var r=!Ot(this._latlngs),u=r&&!Ot(this._latlngs[0]),p=Kr(this._latlngs,u?2:r?1:0,!0,n);return r||(p=[p]),js(this,{type:(u?"Multi":"")+"Polygon",coordinates:p})}}),Un.include({toMultiPoint:function(n){var r=[];return this.eachLayer(function(u){r.push(u.toGeoJSON(n).geometry.coordinates)}),js(this,{type:"MultiPoint",coordinates:r})},toGeoJSON:function(n){var r=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(r==="MultiPoint")return this.toMultiPoint(n);var u=r==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var C=v.toGeoJSON(n);if(u)p.push(C.geometry);else{var Z=_a(C);Z.type==="FeatureCollection"?p.push.apply(p,Z.features):p.push(Z)}}}),u?js(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Qr(n,r){return new as(n,r)}var Ho=Qr,Bs=vs.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,r,u){this._url=n,this._bounds=xe(r),S(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ue(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ct(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&An(this._image),this},bringToBack:function(){return this._map&&oa(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=xe(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",r=this._image=n?this._url:Xe("img");if(Ue(r,"leaflet-image-layer"),this._zoomAnimated&&Ue(r,"leaflet-zoom-animated"),this.options.className&&Ue(r,this.options.className),r.onselectstart=E,r.onmousemove=E,r.onload=y(this.fire,this,"load"),r.onerror=y(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=r.src;return}r.src=this._url,r.alt=this.options.alt},_animateZoom:function(n){var r=this._map.getZoomScale(n.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;us(this._image,u,r)},_reset:function(){var n=this._image,r=new ne(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=r.getSize();gt(n,r.min),n.style.width=u.x+"px",n.style.height=u.y+"px"},_updateOpacity:function(){Gt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),Na=function(n,r,u){return new Bs(n,r,u)},Xr=Bs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",r=this._image=n?this._url:Xe("video");if(Ue(r,"leaflet-image-layer"),this._zoomAnimated&&Ue(r,"leaflet-zoom-animated"),this.options.className&&Ue(r,this.options.className),r.onselectstart=E,r.onmousemove=E,r.onloadeddata=y(this.fire,this,"load"),n){for(var u=r.getElementsByTagName("source"),p=[],v=0;v<u.length;v++)p.push(u[v].src);this._url=u.length>0?p:[r.src];return}T(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(r.style,"objectFit")&&(r.style.objectFit="fill"),r.autoplay=!!this.options.autoplay,r.loop=!!this.options.loop,r.muted=!!this.options.muted,r.playsInline=!!this.options.playsInline;for(var C=0;C<this._url.length;C++){var Z=Xe("source");Z.src=this._url[C],r.appendChild(Z)}}});function Io(n,r,u){return new Xr(n,r,u)}var pn=Bs.extend({_initImage:function(){var n=this._image=this._url;Ue(n,"leaflet-image-layer"),this._zoomAnimated&&Ue(n,"leaflet-zoom-animated"),this.options.className&&Ue(n,this.options.className),n.onselectstart=E,n.onmousemove=E}});function Zo(n,r,u){return new pn(n,r,u)}var _s=vs.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,r){n&&(n instanceof _e||T(n))?(this._latlng=ye(n),S(this,r)):(S(this,n),this._source=r),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&Gt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&Gt(this._container,1),this.bringToFront(),this.options.interactive&&(Ue(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(Gt(this._container,0),this._removeTimeout=setTimeout(y(ct,void 0,this._container),200)):ct(this._container),this.options.interactive&&(dt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=ye(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&An(this._container),this},bringToBack:function(){return this._map&&oa(this._container),this},_prepareOpen:function(n){var r=this._source;if(!r._map)return!1;if(r instanceof ss){r=null;var u=this._source._layers;for(var p in u)if(u[p]._map){r=u[p];break}if(!r)return!1;this._source=r}if(!n)if(r.getCenter)n=r.getCenter();else if(r.getLatLng)n=r.getLatLng();else if(r.getBounds)n=r.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,r=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof r=="string")n.innerHTML=r;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(r)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),r=U(this.options.offset),u=this._getAnchor();this._zoomAnimated?gt(this._container,n.add(u)):r=r.add(n).add(u);var p=this._containerBottom=-r.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+r.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Ve.include({_initOverlay:function(n,r,u,p){var v=r;return v instanceof n||(v=new n(p).setContent(r)),u&&v.setLatLng(u),v}}),vs.include({_initOverlay:function(n,r,u,p){var v=u;return v instanceof n?(S(v,p),v._source=this):(v=r&&!p?r:new n(p,this),v.setContent(u)),v}});var hr=_s.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,_s.prototype.openOn.call(this,n)},onAdd:function(n){_s.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Xs||this._source.on("preclick",Qs))},onRemove:function(n){_s.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Xs||this._source.off("preclick",Qs))},getEvents:function(){var n=_s.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",r=this._container=Xe("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=Xe("div",n+"-content-wrapper",r);if(this._contentNode=Xe("div",n+"-content",u),pa(r),fa(this._contentNode),ze(r,"contextmenu",Qs),this._tipContainer=Xe("div",n+"-tip-container",r),this._tip=Xe("div",n+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Xe("a",n+"-close-button",r);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',ze(p,"click",function(v){jt(v),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,r=n.style;r.width="",r.whiteSpace="nowrap";var u=n.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),r.width=u+1+"px",r.whiteSpace="",r.height="";var p=n.offsetHeight,v=this.options.maxHeight,C="leaflet-popup-scrolled";v&&p>v?(r.height=v+"px",Ue(n,C)):dt(n,C),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),u=this._getAnchor();gt(this._container,r.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,r=parseInt(Tn(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+r,p=this._containerWidth,v=new W(this._containerLeft,-u-this._containerBottom);v._add(hn(this._container));var C=n.layerPointToContainerPoint(v),Z=U(this.options.autoPanPadding),ee=U(this.options.autoPanPaddingTopLeft||Z),ie=U(this.options.autoPanPaddingBottomRight||Z),pe=n.getSize(),Ne=0,we=0;C.x+p+ie.x>pe.x&&(Ne=C.x+p-pe.x+ie.x),C.x-Ne-ee.x<0&&(Ne=C.x-ee.x),C.y+u+ie.y>pe.y&&(we=C.y+u-pe.y+ie.y),C.y-we-ee.y<0&&(we=C.y-ee.y),(Ne||we)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([Ne,we]))}},_getAnchor:function(){return U(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Qd=function(n,r){return new hr(n,r)};Ve.mergeOptions({closePopupOnClick:!0}),Ve.include({openPopup:function(n,r,u){return this._initOverlay(hr,n,r,u).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),vs.include({bindPopup:function(n,r){return this._popup=this._initOverlay(hr,this._popup,n,r),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof ss||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){Ds(n);var r=n.layer||n.target;if(this._popup._source===r&&!(r instanceof Xs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=r,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var Wr=_s.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){_s.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){_s.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=_s.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",r=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Xe("div",r),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var r,u,p=this._map,v=this._container,C=p.latLngToContainerPoint(p.getCenter()),Z=p.layerPointToContainerPoint(n),ee=this.options.direction,ie=v.offsetWidth,pe=v.offsetHeight,Ne=U(this.options.offset),we=this._getAnchor();ee==="top"?(r=ie/2,u=pe):ee==="bottom"?(r=ie/2,u=0):ee==="center"?(r=ie/2,u=pe/2):ee==="right"?(r=0,u=pe/2):ee==="left"?(r=ie,u=pe/2):Z.x<C.x?(ee="right",r=0,u=pe/2):(ee="left",r=ie+(Ne.x+we.x)*2,u=pe/2),n=n.subtract(U(r,u,!0)).add(Ne).add(we),dt(v,"leaflet-tooltip-right"),dt(v,"leaflet-tooltip-left"),dt(v,"leaflet-tooltip-top"),dt(v,"leaflet-tooltip-bottom"),Ue(v,"leaflet-tooltip-"+ee),gt(v,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&Gt(this._container,n)},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(r)},_getAnchor:function(){return U(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Xd=function(n,r){return new Wr(n,r)};Ve.include({openTooltip:function(n,r,u){return this._initOverlay(Wr,n,r,u).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),vs.include({bindTooltip:function(n,r){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Wr,this._tooltip,n,r),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var r=n?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[r](u),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof ss||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var r=typeof n.getElement=="function"&&n.getElement();r&&(ze(r,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),ze(r,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var r=typeof n.getElement=="function"&&n.getElement();r&&r.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var r=this;this._map.once("moveend",function(){r._openOnceFlag=!1,r._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var r=n.latlng,u,p;this._tooltip.options.sticky&&n.originalEvent&&(u=this._map.mouseEventToContainerPoint(n.originalEvent),p=this._map.containerPointToLayerPoint(u),r=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(r)}});var rl=ya.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var r=n&&n.tagName==="DIV"?n:document.createElement("div"),u=this.options;if(u.html instanceof Element?(Ft(r),r.appendChild(u.html)):r.innerHTML=u.html!==!1?u.html:"",u.bgPos){var p=U(u.bgPos);r.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(r,"icon"),r},createShadow:function(){return null}});function $o(n){return new rl(n)}ya.Default=ba;var qn=vs.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ke.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){S(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),ct(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(An(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(oa(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=b(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof W?n:new W(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var r=this.getPane().children,u=-n(-1/0,1/0),p=0,v=r.length,C;p<v;p++)C=r[p].style.zIndex,r[p]!==this._container&&C&&(u=n(u,+C));isFinite(u)&&(this.options.zIndex=u+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ke.ielt9){Gt(this._container,this.options.opacity);var n=+new Date,r=!1,u=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var C=Math.min(1,(n-v.loaded)/200);Gt(v.el,C),C<1?r=!0:(v.active?u=!0:this._onOpaqueTile(v),v.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),r&&(Q(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=Xe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,r=this.options.maxZoom;if(n!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===n?(this._levels[u].el.style.zIndex=r-Math.abs(n-u),this._onUpdateLevel(u)):(ct(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var p=this._levels[n],v=this._map;return p||(p=this._levels[n]={},p.el=Xe("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=r,p.origin=v.project(v.unproject(v.getPixelOrigin()),n).round(),p.zoom=n,this._setZoomTransform(p,v.getCenter(),v.getZoom()),E(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(this._map){var n,r,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)r=this._tiles[n],r.retain=r.current;for(n in this._tiles)if(r=this._tiles[n],r.current&&!r.active){var p=r.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var r in this._tiles)this._tiles[r].coords.z===n&&this._removeTile(r)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)ct(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,r,u,p){var v=Math.floor(n/2),C=Math.floor(r/2),Z=u-1,ee=new W(+v,+C);ee.z=+Z;var ie=this._tileCoordsToKey(ee),pe=this._tiles[ie];return pe&&pe.active?(pe.retain=!0,!0):(pe&&pe.loaded&&(pe.retain=!0),Z>p?this._retainParent(v,C,Z,p):!1)},_retainChildren:function(n,r,u,p){for(var v=2*n;v<2*n+2;v++)for(var C=2*r;C<2*r+2;C++){var Z=new W(v,C);Z.z=u+1;var ee=this._tileCoordsToKey(Z),ie=this._tiles[ee];if(ie&&ie.active){ie.retain=!0;continue}else ie&&ie.loaded&&(ie.retain=!0);u+1<p&&this._retainChildren(v,C,u+1,p)}},_resetView:function(n){var r=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),r,r)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var r=this.options;return r.minNativeZoom!==void 0&&n<r.minNativeZoom?r.minNativeZoom:r.maxNativeZoom!==void 0&&r.maxNativeZoom<n?r.maxNativeZoom:n},_setView:function(n,r,u,p){var v=Math.round(r);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var C=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||C)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(n),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(n,r)},_setZoomTransforms:function(n,r){for(var u in this._levels)this._setZoomTransform(this._levels[u],n,r)},_setZoomTransform:function(n,r,u){var p=this._map.getZoomScale(u,n.zoom),v=n.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(r,u)).round();ke.any3d?us(n.el,v,p):gt(n.el,v)},_resetGrid:function(){var n=this._map,r=n.options.crs,u=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=r.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,r.wrapLng[0]],p).x/u.x),Math.ceil(n.project([0,r.wrapLng[1]],p).x/u.y)],this._wrapY=r.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([r.wrapLat[0],0],p).y/u.x),Math.ceil(n.project([r.wrapLat[1],0],p).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var r=this._map,u=r._animatingZoom?Math.max(r._animateToZoom,r.getZoom()):r.getZoom(),p=r.getZoomScale(u,this._tileZoom),v=r.project(n,this._tileZoom).floor(),C=r.getSize().divideBy(p*2);return new ne(v.subtract(C),v.add(C))},_update:function(n){var r=this._map;if(r){var u=this._clampZoom(r.getZoom());if(n===void 0&&(n=r.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(n),v=this._pxBoundsToTileRange(p),C=v.getCenter(),Z=[],ee=this.options.keepBuffer,ie=new ne(v.getBottomLeft().subtract([ee,-ee]),v.getTopRight().add([ee,-ee]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var pe in this._tiles){var Ne=this._tiles[pe].coords;(Ne.z!==this._tileZoom||!ie.contains(new W(Ne.x,Ne.y)))&&(this._tiles[pe].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(n,u);return}for(var we=v.min.y;we<=v.max.y;we++)for(var Ce=v.min.x;Ce<=v.max.x;Ce++){var Oe=new W(Ce,we);if(Oe.z=this._tileZoom,!!this._isValidTile(Oe)){var ut=this._tiles[this._tileCoordsToKey(Oe)];ut?ut.current=!0:Z.push(Oe)}}if(Z.sort(function(zt,hs){return zt.distanceTo(C)-hs.distanceTo(C)}),Z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yt=document.createDocumentFragment();for(Ce=0;Ce<Z.length;Ce++)this._addTile(Z[Ce],yt);this._level.el.appendChild(yt)}}}},_isValidTile:function(n){var r=this._map.options.crs;if(!r.infinite){var u=this._globalTileRange;if(!r.wrapLng&&(n.x<u.min.x||n.x>u.max.x)||!r.wrapLat&&(n.y<u.min.y||n.y>u.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(n);return xe(this.options.bounds).overlaps(p)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var r=this._map,u=this.getTileSize(),p=n.scaleBy(u),v=p.add(u),C=r.unproject(p,n.z),Z=r.unproject(v,n.z);return[C,Z]},_tileCoordsToBounds:function(n){var r=this._tileCoordsToNwSe(n),u=new oe(r[0],r[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var r=n.split(":"),u=new W(+r[0],+r[1]);return u.z=+r[2],u},_removeTile:function(n){var r=this._tiles[n];r&&(ct(r.el),delete this._tiles[n],this.fire("tileunload",{tile:r.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){Ue(n,"leaflet-tile");var r=this.getTileSize();n.style.width=r.x+"px",n.style.height=r.y+"px",n.onselectstart=E,n.onmousemove=E,ke.ielt9&&this.options.opacity<1&&Gt(n,this.options.opacity)},_addTile:function(n,r){var u=this._getTilePos(n),p=this._tileCoordsToKey(n),v=this.createTile(this._wrapCoords(n),y(this._tileReady,this,n));this._initTile(v),this.createTile.length<2&&K(y(this._tileReady,this,n,null,v)),gt(v,u),this._tiles[p]={el:v,coords:n,current:!0},r.appendChild(v),this.fire("tileloadstart",{tile:v,coords:n})},_tileReady:function(n,r,u){r&&this.fire("tileerror",{error:r,tile:u,coords:n});var p=this._tileCoordsToKey(n);u=this._tiles[p],u&&(u.loaded=+new Date,this._map._fadeAnimated?(Gt(u.el,0),Q(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),r||(Ue(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ke.ielt9||!this._map._fadeAnimated?K(this._pruneTiles,this):setTimeout(y(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var r=new W(this._wrapX?N(n.x,this._wrapX):n.x,this._wrapY?N(n.y,this._wrapY):n.y);return r.z=n.z,r},_pxBoundsToTileRange:function(n){var r=this.getTileSize();return new ne(n.min.unscaleBy(r).floor(),n.max.unscaleBy(r).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function Ns(n){return new qn(n)}var Hn=qn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,r){this._url=n,r=S(this,r),r.detectRetina&&ke.retina&&r.maxZoom>0?(r.tileSize=Math.floor(r.tileSize/2),r.zoomReverse?(r.zoomOffset--,r.minZoom=Math.min(r.maxZoom,r.minZoom+1)):(r.zoomOffset++,r.maxZoom=Math.max(r.minZoom,r.maxZoom-1)),r.minZoom=Math.max(0,r.minZoom)):r.zoomReverse?r.minZoom=Math.min(r.maxZoom,r.minZoom):r.maxZoom=Math.max(r.minZoom,r.maxZoom),typeof r.subdomains=="string"&&(r.subdomains=r.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,r){return this._url===n&&r===void 0&&(r=!0),this._url=n,r||this.redraw(),this},createTile:function(n,r){var u=document.createElement("img");return ze(u,"load",y(this._tileOnLoad,this,r,u)),ze(u,"error",y(this._tileOnError,this,r,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(n),u},getTileUrl:function(n){var r={r:ke.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-n.y;this.options.tms&&(r.y=u),r["-y"]=u}return I(this._url,f(r,this.options))},_tileOnLoad:function(n,r){ke.ielt9?setTimeout(y(n,this,null,r),0):n(null,r)},_tileOnError:function(n,r,u){var p=this.options.errorTileUrl;p&&r.getAttribute("src")!==p&&(r.src=p),n(u,r)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,r=this.options.maxZoom,u=this.options.zoomReverse,p=this.options.zoomOffset;return u&&(n=r-n),n+p},_getSubdomain:function(n){var r=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[r]},_abortLoading:function(){var n,r;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(r=this._tiles[n].el,r.onload=E,r.onerror=E,!r.complete)){r.src=q;var u=this._tiles[n].coords;ct(r),delete this._tiles[n],this.fire("tileabort",{tile:r,coords:u})}},_removeTile:function(n){var r=this._tiles[n];if(r)return r.el.setAttribute("src",q),qn.prototype._removeTile.call(this,n)},_tileReady:function(n,r,u){if(!(!this._map||u&&u.getAttribute("src")===q))return qn.prototype._tileReady.call(this,n,r,u)}});function rs(n,r){return new Hn(n,r)}var is=Hn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,r){this._url=n;var u=f({},this.defaultWmsParams);for(var p in r)p in this.options||(u[p]=r[p]);r=S(this,r);var v=r.detectRetina&&ke.retina?2:1,C=this.getTileSize();u.width=C.x*v,u.height=C.y*v,this.wmsParams=u},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var r=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[r]=this._crs.code,Hn.prototype.onAdd.call(this,n)},getTileUrl:function(n){var r=this._tileCoordsToNwSe(n),u=this._crs,p=ge(u.project(r[0]),u.project(r[1])),v=p.min,C=p.max,Z=(this._wmsVersion>=1.3&&this._crs===Uo?[v.y,v.x,C.y,C.x]:[v.x,v.y,C.x,C.y]).join(","),ee=Hn.prototype.getTileUrl.call(this,n);return ee+M(this.wmsParams,ee,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Z},setParams:function(n,r){return f(this.wmsParams,n),r||this.redraw(),this}});function wa(n,r){return new is(n,r)}Hn.WMS=is,rs.wms=wa;var ws=vs.extend({options:{padding:.1},initialize:function(n){S(this,n),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ue(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,r){var u=this._map.getZoomScale(r,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,r),C=p.multiplyBy(-u).add(v).subtract(this._map._getNewPixelOrigin(n,r));ke.any3d?us(this._container,C,u):gt(this._container,C)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,r=this._map.getSize(),u=this._map.containerPointToLayerPoint(r.multiplyBy(-n)).round();this._bounds=new ne(u,u.add(r.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),mr=ws.extend({options:{tolerance:0},getEvents:function(){var n=ws.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ws.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");ze(n,"mousemove",this._onMouseMove,this),ze(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ze(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){Q(this._redrawRequest),delete this._ctx,ct(this._container),Je(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var r in this._layers)n=this._layers[r],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ws.prototype._update.call(this);var n=this._bounds,r=this._container,u=n.getSize(),p=ke.retina?2:1;gt(r,n.min),r.width=p*u.x,r.height=p*u.y,r.style.width=u.x+"px",r.style.height=u.y+"px",ke.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){ws.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[g(n)]=n;var r=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=r),this._drawLast=r,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var r=n._order,u=r.next,p=r.prev;u?u.prev=p:this._drawLast=p,p?p.next=u:this._drawFirst=u,delete n._order,delete this._layers[g(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var r=n.options.dashArray.split(/[, ]+/),u=[],p,v;for(v=0;v<r.length;v++){if(p=Number(r[v]),isNaN(p))return;u.push(p)}n.options._dashArray=u}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||K(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var r=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ne,this._redrawBounds.extend(n._pxBounds.min.subtract([r,r])),this._redrawBounds.extend(n._pxBounds.max.add([r,r]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var r=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,r.x,r.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,r=this._redrawBounds;if(this._ctx.save(),r){var u=r.getSize();this._ctx.beginPath(),this._ctx.rect(r.min.x,r.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)n=p.layer,(!r||n._pxBounds&&n._pxBounds.intersects(r))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,r){if(this._drawing){var u,p,v,C,Z=n._parts,ee=Z.length,ie=this._ctx;if(ee){for(ie.beginPath(),u=0;u<ee;u++){for(p=0,v=Z[u].length;p<v;p++)C=Z[u][p],ie[p?"lineTo":"moveTo"](C.x,C.y);r&&ie.closePath()}this._fillStroke(ie,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var r=n._point,u=this._ctx,p=Math.max(Math.round(n._radius),1),v=(Math.max(Math.round(n._radiusY),1)||p)/p;v!==1&&(u.save(),u.scale(1,v)),u.beginPath(),u.arc(r.x,r.y/v,p,0,Math.PI*2,!1),v!==1&&u.restore(),this._fillStroke(u,n)}},_fillStroke:function(n,r){var u=r.options;u.fill&&(n.globalAlpha=u.fillOpacity,n.fillStyle=u.fillColor||u.color,n.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(n.setLineDash&&n.setLineDash(r.options&&r.options._dashArray||[]),n.globalAlpha=u.opacity,n.lineWidth=u.weight,n.strokeStyle=u.color,n.lineCap=u.lineCap,n.lineJoin=u.lineJoin,n.stroke())},_onClick:function(n){for(var r=this._map.mouseEventToLayerPoint(n),u,p,v=this._drawFirst;v;v=v.next)u=v.layer,u.options.interactive&&u._containsPoint(r)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(u))&&(p=u);this._fireEvent(p?[p]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var r=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,r)}},_handleMouseOut:function(n){var r=this._hoveredLayer;r&&(dt(this._container,"leaflet-interactive"),this._fireEvent([r],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,r){if(!this._mouseHoverThrottled){for(var u,p,v=this._drawFirst;v;v=v.next)u=v.layer,u.options.interactive&&u._containsPoint(r)&&(p=u);p!==this._hoveredLayer&&(this._handleMouseOut(n),p&&(Ue(this._container,"leaflet-interactive"),this._fireEvent([p],n,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(y(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,r,u){this._map._fireDOMEvent(r,u||r.type,n)},_bringToFront:function(n){var r=n._order;if(r){var u=r.next,p=r.prev;if(u)u.prev=p;else return;p?p.next=u:u&&(this._drawFirst=u),r.prev=this._drawLast,this._drawLast.next=r,r.next=null,this._drawLast=r,this._requestRedraw(n)}},_bringToBack:function(n){var r=n._order;if(r){var u=r.next,p=r.prev;if(p)p.next=u;else return;u?u.prev=p:p&&(this._drawLast=p),r.prev=null,r.next=this._drawFirst,this._drawFirst.prev=r,this._drawFirst=r,this._requestRedraw(n)}}});function fr(n){return ke.canvas?new mr(n):null}var In=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Sa={_initContainer:function(){this._container=Xe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ws.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var r=n._container=In("shape");Ue(r,"leaflet-vml-shape "+(this.options.className||"")),r.coordsize="1 1",n._path=In("path"),r.appendChild(n._path),this._updateStyle(n),this._layers[g(n)]=n},_addPath:function(n){var r=n._container;this._container.appendChild(r),n.options.interactive&&n.addInteractiveTarget(r)},_removePath:function(n){var r=n._container;ct(r),n.removeInteractiveTarget(r),delete this._layers[g(n)]},_updateStyle:function(n){var r=n._stroke,u=n._fill,p=n.options,v=n._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(r||(r=n._stroke=In("stroke")),v.appendChild(r),r.weight=p.weight+"px",r.color=p.color,r.opacity=p.opacity,p.dashArray?r.dashStyle=T(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):r.dashStyle="",r.endcap=p.lineCap.replace("butt","flat"),r.joinstyle=p.lineJoin):r&&(v.removeChild(r),n._stroke=null),p.fill?(u||(u=n._fill=In("fill")),v.appendChild(u),u.color=p.fillColor||p.color,u.opacity=p.fillOpacity):u&&(v.removeChild(u),n._fill=null)},_updateCircle:function(n){var r=n._point.round(),u=Math.round(n._radius),p=Math.round(n._radiusY||u);this._setPath(n,n._empty()?"M0 0":"AL "+r.x+","+r.y+" "+u+","+p+" 0,"+65535*360)},_setPath:function(n,r){n._path.v=r},_bringToFront:function(n){An(n._container)},_bringToBack:function(n){oa(n._container)}},pr=ke.vml?In:nt,xn=ws.extend({_initContainer:function(){this._container=pr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=pr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ct(this._container),Je(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ws.prototype._update.call(this);var n=this._bounds,r=n.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(r))&&(this._svgSize=r,u.setAttribute("width",r.x),u.setAttribute("height",r.y)),gt(u,n.min),u.setAttribute("viewBox",[n.min.x,n.min.y,r.x,r.y].join(" ")),this.fire("update")}},_initPath:function(n){var r=n._path=pr("path");n.options.className&&Ue(r,n.options.className),n.options.interactive&&Ue(r,"leaflet-interactive"),this._updateStyle(n),this._layers[g(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){ct(n._path),n.removeInteractiveTarget(n._path),delete this._layers[g(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var r=n._path,u=n.options;r&&(u.stroke?(r.setAttribute("stroke",u.color),r.setAttribute("stroke-opacity",u.opacity),r.setAttribute("stroke-width",u.weight),r.setAttribute("stroke-linecap",u.lineCap),r.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?r.setAttribute("stroke-dasharray",u.dashArray):r.removeAttribute("stroke-dasharray"),u.dashOffset?r.setAttribute("stroke-dashoffset",u.dashOffset):r.removeAttribute("stroke-dashoffset")):r.setAttribute("stroke","none"),u.fill?(r.setAttribute("fill",u.fillColor||u.color),r.setAttribute("fill-opacity",u.fillOpacity),r.setAttribute("fill-rule",u.fillRule||"evenodd")):r.setAttribute("fill","none"))},_updatePoly:function(n,r){this._setPath(n,As(n._parts,r))},_updateCircle:function(n){var r=n._point,u=Math.max(Math.round(n._radius),1),p=Math.max(Math.round(n._radiusY),1)||u,v="a"+u+","+p+" 0 1,0 ",C=n._empty()?"M0 0":"M"+(r.x-u)+","+r.y+v+u*2+",0 "+v+-u*2+",0 ";this._setPath(n,C)},_setPath:function(n,r){n._path.setAttribute("d",r)},_bringToFront:function(n){An(n._path)},_bringToBack:function(n){oa(n._path)}});ke.vml&&xn.include(Sa);function Zn(n){return ke.svg||ke.vml?new xn(n):null}Ve.include({getRenderer:function(n){var r=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return r||(r=this._renderer=this._createRenderer()),this.hasLayer(r)||this.addLayer(r),r},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var r=this._paneRenderers[n];return r===void 0&&(r=this._createRenderer({pane:n}),this._paneRenderers[n]=r),r},_createRenderer:function(n){return this.options.preferCanvas&&fr(n)||Zn(n)}});var Vo=ja.extend({initialize:function(n,r){ja.prototype.initialize.call(this,this._boundsToLatLngs(n),r)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=xe(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function ls(n,r){return new Vo(n,r)}xn.create=pr,xn.pointsToPath=As,as.geometryToLayer=cr,as.coordsToLatLng=Gr,as.coordsToLatLngs=dr,as.latLngToCoords=ur,as.latLngsToCoords=Kr,as.getFeature=js,as.asFeature=_a,Ve.mergeOptions({boxZoom:!0});var Jr=bs.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Je(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ct(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ps(),sr(),this._startPoint=this._map.mouseEventToContainerPoint(n),ze(document,{contextmenu:Ds,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=Xe("div","leaflet-zoom-box",this._container),Ue(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var r=new ne(this._point,this._startPoint),u=r.getSize();gt(this._box,r.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(ct(this._box),dt(this._container,"leaflet-crosshair")),tr(),Vi(),Je(document,{contextmenu:Ds,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(y(this._resetState,this),0);var r=new oe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(r).fire("boxzoomend",{boxZoomBounds:r})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ve.addInitHook("addHandler","boxZoom",Jr),Ve.mergeOptions({doubleClickZoom:!0});var Us=bs.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var r=this._map,u=r.getZoom(),p=r.options.zoomDelta,v=n.originalEvent.shiftKey?u-p:u+p;r.options.doubleClickZoom==="center"?r.setZoom(v):r.setZoomAround(n.containerPoint,v)}});Ve.addInitHook("addHandler","doubleClickZoom",Us),Ve.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var il=bs.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new fn(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}Ue(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){dt(this._map._container,"leaflet-grab"),dt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var r=xe(this._map.options.maxBounds);this._offsetLimit=ge(this._map.latLngToContainerPoint(r.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(r.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var r=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(r),this._prunePositions(r)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),r=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=r.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,r){return n-(n-r)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),r=this._offsetLimit;n.x<r.min.x&&(n.x=this._viscousLimit(n.x,r.min.x)),n.y<r.min.y&&(n.y=this._viscousLimit(n.y,r.min.y)),n.x>r.max.x&&(n.x=this._viscousLimit(n.x,r.max.x)),n.y>r.max.y&&(n.y=this._viscousLimit(n.y,r.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,r=Math.round(n/2),u=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-r+u)%n+r-u,C=(p+r+u)%n-r-u,Z=Math.abs(v+u)<Math.abs(C+u)?v:C;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Z},_onDragEnd:function(n){var r=this._map,u=r.options,p=!u.inertia||n.noInertia||this._times.length<2;if(r.fire("dragend",n),p)r.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),C=(this._lastTime-this._times[0])/1e3,Z=u.easeLinearity,ee=v.multiplyBy(Z/C),ie=ee.distanceTo([0,0]),pe=Math.min(u.inertiaMaxSpeed,ie),Ne=ee.multiplyBy(pe/ie),we=pe/(u.inertiaDeceleration*Z),Ce=Ne.multiplyBy(-we/2).round();!Ce.x&&!Ce.y?r.fire("moveend"):(Ce=r._limitOffset(Ce,r.options.maxBounds),K(function(){r.panBy(Ce,{duration:we,easeLinearity:Z,noMoveStart:!0,animate:!0})}))}}});Ve.addInitHook("addHandler","dragging",il),Ve.mergeOptions({keyboard:!0,keyboardPanDelta:80});var xr=bs.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),ze(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Je(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,r=document.documentElement,u=n.scrollTop||r.scrollTop,p=n.scrollLeft||r.scrollLeft;this._map._container.focus(),window.scrollTo(p,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var r=this._panKeys={},u=this.keyCodes,p,v;for(p=0,v=u.left.length;p<v;p++)r[u.left[p]]=[-1*n,0];for(p=0,v=u.right.length;p<v;p++)r[u.right[p]]=[n,0];for(p=0,v=u.down.length;p<v;p++)r[u.down[p]]=[0,n];for(p=0,v=u.up.length;p<v;p++)r[u.up[p]]=[0,-1*n]},_setZoomDelta:function(n){var r=this._zoomKeys={},u=this.keyCodes,p,v;for(p=0,v=u.zoomIn.length;p<v;p++)r[u.zoomIn[p]]=n;for(p=0,v=u.zoomOut.length;p<v;p++)r[u.zoomOut[p]]=-n},_addHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Je(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var r=n.keyCode,u=this._map,p;if(r in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(p=this._panKeys[r],n.shiftKey&&(p=U(p).multiplyBy(3)),u.options.maxBounds&&(p=u._limitOffset(U(p),u.options.maxBounds)),u.options.worldCopyJump){var v=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(p)));u.panTo(v)}else u.panBy(p)}else if(r in this._zoomKeys)u.setZoom(u.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[r]);else if(r===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;Ds(n)}}});Ve.addInitHook("addHandler","keyboard",xr),Ve.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var gn=bs.extend({addHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Je(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var r=rr(n),u=this._map.options.wheelDebounceTime;this._delta+=r,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var p=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(y(this._performZoom,this),p),Ds(n)},_performZoom:function(){var n=this._map,r=n.getZoom(),u=this._map.options.zoomSnap||0;n._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,C=u?Math.ceil(v/u)*u:v,Z=n._limitZoom(r+(this._delta>0?C:-C))-r;this._delta=0,this._startTime=null,Z&&(n.options.scrollWheelZoom==="center"?n.setZoom(r+Z):n.setZoomAround(this._lastMousePos,r+Z))}});Ve.addInitHook("addHandler","scrollWheelZoom",gn);var ll=600;Ve.mergeOptions({tapHold:ke.touchNative&&ke.safari&&ke.mobile,tapTolerance:15});var ei=bs.extend({addHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Je(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var r=n.touches[0];this._startPos=this._newPos=new W(r.clientX,r.clientY),this._holdTimeout=setTimeout(y(function(){this._cancel(),this._isTapValid()&&(ze(document,"touchend",jt),ze(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",r))},this),ll),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){Je(document,"touchend",jt),Je(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),Je(document,"touchend touchcancel contextmenu",this._cancel,this),Je(document,"touchmove",this._onMove,this)},_onMove:function(n){var r=n.touches[0];this._newPos=new W(r.clientX,r.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,r){var u=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY});u._simulated=!0,r.target.dispatchEvent(u)}});Ve.addInitHook("addHandler","tapHold",ei),Ve.mergeOptions({touchZoom:ke.touch,bounceAtZoomLimits:!0});var $n=bs.extend({addHooks:function(){Ue(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){dt(this._map._container,"leaflet-touch-zoom"),Je(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var r=this._map;if(!(!n.touches||n.touches.length!==2||r._animatingZoom||this._zooming)){var u=r.mouseEventToContainerPoint(n.touches[0]),p=r.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=r.getSize()._divideBy(2),this._startLatLng=r.containerPointToLatLng(this._centerPoint),r.options.touchZoom!=="center"&&(this._pinchStartLatLng=r.containerPointToLatLng(u.add(p)._divideBy(2))),this._startDist=u.distanceTo(p),this._startZoom=r.getZoom(),this._moved=!1,this._zooming=!0,r._stop(),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),jt(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var r=this._map,u=r.mouseEventToContainerPoint(n.touches[0]),p=r.mouseEventToContainerPoint(n.touches[1]),v=u.distanceTo(p)/this._startDist;if(this._zoom=r.getScaleZoom(v,this._startZoom),!r.options.bounceAtZoomLimits&&(this._zoom<r.getMinZoom()&&v<1||this._zoom>r.getMaxZoom()&&v>1)&&(this._zoom=r._limitZoom(this._zoom)),r.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var C=u._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&C.x===0&&C.y===0)return;this._center=r.unproject(r.project(this._pinchStartLatLng,this._zoom).subtract(C),this._zoom)}this._moved||(r._moveStart(!0,!1),this._moved=!0),Q(this._animRequest);var Z=y(r._move,r,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=K(Z,this,!0),jt(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Q(this._animRequest),Je(document,"touchmove",this._onTouchMove,this),Je(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ve.addInitHook("addHandler","touchZoom",$n),Ve.BoxZoom=Jr,Ve.DoubleClickZoom=Us,Ve.Drag=il,Ve.Keyboard=xr,Ve.ScrollWheelZoom=gn,Ve.TapHold=ei,Ve.TouchZoom=$n,c.Bounds=ne,c.Browser=ke,c.CRS=Le,c.Canvas=mr,c.Circle=nl,c.CircleMarker=or,c.Class=le,c.Control=Kt,c.DivIcon=rl,c.DivOverlay=_s,c.DomEvent=zd,c.DomUtil=ko,c.Draggable=fn,c.Evented=J,c.FeatureGroup=ss,c.GeoJSON=as,c.GridLayer=qn,c.Handler=bs,c.Icon=ya,c.ImageOverlay=Bs,c.LatLng=_e,c.LatLngBounds=oe,c.Layer=vs,c.LayerGroup=Un,c.LineUtil=Do,c.Map=Ve,c.Marker=va,c.Mixin=qd,c.Path=Xs,c.Point=W,c.PolyUtil=Hd,c.Polygon=ja,c.Polyline=Ws,c.Popup=hr,c.PosAnimation=Hr,c.Projection=Bo,c.Rectangle=Vo,c.Renderer=ws,c.SVG=xn,c.SVGOverlay=pn,c.TileLayer=Hn,c.Tooltip=Wr,c.Transformation=je,c.Util=ue,c.VideoOverlay=Xr,c.bind=y,c.bounds=ge,c.canvas=fr,c.circle=Gd,c.circleMarker=qo,c.control=xa,c.divIcon=$o,c.extend=f,c.featureGroup=lr,c.geoJSON=Qr,c.geoJson=Ho,c.gridLayer=Ns,c.icon=Yr,c.imageOverlay=Na,c.latLng=ye,c.latLngBounds=xe,c.layerGroup=Fo,c.map=ir,c.marker=sl,c.point=U,c.polygon=ns,c.polyline=Kd,c.popup=Qd,c.rectangle=ls,c.setOptions=S,c.stamp=g,c.svg=Zn,c.svgOverlay=Zo,c.tileLayer=rs,c.tooltip=Xd,c.transformation=He,c.version=d,c.videoOverlay=Io;var Ca=window.L;c.noConflict=function(){return window.L=Ca,this},window.L=c})}(Xl,Xl.exports)),Xl.exports}var Ed=n1();const N0=tm(Ed);function w0(l,o,c){return Object.freeze({instance:l,context:o,container:c})}function S0(l,o){return o==null?function(d,f){const x=j.useRef(void 0);return x.current||(x.current=l(d,f)),x}:function(d,f){const x=j.useRef(void 0);x.current||(x.current=l(d,f));const y=j.useRef(d),{instance:_}=x.current;return j.useEffect(function(){y.current!==d&&(o(_,d,y.current),y.current=d)},[_,d,o]),x}}function a1(l,o){j.useEffect(function(){return(o.layerContainer??o.map).addLayer(l.instance),function(){var x;(x=o.layerContainer)==null||x.removeLayer(l.instance),o.map.removeLayer(l.instance)}},[o,l])}function C0(l){return function(c){const d=j0(),f=l(_0(c,d),d);return Kw(d.map,c.attribution),t1(f.current,c.eventHandlers),a1(f.current,d),f}}function r1(l,o){const c=S0(l,o),d=C0(c);return Jw(d)}function i1(l,o){const c=S0(l,o),d=C0(c);return e1(d)}function l1(l,o,c){const{opacity:d,zIndex:f}=o;d!=null&&d!==c.opacity&&l.setOpacity(d),f!=null&&f!==c.zIndex&&l.setZIndex(f)}function o1(){return j0().map}function c1(l){const o=o1();return j.useEffect(function(){return o.on(l),function(){o.off(l)}},[o,l]),o}function d1({bounds:l,boundsOptions:o,center:c,children:d,className:f,id:x,placeholder:y,style:_,whenReady:g,zoom:b,...N},E){const[P]=j.useState({className:f,id:x,style:_}),[R,B]=j.useState(null),S=j.useRef(void 0);j.useImperativeHandle(E,()=>(R==null?void 0:R.map)??null,[R]);const M=j.useCallback(I=>{if(I!==null&&!S.current){const T=new Ed.Map(I,N);S.current=T,c!=null&&b!=null?T.setView(c,b):l!=null&&T.fitBounds(l,o),g!=null&&T.whenReady(g),B(Xw(T))}},[]);j.useEffect(()=>()=>{R==null||R.map.remove()},[R]);const F=R?qe.createElement(ym,{value:R},d):y??null;return qe.createElement("div",{...P,ref:M},F)}const u1=j.forwardRef(d1),h1=r1(function({position:o,...c},d){const f=new Ed.Marker(o,c);return w0(f,Ww(d,{overlayContainer:f}))},function(o,c,d){c.position!==d.position&&o.setLatLng(c.position),c.icon!=null&&c.icon!==d.icon&&o.setIcon(c.icon),c.zIndexOffset!=null&&c.zIndexOffset!==d.zIndexOffset&&o.setZIndexOffset(c.zIndexOffset),c.opacity!=null&&c.opacity!==d.opacity&&o.setOpacity(c.opacity),o.dragging!=null&&c.draggable!==d.draggable&&(c.draggable===!0?o.dragging.enable():o.dragging.disable())}),m1=i1(function({url:o,...c},d){const f=new Ed.TileLayer(o,_0(c,d));return w0(f,d)},function(o,c,d){l1(o,c,d);const{url:f}=c;f!=null&&f!==d.url&&o.setUrl(f)}),bm=({isOpen:l,onClose:o,title:c,message:d,type:f="info",buttonText:x="OK"})=>{if(!l)return null;const _={success:{icon:nn,iconBg:"bg-green-100",iconColor:"text-green-600",titleColor:"text-green-900",buttonStyle:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 focus:ring-green-500"},error:{icon:ld,iconBg:"bg-red-100",iconColor:"text-red-600",titleColor:"text-red-900",buttonStyle:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 focus:ring-red-500"},warning:{icon:wi,iconBg:"bg-yellow-100",iconColor:"text-yellow-600",titleColor:"text-yellow-900",buttonStyle:"bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 focus:ring-yellow-500"},info:{icon:F_,iconBg:"bg-blue-100",iconColor:"text-blue-600",titleColor:"text-blue-900",buttonStyle:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:ring-blue-500"}}[f],g=_.icon;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 transform transition-all duration-300 scale-100 animate-slideIn",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 ${_.iconBg} rounded-full flex items-center justify-center mr-3`,children:e.jsx(g,{className:`w-6 h-6 ${_.iconColor}`})}),e.jsx("h3",{className:`text-xl font-semibold ${_.titleColor}`,children:c})]}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors rounded-full p-1 hover:bg-gray-100",children:e.jsx(on,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-700 leading-relaxed text-base",children:d})}),e.jsx("div",{className:"flex items-center justify-end p-6 border-t border-gray-100 bg-gray-50 rounded-b-xl",children:e.jsx("button",{onClick:o,className:`px-8 py-3 text-sm font-medium text-white border-0 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 shadow-lg hover:shadow-xl transform hover:scale-105 ${_.buttonStyle}`,children:x})})]})})},vm=()=>{const[l,o]=j.useState({isOpen:!1,title:"",message:"",type:"info",buttonText:"OK"}),c=j.useCallback(g=>{const{title:b="Alert",message:N,type:E="info",buttonText:P="OK"}=g;o({isOpen:!0,title:b,message:N,type:E,buttonText:P})},[]),d=j.useCallback((g,b="Success!")=>{c({title:b,message:g,type:"success"})},[c]),f=j.useCallback((g,b="Error")=>{c({title:b,message:g,type:"error"})},[c]),x=j.useCallback((g,b="Warning")=>{c({title:b,message:g,type:"warning"})},[c]),y=j.useCallback((g,b="Information")=>{c({title:b,message:g,type:"info"})},[c]),_=j.useCallback(()=>{o(g=>({...g,isOpen:!1}))},[]);return{alert:l,showAlert:c,showSuccess:d,showError:f,showWarning:x,showInfo:y,hideAlert:_}};delete N0.Icon.Default.prototype._getIconUrl;N0.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function f1({position:l,setPosition:o,onLocationSelect:c,showWarning:d}){return c1({click(f){const x=f.latlng.lat,y=f.latlng.lng;if(x<5.9||x>9.9||y<79.4||y>81.9){d("Please select a location within Sri Lanka only.");return}const _=[x,y];o(_),fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${x}&lon=${y}&countrycodes=lk&addressdetails=1`).then(g=>g.json()).then(g=>{if(g&&g.address&&g.address.country_code==="lk"){const b=g.display_name||`${x.toFixed(6)}, ${y.toFixed(6)}`;c(b,_)}else d("Please select a location within Sri Lanka only."),o(null)}).catch(()=>{const g=`${x.toFixed(6)}, ${y.toFixed(6)}`;c(g,_)})}}),l?e.jsx(h1,{position:l}):null}const p1=({onLocationSelect:l,initialLocation:o=""})=>{const[c,d]=j.useState(null),[f,x]=j.useState([7.8731,80.7718]),[y,_]=j.useState(o),[g,b]=j.useState([]),[N,E]=j.useState(!1),[P,R]=j.useState(!1),B=j.useRef(),{alert:S,showWarning:M,hideAlert:F}=vm(),I=async A=>{if(!A.trim()){b([]);return}E(!0);try{const O=(await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(A+" Sri Lanka")}&countrycodes=lk&limit=8&addressdetails=1&bounded=1&viewbox=79.4,9.9,81.9,5.9`)).json()).filter(G=>G.address&&G.address.country_code==="lk");b(O)}catch(D){console.error("Search error:",D),b([])}finally{E(!1)}};j.useEffect(()=>{const A=setTimeout(()=>{y&&I(y)},500);return()=>clearTimeout(A)},[y]);const T=(A,D)=>{_(A),b([]),R(!1),l(A)},H=A=>{const D=A.display_name,V=[parseFloat(A.lat),parseFloat(A.lon)];d(V),x(V),T(D)},q=()=>{R(!0),b([])};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:y,onChange:A=>_(A.target.value),placeholder:"Search for a location in Sri Lanka...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg bg-green-50 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:q,className:"px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center gap-2",children:"Select Location"})]}),N&&e.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-lg mt-1 p-3 shadow-lg z-50",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full"}),"Searching..."]})}),g.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-lg mt-1 max-h-60 overflow-y-auto shadow-lg z-50",children:g.map((A,D)=>e.jsxs("div",{onClick:()=>H(A),className:"p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"font-medium text-gray-800",children:A.name||A.display_name.split(",")[0]}),e.jsx("div",{className:"text-sm text-gray-600 truncate",children:A.display_name})]},D))})]}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl h-96 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Select Location on Map"}),e.jsx("button",{onClick:()=>R(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:""})]}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsxs(u1,{center:f,zoom:c?15:8,style:{height:"100%",width:"100%"},ref:B,maxBounds:[[5.9,79.4],[9.9,81.9]],maxBoundsViscosity:1,children:[e.jsx(m1,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(f1,{position:c,setPosition:d,onLocationSelect:T,showWarning:M})]}),e.jsx("div",{className:"absolute top-2 left-2 bg-white p-3 rounded-lg shadow-lg max-w-xs",children:e.jsx("p",{className:"text-sm text-gray-700",children:" Click anywhere on the map to select that location in Sri Lanka"})}),e.jsx("div",{className:"absolute bottom-2 left-2 bg-green-100 p-2 rounded-lg shadow-lg",children:e.jsx("p",{className:"text-xs text-green-800 font-medium",children:" Showing Sri Lanka only"})})]})]})}),e.jsx(bm,{isOpen:S.isOpen,onClose:F,title:S.title,message:S.message,type:S.type,buttonText:S.buttonText})]})},x1=({isVisible:l,onClose:o,transactionId:c})=>l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full mx-4 p-8 text-center relative animate-fadeInScale",children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-36 h-36 rounded-full border-4 border-green-500 flex items-center justify-center",children:e.jsx("svg",{className:"w-20 h-20 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Payment Successful!"}),e.jsx("div",{className:"text-gray-600 mb-6 space-y-2",children:e.jsxs("p",{className:"text-base leading-relaxed",children:["Congratulations! Your payment has been successfully processed.",e.jsx("br",{}),"Thank you for choosing FarmMaster!"]})}),c&&e.jsxs("div",{className:"inline-block bg-green-50 border border-green-200 rounded-lg p-3 mb-6",children:[e.jsx("p",{className:"text-sm text-green-700",children:e.jsx("span",{className:"font-medium",children:"Transaction ID:"})}),e.jsx("p",{className:"text-sm font-mono text-green-800 mt-1",children:c})]}),e.jsx("div",{children:e.jsx("button",{onClick:o,className:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-7 rounded-xl transition-all duration-200 transform hover:scale-100 focus:outline-none focus:ring-4 focus:ring-green-300",children:"Go to Dashboard"})})]})}):null,g1=({isVisible:l,onClose:o,errorMessage:c})=>l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full mx-4 p-8 text-center relative animate-fadeInScale",children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-36 h-36 rounded-full border-4 border-red-500 flex items-center justify-center",children:e.jsx("svg",{className:"w-20 h-20 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Payment Failed!"}),e.jsx("div",{className:"text-gray-600 mb-6 space-y-2",children:e.jsxs("p",{className:"text-base leading-relaxed",children:["Sorry, your payment could not be processed.",e.jsx("br",{}),c&&e.jsx("span",{className:"text-red-600",children:c})]})}),e.jsx("div",{children:e.jsx("button",{onClick:o,className:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-7 rounded-xl transition-all duration-200 transform hover:scale-100 focus:outline-none focus:ring-4 focus:ring-red-300",children:"Try Again"})})]})}):null;function y1({landData:l,onSuccess:o,onError:c}){const{user:d}=mt(),[f,x]=j.useState(!1),[y,_]=j.useState(""),[g,b]=j.useState("4242 4242 4242 4242"),[N,E]=j.useState("12/25"),[P,R]=j.useState("123"),[B,S]=j.useState((d==null?void 0:d.name)||""),M="http://localhost/FARMMASTER-Backend",F=5e3,I=async T=>{var q,A;T.preventDefault(),x(!0),_("");const H=(d==null?void 0:d.id)||32;try{console.log("=== MOCK LAND ASSESSMENT PAYMENT STARTED ==="),console.log("Creating land record...");const D=await be.post(`${M}/api/lands`,{user_id:H,size:l.size,location:l.location},{headers:{"Content-Type":"application/json"},withCredentials:!0});if(console.log("Land creation response:",D.data),D.data.status!=="success")throw new Error(D.data.message);const V=D.data.data.land_id;console.log("Creating payment intent...");const O=await be.post(`${M}/api/payments/process`,{action:"create_payment_intent",user_id:H,land_id:V,amount:F},{headers:{"Content-Type":"application/json"},withCredentials:!0});if(console.log("Payment intent response:",O.data),O.data.status!=="success")throw new Error(O.data.message);const G=O.data.data.payment_intent_id;if(!g||!N||!P)throw new Error("Please fill in all card details");await new Promise(Q=>setTimeout(Q,2e3)),console.log("Confirming payment...");const K=await be.post(`${M}/api/payments/process`,{action:"confirm_payment",payment_intent_id:G,user_id:H,land_id:V},{headers:{"Content-Type":"application/json"},withCredentials:!0});if(console.log("Payment confirmation response:",K.data),K.data.status==="success")_(" Payment processed successfully! (Mock Mode)"),o({transaction_id:K.data.data.transaction_id,payment_intent_id:G,amount:F,land_id:V});else throw new Error(K.data.message)}catch(D){console.error("Mock land assessment payment error:",D),_(" Payment failed: "+(((A=(q=D.response)==null?void 0:q.data)==null?void 0:A.message)||D.message)),c&&c(D)}finally{x(!1)}};return e.jsxs("form",{onSubmit:I,className:"bg-white p-6 rounded-lg shadow-lg max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-800 px-4 py-3 rounded mb-4",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"font-semibold",children:" Development Mock Payment"})}),e.jsx("p",{className:"text-sm mt-1",children:"Network connectivity to Stripe is unavailable. Using mock payment system for development."})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Land Assessment Payment"}),e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Land Size: ",l.size]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Location: ",l.location]}),e.jsxs("p",{className:"text-lg font-semibold text-green-600",children:["Assessment Fee: LKR ",F.toLocaleString()]})]})]}),y&&e.jsx("div",{className:`p-3 rounded-lg mb-4 ${y.includes("")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cardholder Name *"}),e.jsx("input",{type:"text",value:B,onChange:T=>S(T.target.value),className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"John Doe",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number *"}),e.jsx("input",{type:"text",value:g,onChange:T=>b(T.target.value),className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"4242 4242 4242 4242",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use 4242 4242 4242 4242 for success"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Date *"}),e.jsx("input",{type:"text",value:N,onChange:T=>E(T.target.value),className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"12/25",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CVC *"}),e.jsx("input",{type:"text",value:P,onChange:T=>R(T.target.value),className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"123",maxLength:"4",required:!0})]})]})]}),e.jsx("button",{type:"submit",disabled:f,className:"w-full bg-orange-500 hover:bg-orange-600 disabled:bg-gray-400 text-white font-semibold py-3 rounded-lg transition duration-200 flex items-center justify-center gap-2 mt-6",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Processing Mock Payment..."]}):`Pay LKR ${F.toLocaleString()} (Mock)`}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600 text-center",children:" This is a development mock payment system"}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-1",children:"No real payment will be processed"})]})]})}const b1=xm("pk_test_51Rnk1kC523WS3olJgTHr67VfyR8w8fRy0kyoeoV257f1zaGdO7Egl1kXOtll5zbMnF1IgV0iRmWPkNlYiDvdesAP00teJxyQKk"),Bh={style:{base:{color:"#424770",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146",iconColor:"#9e2146"}}};function v1({landData:l,onSuccess:o,onError:c}){const d=y0(),f=x0(),{user:x}=mt(),[y,_]=j.useState(!1),[g,b]=j.useState(""),N="http://localhost/FARMMASTER-Backend",E=5e3,P=async R=>{var S,M;if(R.preventDefault(),!d||!f)return;_(!0),b("");const B=(x==null?void 0:x.id)||32;try{const F=await be.post(`${N}/api/lands`,{user_id:B,size:l.size,location:l.location},{headers:{"Content-Type":"application/json"},withCredentials:!0});if(F.data.status!=="success")throw new Error(F.data.message);const I=F.data.data.land_id,T=await be.post(`${N}/api/payments/process`,{action:"create_payment_intent",user_id:B,land_id:I,amount:E},{headers:{"Content-Type":"application/json"},withCredentials:!0});if(T.data.status!=="success")throw new Error(T.data.message);const H=T.data.data.client_secret,q=T.data.data.payment_intent_id,A=f.getElement(hd),{error:D,paymentIntent:V}=await d.confirmCardPayment(H,{payment_method:{card:A,billing_details:{name:(x==null?void 0:x.name)||"Landowner",email:(x==null?void 0:x.email)||"test@example.com"}}});if(D)throw new Error(D.message);if(V.status==="succeeded"){const O=await be.post(`${N}/api/payments/process`,{action:"confirm_payment",payment_intent_id:q,user_id:B,land_id:I},{headers:{"Content-Type":"application/json"},withCredentials:!0});if(O.data.status==="success")o({transaction_id:O.data.transaction_id,payment_intent_id:q,amount:E});else throw new Error(O.data.message)}else throw new Error(`Payment not completed. Status: ${V.status}`)}catch(F){console.error("Payment error:",F);const I=((M=(S=F.response)==null?void 0:S.data)==null?void 0:M.message)||F.message;b(" "+I),c(I)}finally{_(!1)}};return e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Order Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Land Size:"}),e.jsxs("span",{className:"font-medium",children:[l.size," acres"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Location:"}),e.jsx("span",{className:"font-medium",children:l.location})]}),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Total Amount:"}),e.jsxs("span",{children:["LKR ",E.toLocaleString()]})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number *"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-white",children:e.jsx(hd,{options:Bh,onChange:R=>{R.error?b(" "+R.error.message):b("")}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Date *"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-white",children:e.jsx(b0,{options:Bh,onChange:R=>{R.error?b(" "+R.error.message):b("")}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CVV/CVC *"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-white",children:e.jsx(v0,{options:Bh,onChange:R=>{R.error?b(" "+R.error.message):b("")}})})]})]})]}),g&&e.jsx("div",{className:`p-4 rounded-lg text-sm ${g.startsWith("")?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:g}),e.jsx("button",{type:"submit",disabled:!d||y,className:"w-full bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white font-semibold py-3 rounded-lg transition duration-200 flex items-center justify-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Processing Payment..."]}):`Pay LKR ${E.toLocaleString()} Securely`}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Your payment information is secure and encrypted"})]})}function j1(){const l=Lt(),[o,c]=j.useState(1),[d,f]=j.useState(""),[x,y]=j.useState(!1),[_,g]=j.useState(!1),[b,N]=j.useState(null),[E,P]=j.useState(""),[R,B]=j.useState(!0),[S,M]=j.useState({size:"",location:""});qe.useEffect(()=>{(async()=>{try{const G=await fetch("https://js.stripe.com/v3/",{mode:"no-cors",method:"HEAD",cache:"no-cache"});B(!0)}catch{console.log("Stripe not accessible, using mock payment system"),B(!1)}})()},[]);const F=O=>{const{name:G,value:K}=O.target;if(G==="size"){const Q=parseFloat(K);K!==""&&(isNaN(Q)||Q<=0)?f(" Land size must be positive."):f("")}M(Q=>({...Q,[G]:K}))},I=O=>{M(G=>({...G,location:O}))},T=()=>{if(!S.size||!S.location){f(" Please fill in all land details.");return}const O=parseFloat(S.size);if(isNaN(O)||O<=0){f(" Land size must be positive.");return}f(""),c(2)},H=()=>{c(1),f("")},q=O=>{N(O),y(!0),M({size:"",location:""}),c(1)},A=O=>{console.error("Payment failed:",O),P(O),g(!0)},D=()=>{y(!1),N(null),l("/landownerdashboard")},V=()=>{g(!1),P("")};return e.jsxs("div",{className:"flex min-h-screen bg-white",children:[e.jsx("div",{className:"flex-1 flex justify-center items-center p-4",children:e.jsxs("div",{className:"w-full max-w-2xl bg-white p-8 shadow-lg rounded-lg",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Land Assessment Request & Payment"}),e.jsx("p",{className:"text-gray-600",children:"Complete your land assessment request with secure payment processing"})]}),e.jsx("div",{className:"flex items-center justify-center mb-8",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${o>=1?"bg-green-500 text-white":"bg-gray-300 text-gray-600"}`,children:"1"}),e.jsx("div",{className:"w-12 h-1 bg-gray-300 mx-2",children:e.jsx("div",{className:`h-1 transition-all duration-300 ${o>=2?"bg-green-500 w-full":"bg-green-500 w-0"}`})}),e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${o>=2?"bg-green-500 text-white":"bg-gray-300 text-gray-600"}`,children:"2"})]})}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("span",{className:"text-sm text-gray-600",children:o===1?"Step 1: Land Details":"Step 2: Secure Payment"})}),d&&e.jsx("div",{className:`p-4 rounded-lg mb-6 text-sm ${d.startsWith("")?"bg-green-100 text-green-800 border border-green-200":d.startsWith("")?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-red-100 text-red-800 border border-red-200"}`,children:d}),o===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Land Size (Acres) *"}),e.jsx("input",{type:"number",name:"size",placeholder:"e.g., 5.5",value:S.size,onChange:F,min:"0.1",step:"0.1",className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-green-50 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assessment Fee"}),e.jsxs("div",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 font-semibold",children:["LKR ",5e3]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Land Location *",e.jsx("p",{children:"Select Location in Badulla District"})]}),e.jsx(p1,{onLocationSelect:I,initialLocation:S.location})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"What's Included:"}),e.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[e.jsx("li",{children:" Soil pH analysis"}),e.jsx("li",{children:" Nutrient level assessment"}),e.jsx("li",{children:" Crop recommendations"}),e.jsx("li",{children:" Environmental data analysis"}),e.jsx("li",{children:" Detailed report within 7 days"})]})]}),e.jsx("button",{type:"button",onClick:T,className:"w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-3 rounded-lg transition duration-200",children:"Proceed to Secure Payment"})]}),o===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex gap-4 mb-6",children:e.jsx("button",{type:"button",onClick:H,className:"flex-1 border border-gray-300 text-gray-700 font-semibold py-3 rounded-lg hover:bg-gray-50 transition duration-200",children:"Back to Land Details"})}),R?e.jsx(gm,{stripe:b1,children:e.jsx(v1,{landData:S,onSuccess:q,onError:A})}):e.jsx(y1,{landData:S,onSuccess:q,onError:A})]})]})}),e.jsx(x1,{isVisible:x,onClose:D,transactionId:b==null?void 0:b.transaction_id}),e.jsx(g1,{isVisible:_,onClose:V,errorMessage:E})]})}function sg(){return e.jsx(j1,{})}const Ni="http://localhost/FARMMASTER-Backend";function _1(){const[l,o]=j.useState([]),[c,d]=j.useState(null),[f,x]=j.useState(!0),[y,_]=j.useState(""),[g,b]=j.useState("all"),{user:N}=mt(),{alert:E,showSuccess:P,showError:R,showWarning:B,hideAlert:S}=vm(),M=(N==null?void 0:N.id)||32;j.useEffect(()=>{F()},[]);const F=async()=>{var O,G,K,Q,ue,le;x(!0),_(""),console.log(" Fetching assessment requests for user:",M);try{const de=`${Ni}/land-reports/land-owner-reports?user_id=${M}`;console.log(" API URL:",de);const z=await be.get(de,{withCredentials:!0});if(console.log(" API Response:",z.data),z.data.status==="success"){const J=z.data.data||[];console.log(" Found reports:",J.length,J),o(J),console.log(" Reports set in state"),J.length>0&&(d(J[0]),console.log("Selected first report:",J[0].id||J[0].land_id))}else console.error("API returned error:",z.data.message),_(z.data.message||"Failed to fetch assessment requests")}catch(de){if(console.error("Request failed:",de),console.error("Response status:",(O=de.response)==null?void 0:O.status),console.error("Response data:",(G=de.response)==null?void 0:G.data),((K=de.response)==null?void 0:K.status)===401){console.log("Authentication failed, trying fallback endpoint...");try{const z=`${Ni}/api/land-reports/land-owner-reports?user_id=${M}`;console.log("Fallback API URL:",z);const J=await be.get(z,{withCredentials:!0});if(console.log("Fallback API Response:",J.data),J.data.status==="success"){const W=J.data.data||[];console.log("Found reports from fallback:",W.length,W),o(W),W.length>0&&d(W[0]);return}}catch(z){console.error("Fallback request also failed:",z)}_("Authentication required. Please log in again.")}else((Q=de.response)==null?void 0:Q.status)===403?_("Access denied. Please check your permissions."):_("Failed to fetch assessment requests: "+(((le=(ue=de.response)==null?void 0:ue.data)==null?void 0:le.message)||de.message))}finally{x(!1),console.log("Request completed")}},I=async O=>{try{const G=`${Ni}/reports/land/${O}/pdf`,K=window.open(G,"_blank");K?K.focus():B("Please allow popups and try again, or copy this URL to view the report: "+G)}catch(G){R("Failed to open report: "+G.message)}},T=async O=>{var G,K;try{x(!0);const Q=await be.get(`${Ni}/api/land-reports/${O}/conclusion`,{withCredentials:!0});Q.data.status==="success"?d(ue=>({...ue,conclusion:Q.data.data})):_("Failed to generate assessment: "+(Q.data.message||"Unknown error"))}catch(Q){_("Failed to generate assessment: "+(((K=(G=Q.response)==null?void 0:G.data)==null?void 0:K.message)||Q.message))}finally{x(!1)}},H=async O=>{var G,K;try{x(!0),_("");const Q=await be.post(`${Ni}/api.php/land-reports/${O}/interest-request`,{},{withCredentials:!0});Q.data.status==="success"?(P("Interest request sent to Financial Manager successfully! They will review your land and create a proposal for you."),await F()):_("Failed to send interest request: "+(Q.data.message||"Unknown error"))}catch(Q){const ue=((K=(G=Q.response)==null?void 0:G.data)==null?void 0:K.message)||Q.message;ue.includes("already exists")?B("You have already expressed interest for this land report. Our Financial Manager will review it soon."):R("Failed to send interest request: "+ue)}finally{x(!1)}},q=async O=>{try{x(!0);const G=await be.post(`${Ni}/api.php/land-reports/${O}/decline-interest`,{},{withCredentials:!0});G.data.status==="success"?(P("Thank you for your feedback. You can change your mind anytime by clicking 'Yes, I'm interested!' later."),await F()):_("Failed to save decision: "+(G.data.message||"Unknown error"))}catch(G){console.warn("Decline endpoint not available:",G),P("Thank you for your feedback. You can change your mind anytime.")}finally{x(!1)}},A=O=>{switch(O==null?void 0:O.toLowerCase()){case"approved":return"text-green-600 bg-green-100";case"rejected":return"text-red-600 bg-red-100";case"completed":return"text-green-600 bg-green-100";case"payment pending":return"text-yellow-600 bg-yellow-100";case"payment failed":return"text-red-600 bg-red-100";case"assessment pending":return"text-blue-600 bg-blue-100";case"report submitted":return"text-indigo-600 bg-indigo-100";default:return"text-gray-600 bg-gray-100"}},D=O=>{switch(O==null?void 0:O.toLowerCase()){case"approved":return e.jsx(nn,{size:16,className:"text-green-600"});case"rejected":return e.jsx(ld,{size:16,className:"text-red-600"});case"completed":return e.jsx(nn,{size:16,className:"text-green-600"});case"payment pending":return e.jsx(Ci,{size:16,className:"text-yellow-600"});case"payment failed":return e.jsx(ld,{size:16,className:"text-red-600"});case"assessment pending":return e.jsx(id,{size:16,className:"text-blue-600"});case"report submitted":return e.jsx(os,{size:16,className:"text-indigo-600"});default:return e.jsx(Ci,{size:16,className:"text-gray-600"})}},V=l.filter(O=>{switch(g){case"pending":return!O.has_report||O.overall_status==="Assessment Pending"||O.overall_status==="Payment Pending";case"completed":return O.has_report&&(O.overall_status==="Completed"||O.report_status==="Completed"||O.report_status==="Approved"||O.report_status==="Rejected");default:return!0}});return f?e.jsx("div",{className:"flex min-h-screen bg-white",children:e.jsx("div",{className:"flex-1 p-6 md:p-10",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading assessment requests..."})})})}):y?e.jsx("div",{className:"flex min-h-screen bg-white",children:e.jsx("div",{className:"flex-1 p-6 md:p-10",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"text-red-500",children:["Error: ",y]})})})}):l.length===0?e.jsx("div",{className:"flex min-h-screen bg-white",children:e.jsx("div",{className:"flex-1 p-6 md:p-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4 sm:mb-0",children:"Land Assessment Requests & Reports"}),e.jsx(Ee,{to:"/landassessment",children:e.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-md transition flex items-center gap-2",children:[e.jsx(Jc,{size:18}),"Request New Assessment"]})})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(os,{size:64,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No land assessment requests found."}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Start by requesting a land assessment using the button above."}),e.jsx("div",{className:"mt-6",children:e.jsx(Ee,{to:"/landassessment",children:e.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white font-semibold px-6 py-3 rounded-md transition flex items-center gap-2 mx-auto",children:[e.jsx(Jc,{size:20}),"Request Your First Assessment"]})})})]})]})})}):e.jsxs("div",{className:"flex min-h-screen bg-white",children:[e.jsx("div",{className:"flex-1 p-6 md:p-10",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4 sm:mb-0",children:"Land Assessment Requests & Reports"}),e.jsx(Ee,{to:"/landassessment",children:e.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-md transition flex items-center gap-2 mb-4 sm:mb-0",children:[e.jsx(Jc,{size:18}),"Request New Assessment"]})})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>b("all"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${g==="all"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["All (",l.length,")"]}),e.jsxs("button",{onClick:()=>b("pending"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${g==="pending"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Pending (",l.filter(O=>!O.has_report||O.overall_status==="Assessment Pending"||O.overall_status==="Payment Pending").length,")"]}),e.jsxs("button",{onClick:()=>b("completed"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${g==="completed"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Completed (",l.filter(O=>O.has_report&&(O.overall_status==="Completed"||O.report_status==="Completed"||O.report_status==="Approved"||O.report_status==="Rejected")).length,")"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-800",children:["Assessment Requests (",V.length,")"]})}),e.jsx("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:V.map(O=>e.jsxs("div",{className:`p-4 cursor-pointer hover:bg-gray-50 transition-colors ${(c==null?void 0:c.land_id)===O.land_id?"bg-green-50 border-r-4 border-green-500":""}`,onClick:()=>d(O),children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800 block truncate",children:O.has_report?`Report #${O.report_id}`:`Request #${O.land_id}`}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[D(O.overall_status),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${A(O.overall_status)}`,children:O.overall_status})]})]})}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-1",children:[e.jsx(Tr,{size:12,className:"mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:O.location})]}),e.jsx("div",{className:"flex items-center text-xs text-gray-500 mb-1",children:e.jsxs("span",{className:"mr-2",children:["Size: ",O.size," acres"]})}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(Oi,{size:12,className:"mr-1 flex-shrink-0"}),e.jsx("span",{children:O.has_report&&O.report_date?`Report: ${new Date(O.report_date).toLocaleDateString()}`:`Requested: ${new Date(O.request_date).toLocaleDateString()}`})]})]},`${O.land_id}-${O.report_id||"no-report"}`))})]})}),e.jsx("div",{className:"lg:col-span-2",children:c&&e.jsxs("div",{className:"bg-white border border-green-600 p-6 md:p-8 rounded-md shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-2",children:c.has_report?`Land Assessment Report #${c.report_id}`:`Assessment Request #${c.land_id}`}),e.jsx("p",{className:"text-sm text-green-600 mb-2",children:c.has_report&&c.report_date?`Report generated on ${new Date(c.report_date).toLocaleDateString()}`:`Requested on ${new Date(c.request_date).toLocaleDateString()}`}),e.jsxs("div",{className:"flex items-center gap-2",children:[D(c.overall_status),e.jsx("span",{className:`px-3 py-1 text-sm rounded-full ${A(c.overall_status)}`,children:c.overall_status})]})]}),c.has_report&&e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>I(c.report_id),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 text-sm font-semibold rounded-md transition",children:[e.jsx(T_,{size:16}),"View/Print Report"]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800 mb-4",children:"Land Information"}),e.jsx("table",{className:"w-full text-sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-2 pl-2 text-green-600",children:"Location"}),e.jsx("td",{className:"py-2 pr-2 text-right text-gray-800",children:c.location})]}),e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-2 pl-2 text-green-600",children:"Land Size"}),e.jsxs("td",{className:"py-2 pr-2 text-right text-gray-800",children:[c.size," acres"]})]}),e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-2 pl-2 text-green-600",children:"Land ID"}),e.jsxs("td",{className:"py-2 pr-2 text-right text-gray-800",children:["#",c.land_id]})]}),e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-2 pl-2 text-green-600",children:"Report ID"}),e.jsx("td",{className:"py-2 pr-2 text-right text-gray-800",children:c.id})]}),e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-2 pl-2 text-green-600",children:"Assessment Date"}),e.jsx("td",{className:"py-2 pr-2 text-right text-gray-800",children:new Date(c.report_date).toLocaleDateString()})]}),e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-2 pl-2 text-green-600",children:"Payment Status"}),e.jsx("td",{className:"py-2 pr-2 text-right text-gray-800",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${c.payment_status==="paid"?"bg-green-100 text-green-800":c.payment_status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:c.payment_status||"Paid"})})]}),c.payment_date&&e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-2 pl-2 text-green-600",children:"Payment Date"}),e.jsx("td",{className:"py-2 pr-2 text-right text-gray-800",children:new Date(c.payment_date).toLocaleDateString()})]})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800 mb-4",children:"Assessment Status"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[D(c.overall_status),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:c.overall_status}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[c.payment_status==="pending"&&"Please complete the payment to proceed with land assessment.",c.payment_status==="failed"&&"Payment failed. Please try again or contact support.",c.payment_status==="paid"&&!c.has_report&&"Payment completed. Field supervisor will visit your land soon for assessment.",c.has_report&&c.report_status==="Approved"&&"Assessment completed successfully. Report is ready for download.",c.has_report&&c.report_status==="Rejected"&&"Assessment was rejected. Please contact support for details.",c.has_report&&!c.report_status&&"Assessment report has been submitted and is under review."]})]})]})})]}),c.has_report&&c.land_description&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800 mb-4",children:"Land Assessment Description"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700",children:c.land_description})})]}),c.crop_recommendation&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-base font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(od,{className:"mr-2 text-green-600",size:20}),"Recommended Crops & Vegetables"]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-sm text-emerald-700 mb-4 font-medium",children:"Based on your land's soil analysis and environmental conditions:"}),e.jsx("div",{className:"whitespace-pre-line text-sm text-gray-700 leading-relaxed",children:c.crop_recommendation}),e.jsx("div",{className:"mt-4 p-3 bg-green-100 rounded-md border-l-4 border-green-500",children:e.jsxs("p",{className:"text-xs text-green-800",children:[e.jsx("strong",{children:"Tip:"})," These recommendations are based on your soil pH, organic matter, and nutrient levels. Contact our agricultural experts for personalized farming advice."]})})]})]}),!c.crop_recommendation&&(c.overall_status==="Completed"||c.report_status==="Completed")&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-base font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(od,{className:"mr-2 text-green-600",size:20}),"Crop Recommendations"]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("p",{className:"text-sm text-yellow-700 mb-2",children:"Crop recommendations are being generated based on your soil analysis..."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"text-xs px-3 py-1 bg-yellow-200 text-yellow-800 rounded hover:bg-yellow-300 transition",children:"Refresh to see recommendations"})]})]})]}),c.has_report&&(c.report_status==="Approved"||c.report_status==="Completed"||c.overall_status==="Completed")&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800 mb-4",children:"Soil Analysis Results"}),c.ph_value||c.organic_matter||c.nitrogen_level?e.jsx("table",{className:"w-full text-sm",children:e.jsxs("tbody",{children:[c.ph_value&&e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-2 pl-2 text-green-600",children:"Soil pH Value"}),e.jsx("td",{className:"py-2 pr-2 text-right text-gray-800",children:c.ph_value})]}),c.organic_matter&&e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-2 pl-2 text-green-600",children:"Organic Matter (%)"}),e.jsxs("td",{className:"py-2 pr-2 text-right text-gray-800",children:[c.organic_matter,"%"]})]}),c.nitrogen_level&&e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-2 pl-2 text-green-600",children:"Nitrogen (N) Level"}),e.jsx("td",{className:"py-2 pr-2 text-right text-gray-800",children:c.nitrogen_level})]}),c.phosphorus_level&&e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-2 pl-2 text-green-600",children:"Phosphorus (P) Level"}),e.jsx("td",{className:"py-2 pr-2 text-right text-gray-800",children:c.phosphorus_level})]}),c.potassium_level&&e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-2 pl-2 text-green-600",children:"Potassium (K) Level"}),e.jsx("td",{className:"py-2 pr-2 text-right text-gray-800",children:c.potassium_level})]})]})}):e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-700",children:"Soil analysis data is being processed by our field supervisors."})})]}),c.has_report&&(c.report_status==="Approved"||c.report_status==="Completed"||c.overall_status==="Completed")&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800",children:"Organic Farming Assessment"}),!c.conclusion&&e.jsx("button",{onClick:()=>T(c.report_id),disabled:f,className:"px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 disabled:opacity-50 transition",children:f?"Analyzing...":"Get Assessment"})]}),c.conclusion?e.jsxs("div",{children:[e.jsxs("div",{className:`mb-6 p-4 rounded-lg border-2 ${c.conclusion.is_good_for_organic?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:e.jsx("span",{className:`text-lg font-bold ${c.conclusion.is_good_for_organic?"text-green-600":"text-yellow-600"}`,children:c.conclusion.is_good_for_organic?"SUITABLE":"NEEDS IMPROVEMENT"})}),e.jsx("h3",{className:`font-semibold text-lg mb-2 ${c.conclusion.is_good_for_organic?"text-green-800":"text-yellow-800"}`,children:c.conclusion.is_good_for_organic?"Good for Organic Farming!":"Needs Improvement for Organic Farming"}),e.jsx("p",{className:"text-sm text-gray-700 mb-4",children:c.conclusion.conclusion_text})]}),c.conclusion.recommended_crops&&c.conclusion.recommended_crops.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Recommended Crops:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.conclusion.recommended_crops.map((O,G)=>e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:O},G))})]}),c.conclusion&&!c.conclusion.is_good_for_organic&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-yellow-200 text-center",children:[e.jsx("p",{className:"text-sm text-yellow-800 mb-2",children:"Don't worry! We'll work with you to improve your land for next time."}),e.jsx("p",{className:"text-xs text-yellow-700",children:"Contact our agricultural experts for guidance on soil improvement."})]})]}),c.conclusion&&c.conclusion.is_good_for_organic&&!c.has_interest_decision&&e.jsx("div",{className:"mt-6 p-4 bg-gradient-to-br from-green-50 to-blue-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:" Would you like to partner with FarmMaster for organic farming?"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Your land is suitable! Our Financial Manager will review your assessment and create a customized farming proposal for you."}),"                                ",e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx("button",{onClick:()=>H(c.report_id),disabled:f,className:"px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 disabled:opacity-50 transition",children:" Yes, I'm interested!"}),e.jsx("button",{onClick:()=>q(c.report_id),className:"px-6 py-3 bg-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-400 transition",children:"Not now"})]})]})}),c.conclusion&&c.conclusion.is_good_for_organic&&c.has_interest_decision&&e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:" Your Partnership Decision"}),c.interest_status==="pending"&&e.jsxs("div",{className:"text-green-700",children:[e.jsxs("p",{className:"mb-2",children:[" ",e.jsx("strong",{children:"You expressed interest!"})]}),e.jsx("p",{className:"text-sm",children:"Our Financial Manager is reviewing your land and will create a customized proposal for you soon."})]}),c.interest_status==="approved"&&e.jsxs("div",{className:"text-blue-700",children:[e.jsxs("p",{className:"mb-2",children:[" ",e.jsx("strong",{children:"Your interest has been approved!"})]}),e.jsx("p",{className:"text-sm",children:"Check your proposals section for the farming plan created for you."})]}),c.interest_status==="rejected"&&e.jsxs("div",{className:"text-gray-700",children:[e.jsxs("p",{className:"mb-2",children:[" ",e.jsx("strong",{children:"You chose not to partner at this time."})]}),e.jsx("p",{className:"text-sm",children:"You can change your mind anytime - just contact our support team."})]})]})})]}):e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-700",children:'Click "Get Assessment" to see if your land is suitable for organic farming.'})})]}),c.has_report&&c.environmental_notes&&(c.report_status==="Approved"||c.report_status==="Completed"||c.overall_status==="Completed")&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800 mb-4",children:"Environmental Assessment"}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700",children:c.environmental_notes})})]}),!c.has_report&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800 mb-4",children:"Next Steps"}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(id,{size:20,className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"What happens next?"}),e.jsxs("ol",{className:"text-sm text-blue-700 space-y-1",children:[c.payment_status==="pending"&&e.jsx("li",{children:"1. Complete the assessment payment"}),c.payment_status==="paid"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"1. Payment completed successfully"}),e.jsx("li",{children:"2. Field supervisor will visit your land (within 3-5 working days)"}),e.jsx("li",{children:"3. Soil and environmental assessment will be conducted"}),e.jsx("li",{children:"4. Assessment report will be generated"}),e.jsx("li",{children:"5. You will receive the final report with crop recommendations"})]})]})]})]})})]})]})})]})]})}),e.jsx(bm,{isOpen:E.isOpen,onClose:S,title:E.title,message:E.message,type:E.type,buttonText:E.buttonText})]})}function N1(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(ki,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(_1,{})})]})}function w1(){const[l,o]=j.useState([]),[c,d]=j.useState(null),[f,x]=j.useState(!0),[y,_]=j.useState(""),{alert:g,showSuccess:b,showError:N,hideAlert:E}=vm(),P="http://localhost/FARMMASTER-Backend";j.useEffect(()=>{R()},[]);const R=async()=>{var F,I,T,H,q;x(!0),_("");try{const A=JSON.parse(localStorage.getItem("user")||"{}"),D=A.id||A.user_id||21;console.log("User from localStorage:",A),console.log("Fetching proposals for user_id:",D),console.log("API URL:",`${P}/proposals?user_id=${D}`);const V=await be.get(`${P}/api.php/proposals?user_id=${D}`,{withCredentials:!0});console.log("Proposals API response:",V.data),V.data.status==="success"?(o(V.data.data||[]),V.data.data&&V.data.data.length>0&&d(V.data.data[0])):_(V.data.message||"Failed to fetch proposals")}catch(A){console.error("Error fetching proposals:",A),console.error("Error details:",{message:A.message,response:(F=A.response)==null?void 0:F.data,status:(I=A.response)==null?void 0:I.status,url:(T=A.config)==null?void 0:T.url}),_("Failed to fetch proposals: "+(((q=(H=A.response)==null?void 0:H.data)==null?void 0:q.message)||A.message))}finally{x(!1)}},B=async(F,I)=>{var T,H;try{const q=await be.put(`${P}/api.php/proposals/${F}/status`,{action:I},{headers:{"Content-Type":"application/json"},withCredentials:!0});if(q.data.status==="success"){const A=l.map(D=>D.proposal_id===F?{...D,status:q.data.data.new_status}:D);o(A),c&&c.proposal_id===F&&d({...c,status:q.data.data.new_status}),b(`Proposal ${I}ed successfully!`)}else N("Failed to update proposal: "+q.data.message)}catch(q){N("Error updating proposal: "+(((H=(T=q.response)==null?void 0:T.data)==null?void 0:H.error)||q.message))}},S=F=>{switch(F==null?void 0:F.toLowerCase()){case"accepted":return"text-green-600 bg-green-100";case"rejected":return"text-red-600 bg-red-100";case"pending":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},M=F=>{switch(F==null?void 0:F.toLowerCase()){case"accepted":return e.jsx(nn,{size:16,className:"text-green-600"});case"rejected":return e.jsx(ld,{size:16,className:"text-red-600"});case"pending":return e.jsx(Ci,{size:16,className:"text-yellow-600"});default:return e.jsx(Ci,{size:16,className:"text-gray-600"})}};return f?e.jsx("div",{className:"flex min-h-screen bg-white",children:e.jsx("div",{className:"flex-1 p-6 md:p-10",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading proposals..."})})})}):y?e.jsx("div",{className:"flex min-h-screen bg-white",children:e.jsx("div",{className:"flex-1 p-6 md:p-10",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"text-red-500",children:["Error: ",y]})})})}):l.length===0?e.jsx("div",{className:"flex min-h-screen bg-white",children:e.jsx("div",{className:"flex-1 p-6 md:p-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Lease Proposals"}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Wl,{size:64,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No lease proposals found."}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Proposals will appear here when FarmMaster creates them for your lands."})]})]})})}):e.jsxs("div",{className:"flex min-h-screen bg-white",children:[e.jsx("div",{className:"flex-1 p-6 md:p-10",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Lease Proposals"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Your Proposals"}),e.jsx("div",{className:"space-y-3",children:l.map(F=>e.jsxs("div",{onClick:()=>d(F),className:`p-4 border rounded-lg cursor-pointer transition-colors ${(c==null?void 0:c.proposal_id)===F.proposal_id?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("p",{className:"font-medium text-gray-800",children:["Proposal #",F.proposal_id]}),e.jsxs("div",{className:"flex items-center gap-1",children:[M(F.status),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${S(F.status)}`,children:F.status})]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[e.jsx(Tr,{size:14,className:"mr-1"}),e.jsx("span",{className:"truncate",children:F.location})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[e.jsx(Oi,{size:14,className:"mr-1"}),e.jsx("span",{children:new Date(F.proposal_date).toLocaleDateString()})]}),e.jsxs("p",{className:"text-sm text-green-600 font-medium",children:["Est. Profit: Rs ",F.estimated_profit_landowner.toLocaleString(),"/year"]})]},F.proposal_id))})]}),e.jsx("div",{className:"lg:col-span-2",children:c&&e.jsxs("div",{className:"bg-white border border-green-600 p-6 md:p-8 rounded-md shadow-sm",children:[e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-2",children:["Lease Proposal #",c.proposal_id]}),e.jsxs("p",{className:"text-sm text-green-600 mb-2",children:["Proposed on ",new Date(c.proposal_date).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-2",children:[M(c.status),e.jsx("span",{className:`px-3 py-1 text-sm rounded-full ${S(c.status)}`,children:c.status})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800 mb-4",children:"Land Information"}),e.jsx("table",{className:"w-full text-sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-2 pl-2 text-green-600",children:"Location"}),e.jsx("td",{className:"py-2 pr-2 text-right text-gray-800",children:c.location})]}),e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-2 pl-2 text-green-600",children:"Land Size"}),e.jsxs("td",{className:"py-2 pr-2 text-right text-gray-800",children:[c.land_size," acres"]})]}),e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-2 pl-2 text-green-600",children:"Recommended Crops"}),e.jsx("td",{className:"py-2 pr-2 text-right text-gray-800",children:c.crop_type})]})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800 mb-4",children:"Proposal Summary"}),e.jsx("table",{className:"w-full text-sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-3 pl-2 text-green-600",children:"Estimated Yield"}),e.jsxs("td",{className:"py-3 pr-2 text-right text-gray-800",children:[c.estimated_yield.toLocaleString()," kg"]})]}),e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-3 pl-2 text-green-600",children:"Lease Duration"}),e.jsxs("td",{className:"py-3 pr-2 text-right text-gray-800",children:[c.lease_duration_years," years"]})]}),e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-3 pl-2 text-green-600",children:"Rental Value"}),e.jsxs("td",{className:"py-3 pr-2 text-right text-gray-800",children:["Rs ",c.rental_value.toLocaleString()," per acre per year"]})]}),e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-3 pl-2 text-green-600",children:"Profit Sharing"}),e.jsxs("td",{className:"py-3 pr-2 text-right text-gray-800",children:[c.profit_sharing_farmmaster,"% (FarmMaster) / ",c.profit_sharing_landowner,"% (Landowner)"]})]}),e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-3 pl-2 text-green-600 font-semibold",children:"Estimated Profit (Landowner)"}),e.jsxs("td",{className:"py-3 pr-2 text-right text-gray-800 font-semibold",children:["Rs ",c.estimated_profit_landowner.toLocaleString()," per acre per year"]})]})]})})]}),e.jsxs("div",{className:"mb-10",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800 mb-4",children:"Terms and Conditions"}),e.jsxs("ul",{className:"text-sm text-gray-700 list-decimal pl-5 space-y-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Rent:"})," FarmMaster agrees to pay the landowner a rental value of Rs ",c.rental_value.toLocaleString()," per acre per year, payable quarterly."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Profit Sharing:"})," Profits from the sale of crops will be shared between FarmMaster and the landowner on a ",c.profit_sharing_farmmaster,"/",c.profit_sharing_landowner,"basis, respectively."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Crop Failure:"})," In the event of crop failure due to unforeseen circumstances (e.g., natural disasters), FarmMaster will bear the initial losses. Further actions will be determined through mutual agreement."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Land Maintenance:"})," FarmMaster is responsible for all farming operations and land maintenance during the lease period."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Termination:"})," Either party may terminate the agreement with a six-month written notice."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Dispute Resolution:"})," Any disputes will be resolved through mediation."]})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-700 mt-3",children:"By accepting this proposal, you agree to abide by these terms and conditions."})]}),c.status==="Pending"&&e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-end",children:[e.jsx("button",{onClick:()=>B(c.proposal_id,"accept"),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 text-sm font-semibold rounded-md transition",children:"Accept Proposal"}),e.jsx("button",{onClick:()=>B(c.proposal_id,"reject"),className:"bg-gray-100 hover:bg-gray-200 text-gray-800 px-6 py-2 text-sm font-semibold rounded-md transition",children:"Reject Proposal"})]}),c.status!=="Pending"&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:e.jsxs("p",{className:"text-gray-600",children:["This proposal has been ",e.jsx("strong",{children:c.status.toLowerCase()}),".",c.status==="Accepted"&&" You can now view harvest data for this agreement."]})})]})})]})]})}),e.jsx(bm,{isOpen:g.isOpen,onClose:E,title:g.title,message:g.message,type:g.type,buttonText:g.buttonText})]})}function S1(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(ki,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(w1,{})})]})}const C1=()=>{const[l,o]=j.useState([]),[c,d]=j.useState(!0),[f,x]=j.useState(null),[y,_]=j.useState({totalAmount:0,totalIncome:0,totalExpenses:0,landowenerTotal:0}),g="http://localhost/FARMMASTER-Backend";return j.useEffect(()=>{(async()=>{try{d(!0);const N=JSON.parse(localStorage.getItem("user")||"{}"),E=N.id||N.user_id||21;console.log("Fetching harvest data for user_id:",E);const P=await be.get(`${g}/api.php/harvest?user_id=${E}`,{withCredentials:!0});if(console.log("Harvest API response:",P.data),P.data.status==="success"){const R=P.data.data||[];o(R);const B=R.reduce((S,M)=>(S.totalAmount+=parseFloat(M.harvest_amount),S.totalIncome+=parseFloat(M.income),S.totalExpenses+=parseFloat(M.expenses),S.landowenerTotal+=parseFloat(M.landowner_share),S),{totalAmount:0,totalIncome:0,totalExpenses:0,landowenerTotal:0});_(B)}else P.data.error?x(P.data.error):x("Invalid response format from server")}catch(N){console.error("Error fetching harvest data:",N),x("Failed to load harvest data. Please try again later.")}finally{d(!1)}})()},[]),c?e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-10 font-sans",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-gray-600",children:"Loading harvest data..."})})}):f?e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-10 font-sans",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-700",children:f})})}):e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-10 font-sans",children:[e.jsx("h1",{className:"text-3xl font-bold text-black",children:"Harvests"}),e.jsx("p",{className:"text-green-600 text-sm mt-1",children:"Track your harvest activities and income"}),e.jsx("h3",{className:"text-xl font-bold text-black mt-10 mb-4",children:"Harvest Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white border rounded-xl p-6 shadow-sm",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Harvest Amount"}),e.jsxs("h2",{className:"text-2xl font-bold text-black",children:[y.totalAmount.toLocaleString()," kg"]}),e.jsx("p",{className:"text-green-600 text-sm mt-1",children:"All harvest records"})]}),e.jsxs("div",{className:"bg-white border rounded-xl p-6 shadow-sm",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Income"}),e.jsxs("h2",{className:"text-2xl font-bold text-black",children:["Rs ",y.totalIncome.toLocaleString()]}),e.jsx("p",{className:"text-green-600 text-sm mt-1",children:"Gross income from harvest"})]}),e.jsxs("div",{className:"bg-white border rounded-xl p-6 shadow-sm",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Your Share (Net)"}),e.jsxs("h2",{className:"text-2xl font-bold text-green-600",children:["Rs ",y.landowenerTotal.toLocaleString()]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"After expenses and costs"})]})]}),e.jsx("h3",{className:"text-xl font-bold text-black mt-10 mb-4",children:"Harvest Details"}),e.jsx("div",{className:"hidden md:block bg-white border rounded-xl overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-center border-collapse",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{className:"text-gray-700 font-semibold",children:[e.jsx("th",{className:"px-5 py-4 whitespace-nowrap",children:"Harvest Date"}),e.jsx("th",{className:"px-5 py-4 whitespace-nowrap",children:"Product Type"}),e.jsx("th",{className:"px-5 py-4 whitespace-nowrap",children:"Harvest Amount (kg)"}),e.jsx("th",{className:"px-5 py-4 whitespace-nowrap",children:"Total Income (Rs)"}),e.jsx("th",{className:"px-5 py-4 whitespace-nowrap",children:"Expenses (Rs)"}),e.jsx("th",{className:"px-5 py-4 whitespace-nowrap",children:"Your Share (Rs)"})]})}),e.jsx("tbody",{children:l.length>0?l.map((b,N)=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"px-5 py-4 text-green-800",children:new Date(b.harvest_date).toLocaleDateString()}),e.jsx("td",{className:"px-5 py-4 text-green-800",children:b.product_type}),e.jsx("td",{className:"px-5 py-4 text-green-800",children:parseFloat(b.harvest_amount).toLocaleString()}),e.jsxs("td",{className:"px-5 py-4 text-green-800",children:["Rs ",parseFloat(b.income).toLocaleString()]}),e.jsxs("td",{className:"px-5 py-4 text-red-600",children:["Rs ",parseFloat(b.expenses).toLocaleString()]}),e.jsxs("td",{className:"px-5 py-4 text-green-600 font-semibold",children:["Rs ",parseFloat(b.landowner_share).toLocaleString()]})]},N)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-5 py-8 text-gray-500 text-center",children:"No harvest records found"})})})]})}),e.jsx("div",{className:"block md:hidden space-y-4",children:l.length>0?l.map((b,N)=>e.jsxs("div",{className:"bg-white border rounded-xl p-4 shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Harvest Date"}),e.jsx("div",{className:"text-green-800 font-semibold",children:new Date(b.harvest_date).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-gray-600 mt-3 mb-1",children:"Product Type"}),e.jsx("div",{className:"text-green-800 font-semibold",children:b.product_type}),e.jsx("div",{className:"text-sm text-gray-600 mt-3 mb-1",children:"Harvest Amount (kg)"}),e.jsx("div",{className:"text-green-800 font-semibold",children:parseFloat(b.harvest_amount).toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600 mt-3 mb-1",children:"Total Income (Rs)"}),e.jsxs("div",{className:"text-green-800 font-semibold",children:["Rs ",parseFloat(b.income).toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600 mt-3 mb-1",children:"Expenses (Rs)"}),e.jsxs("div",{className:"text-red-600 font-semibold",children:["Rs ",parseFloat(b.expenses).toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600 mt-3 mb-1",children:"Your Share (Rs)"}),e.jsxs("div",{className:"text-green-600 font-bold text-lg",children:["Rs ",parseFloat(b.landowner_share).toLocaleString()]})]},N)):e.jsx("div",{className:"bg-white border rounded-xl p-8 shadow-sm text-center",children:e.jsx("p",{className:"text-gray-500",children:"No harvest records found"})})})]})};function E1(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(ki,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(C1,{})})]})}function fo(){const[l,o]=j.useState(!1),[c,d]=j.useState(null),[f,x]=j.useState(!1),[y,_]=j.useState(!1),g=Lt(),{logout:b}=mt();j.useEffect(()=>{const S=JSON.parse(localStorage.getItem("user"));S&&d(S)},[]);const N="flex items-center gap-3 px-4 py-2 rounded-md transition text-sm font-medium",E="bg-green-100 text-green-700 font-semibold",P="text-black hover:bg-green-50",R=async()=>{if(!f)try{x(!0),console.log("Operational Manager logout initiated..."),await b(),console.log("Logout successful, navigating to home..."),g("/",{replace:!0})}catch(S){console.error("Logout failed:",S),g("/",{replace:!0})}finally{x(!1),_(!1)}},B=()=>{_(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden flex items-start bg-white shadow px-4 py-6",children:e.jsx("button",{onClick:()=>o(!0),children:e.jsx(Di,{size:24})})}),e.jsxs("aside",{className:`fixed top-0 left-0 h-full w-64 bg-white shadow-sm font-poppins flex flex-col px-4 py-6 z-50 transform transition-transform ${l?"translate-x-0":"-translate-x-full"} md:translate-x-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(Ee,{to:"/",onClick:()=>o(!1),children:e.jsx("img",{src:Ts,alt:"FarmMaster Logo",className:"h-20 w-auto"})}),e.jsx("button",{className:"md:hidden text-gray-600 cursor-pointer",onClick:()=>o(!1),children:e.jsx(on,{size:24})})]}),e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx("img",{src:mo,alt:"Operational Manager",className:"w-14 h-14 rounded-full object-cover mr-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold",children:(c==null?void 0:c.name)||"Operational Manager"}),e.jsx("p",{className:"text-sm text-green-600",children:"Operational Manager"})]})]}),e.jsxs("nav",{className:"flex flex-col gap-2",children:[e.jsxs(Ee,{to:"/operationalmanagerdashboard",className:({isActive:S})=>`${N} ${S?E:P}`,onClick:()=>o(!1),children:[e.jsx(zi,{size:16}),"Dashboard"]}),e.jsxs(Ee,{to:"/operationalmanagerusermanagement",className:({isActive:S})=>`${N} ${S?E:P}`,onClick:()=>o(!1),children:[e.jsx(pN,{size:16}),"User Management"]}),e.jsxs(Ee,{to:"/operationalmanagerproposalmanagement",className:({isActive:S})=>`${N} ${S?E:P}`,onClick:()=>o(!1),children:[e.jsx(wd,{size:16}),"Proposal Management"]}),e.jsxs(Ee,{to:"/operationalmanagercropinventorymanagement",className:({isActive:S})=>`${N} ${S?E:P}`,onClick:()=>o(!1),children:[e.jsx(od,{size:16}),"Crop Inventory"]}),e.jsxs(Ee,{to:"/operationalmanagerlandreportmanagement",className:({isActive:S})=>`${N} ${S?E:P}`,onClick:()=>o(!1),children:[e.jsx(os,{size:16}),"Land Report Management"]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsxs(Ee,{to:"/",className:({isActive:S})=>`${N} ${S?E:P}`,onClick:()=>o(!1),children:[e.jsx(oo,{size:16}),"Go to Home"]}),e.jsxs("button",{className:`${N} text-red-600 hover:bg-red-50 mt-2 cursor-pointer ${f?"opacity-50 cursor-not-allowed":""}`,onClick:B,disabled:f,children:[e.jsx(co,{size:16}),f?"Logging out...":"Log out"]})]})]}),e.jsx(Qa,{isOpen:y,onClose:()=>_(!1),onConfirm:R,title:"Confirm Logout",message:"Are you sure you want to logout from your Operational Manager account? You will be redirected to the home page.",confirmText:"Yes, Logout",cancelText:"Cancel",type:"warning"})]})}function k1(){const[l,o]=j.useState(""),[c,d]=j.useState({totalUsers:0,pendingReports:0,assignedSupervisors:0}),[f,x]=j.useState([]),[y,_]=j.useState(!0),[g,b]=j.useState(null);j.useEffect(()=>{const R=JSON.parse(localStorage.getItem("user"));R!=null&&R.name&&o(R.name),N()},[]);const N=async()=>{try{_(!0),b(null);const R=await fetch("http://localhost/FARMMASTER-Backend/api.php/dashboard/stats",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!R.ok)throw new Error(`HTTP error! status: ${R.status}`);const B=await R.json();B.status==="success"&&d({totalUsers:B.data.total_users||0,pendingReports:B.data.pending_reports||0,assignedSupervisors:B.data.assigned_supervisors||0});const S=await fetch("http://localhost/FARMMASTER-Backend/api.php/dashboard/activity",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!S.ok)throw new Error(`HTTP error! status: ${S.status}`);const M=await S.json();M.status==="success"&&x(M.data||[])}catch(R){b("Failed to fetch dashboard data: "+R.message),console.error("Error fetching dashboard data:",R)}finally{_(!1)}},E=R=>{switch(R){case"land_report":return e.jsx(os,{className:"text-green-700",size:26});case"proposal":return e.jsx(wd,{className:"text-green-700",size:26});case"user":return e.jsx(cd,{className:"text-green-700",size:26});default:return e.jsx(Xg,{className:"text-green-700",size:26})}},P=R=>{try{const B=new Date(R),M=Math.floor((new Date-B)/(1e3*60));if(M<60)return`${M} minutes ago`;if(M<1440){const F=Math.floor(M/60);return`${F} hour${F>1?"s":""} ago`}else{const F=Math.floor(M/1440);return`${F} day${F>1?"s":""} ago`}}catch{return"Recently"}};return e.jsxs("div",{className:"p-4 md:p-10 font-poppins",children:[e.jsx("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-8 mt-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Dashboard"}),e.jsxs("p",{className:"text-sm md:text-lg text-green-600 mt-2",children:["Welcome back, ",l||"Operational Manager"]})]})}),g&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-red-700 text-center",children:g}),e.jsx("button",{onClick:()=>{b(null),N()},className:"mt-2 mx-auto block bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Retry"})]}),e.jsxs("div",{className:"mb-10",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-6",children:"Overview"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"border rounded-md p-6 shadow-sm text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:y?"...":g?"N/A":c.totalUsers.toLocaleString()})]}),e.jsxs("div",{className:"border rounded-md p-6 shadow-sm text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Land Reports"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:y?"...":g?"N/A":c.pendingReports})]}),e.jsxs("div",{className:"border rounded-md p-6 shadow-sm text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Assigned Supervisors"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:y?"...":g?"N/A":c.assignedSupervisors})]})]})]}),e.jsxs("div",{className:"mb-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Recent Activity"}),y?e.jsx("div",{className:"bg-green-50/50 p-4 rounded-md",children:e.jsx("p",{className:"text-center text-gray-500",children:"Loading recent activity..."})}):g?e.jsx("div",{className:"bg-red-50 p-4 rounded-md",children:e.jsx("p",{className:"text-center text-red-600",children:"Failed to load recent activity"})}):f.length>0?e.jsx("ul",{className:"space-y-4 bg-green-50/50 p-4 rounded-md",children:f.map((R,B)=>e.jsxs("li",{className:"flex items-start gap-5",children:[e.jsx("div",{className:"bg-green-100 rounded-sm p-2",children:E(R.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:R.title}),e.jsx("p",{className:"text-sm text-green-600",children:R.description}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:P(R.activity_date)})]})]},B))}):e.jsx("div",{className:"bg-green-50/50 p-4 rounded-md",children:e.jsx("p",{className:"text-center text-gray-500",children:"No recent activity found"})})]})]})}function R1(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(fo,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(k1,{})})]})}const Vc="http://localhost/FARMMASTER-Backend";function L1(){const l=z=>({Supervisor:"Field Supervisor",Financial_Manager:"Financial Manager",Operational_Manager:"Operational Manager"})[z]||z.replace("_"," "),[o,c]=j.useState([]),[d,f]=j.useState(!0),[x,y]=j.useState(""),[_,g]=j.useState(!1),[b,N]=j.useState(""),[E,P]=j.useState(""),[R,B]=j.useState(!1),[S,M]=j.useState({userId:null,currentStatus:"",userName:"",newStatus:""}),[F,I]=j.useState(!1),[T,H]=j.useState({user_id:null,first_name:"",last_name:"",email:"",phone:"",user_role:""}),[q,A]=j.useState({isOpen:!1,type:"info",title:"",message:""}),D=(z,J,W)=>{A({isOpen:!0,type:z,title:J,message:W})},V=()=>{A(z=>({...z,isOpen:!1}))},O=async()=>{f(!0),y("");try{const z=await be.get(`${Vc}/api/users`,{withCredentials:!0});if(z.data.status==="success"){const J=z.data.data.map(W=>({...W,name:`${W.first_name} ${W.last_name}`,role:W.user_role,status:W.is_active?"Active":"Inactive"}));c(J)}else y(z.data.message||"Failed to load users.")}catch{y("Failed to load users.")}finally{f(!1)}};j.useEffect(()=>{O()},[]);const G=async z=>{var J,W;try{const ve=await be.post(`${Vc}/api/users`,z,{headers:{"Content-Type":"application/json"},withCredentials:!0});ve.data.status==="success"?(D("success","Success","User added successfully"),O()):D("error","Add Failed",ve.data.message||"Failed to add user")}catch(ve){console.error("Add user error:",ve);let U="Server error. Please try again.";(W=(J=ve.response)==null?void 0:J.data)!=null&&W.message&&(U=ve.response.data.message),D("error","Error",U)}},K=(z,J,W)=>{M({userId:z,currentStatus:J,userName:W,newStatus:J==="Active"?"inactive":"active"}),B(!0)},Q=async()=>{const{userId:z,newStatus:J}=S;try{const W=await be.put(`${Vc}/api/users/${z}/status`,{status:J},{headers:{"Content-Type":"application/json"},withCredentials:!0});W.data.status==="success"?(D("success","Success","User status updated successfully"),O()):D("error","Update Failed",W.data.message||"Failed to update user status")}catch(W){console.error("Status toggle error:",W);let ve="Server error. Please try again.";W.response?W.response.data&&W.response.data.message?ve=W.response.data.message:ve=`Server error (${W.response.status}): ${W.response.statusText}`:W.request?ve="Network error. Please check your connection.":ve=W.message||"Unknown error occurred.",D("error","Error",ve)}finally{B(!1),M({userId:null,currentStatus:"",userName:"",newStatus:""})}},ue=z=>{H({user_id:z.user_id,first_name:z.name.split(" ")[0]||"",last_name:z.name.split(" ").slice(1).join(" ")||"",email:z.email,phone:z.phone||"",user_role:z.role}),I(!0)},le=async z=>{var J,W;try{const ve=await be.put(`${Vc}/api/users/${z.user_id}`,z,{headers:{"Content-Type":"application/json"},withCredentials:!0});ve.data.status==="success"?(D("success","Success","User updated successfully"),O()):D("error","Update Failed",ve.data.message||"Failed to update user")}catch(ve){console.error("Update user error:",ve);let U="Server error. Please try again.";(W=(J=ve.response)==null?void 0:J.data)!=null&&W.message&&(U=ve.response.data.message),D("error","Error",U)}},de=o.filter(z=>{const J=E?z.role===E:!0,W=b?z.name.toLowerCase().includes(b.toLowerCase())||z.email.toLowerCase().includes(b.toLowerCase()):!0;return J&&W});return e.jsxs("div",{className:"flex-1 bg-white min-h-screen p-4 md:p-10 font-poppins",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-black mb-4 mt-4",children:"User Management"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(pm,{className:"absolute top-1/2 left-3 transform -translate-y-1/2 text-green-600"}),e.jsx("input",{type:"text",placeholder:"Search users",value:b,onChange:z=>N(z.target.value),className:"w-full bg-green-50 rounded-md pl-10 pr-4 py-3 text-sm focus:outline-none focus:ring-1 focus:ring-green-400"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("select",{className:"bg-green-50 text-sm rounded-md px-4 py-3 focus:outline-none min-w-[180px]",value:E,onChange:z=>P(z.target.value),children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"Landowner",children:"Landowner"}),e.jsx("option",{value:"Supervisor",children:"Field Supervisor"}),e.jsx("option",{value:"Buyer",children:"Buyer"}),e.jsx("option",{value:"Operational_Manager",children:"Operational Manager"}),e.jsx("option",{value:"Financial_Manager",children:"Financial Manager"})]})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("button",{onClick:()=>g(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors duration-200 shadow-md hover:shadow-lg whitespace-nowrap",children:"+ Add New User"})})]}),d?e.jsx("p",{className:"text-center text-gray-600",children:"Loading users..."}):x?e.jsx("p",{className:"text-center text-red-600",children:x}):de.length===0?e.jsx("p",{className:"text-center text-gray-600",children:"No users found."}):e.jsx("div",{className:"overflow-x-auto bg-white border border-black rounded-xl shadow-lg",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gradient-to-r from-green-50 to-green-100 text-black font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-5 text-center border-b border-black",children:"Name"}),e.jsx("th",{className:"px-6 py-5 text-center border-b border-black",children:"Email"}),e.jsx("th",{className:"px-6 py-5 text-center border-b border-black",children:"Role"}),e.jsx("th",{className:"px-6 py-5 text-center border-b border-black",children:"Status"}),e.jsx("th",{className:"px-6 py-5 text-center border-b border-black",children:"Actions"})]})}),e.jsx("tbody",{children:de.map(z=>e.jsxs("tr",{className:"border-b border-black hover:bg-gradient-to-r hover:from-green-50 hover:to-blue-50 hover:shadow-sm transition-all duration-300 group",children:[e.jsx("td",{className:"px-6 py-5 text-center font-medium text-gray-900",children:z.name}),e.jsx("td",{className:"px-6 py-5 text-center font-medium text-gray-900",children:z.email}),e.jsx("td",{className:"px-6 py-5 text-center",children:e.jsx("span",{className:"bg-green-100 text-black-800 font-semibold px-4 py-2 rounded-full inline-block",children:l(z.role||"")})}),e.jsx("td",{className:"px-6 py-5 text-center",children:e.jsx("span",{className:`font-semibold px-4 py-2 rounded-full inline-block transition-colors duration-200 ${z.status==="Active"?"bg-green-100 text-green-700":"bg-red-100 text-red-600"}`,children:z.status})}),e.jsx("td",{className:"px-6 py-5 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-6",children:[e.jsxs("button",{onClick:()=>ue(z),className:"group relative bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-4 py-2 rounded-lg font-medium text-sm shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-50",title:"Edit User Information",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(aw,{className:"w-4 h-4 group-hover:rotate-12 transition-transform duration-300"}),e.jsx("span",{className:"group-hover:tracking-wider transition-all duration-300",children:"Edit"})]}),e.jsx("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-10 rounded-lg transition-opacity duration-300"}),e.jsx("div",{className:"absolute inset-0 rounded-lg overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 bg-white opacity-0 group-active:opacity-20 group-active:animate-ping"})})]}),e.jsxs("label",{className:"inline-flex items-center cursor-pointer group/toggle hover:scale-105 transition-transform duration-200",children:[e.jsx("input",{type:"checkbox",className:"sr-only",checked:z.status==="Active",onChange:()=>K(z.user_id,z.status,z.name)}),e.jsx("div",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 shadow-lg group-hover/toggle:shadow-xl ${z.status==="Active"?"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700":"bg-gradient-to-r from-gray-300 to-gray-400 hover:from-gray-400 hover:to-gray-500"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 group-hover/toggle:scale-110 ${z.status==="Active"?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:`ml-3 text-sm font-medium transition-all duration-300 group-hover/toggle:font-semibold ${z.status==="Active"?"text-green-700":"text-gray-600"}`,children:z.status==="Active"?"Active":"Inactive"})]})]})})]},z.user_id))})]})}),e.jsxs("div",{className:"mt-8 bg-gray-50 p-6 rounded-lg border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"User Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:o.filter(z=>z.status==="Active").length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Inactive Users"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:o.filter(z=>z.status==="Inactive").length})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-3",children:"Role Distribution"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:["Landowner","Supervisor","Buyer","Financial_Manager"].map(z=>{const J=o.filter(ve=>ve.role===z).length,W=l(z);return e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border text-center",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-600 mb-1",children:W}),e.jsx("p",{className:"text-lg font-bold text-gray-800",children:J})]},z)})})]})]}),e.jsx("p",{className:"text-center mt-8 text-sm text-gray-400",children:" 2025 Farm Master. All rights reserved."}),e.jsx(Xa,{isOpen:q.isOpen,onClose:V,type:q.type,title:q.title,message:q.message,autoClose:q.type==="success",autoCloseDelay:2e3}),_&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"32px",width:"100%",maxWidth:"500px",margin:"20px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#1f2937",marginBottom:"8px",textAlign:"center"},children:"Add New User"}),e.jsx("p",{style:{color:"#6b7280",textAlign:"center",fontSize:"14px"},children:"Add Field Supervisor or Financial Manager to the system"})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"First Name *"}),e.jsx("input",{id:"user-firstname-input",type:"text",placeholder:"Enter first name",style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #d1d5db",borderRadius:"8px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s"},onFocus:z=>z.target.style.borderColor="#10b981",onBlur:z=>z.target.style.borderColor="#d1d5db"})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Last Name *"}),e.jsx("input",{id:"user-lastname-input",type:"text",placeholder:"Enter last name",style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #d1d5db",borderRadius:"8px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s"},onFocus:z=>z.target.style.borderColor="#10b981",onBlur:z=>z.target.style.borderColor="#d1d5db"})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Email *"}),e.jsx("input",{id:"user-email-input",type:"email",placeholder:"Enter email address",style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #d1d5db",borderRadius:"8px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s"},onFocus:z=>z.target.style.borderColor="#10b981",onBlur:z=>z.target.style.borderColor="#d1d5db"})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Phone"}),e.jsx("input",{id:"user-phone-input",type:"text",placeholder:"Enter phone number",style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #d1d5db",borderRadius:"8px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s"},onFocus:z=>z.target.style.borderColor="#10b981",onBlur:z=>z.target.style.borderColor="#d1d5db"})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Password *"}),e.jsx("input",{id:"user-password-input",type:"password",placeholder:"Enter password (min 6 characters)",style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #d1d5db",borderRadius:"8px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s"},onFocus:z=>z.target.style.borderColor="#10b981",onBlur:z=>z.target.style.borderColor="#d1d5db"})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Role *"}),e.jsxs("select",{id:"user-role-select",style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #d1d5db",borderRadius:"8px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s",backgroundColor:"white"},onFocus:z=>z.target.style.borderColor="#10b981",onBlur:z=>z.target.style.borderColor="#d1d5db",children:[e.jsx("option",{value:"",children:"Select Role"}),e.jsx("option",{value:"Supervisor",children:"Field Supervisor"}),e.jsx("option",{value:"Financial_Manager",children:"Financial Manager"})]}),e.jsx("p",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Only Field Supervisors and Financial Managers can be added"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>g(!1),style:{padding:"12px 24px",fontSize:"14px",fontWeight:"500",color:"#374151",backgroundColor:"white",border:"2px solid #d1d5db",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseOver:z=>{z.target.style.backgroundColor="#f9fafb",z.target.style.borderColor="#9ca3af"},onMouseOut:z=>{z.target.style.backgroundColor="white",z.target.style.borderColor="#d1d5db"},children:"Cancel"}),e.jsx("button",{onClick:()=>{const z=document.getElementById("user-firstname-input").value.trim(),J=document.getElementById("user-lastname-input").value.trim(),W=document.getElementById("user-email-input").value.trim(),ve=document.getElementById("user-phone-input").value.trim(),U=document.getElementById("user-password-input").value.trim(),ne=document.getElementById("user-role-select").value.trim();if(!z){alert("Please enter a first name"),document.getElementById("user-firstname-input").focus();return}if(!J){alert("Please enter a last name"),document.getElementById("user-lastname-input").focus();return}if(!W){alert("Please enter an email address"),document.getElementById("user-email-input").focus();return}if(!U){alert("Please enter a password"),document.getElementById("user-password-input").focus();return}if(U.length<6){alert("Password must be at least 6 characters long"),document.getElementById("user-password-input").focus();return}if(!ne){alert("Please select a role"),document.getElementById("user-role-select").focus();return}G({first_name:z,last_name:J,email:W,phone:ve,password:U,user_role:ne}),g(!1),document.getElementById("user-firstname-input").value="",document.getElementById("user-lastname-input").value="",document.getElementById("user-email-input").value="",document.getElementById("user-phone-input").value="",document.getElementById("user-password-input").value="",document.getElementById("user-role-select").value=""},style:{padding:"12px 24px",fontSize:"14px",fontWeight:"500",color:"white",backgroundColor:"#10b981",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:z=>z.target.style.backgroundColor="#059669",onMouseOut:z=>z.target.style.backgroundColor="#10b981",children:"Add User to System"})]})]})}),F&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"32px",width:"100%",maxWidth:"500px",margin:"20px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#1f2937",marginBottom:"8px",textAlign:"center"},children:"Edit User"}),e.jsx("p",{style:{color:"#6b7280",textAlign:"center",fontSize:"14px"},children:"Update user information"})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"First Name *"}),e.jsx("input",{id:"edit-user-firstname-input",type:"text",placeholder:"Enter first name",defaultValue:T.first_name,style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #d1d5db",borderRadius:"8px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s"},onFocus:z=>z.target.style.borderColor="#10b981",onBlur:z=>z.target.style.borderColor="#d1d5db"})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Last Name *"}),e.jsx("input",{id:"edit-user-lastname-input",type:"text",placeholder:"Enter last name",defaultValue:T.last_name,style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #d1d5db",borderRadius:"8px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s"},onFocus:z=>z.target.style.borderColor="#10b981",onBlur:z=>z.target.style.borderColor="#d1d5db"})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Email *"}),e.jsx("input",{id:"edit-user-email-input",type:"email",placeholder:"Enter email address",defaultValue:T.email,style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #d1d5db",borderRadius:"8px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s"},onFocus:z=>z.target.style.borderColor="#10b981",onBlur:z=>z.target.style.borderColor="#d1d5db"})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Phone"}),e.jsx("input",{id:"edit-user-phone-input",type:"text",placeholder:"Enter phone number",defaultValue:T.phone,style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #d1d5db",borderRadius:"8px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s"},onFocus:z=>z.target.style.borderColor="#10b981",onBlur:z=>z.target.style.borderColor="#d1d5db"})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Role"}),e.jsx("div",{style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #e5e7eb",borderRadius:"8px",boxSizing:"border-box",backgroundColor:"#f9fafb",color:"#6b7280",fontWeight:"500"},children:l(T.user_role)}),e.jsx("p",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"User role cannot be changed through editing"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{I(!1),H({user_id:null,first_name:"",last_name:"",email:"",phone:"",user_role:""})},style:{padding:"12px 24px",fontSize:"14px",fontWeight:"500",color:"#374151",backgroundColor:"white",border:"2px solid #d1d5db",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseOver:z=>{z.target.style.backgroundColor="#f9fafb",z.target.style.borderColor="#9ca3af"},onMouseOut:z=>{z.target.style.backgroundColor="white",z.target.style.borderColor="#d1d5db"},children:"Cancel"}),e.jsx("button",{onClick:()=>{const z=document.getElementById("edit-user-firstname-input").value.trim(),J=document.getElementById("edit-user-lastname-input").value.trim(),W=document.getElementById("edit-user-email-input").value.trim(),ve=document.getElementById("edit-user-phone-input").value.trim();if(!z){alert("Please enter a first name"),document.getElementById("edit-user-firstname-input").focus();return}if(!J){alert("Please enter a last name"),document.getElementById("edit-user-lastname-input").focus();return}if(!W){alert("Please enter an email address"),document.getElementById("edit-user-email-input").focus();return}le({user_id:T.user_id,first_name:z,last_name:J,email:W,phone:ve,user_role:T.user_role}),I(!1),H({user_id:null,first_name:"",last_name:"",email:"",phone:"",user_role:""})},style:{padding:"12px 24px",fontSize:"14px",fontWeight:"500",color:"white",backgroundColor:"#10b981",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:z=>z.target.style.backgroundColor="#059669",onMouseOut:z=>z.target.style.backgroundColor="#10b981",children:"Update User"})]})]})}),e.jsx(Qa,{isOpen:R,onClose:()=>{B(!1),M({userId:null,currentStatus:"",userName:"",newStatus:""})},onConfirm:Q,title:"Confirm Status Change",message:`Are you sure you want to ${S.currentStatus==="Active"?"deactivate":"activate"} the user "${S.userName}"? This will ${S.currentStatus==="Active"?"restrict their access to the system":"allow them to access the system again"}.`,confirmText:`Yes, ${S.currentStatus==="Active"?"Deactivate":"Activate"}`,cancelText:"Cancel",type:"warning"})]})}function T1(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(fo,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(L1,{})})]})}const A1=()=>{const l=Lt(),[o,c]=j.useState([]),[d,f]=j.useState(!0),[x,y]=j.useState(null);j.useEffect(()=>{_()},[]);const _=async()=>{try{f(!0),y(null);const P=await fetch("http://localhost/FARMMASTER-Backend/api.php/proposals/public",{method:"GET",headers:{"Content-Type":"application/json"}});if(!P.ok)throw new Error(`HTTP error! status: ${P.status}`);const R=await P.json();if(R.status==="success"){const B=R.data.map(S=>{var M;return{id:S.proposal_display_id||`#${S.proposal_id}`,name:S.landowner_name,status:S.status,profit:`Rs. ${((M=S.estimated_profit_landowner)==null?void 0:M.toLocaleString())||"0"}`,proposal_id:S.proposal_id}});c(B)}else y(R.message||"Failed to fetch proposals")}catch(P){y("Failed to connect to backend: "+P.message),console.error("Error fetching proposals:",P),c([])}finally{f(!1)}},g=P=>{l(`/proposal-details/${P.proposal_id}`)},b={Pending:"bg-green-50 text-black",Accepted:"bg-green-200 text-black font-semibold",Rejected:"bg-red-100 text-red-700 font-semibold"},E=(()=>{if(!o||o.length===0)return{totalProposals:0,pendingCount:0,acceptedCount:0,rejectedCount:0,totalProfitEstimate:0,averageProfitEstimate:0};const P=o.length,R=o.filter(T=>T.status==="Pending").length,B=o.filter(T=>T.status==="Accepted").length,S=o.filter(T=>T.status==="Rejected").length,F=o.map(T=>parseFloat(T.profit.replace(/[^\d.-]/g,""))||0).reduce((T,H)=>T+H,0),I=P>0?F/P:0;return{totalProposals:P,pendingCount:R,acceptedCount:B,rejectedCount:S,totalProfitEstimate:F,averageProfitEstimate:I}})();return e.jsxs("div",{className:"flex-1 bg-white min-h-screen p-4 md:p-10 font-poppins",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-black mb-4 mt-4",children:"Proposal Management"}),e.jsx("p",{className:"text-green-600 mt-1",children:"Manage and send proposals to landowners."})]}),d&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:"Loading proposals..."})}),x&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-red-700",children:x}),e.jsx("button",{onClick:_,className:"mt-2 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Retry"})]}),!d&&e.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow-sm",children:e.jsxs("table",{className:"min-w-full border border-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-green-50 text-left text-sm text-gray-700",children:[e.jsx("th",{className:"py-3 px-4",children:"Proposal ID"}),e.jsx("th",{className:"py-3 px-4",children:"Landowner Name"}),e.jsx("th",{className:"py-3 px-4",children:"Status"}),e.jsx("th",{className:"py-3 px-4",children:"Profit Estimate"}),e.jsx("th",{className:"py-3 px-4 text-green-600",children:"Actions"})]})}),e.jsx("tbody",{className:"text-sm",children:o.length===0&&!x?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"py-8 text-center text-gray-500",children:"No proposals found in the database"})}):x?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"py-8 text-center text-gray-500",children:"Unable to load proposals. Please check your backend connection."})}):o.map((P,R)=>e.jsxs("tr",{className:"border-t border-gray-200 hover:bg-green-50 transition",children:[e.jsx("td",{className:"py-3 px-4",children:P.id}),e.jsx("td",{className:"py-3 px-4 text-green-700",children:P.name}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm ${b[P.status]}`,children:P.status})}),e.jsx("td",{className:"py-3 px-4 text-green-700",children:P.profit}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>g(P),className:"text-black font-semibold hover:underline hover:text-green-600 cursor-pointer",children:"View Details"})})]},P.proposal_id||R))})]})}),!d&&!x&&o.length>0&&e.jsxs("div",{className:"mt-6 bg-green-50 p-6 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-4 text-lg",children:"Proposal Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white p-3 rounded-md border border-green-100",children:[e.jsx("span",{className:"text-gray-600 block text-xs uppercase tracking-wide",children:"Total Proposals:"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:E.totalProposals})]}),e.jsxs("div",{className:"bg-white p-3 rounded-md border border-green-100",children:[e.jsx("span",{className:"text-gray-600 block text-xs uppercase tracking-wide",children:"Pending:"}),e.jsx("span",{className:"text-xl font-bold text-yellow-600",children:E.pendingCount})]}),e.jsxs("div",{className:"bg-white p-3 rounded-md border border-green-100",children:[e.jsx("span",{className:"text-gray-600 block text-xs uppercase tracking-wide",children:"Accepted:"}),e.jsx("span",{className:"text-xl font-bold text-green-600",children:E.acceptedCount})]}),e.jsxs("div",{className:"bg-white p-3 rounded-md border border-green-100",children:[e.jsx("span",{className:"text-gray-600 block text-xs uppercase tracking-wide",children:"Rejected:"}),e.jsx("span",{className:"text-xl font-bold text-red-600",children:E.rejectedCount})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-green-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-gray-600 block",children:"Success Rate:"}),e.jsxs("span",{className:"text-lg font-semibold text-green-600",children:[E.totalProposals>0?Math.round(E.acceptedCount/E.totalProposals*100):0,"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-gray-600 block",children:"Pending Rate:"}),e.jsxs("span",{className:"text-lg font-semibold text-yellow-600",children:[E.totalProposals>0?Math.round(E.pendingCount/E.totalProposals*100):0,"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-gray-600 block",children:"Rejection Rate:"}),e.jsxs("span",{className:"text-lg font-semibold text-red-600",children:[E.totalProposals>0?Math.round(E.rejectedCount/E.totalProposals*100):0,"%"]})]})]})})]}),e.jsx("p",{className:"text-center mt-8 text-sm text-gray-400",children:" 2025 Farm Master. All rights reserved."})]})};function M1(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(fo,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(A1,{})})]})}const Yc="http://localhost/FARMMASTER-Backend";function P1(){const[l,o]=j.useState(!1),[c,d]=j.useState(null),[f,x]=j.useState([]),[y,_]=j.useState(!0),[g,b]=j.useState(""),[N,E]=j.useState(""),[P,R]=j.useState(""),[B,S]=j.useState({isOpen:!1,message:"",type:"success"}),M=(D,V="success")=>{S({isOpen:!0,message:D,type:V})},F=()=>{S({isOpen:!1,message:"",type:"success"})},I=async()=>{_(!0),b("");try{const D=await be.get(`${Yc}/api/crops`,{withCredentials:!0});D.data.status==="success"?x(D.data.data||[]):b(D.data.message||"Failed to load crops.")}catch{b("Server error while fetching crops.")}finally{_(!1)}};j.useEffect(()=>{I()},[]);const T=async(D,V)=>{try{const O=await be.put(`${Yc}/api/crops/${D}/status`,{status:V},{headers:{"Content-Type":"application/json"},withCredentials:!0});O.data.status==="success"?(M("Crop status updated successfully","success"),I()):M(O.data.message||"Failed to update crop status.","error")}catch{M("Server error while updating crop status.","error")}},H=D=>{d(D),o(!0)},q=async D=>{var V,O,G;try{let K;c?K=await be.put(`${Yc}/api/crops/${c.crop_id}`,D,{headers:{"Content-Type":"application/json"},withCredentials:!0}):K=await be.post(`${Yc}/api/crops`,D,{headers:{"Content-Type":"application/json"},withCredentials:!0}),K.data.status==="success"?(M(c?"Crop updated successfully":"Crop added successfully","success"),d(null),o(!1),await I()):M(K.data.message||(c?"Failed to update crop":"Failed to add crop"),"error")}catch(K){console.error("Error:",K),console.error("Response:",(V=K.response)==null?void 0:V.data),M(((G=(O=K.response)==null?void 0:O.data)==null?void 0:G.message)||"Server error. Please try again.","error")}},A=f.filter(D=>{const V=P?D.crop_name===P:!0,O=N?D.crop_name.toLowerCase().includes(N.toLowerCase()):!0;return V&&O});return e.jsxs("div",{className:"flex-1 bg-white min-h-screen p-4 md:p-10 font-poppins",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-black mt-4 mb-2",children:"Crop Inventory Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage crops in inventory - add new crops or update existing ones"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-4",children:[e.jsx("div",{className:"flex gap-4 w-full md:w-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx(pm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search crops...",value:N,onChange:D=>E(D.target.value),className:"bg-green-50 text-sm rounded-md pl-10 pr-4 py-2 w-full md:w-64 focus:outline-none focus:ring-2 focus:ring-green-500"})]})}),e.jsx("button",{onClick:()=>{d(null),o(!0)},className:"bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors duration-200 shadow-md hover:shadow-lg",children:"+ Add New Crop"})]}),y?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Loading crops..."})]}):g?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-red-600",children:g})}):A.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:"No crops found."})}):e.jsx("div",{className:"overflow-x-auto bg-white border border-black rounded-xl shadow-lg",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gradient-to-r from-green-50 to-green-100 text-black font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-5 text-center border-b border-black",children:"Crop Name"}),e.jsx("th",{className:"px-6 py-5 text-center border-b border-black",children:"Quantity (kg)"}),e.jsx("th",{className:"px-6 py-5 text-center border-b border-black",children:"Stock Status"}),e.jsx("th",{className:"px-6 py-5 text-center border-b border-black",children:"Availability Status"}),e.jsx("th",{className:"px-6 py-5 text-center border-b border-black ",children:"Actions"})]})}),e.jsx("tbody",{children:A.map(D=>e.jsxs("tr",{className:"border-b border-black hover:bg-gradient-to-r hover:from-green-50 hover:to-emerald-50 hover:shadow-sm transition-all duration-300 group",children:[e.jsx("td",{className:"px-6 py-5 text-center font-medium text-gray-900",children:D.crop_name}),e.jsxs("td",{className:"px-6 py-5 text-center",children:[e.jsx("span",{className:"font-semibold text-lg text-gray-600",children:D.quantity}),e.jsx("span",{className:"text-black-600 ml-1",children:"kg"})]}),e.jsx("td",{className:"px-6 py-5 text-center",children:e.jsx("span",{className:`px-3 py-2 rounded-full text-sm font-medium inline-block transition-colors duration-200 ${D.quantity>50?"bg-green-100 text-green-800":D.quantity>10?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:D.quantity>50?"In Stock":D.quantity>10?"Low Stock":"Very Low"})}),e.jsx("td",{className:"px-6 py-5 text-center",children:e.jsxs("select",{value:D.quantity===0?"Sold":D.status||"Available",onChange:V=>{V.target.value!=="Sold"&&T(D.crop_id,V.target.value)},className:`px-3 py-2 rounded-full text-sm font-medium border-0 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${D.quantity===0||(D.status||"Available")==="Sold"?"bg-blue-100 text-blue-800":(D.status||"Available")==="Available"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,disabled:D.quantity===0,children:[e.jsx("option",{value:"Available",children:"Available"}),e.jsx("option",{value:"Unavailable",children:"Unavailable"}),e.jsx("option",{value:"Sold",disabled:D.quantity!==0,children:"Sold"})]})}),e.jsx("td",{className:"px-6 py-5 text-center",children:e.jsxs("button",{onClick:()=>H(D),className:"group relative bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-4 py-2 rounded-lg font-medium text-sm shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-50",title:"Update Crop Quantity",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(iw,{className:"w-4 h-4 group-hover:rotate-12 transition-transform duration-300"}),e.jsx("span",{className:"group-hover:tracking-wider transition-all duration-300",children:"Update Quantity"})]}),e.jsx("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-10 rounded-lg transition-opacity duration-300"}),e.jsx("div",{className:"absolute inset-0 rounded-lg overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 bg-white opacity-0 group-active:opacity-20 group-active:animate-ping"})})]})})]},D.crop_id))})]})}),!y&&!g&&A.length>0&&e.jsxs("div",{className:"mt-6 bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Inventory Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Crops:"}),e.jsx("span",{className:"ml-2 font-semibold",children:A.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Quantity:"}),e.jsxs("span",{className:"ml-2 font-semibold",children:[A.reduce((D,V)=>D+parseFloat(V.quantity),0).toFixed(3)," kg"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Available:"}),e.jsx("span",{className:"ml-2 font-semibold text-green-600",children:A.filter(D=>(D.status||"Available")==="Available").length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Unavailable:"}),e.jsx("span",{className:"ml-2 font-semibold text-red-600",children:A.filter(D=>(D.status||"Available")==="Unavailable").length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Sold:"}),e.jsx("span",{className:"ml-2 font-semibold text-blue-600",children:A.filter(D=>(D.status||"Available")==="Sold").length})]})]})]}),e.jsx("p",{className:"text-center mt-8 text-sm text-gray-400",children:" 2025 Farm Master. All rights reserved."}),l&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"32px",width:"100%",maxWidth:"500px",margin:"20px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#1f2937",marginBottom:"8px",textAlign:"center"},children:c?"Update Crop Quantity":"Add New Crop to Inventory"}),e.jsx("p",{style:{color:"#6b7280",textAlign:"center",fontSize:"14px"},children:c?"Update the quantity for this crop in your inventory":"Enter crop details to add to your inventory management system"})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:["Crop Name ",!c&&"*"]}),c?e.jsx("div",{style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #e5e7eb",borderRadius:"8px",boxSizing:"border-box",backgroundColor:"#f9fafb",color:"#6b7280",fontWeight:"500"},children:c.crop_name}):e.jsx("input",{id:"crop-name-input",type:"text",placeholder:"Enter crop name ",style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #d1d5db",borderRadius:"8px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s"},onFocus:D=>D.target.style.borderColor="#10b981",onBlur:D=>D.target.style.borderColor="#d1d5db"}),c&&e.jsx("p",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Crop name cannot be changed when updating quantity"})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Quantity (kg) *"}),e.jsx("input",{id:"crop-quantity-input",type:"number",min:"0",step:"0.001",placeholder:"Enter quantity in kilograms",defaultValue:c?c.quantity:"",style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #d1d5db",borderRadius:"8px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s"},onFocus:D=>D.target.style.borderColor="#10b981",onBlur:D=>D.target.style.borderColor="#d1d5db"}),e.jsx("p",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:c?`Current quantity: ${c.quantity} kg - Enter new quantity up to 3 decimal places`:"Enter quantity up to 3 decimal places"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{o(!1),d(null)},style:{padding:"12px 24px",fontSize:"14px",fontWeight:"500",color:"#374151",backgroundColor:"white",border:"2px solid #d1d5db",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseOver:D=>{D.target.style.backgroundColor="#f9fafb",D.target.style.borderColor="#9ca3af"},onMouseOut:D=>{D.target.style.backgroundColor="white",D.target.style.borderColor="#d1d5db"},children:"Cancel"}),e.jsx("button",{onClick:()=>{const D=document.getElementById("crop-quantity-input").value.trim();if(!D){M("Please enter a quantity","error"),document.getElementById("crop-quantity-input").focus();return}const V=parseFloat(D);if(isNaN(V)||V<0){M("Please enter a valid quantity (0 or greater)","error"),document.getElementById("crop-quantity-input").focus();return}if(c)q({crop_name:c.crop_name,quantity:V});else{const O=document.getElementById("crop-name-input").value.trim();if(!O){M("Please enter a crop name","error"),document.getElementById("crop-name-input").focus();return}q({crop_name:O,quantity:V})}},style:{padding:"12px 24px",fontSize:"14px",fontWeight:"500",color:"white",backgroundColor:"#10b981",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:D=>D.target.style.backgroundColor="#059669",onMouseOut:D=>D.target.style.backgroundColor="#10b981",children:c?"Update Quantity":"Add Crop to Inventory"})]})]})}),e.jsx(Xa,{isOpen:B.isOpen,message:B.message,type:B.type,onClose:F})]})}function O1(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(fo,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(P1,{})})]})}function z1({onBack:l,report:o,onSendToLandOwner:c}){var _,g,b,N,E,P,R,B;const[d,f]=j.useState(!1),x=async()=>{if(!o||!o.report_id){alert("No report selected");return}f(!0);try{c&&await c(o.report_id)}catch(S){console.error("Error sending report to land owner:",S)}finally{f(!1)}},y=o;return y?e.jsx("div",{className:"flex bg-white min-h-screen",children:e.jsx("div",{className:"flex-1 p-4 md:p-10 font-poppins",children:e.jsxs("div",{className:"max-w-4xl mx-auto bg-white border border-gray-200 rounded-xl p-6 md:p-10 shadow-sm",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:"Land Report Review & Forward"}),e.jsx("div",{className:"flex flex-col text-sm mt-6 mb-8 divide-y divide-green-200 border border-green-300 rounded-md",children:[["Land Report ID",y.id],["Landowner Name",y.name],["Location",y.location],["Requested Date",y.date],["Field Supervisor Name",y.supervisor],["Field Supervisor ID",y.supervisorId],["Current Status",y.status||"Pending Review"]].map(([S,M],F)=>e.jsxs("div",{className:"flex justify-between px-4 py-3",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:S}),e.jsx("span",{className:"text-gray-900",children:M})]},F))}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800 mb-3",children:"Land Assessment Summary"}),e.jsx("table",{className:"w-full text-sm",children:e.jsx("tbody",{children:[["Soil pH Value",((_=y.report_details)==null?void 0:_.ph_value)||"N/A"],["Organic Matter (%)",(g=y.report_details)!=null&&g.organic_matter?`${y.report_details.organic_matter}%`:"N/A"],["Nitrogen (N) Level",((b=y.report_details)==null?void 0:b.nitrogen_level)||"N/A"],["Phosphorus (P) Level",((N=y.report_details)==null?void 0:N.phosphorus_level)||"N/A"],["Potassium (K) Level",((E=y.report_details)==null?void 0:E.potassium_level)||"N/A"]].map(([S,M],F)=>e.jsxs("tr",{className:"border-b border-gray-300",children:[e.jsx("td",{className:"py-2 text-green-600",children:S}),e.jsx("td",{className:"py-2 text-right text-gray-800",children:M})]},F))})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800 mb-2",children:"Crop Recommendations"}),e.jsx("div",{className:"text-sm text-gray-700 mb-4",children:(P=y.report_details)!=null&&P.crop_recommendation?e.jsx("p",{children:y.report_details.crop_recommendation}):e.jsx("div",{className:"text-gray-500 italic",children:"No crop recommendations available"})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800 mb-2",children:"Land Description & Notes"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md text-sm text-gray-700",children:[e.jsxs("p",{className:"mb-3",children:[e.jsx("strong",{children:"Land Description:"}),e.jsx("br",{}),((R=y.report_details)==null?void 0:R.land_description)||"No description available"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Environmental Notes:"}),e.jsx("br",{}),e.jsx("pre",{className:"whitespace-pre-wrap text-xs mt-2 max-h-40 overflow-y-auto",children:((B=y.report_details)==null?void 0:B.environmental_notes)||"No environmental notes available"})]})]})]}),e.jsxs("div",{className:"mb-10 bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h2",{className:"text-base font-semibold text-green-800 mb-2",children:"Report Summary"}),e.jsx("p",{className:"text-sm text-green-700",children:'This land report has been completed by the field supervisor and is ready to be sent to the land owner. Review the details above and click "Send to Land Owner" to forward this report.'})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:l,className:"flex items-center text-sm text-green-600 hover:text-green-700 font-medium transition",children:[e.jsx(wn,{size:16,className:"mr-2"}),"Back"]}),e.jsx("button",{onClick:x,disabled:d,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-6 py-2 rounded-md text-sm font-semibold transition flex items-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Send to Land Owner"]})})]})]})})}):e.jsx("div",{className:"flex bg-white min-h-screen",children:e.jsx("div",{className:"flex-1 p-4 md:p-10 font-poppins",children:e.jsxs("div",{className:"max-w-4xl mx-auto bg-white border border-gray-200 rounded-xl p-6 md:p-10 shadow-sm",children:[e.jsxs("button",{onClick:l,className:"flex items-center text-sm text-green-600 hover:text-green-700 font-medium transition mb-6",children:[e.jsx(wn,{size:16,className:"mr-2"}),"Back"]}),e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"Warning"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Report Data Available"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load report information. Please go back and try selecting a report again."})]})]})})})}const Uh="http://localhost/FARMMASTER-Backend";function D1({onBack:l,report:o,onAssignmentComplete:c}){const[d,f]=j.useState([]),[x,y]=j.useState(null),[_,g]=j.useState(!0),[b,N]=j.useState(!1),[E,P]=j.useState(null),[R,B]=j.useState({isOpen:!1,message:"",type:"success"}),S=(H,q="success")=>{B({isOpen:!0,message:H,type:q})},M=()=>{B({isOpen:!1,message:"",type:"success"})},F=()=>({Authorization:`Bearer ${localStorage.getItem("token")||sessionStorage.getItem("token")}`,"Content-Type":"application/json"}),I=async()=>{try{g(!0);const H=await be.get(`${Uh}/api/land-reports/supervisors`,{headers:F()});if(H.data.status==="success"){const q=H.data.data.filter(A=>A.assignment_status==="Available"&&(!A.current_assignment||A.current_assignment===null)&&(!A.task_status||A.task_status==="Completed"||A.task_status===null));console.log("All supervisors:",H.data.data),console.log("Available supervisors after filtering:",q),f(q)}else P("Failed to load available Supervisors")}catch(H){console.error("Error fetching supervisors:",H),P("Failed to load Supervisors")}finally{g(!1)}},T=async()=>{var H,q,A;if(!x){S("Please select a Supervisor","error");return}if(x.assignment_status!=="Available"){S("Selected supervisor is no longer available. Please refresh and try again.","error");return}try{N(!0);let D;if(o.report_id&&o.report_id!==null)D=`${Uh}/api/land-reports/${o.report_id}/assign`;else if(o.land_id)D=`${Uh}/api/land-reports/${o.land_id}/assign-land-request`;else throw new Error("Invalid report data: missing both report_id and land_id");console.log("Assignment URL:",D),console.log("Report data:",o),console.log("Selected supervisor:",x),(await be.put(D,{supervisor_id:x.user_id,supervisor_name:x.full_name},{headers:F()})).data.status==="success"?(S("Supervisor assigned successfully!","success"),c&&c(),setTimeout(()=>{l()},2e3)):S("Failed to assign Supervisor","error")}catch(D){console.error("Error assigning supervisor:",D),console.error("Error response:",(H=D.response)==null?void 0:H.data),S("Failed to assign Supervisor: "+(((A=(q=D.response)==null?void 0:q.data)==null?void 0:A.message)||D.message),"error")}finally{N(!1)}};return j.useEffect(()=>{I()},[]),_?e.jsx("div",{className:"flex-1 bg-white min-h-screen p-4 md:p-10 font-poppins",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-lg text-gray-600",children:"Loading available Supervisors..."})})}):e.jsxs("div",{className:"flex-1 bg-white min-h-screen p-4 md:p-10 font-poppins",children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{onClick:l,className:"flex items-center text-green-600 hover:text-green-700 mb-4 font-medium transition",children:[e.jsx(wn,{size:20,className:"mr-2"}),"Back to Land Report Management"]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-black mb-2",children:"Assign Supervisor"}),e.jsx("p",{className:"text-green-600 text-sm sm:text-base",children:"Select an available Supervisor to assign to this land report assessment."})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Report Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Report ID:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:(o==null?void 0:o.id)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Location:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:(o==null?void 0:o.location)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Landowner:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:(o==null?void 0:o.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Requested Date:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:(o==null?void 0:o.date)||"N/A"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:["Available Supervisors (",d.length,")"]}),E&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsx("p",{className:"text-red-600",children:E})}),d.length===0?e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:[e.jsx(Ci,{className:"mx-auto mb-3 text-yellow-500",size:48}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Available Supervisors"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"All Field Supervisors are currently assigned to ongoing tasks and are not available for new assignments."}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Supervisors will become available once they complete their current land assessment tasks."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(H=>e.jsxs("div",{onClick:()=>y(H),className:`border rounded-lg p-4 cursor-pointer transition-all ${(x==null?void 0:x.user_id)===H.user_id?"border-green-500 bg-green-50 shadow-md":"border-gray-200 hover:border-green-300 hover:shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 rounded-full p-2 mr-3",children:e.jsx(cd,{className:"text-green-600",size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:H.full_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",H.user_id]})]})]}),(x==null?void 0:x.user_id)===H.user_id&&e.jsx(nn,{className:"text-green-500",size:20})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:H.email})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Phone:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:H.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:"ml-2 inline-block px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:"Available"})]}),H.current_assignment&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Current Task:"}),e.jsx("span",{className:"ml-2 text-gray-900 text-xs",children:"None"})]})]})]},H.user_id))})]}),e.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200",children:[e.jsxs("button",{onClick:l,className:"flex items-center text-gray-600 hover:text-gray-700 font-medium transition",children:[e.jsx(wn,{size:16,className:"mr-2"}),"Cancel"]}),e.jsx("button",{onClick:T,disabled:!x||b||d.length===0,className:`px-6 py-2 rounded-md font-semibold transition ${!x||b||d.length===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"}`,children:b?"Assigning...":"Assign Supervisor"})]})]}),e.jsx(Xa,{isOpen:R.isOpen,message:R.message,type:R.type,onClose:M})]})}const Er="http://localhost/FARMMASTER-Backend",ng={Assigned:"bg-green-100 text-green-800","In Progress":"bg-yellow-100 text-yellow-800",Unassigned:"bg-gray-100 text-gray-800","Not Assigned":"bg-gray-100 text-gray-800",Approved:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-700","Not Reviewed":"bg-gray-100 text-gray-800"};function B1(){const[l,o]=j.useState(!1),[c,d]=j.useState(!1),[f,x]=j.useState(null),[y,_]=j.useState(null),[g,b]=j.useState([]),[N,E]=j.useState([]),[P,R]=j.useState([]),[B,S]=j.useState(!0),[M,F]=j.useState(null),[I,T]=j.useState({isOpen:!1,message:"",type:"success"}),H=(K,Q="success")=>{T({isOpen:!0,message:K,type:Q})},q=()=>{T({isOpen:!1,message:"",type:"success"})},A=async()=>{var K,Q,ue;try{console.log("Fetching assignment reports from:",`${Er}/api/land-reports/assignment-reports-public`);const le=await be.get(`${Er}/api/land-reports/assignment-reports-public`,{withCredentials:!0});console.log("Assignment reports response:",le.data),le.data.status==="success"&&b(le.data.data||[])}catch(le){console.error("Error fetching assignment reports:",le),console.error("Error response:",(K=le.response)==null?void 0:K.data),F("Failed to load assignment reports: "+(((ue=(Q=le.response)==null?void 0:Q.data)==null?void 0:ue.message)||le.message))}},D=async()=>{var K,Q,ue,le;try{console.log("Fetching review reports from:",`${Er}/api/land-reports/review-reports-public`);const de=await be.get(`${Er}/api/land-reports/review-reports-public`,{withCredentials:!0});console.log("Review reports response:",de.data),de.data.status==="success"&&(E(de.data.data||[]),console.log("Review data set to:",de.data.data),console.log("reviewData length:",((K=de.data.data)==null?void 0:K.length)||0))}catch(de){console.error("Error fetching review reports:",de),console.error("Error response:",(Q=de.response)==null?void 0:Q.data),F("Failed to load review reports: "+(((le=(ue=de.response)==null?void 0:ue.data)==null?void 0:le.message)||de.message))}},V=async()=>{var K,Q,ue;try{console.log("Fetching supervisors from:",`${Er}/api/land-reports/supervisors`);const le=await be.get(`${Er}/api/land-reports/supervisors`,{withCredentials:!0});console.log("Supervisors response:",le.data),le.data.status==="success"&&R(le.data.data||[])}catch(le){console.error("Error fetching supervisors:",le),console.error("Error response:",(K=le.response)==null?void 0:K.data),F("Failed to load supervisors: "+(((ue=(Q=le.response)==null?void 0:Q.data)==null?void 0:ue.message)||le.message))}};j.useEffect(()=>{(async()=>{S(!0),await Promise.all([A(),D(),V()]),S(!1)})()},[]);const O=K=>{if(K.status==="Assigned"||K.status==="In Progress"||K.supervisor&&K.supervisor!=="N/A"&&K.supervisor!=="Not Assigned"){H("This report already has a supervisor assigned and cannot be reassigned.","error");return}x(K),d(!0)},G=K=>{_(K),o(!0)};return c?e.jsx(D1,{onBack:()=>d(!1),report:f,onAssignmentComplete:async()=>{await A()}}):l?e.jsx(z1,{onBack:()=>o(!1),report:y,onSendToLandOwner:async K=>{var Q,ue;try{(await be.put(`${Er}/api/land-reports/${K}/send-to-owner`,{},{headers:{"Content-Type":"application/json"},withCredentials:!0})).data.status==="success"&&(H("Report sent to land owner successfully!","success"),await D(),o(!1))}catch(le){console.error("Error sending report to land owner:",le),H("Failed to send report to land owner: "+(((ue=(Q=le.response)==null?void 0:Q.data)==null?void 0:ue.message)||le.message),"error")}}}):B?e.jsx("div",{className:"flex-1 bg-white min-h-screen p-4 md:p-10 font-poppins",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-lg text-gray-600",children:"Loading land reports..."})})}):M?e.jsx("div",{className:"flex-1 bg-white min-h-screen p-4 md:p-10 font-poppins",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"text-lg text-red-600",children:M}),e.jsx("button",{onClick:()=>window.location.reload(),className:"ml-4 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Retry"})]})}):(console.log("Current reviewData state:",N),console.log("Current assignmentData state:",g),console.log("Loading state:",B),console.log("Error state:",M),e.jsxs("div",{className:"flex-1 bg-white min-h-screen p-4 md:p-10 font-poppins",children:[e.jsxs("div",{className:"mb-10",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-4 mt-4",children:"Land Report Assignments"}),e.jsx("p",{className:"text-green-600 mb-6 text-sm sm:text-base",children:"Manage and assign Supervisors to land report requests."}),e.jsx("div",{className:"overflow-x-auto shadow-sm border border-gray-200 rounded-lg",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-green-50 text-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 text-left",children:"Report ID"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Location"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Landowner Name"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Requested Date"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Supervisor Name"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Status"}),e.jsx("th",{className:"py-3 px-4 text-left text-green-700",children:"Actions"})]})}),e.jsx("tbody",{children:g.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"py-8 px-4 text-center text-gray-500",children:B?"Loading assignment data...":"No land reports available for assignment"})}):g.map((K,Q)=>e.jsxs("tr",{className:"border-t border-gray-200 hover:bg-green-50",children:[e.jsx("td",{className:"py-3 px-4",children:K.id}),e.jsx("td",{className:"py-3 px-4",children:K.location}),e.jsx("td",{className:"py-3 px-4 text-green-700",children:K.name}),e.jsx("td",{className:"py-3 px-4",children:K.date}),e.jsx("td",{className:"py-3 px-4",children:K.supervisor}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full inline-block ${ng[K.status]}`,children:K.status})}),e.jsx("td",{className:"py-3 px-4",children:K.status==="Assigned"||K.status==="In Progress"||K.supervisor&&K.supervisor!=="N/A"&&K.supervisor!=="Not Assigned"?e.jsx("span",{className:"text-gray-400 font-medium cursor-not-allowed",children:"Already Assigned"}):e.jsx("span",{className:"text-black font-semibold cursor-pointer hover:underline hover:text-green-600",onClick:()=>O(K),children:"Assign"})})]},Q))})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 mt-4",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black",children:"Land Report Review & Approval"}),e.jsxs("button",{onClick:async()=>{S(!0),await D(),S(!1)},className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Reports"]})]}),e.jsx("p",{className:"text-green-600 mb-6 text-sm sm:text-base",children:"Review the submitted land report data and provide feedback."}),e.jsx("div",{className:"overflow-x-auto shadow-sm border border-gray-200 rounded-lg",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-green-50 text-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 text-left",children:"Report ID"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Location"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Landowner Name"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Supervisor ID"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Supervisor Name"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Status"}),e.jsx("th",{className:"py-3 px-4 text-left text-green-700",children:"Actions"})]})}),e.jsx("tbody",{children:N.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"py-8 px-4 text-center text-gray-500",children:B?"Loading review data...":"No reports available for review"})}):N.map((K,Q)=>e.jsxs("tr",{className:"border-t border-gray-200 hover:bg-green-50",children:[e.jsx("td",{className:"py-3 px-4",children:K.id}),e.jsx("td",{className:"py-3 px-4",children:K.location}),e.jsx("td",{className:"py-3 px-4 text-green-700",children:K.name}),e.jsx("td",{className:"py-3 px-4",children:K.supervisorId}),e.jsx("td",{className:"py-3 px-4",children:K.supervisor}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full inline-block ${ng[K.status]}`,children:K.status})}),e.jsx("td",{className:"py-3 px-4 text-black font-semibold cursor-pointer hover:underline hover:text-green-600",onClick:()=>G(K),children:"View Report"})]},Q))})]})})]}),e.jsx(Xa,{isOpen:I.isOpen,message:I.message,type:I.type,onClose:q})]}))}function U1(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(fo,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(B1,{})})]})}const F1=()=>{var P;const{id:l}=Eb(),o=Lt(),[c,d]=j.useState(null),[f,x]=j.useState(!0),[y,_]=j.useState(null);j.useEffect(()=>{g()},[l]);const g=async()=>{try{x(!0);const R=await fetch(`http://localhost/FARMMASTER-Backend/api.php/proposals/${l}/public`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!R.ok)throw new Error(`HTTP error! status: ${R.status}`);const B=await R.json();B.status==="success"?d(B.data):_(B.message||"Failed to fetch proposal details")}catch(R){_("Failed to connect to backend: "+R.message),console.error("Error fetching proposal details:",R)}finally{x(!1)}},b=R=>`Rs. ${(R==null?void 0:R.toLocaleString())||"0"}`,N=R=>R?new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",E=R=>{switch(R){case"Pending":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"Accepted":return"bg-green-100 text-green-800 border-green-300";case"Rejected":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};return f?e.jsx("div",{className:"flex-1 bg-white min-h-screen p-4 md:p-10 font-poppins",children:e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:"Loading proposal details..."})})}):y?e.jsx("div",{className:"flex-1 bg-white min-h-screen p-4 md:p-10 font-poppins",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-red-700",children:y}),e.jsxs("div",{className:"mt-4 space-x-2",children:[e.jsx("button",{onClick:g,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Retry"}),e.jsx("button",{onClick:()=>o(-1),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Go Back"})]})]})}):c?e.jsxs("div",{className:"flex-1 bg-white min-h-screen p-4 md:p-10 font-poppins",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:()=>o(-1),className:"text-green-600 hover:text-green-700 flex items-center",children:" Back to Proposals"}),e.jsx("div",{className:`px-4 py-2 rounded-full border text-sm font-semibold ${E(c.status)}`,children:c.status})]}),e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-black mb-2",children:["Proposal #",c.proposal_id]}),e.jsx("p",{className:"text-green-600",children:"Detailed information about this farming proposal"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-black mb-4",children:"Landowner Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Name"}),e.jsx("p",{className:"text-lg text-black",children:c.user_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),e.jsx("p",{className:"text-lg text-black",children:c.user_email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"User ID"}),e.jsxs("p",{className:"text-lg text-black",children:["#",c.user_id]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-black mb-4",children:"Land Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Land ID"}),e.jsxs("p",{className:"text-lg text-black",children:["#",c.land_id]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Location"}),e.jsx("p",{className:"text-lg text-black",children:c.location})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Land Size"}),e.jsxs("p",{className:"text-lg text-black",children:[c.land_size," acres"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-black mb-4",children:"Crop & Production"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Crop Type"}),e.jsx("p",{className:"text-lg text-black",children:c.crop_type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Estimated Yield"}),e.jsxs("p",{className:"text-lg text-black",children:[(P=c.estimated_yield)==null?void 0:P.toLocaleString()," kg"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Lease Duration"}),e.jsxs("p",{className:"text-lg text-black",children:[c.lease_duration_years," years"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-black mb-4",children:"Financial Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Rental Value"}),e.jsx("p",{className:"text-lg text-green-700 font-semibold",children:b(c.rental_value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"FarmMaster Profit Share"}),e.jsxs("p",{className:"text-lg text-black",children:[c.profit_sharing_farmmaster,"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Landowner Profit Share"}),e.jsxs("p",{className:"text-lg text-black",children:[c.profit_sharing_landowner,"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Estimated Landowner Profit"}),e.jsx("p",{className:"text-lg text-green-700 font-semibold",children:b(c.estimated_profit_landowner)})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mt-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-black mb-4",children:"Timeline"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Proposal Date"}),e.jsx("p",{className:"text-lg text-black",children:N(c.proposal_date)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Created At"}),e.jsx("p",{className:"text-lg text-black",children:N(c.created_at)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Last Updated"}),e.jsx("p",{className:"text-lg text-black",children:N(c.updated_at)})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>o(-1),className:"bg-gray-600 text-white px-6 py-2 rounded hover:bg-gray-700",children:"Back to List"}),e.jsx("button",{onClick:()=>window.print(),className:"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700",children:"Print Details"})]})]}):e.jsx("div",{className:"flex-1 bg-white min-h-screen p-4 md:p-10 font-poppins",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600",children:"Proposal not found"}),e.jsx("button",{onClick:()=>o(-1),className:"mt-4 bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Go Back"})]})})},ag="http://localhost/FARMMASTER-Backend";function q1(){const{user:l}=mt(),[o,c]=j.useState([]),[d,f]=j.useState(!0),[x,y]=j.useState(""),[_,g]=j.useState(null),[b,N]=j.useState({totalAssigned:0,inProgress:0,completed:0}),[E,P]=j.useState([]),[R,B]=j.useState([]),S=async(T=!1)=>{var H,q,A,D;T||(f(!0),y(""));try{const V=(l==null?void 0:l.user_id)||(l==null?void 0:l.id);if(!V){y("User information not available. Please log in again.");return}const O=await be.get(`${ag}/api/land-reports/assigned`,{withCredentials:!0,params:{supervisor_id:V,t:Date.now()}});if(O.data&&O.data.status==="success"){const G=O.data.data||[];c(G),g(new Date);const K=G.length,Q=G.filter(J=>J.completion_status==="Completed"||J.completion_status==="completed").length,ue=G.filter(J=>J.completion_status==="In Progress"||J.completion_status==="in_progress"||!J.completion_status&&(J.ph_value||J.environmental_notes)).length;N({totalAssigned:K,inProgress:ue,completed:Q});const de=M(G),z=F(G);P(de),B(z),y("")}else y(((H=O.data)==null?void 0:H.message)||"Failed to load dashboard data - invalid response format.")}catch(V){T||(((q=V.response)==null?void 0:q.status)===401?y("Authentication required. Please log in again."):((A=V.response)==null?void 0:A.status)===403?y("Access denied. Only field supervisors can view this dashboard."):((D=V.response)==null?void 0:D.status)===404?y("API endpoint not found. Please contact system administrator."):V.code==="ECONNABORTED"?y("Request timed out. Please check your internet connection and try again."):V.code==="NETWORK_ERROR"||V.message.includes("Network Error")?y("Network error. Please check your internet connection."):y(`Server error while loading dashboard data: ${V.message}`))}finally{f(!1)}},M=T=>{const H=[],q=new Date,A=new Date(q.getTime()-7*24*60*60*1e3),D=new Date(q.getTime()-3*24*60*60*1e3),V=T.filter(Q=>new Date(Q.assigned_date||Q.report_date)<A&&Q.completion_status!=="Completed"),O=T.filter(Q=>new Date(Q.assigned_date||Q.report_date)>D&&Q.completion_status!=="Completed"),G=T.filter(Q=>Q.completion_status==="In Progress"||!Q.completion_status&&(Q.ph_value||Q.environmental_notes));if(V.length>0){const Q=V.sort((le,de)=>new Date(le.assigned_date||le.report_date)-new Date(de.assigned_date||de.report_date))[0],ue=Math.floor((q-new Date(Q.assigned_date||Q.report_date))/(1e3*60*60*24));H.push({id:`overdue-${Q.report_id}`,type:"urgent",icon:wi,title:`Urgent: ${V.length} overdue report${V.length>1?"s":""}`,subtitle:`Oldest: ${Q.formatted_report_id||`RPT-${Q.report_id}`} - ${ue} days overdue`,priority:"high",count:V.length})}O.length>0&&H.push({id:"recent-assignments",type:"assignment",icon:os,title:`${O.length} new assignment${O.length>1?"s":""} this week`,subtitle:`Latest: ${O[0].location} - ${new Date(O[0].assigned_date||O[0].report_date).toLocaleDateString()}`,priority:"medium",count:O.length}),G.length>0&&H.push({id:"in-progress",type:"progress",icon:Ci,title:`${G.length} report${G.length>1?"s":""} in progress`,subtitle:"Continue working on pending reports",priority:"low",count:G.length});const K=T.filter(Q=>Q.completion_status!=="Completed"?!1:new Date(Q.report_date)>D);return K.length>0&&H.push({id:"recent-completions",type:"completion",icon:nn,title:`${K.length} report${K.length>1?"s":""} completed recently`,subtitle:"Great work! Keep up the momentum",priority:"success",count:K.length}),H.slice(0,4)},F=T=>{const H=[],q=new Date,A=new Date(q.getTime()-7*24*60*60*1e3);return[...T].sort((V,O)=>new Date(O.assigned_date||O.report_date)-new Date(V.assigned_date||V.report_date)).slice(0,5).forEach(V=>{const O=new Date(V.assigned_date||V.report_date),G=O>A;let K="assigned",Q=os,ue=`Assigned to analyze land at ${V.location}`;V.completion_status==="Completed"?(K="completed",Q=nn,ue=`Completed land analysis for ${V.location}`):(V.ph_value||V.environmental_notes)&&(K="progress",Q=Wl,ue=`Started analysis for ${V.location}`),H.push({id:V.report_id,type:K,icon:Q,title:V.formatted_report_id||`RPT-${V.report_id}`,description:ue,landowner:V.landowner_name||`${V.first_name} ${V.last_name}`,date:O,isRecent:G,status:V.completion_status||"Pending"})}),H};j.useEffect(()=>{l&&(l.user_id||l.id)?S():(f(!1),l||y("Please log in to view the dashboard."));const T=setInterval(()=>{l&&(l.user_id||l.id)&&S(!0)},6e4),H=A=>{A.key==="dashboard_update_trigger"&&(S(!0),localStorage.removeItem("dashboard_update_trigger"))},q=()=>{S(!0)};return window.addEventListener("storage",H),window.addEventListener("dashboard_update",q),()=>{clearInterval(T),window.removeEventListener("storage",H),window.removeEventListener("dashboard_update",q)}},[l==null?void 0:l.user_id,l==null?void 0:l.id]);const I=()=>{S()};return e.jsxs("div",{className:"p-4 md:p-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-8 mt-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Field Supervisor Dashboard"}),e.jsxs("p",{className:"text-sm md:text-lg text-green-600 mt-2",children:["Welcome back, ",(l==null?void 0:l.name)||(l==null?void 0:l.first_name)||"Field Supervisor"]}),_&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Last updated: ",_.toLocaleTimeString()]})]}),e.jsxs("div",{className:"flex flex-col items-end mt-4 md:mt-0",children:[e.jsxs("button",{onClick:I,className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors duration-200 disabled:opacity-50",disabled:d,children:[e.jsx(W_,{className:d?"animate-spin":"",size:16}),d?"Updating...":"Refresh"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Auto-refreshes every 60 seconds"})]})]}),x&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(wi,{className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Error Loading Dashboard"}),e.jsx("div",{className:"text-sm mt-1",children:x})]})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx("button",{onClick:I,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors text-sm",children:"Try Again"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors text-sm",children:"Reload Page"})]})]}),!d&&!x&&b.totalAssigned===0&&e.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qh,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:"No reports have been assigned to you yet. New assignments will appear here."})]})}),e.jsxs("div",{className:"mb-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Assignment Overview"}),d?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[1,2,3].map(T=>e.jsxs("div",{className:"border rounded-lg p-6 shadow-sm text-center animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded"})]},T))}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border border-green-200 rounded-lg p-6 shadow-sm text-center hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(os,{className:"w-6 h-6 text-green-600 mr-2"}),e.jsx("p",{className:"text-sm text-green-700 font-medium",children:"Total Assigned"})]}),e.jsx("p",{className:"text-3xl font-bold text-green-800",children:b.totalAssigned}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"All time"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-100 to-green-200 border border-green-300 rounded-lg p-6 shadow-sm text-center hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(Wl,{className:"w-6 h-6 text-green-700 mr-2"}),e.jsx("p",{className:"text-sm text-green-800 font-medium",children:"In Progress"})]}),e.jsx("p",{className:"text-3xl font-bold text-green-900",children:b.inProgress}),e.jsx("p",{className:"text-xs text-green-700 mt-1",children:"Active work"})]}),e.jsxs("div",{className:`border rounded-lg p-6 shadow-sm text-center hover:shadow-md transition-shadow ${b.totalAssigned===0?"bg-gray-50 border-gray-200":"bg-gradient-to-br from-emerald-50 to-emerald-100 border-emerald-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(nn,{className:`w-6 h-6 mr-2 ${b.totalAssigned===0?"text-gray-500":"text-emerald-600"}`}),e.jsx("p",{className:`text-sm font-medium ${b.totalAssigned===0?"text-gray-600":"text-emerald-700"}`,children:"Completed"})]}),e.jsx("p",{className:`text-3xl font-bold ${b.totalAssigned===0?"text-gray-500":"text-emerald-800"}`,children:b.completed}),b.totalAssigned>0&&e.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[Math.round(b.completed/b.totalAssigned*100),"% completion rate"]})]})]})]}),e.jsxs("div",{className:"mb-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Notifications & Alerts"}),d?e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("div",{className:"space-y-4",children:[1,2,3].map(T=>e.jsxs("div",{className:"flex items-start gap-4 animate-pulse",children:[e.jsx("div",{className:"bg-gray-200 rounded-lg p-3 w-12 h-12"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},T))})}):E.length>0?e.jsx("div",{className:"space-y-4",children:E.map(T=>{const H=T.icon,q=()=>{switch(T.priority){case"high":return"bg-red-50 border-red-200 hover:bg-red-100";case"medium":return"bg-orange-50 border-orange-200 hover:bg-orange-100";case"success":return"bg-green-50 border-green-200 hover:bg-green-100";default:return"bg-green-50 border-green-200 hover:bg-green-100"}},A=()=>{switch(T.priority){case"high":return"bg-red-100 text-red-600 border-red-200";case"medium":return"bg-orange-100 text-orange-600 border-orange-200";case"success":return"bg-green-100 text-green-600 border-green-200";default:return"bg-green-100 text-green-600 border-green-200"}};return e.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border transition-all cursor-pointer ${q()}`,children:[e.jsx("div",{className:`rounded-lg p-3 border ${A()}`,children:e.jsx(H,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:T.title}),T.count>1&&e.jsx("span",{className:"bg-green-200 text-green-800 px-2 py-1 rounded-full text-xs font-medium",children:T.count}),T.priority==="high"&&e.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"URGENT"})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:T.subtitle})]})]},T.id)})}):e.jsxs("div",{className:"bg-green-50 p-8 rounded-lg text-center border border-green-100",children:[e.jsx(Qh,{className:"mx-auto mb-4 text-green-400",size:48}),e.jsx("p",{className:"text-green-700 text-lg font-medium",children:"No notifications"}),e.jsx("p",{className:"text-green-600 text-sm mt-2",children:b.totalAssigned===0?"You'll see notifications here when reports are assigned to you":"All caught up! Great work on staying current with your assignments"})]})]}),e.jsxs("div",{className:"mb-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Recent Activity"}),d?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(T=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-lg border animate-pulse",children:[e.jsx("div",{className:"bg-gray-200 rounded-lg p-3 w-12 h-12"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-2/3"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]},T))}):R.length>0?e.jsx("div",{className:"space-y-3",children:R.map(T=>{const H=T.icon;return e.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border transition-all hover:shadow-md ${T.isRecent?"bg-green-50 border-green-200":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`rounded-lg p-3 border ${T.type==="completed"?"bg-emerald-100 text-emerald-600 border-emerald-200":T.type==="progress"?"bg-green-100 text-green-600 border-green-200":"bg-gray-100 text-gray-600 border-gray-200"}`,children:e.jsx(H,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:T.title}),T.isRecent&&e.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"New"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:T.description}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Landowner: ",T.landowner,"  ",T.date.toLocaleDateString()]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T.status==="Completed"?"bg-emerald-100 text-emerald-700":T.status==="In Progress"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:T.status||"Pending"})})]},T.id)})}):e.jsxs("div",{className:"bg-green-50 p-8 rounded-lg text-center border border-green-100",children:[e.jsx(Wl,{className:"mx-auto mb-4 text-green-400",size:48}),e.jsx("p",{className:"text-green-700 text-lg font-medium",children:"No recent activity"}),e.jsx("p",{className:"text-green-600 text-sm mt-2",children:"Your recent assignments and progress will appear here"})]})]})]})}function jm(){const[l,o]=j.useState(!1),[c,d]=j.useState(null),[f,x]=j.useState(!1),y=Lt(),{logout:_}=mt();j.useEffect(()=>{const R=JSON.parse(localStorage.getItem("user"));R&&d(R)},[]);const g=async()=>{try{console.log("Field Supervisor logout initiated..."),await _(),console.log("Logout successful, navigating to home..."),y("/",{replace:!0})}catch(R){console.error("Logout failed:",R),y("/",{replace:!0})}finally{x(!1)}},b=()=>{x(!0)},N="flex items-center gap-3 px-4 py-2 rounded-md transition text-sm font-medium",E="bg-green-100 text-green-700 font-semibold",P="text-black hover:bg-green-50";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden flex items-start bg-white shadow px-4 py-6",children:e.jsx("button",{onClick:()=>o(!0),children:e.jsx(Di,{size:24})})}),e.jsxs("aside",{className:`fixed top-0 left-0 h-full w-64 bg-white shadow-sm font-poppins flex flex-col px-4 py-6 z-50 transform transition-transform ${l?"translate-x-0":"-translate-x-full"} md:translate-x-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(Ee,{to:"/",onClick:()=>o(!1),children:e.jsx("img",{src:Ts,alt:"FarmMaster Logo",className:"h-20 w-auto"})}),e.jsx("button",{className:"md:hidden text-gray-600 cursor-pointer",onClick:()=>o(!1),children:e.jsx(on,{size:24})})]}),e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx("img",{src:mo,alt:"Field Supervisor",className:"w-14 h-14 rounded-full object-cover mr-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold",children:(c==null?void 0:c.name)||"Field Supervisor"}),e.jsx("p",{className:"text-sm text-green-600",children:(c==null?void 0:c.account_type)||"Field Supervisor"})]})]}),e.jsxs("nav",{className:"flex flex-col gap-2",children:[e.jsxs(Ee,{to:"/fieldsupervisordashboard",className:({isActive:R})=>`${N} ${R?E:P}`,onClick:()=>o(!1),children:[e.jsx(zi,{size:16}),"Dashboard"]}),e.jsxs(Ee,{to:"/fieldsupervisorassignedtasks",className:({isActive:R})=>`${N} ${R?E:P}`,onClick:()=>o(!1),children:[e.jsx(Oi,{size:16}),"Assigned Tasks"]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsxs(Ee,{to:"/",className:({isActive:R})=>`${N} ${R?E:P}`,onClick:()=>o(!1),children:[e.jsx(oo,{size:16}),"Go to Home"]}),e.jsxs("button",{className:`${N} text-red-600 hover:bg-red-50 mt-2 cursor-pointer`,onClick:b,children:[e.jsx(co,{size:16}),"Log out"]})]})]}),e.jsx(Qa,{isOpen:f,onClose:()=>x(!1),onConfirm:g,title:"Confirm Logout",message:"Are you sure you want to logout from your Field Supervisor account? You will be redirected to the home page.",confirmText:"Yes, Logout",cancelText:"Cancel",type:"warning"})]})}function H1(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(jm,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(q1,{})})]})}const Yl="http://localhost/FARMMASTER-Backend",rg={"In Progress":"bg-slate-100 text-slate-700 border border-slate-200",Completed:"bg-emerald-100 text-emerald-700 border border-emerald-200",Approved:"bg-green-100 text-green-700 border border-green-200",Rejected:"bg-rose-100 text-rose-700 border border-rose-200",Pending:"bg-amber-100 text-amber-700 border border-amber-200"};function I1(){const{user:l}=mt(),[o,c]=j.useState([]),[d,f]=j.useState(!0),[x,y]=j.useState(""),[_,g]=j.useState(""),[b,N]=j.useState(""),[E,P]=j.useState(!1),[R,B]=j.useState(!1),[S,M]=j.useState(null),[F,I]=j.useState(null),[T,H]=j.useState(!1),[q,A]=j.useState({show:!1,type:"",message:""}),[D,V]=j.useState([]),[O,G]=j.useState(!0),[K,Q]=j.useState({show:!1,message:""}),[ue,le]=j.useState({phValue:"",organicMatter:"",nitrogen:"",phosphorus:"",potassium:"",notes:""}),[de,z]=j.useState(!1),[J,W]=j.useState(!1),ve=(je,He)=>{A({show:!0,type:je,message:He}),setTimeout(()=>{A({show:!1,type:"",message:""})},4e3)},U=()=>{A({show:!1,type:"",message:""})},ne=async()=>{G(!0);try{const je=(l==null?void 0:l.user_id)||31,He=await be.get(`${Yl}/api/land-reports/assigned?supervisor_id=${je}`,{withCredentials:!0});if(He.data.status==="success"){const Ze=He.data.data||[],Be=new Date;Be.setDate(Be.getDate()-1);const nt=Ze.filter(As=>new Date(As.assigned_date||As.report_date)>Be&&(As.completion_status==="In Progress"||!As.completion_status));V(nt),nt.length>0&&Q({show:!0,message:`You have ${nt.length} new land report${nt.length>1?"s":""} assigned to you!`})}}catch(je){console.error("Error checking for new assignments:",je)}finally{G(!1)}},ge=async()=>{var je,He;f(!0),y("");try{const Ze=(l==null?void 0:l.user_id)||31;console.log("Fetching assignments for supervisor ID:",Ze),console.log("Current user context:",l);const Be=await be.get(`${Yl}/api/land-reports/assigned?supervisor_id=${Ze}`,{withCredentials:!0});if(console.log("API Response:",Be.data),Be.data.status==="success"){const nt=Be.data.data||[];c(nt)}else y(Be.data.message||"Failed to load assigned reports.")}catch(Ze){console.error("Error fetching assigned reports:",Ze),((je=Ze.response)==null?void 0:je.status)===401?y("Authentication required. Please log in."):((He=Ze.response)==null?void 0:He.status)===403?y("Access denied. Only field supervisors can view assigned reports."):y("Server error while fetching assigned reports.")}finally{f(!1)}};j.useEffect(()=>{ge(),ne()},[]);const oe=o.filter(je=>{var Be,nt,As;const He=_?((Be=je.landowner_name)==null?void 0:Be.toLowerCase().includes(_.toLowerCase()))||((nt=je.formatted_report_id)==null?void 0:nt.toLowerCase().includes(_.toLowerCase()))||((As=je.location)==null?void 0:As.toLowerCase().includes(_.toLowerCase())):!0,Ze=b?(je.completion_status||"In Progress")===b:!0;return He&&Ze}),xe=()=>{ge()},_e=je=>{M(je),le({phValue:je.ph_value||"",organicMatter:je.organic_matter||"",nitrogen:je.nitrogen_level||"",phosphorus:je.phosphorus_level||"",potassium:je.potassium_level||"",notes:je.environmental_notes||""}),P(!0)},ye=je=>{const{name:He,value:Ze}=je.target;le(Be=>({...Be,[He]:Ze}))},Le=async()=>{var je,He,Ze;if(!ue.phValue||!ue.organicMatter){ve("error","Please enter at least pH value and organic matter percentage before generating recommendations.");return}z(!0);try{console.log("Submitting data for report ID:",S.report_id);const Be=await be.put(`${Yl}/api/land-reports/${S.report_id}/submit-data`,{ph_value:ue.phValue,organic_matter:ue.organicMatter,nitrogen_level:ue.nitrogen,phosphorus_level:ue.phosphorus,potassium_level:ue.potassium,environmental_notes:ue.notes,status:"Completed"},{withCredentials:!0});if(console.log("Submit response:",Be.data),Be.data.status==="success"){console.log("Generating recommendations for report ID:",S.report_id);const nt=await be.post(`${Yl}/crop-recommendations.php?report_id=${S.report_id}`,{action:"generate"},{withCredentials:!0,headers:{"Content-Type":"application/json"}});console.log("Recommendation response:",nt.data),nt.data.status==="success"?(W(!0),ve("success","Crop recommendations generated successfully! You can now submit the complete report."),window.dispatchEvent(new Event("dashboard_update"))):ve("error",nt.data.message||"Failed to generate crop recommendations")}else ve("error",Be.data.message||"Failed to submit data")}catch(Be){console.error("Error generating recommendations:",Be),console.log("Error details:",(je=Be.response)==null?void 0:je.data),ve("error",`Error: ${((Ze=(He=Be.response)==null?void 0:He.data)==null?void 0:Ze.message)||Be.message}`)}finally{z(!1)}},De=async je=>{je.preventDefault(),H(!0);try{const He=await be.put(`${Yl}/api/land-reports/${S.report_id}/submit-data`,{ph_value:ue.phValue,organic_matter:ue.organicMatter,nitrogen_level:ue.nitrogen,phosphorus_level:ue.phosphorus,potassium_level:ue.potassium,environmental_notes:ue.notes,status:"Completed"},{withCredentials:!0});He.data.status==="success"?(ve("success","Land report submitted successfully!"),P(!1),M(null),W(!1),ge(),window.dispatchEvent(new Event("dashboard_update"))):ve("error",He.data.message||"Failed to submit report")}catch(He){console.error("Error submitting final report:",He),ve("error","Error submitting report. Please try again.")}finally{H(!1)}},Tt=()=>{P(!1),M(null),W(!1),le({phValue:"",organicMatter:"",nitrogen:"",phosphorus:"",potassium:"",notes:""})},cs=je=>{try{const He=o.find(Ze=>Ze.formatted_report_id===je||Ze.report_id===je);He?(I(He),B(!0)):ve("error","Report not found")}catch(He){console.error("Error finding report details:",He),ve("error","Failed to load report details")}};return e.jsxs("div",{className:"flex-1 bg-white min-h-screen p-4 md:p-10 font-poppins",children:[e.jsxs("div",{className:"mb-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black",children:"Assigned Land Reports"}),e.jsx("p",{className:"text-green-600 mb-6 text-sm sm:text-base",children:"Manage and view reports assigned to you as a field supervisor"})]}),e.jsxs("button",{onClick:xe,className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors duration-200",disabled:d,children:[e.jsx(lw,{className:d?"animate-spin":""}),"Refresh"]})]}),!O&&D.length>0&&e.jsx("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-6 rounded",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Kl,{className:"h-5 w-5 text-green-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-green-800",children:["New Assignment",D.length>1?"s":""," Available!"]}),e.jsxs("div",{className:"mt-2 text-sm text-green-700",children:[e.jsxs("p",{children:["You have ",D.length," new land report",D.length>1?"s":""," assigned to you:"]}),e.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[D.slice(0,3).map(je=>e.jsxs("li",{children:[je.formatted_report_id||`RPT-${je.report_id}`," - ",je.landowner_name||`${je.first_name} ${je.last_name}`," (",je.location,")"]},je.report_id)),D.length>3&&e.jsxs("li",{children:["...and ",D.length-3," more"]})]}),e.jsx("p",{className:"mt-2 font-medium",children:"Please review and start working on these assignments."})]})]}),e.jsx("div",{className:"ml-auto flex-shrink-0",children:e.jsx("button",{onClick:()=>V([]),className:"bg-white rounded-md p-1.5 text-green-400 hover:text-green-600 focus:outline-none focus:ring-2 focus:ring-green-500",children:e.jsx(Ql,{className:"h-4 w-4"})})})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(pm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by landowner name, report ID, or location...",value:_,onChange:je=>g(je.target.value),className:"bg-green-50 text-sm rounded-md pl-10 pr-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("select",{value:b,onChange:je=>N(je.target.value),className:"bg-green-50 text-sm rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Completed",children:"Completed"})]})]}),d?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Loading assigned reports..."})]}):x?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-600 mb-4",children:x}),e.jsx("button",{onClick:xe,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors duration-200",children:"Try Again"})]}):oe.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:_||b?"No reports match your search criteria.":"No reports have been assigned to you yet."})}):e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg shadow-sm",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-green-50 text-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 text-left",children:"Report ID"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Landowner Name"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Location"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Assigned Date"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Status"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Actions"})]})}),e.jsx("tbody",{children:oe.map((je,He)=>e.jsxs("tr",{className:"border-t border-gray-200 hover:bg-green-50",children:[e.jsx("td",{className:"py-3 px-4 text-green-700 font-medium",children:je.formatted_report_id||`RPT-${je.report_id}`}),e.jsx("td",{className:"py-3 px-4 text-green-700",children:je.landowner_name||`${je.first_name} ${je.last_name}`}),e.jsx("td",{className:"py-3 px-4",children:je.location}),e.jsx("td",{className:"py-3 px-4",children:new Date(je.assigned_date||je.report_date).toLocaleDateString()}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full inline-block text-xs font-medium ${rg[je.completion_status||"In Progress"]}`,children:je.completion_status||"In Progress"})}),e.jsx("td",{className:"py-3 px-4",children:je.completion_status==="Completed"?e.jsxs("button",{onClick:()=>cs(je.formatted_report_id||je.report_id),className:"flex items-center gap-1 text-green-600 hover:text-green-800 hover:underline text-sm transition-colors duration-200",children:[e.jsx(Zx,{size:14}),"View Details"]}):e.jsxs("button",{onClick:()=>_e(je),className:"flex items-center gap-1 text-green-600 hover:text-green-800 hover:underline text-sm transition-colors duration-200",children:[e.jsx(rw,{size:14}),"Submit Data"]})})]},je.report_id||He))})]})}),!d&&!x&&oe.length>0&&e.jsxs("div",{className:"mt-6 bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Assignment Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Assigned:"}),e.jsx("span",{className:"ml-2 font-semibold",children:o.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"In Progress:"}),e.jsx("span",{className:"ml-2 font-semibold text-green-600",children:o.filter(je=>(je.completion_status||"In Progress")==="In Progress").length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Completed:"}),e.jsx("span",{className:"ml-2 font-semibold text-green-600",children:o.filter(je=>je.completion_status==="Completed").length})]})]})]})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-white flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-gray-200 shadow-xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-2xl font-bold text-black",children:["Submit Land Data - ",S==null?void 0:S.formatted_report_id]}),e.jsx("button",{onClick:Tt,className:"text-gray-500 hover:text-gray-700",children:e.jsx(Ql,{size:24})})]}),e.jsxs("form",{onSubmit:De,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Report Information"}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Landowner:"})," ",S==null?void 0:S.landowner_name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",S==null?void 0:S.location]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-black mb-1",children:"pH Value"}),e.jsx("input",{type:"number",step:"0.1",name:"phValue",value:ue.phValue,onChange:ye,placeholder:"Enter pH value (e.g., 6.5)",className:"w-full bg-green-50 text-green-700 p-3 rounded-md border border-green-500 placeholder-[#5E964F] focus:outline-none focus:ring-2 focus:ring-green-400",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-black mb-1",children:"Organic Matter (%)"}),e.jsx("input",{type:"number",step:"0.01",name:"organicMatter",value:ue.organicMatter,onChange:ye,placeholder:"Enter organic matter percentage (e.g., 2.5)",className:"w-full bg-green-50 text-green-700 p-3 rounded-md border border-green-500 placeholder-[#5E964F] focus:outline-none focus:ring-2 focus:ring-green-400",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-black mb-1",children:"Nitrogen Level"}),e.jsxs("select",{name:"nitrogen",value:ue.nitrogen,onChange:ye,className:"w-full bg-green-50 text-green-700 p-3 rounded-md border border-green-500 focus:outline-none focus:ring-2 focus:ring-green-400",required:!0,children:[e.jsx("option",{value:"",children:"Select nitrogen level"}),e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"High",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-black mb-1",children:"Phosphorus Level"}),e.jsxs("select",{name:"phosphorus",value:ue.phosphorus,onChange:ye,className:"w-full bg-green-50 text-green-700 p-3 rounded-md border border-green-500 focus:outline-none focus:ring-2 focus:ring-green-400",required:!0,children:[e.jsx("option",{value:"",children:"Select phosphorus level"}),e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"High",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-black mb-1",children:"Potassium Level"}),e.jsxs("select",{name:"potassium",value:ue.potassium,onChange:ye,className:"w-full bg-green-50 text-green-700 p-3 rounded-md border border-green-500 focus:outline-none focus:ring-2 focus:ring-green-400",required:!0,children:[e.jsx("option",{value:"",children:"Select potassium level"}),e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"High",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-black mb-1",children:"Environmental Notes"}),e.jsx("textarea",{name:"notes",value:ue.notes,onChange:ye,placeholder:"Enter detailed environmental observations and notes",rows:5,className:"w-full bg-green-50 text-green-700 p-3 rounded-md border border-green-500 placeholder-[#5E964F] focus:outline-none focus:ring-2 focus:ring-green-400",required:!0})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:Tt,className:"px-6 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors duration-200",disabled:T||de,children:"Cancel"}),J?e.jsx("button",{type:"submit",className:"flex items-center justify-center gap-2 bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:T,children:T?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Submitting Report..."]}):e.jsxs(e.Fragment,{children:[e.jsx(nw,{size:16}),"Submit Land Report"]})}):e.jsx("button",{type:"button",onClick:Le,className:"flex items-center justify-center gap-2 bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:T||de||!ue.phValue||!ue.organicMatter,title:"Enter pH value and organic matter to enable crop recommendations",children:de?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Generating Recommendations..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ow,{size:16}),"Generate Crop Recommendations"]})})]}),J&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 rounded-md border border-green-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kl,{className:"text-green-600",size:16}),e.jsxs("p",{className:"text-sm text-green-700",children:[e.jsx("strong",{children:" Crop recommendations generated successfully!"}),"You can now submit the complete land report with soil analysis and crop recommendations."]})]})}),e.jsxs("div",{className:"mt-4 p-3 bg-green-50 rounded-md border border-green-200",children:[e.jsxs("p",{className:"text-sm text-green-700",children:[e.jsx("strong",{children:" Tip:"})," For best results, enter all soil analysis values (pH, organic matter, nitrogen, phosphorus, potassium) before generating crop recommendations. The system will analyze your soil data and suggest the most suitable crops with expected yields and market prices."]}),(!ue.phValue||!ue.organicMatter)&&e.jsx("p",{className:"text-sm text-amber-600 mt-2",children:" pH value and organic matter are required to generate crop recommendations."})]})]})]})})}),R&&F&&e.jsx("div",{className:"fixed inset-0 bg-white flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-gray-200",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800",children:["Land Report Details - ",F.formatted_report_id||`RPT-${F.report_id}`]}),e.jsx("button",{onClick:()=>{B(!1),I(null)},className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:e.jsx(Ql,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Report Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Report ID:"}),e.jsx("p",{className:"text-gray-800",children:F.formatted_report_id||`RPT-${F.report_id}`})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Landowner:"}),e.jsx("p",{className:"text-gray-800",children:F.landowner_name||`${F.first_name} ${F.last_name}`})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Location:"}),e.jsx("p",{className:"text-gray-800",children:F.location})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Assigned Date:"}),e.jsx("p",{className:"text-gray-800",children:new Date(F.assigned_date||F.report_date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Status:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${rg[F.completion_status||"In Progress"]}`,children:F.completion_status||"In Progress"})]})]})]}),F.completion_status==="Completed"&&e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-3",children:"Submitted Land Data"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-green-700",children:"pH Value:"}),e.jsx("p",{className:"text-gray-800",children:F.ph_value||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-green-700",children:"Organic Matter (%):"}),e.jsx("p",{className:"text-gray-800",children:F.organic_matter||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-green-700",children:"Nitrogen (%):"}),e.jsx("p",{className:"text-gray-800",children:F.nitrogen_level||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-green-700",children:"Phosphorus (ppm):"}),e.jsx("p",{className:"text-gray-800",children:F.phosphorus_level||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-green-700",children:"Potassium (ppm):"}),e.jsx("p",{className:"text-gray-800",children:F.potassium_level||"N/A"})]})]}),F.environmental_notes&&e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Additional Notes:"}),e.jsx("p",{className:"text-gray-800 mt-1 p-3 bg-white rounded border",children:F.environmental_notes})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{B(!1),I(null)},className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors duration-200",children:"Close"})})]})]})}),q.show&&e.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm",children:e.jsx("div",{className:`p-4 rounded-lg shadow-lg border-l-4 transition-all duration-300 transform ${q.type==="success"?"bg-green-50 border-green-500 text-green-800":q.type==="error"?"bg-red-50 border-red-500 text-red-800":"bg-slate-50 border-slate-400 text-slate-700"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[q.type==="success"&&e.jsx(Kl,{className:"mr-2 flex-shrink-0",size:20}),q.type==="error"&&e.jsx(Xh,{className:"mr-2 flex-shrink-0",size:20}),q.type==="info"&&e.jsx(Zx,{className:"mr-2 flex-shrink-0",size:20}),e.jsx("p",{className:"text-sm font-medium",children:q.message})]}),e.jsx("button",{onClick:U,className:`ml-2 flex-shrink-0 ${q.type==="success"?"text-green-600 hover:text-green-800":q.type==="error"?"text-red-600 hover:text-red-800":"text-slate-600 hover:text-slate-800"}`,children:e.jsx(Ql,{size:16})})]})})}),K.show&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white border border-green-600 p-6 rounded-lg shadow-xl text-center max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(Kl,{className:"h-8 w-8 text-green-600 mr-2"}),e.jsx("h2",{className:"text-lg font-bold text-green-700",children:"New Assignment!"})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:K.message}),e.jsx("button",{onClick:()=>Q({show:!1,message:""}),className:"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700 mt-2",children:"Got It!"})]})})]})}function Z1(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(jm,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(I1,{})})]})}function $1(){const[l,o]=j.useState({phValue:"",organicMatter:"",nitrogen:"",phosphorus:"",potassium:"",notes:""}),[c,d]=j.useState({}),f=(_,g)=>{let b="";if(g==="")return"";switch(_){case"phValue":const N=parseFloat(g);isNaN(N)?b="Please enter a valid pH value":(N<4||N>9.5)&&(b="pH value must be between 4.0 and 9.5");break;case"organicMatter":const E=parseFloat(g);isNaN(E)?b="Please enter a valid percentage":(E<.5||E>15)&&(b="Organic matter must be between 0.5% and 15%");break}return b},x=_=>{const{name:g,value:b}=_.target;o(E=>({...E,[g]:b}));const N=f(g,b);d(E=>({...E,[g]:N}))},y=_=>{_.preventDefault();const g={};if(Object.keys(l).forEach(b=>{if(b!=="notes"){const N=f(b,l[b]);N&&(g[b]=N)}}),Object.keys(g).length>0){d(g);return}console.log("Submitted Data:",l)};return e.jsxs("form",{onSubmit:y,className:"bg-white min-h-screen p-4 md:p-10 font-poppins",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-10",children:"Land Data Submission"}),e.jsxs("div",{className:"max-w-xl space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block font-semibold text-black mb-1",children:["pH Value ",e.jsx("span",{className:"text-sm text-gray-600",children:"(4.0 - 9.5)"})]}),e.jsx("input",{type:"number",name:"phValue",value:l.phValue,onChange:x,placeholder:"e.g., 6.5 (optimal for most crops)",min:"4.0",max:"9.5",step:"0.1",className:`w-full bg-green-50 text-green-700 p-3 rounded-md border ${c.phValue?"border-red-500":"border-green-500"} placeholder-[#5E964F] focus:outline-none focus:ring-2 ${c.phValue?"focus:ring-red-400":"focus:ring-green-400"}`}),c.phValue&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.phValue})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block font-semibold text-black mb-1",children:["Organic Matter (%) ",e.jsx("span",{className:"text-sm text-gray-600",children:"(0.5% - 15%)"})]}),e.jsx("input",{type:"number",name:"organicMatter",value:l.organicMatter,onChange:x,placeholder:"e.g., 3.5 (good for organic farming)",min:"0.5",max:"15",step:"0.1",className:`w-full bg-green-50 text-green-700 p-3 rounded-md border ${c.organicMatter?"border-red-500":"border-green-500"} placeholder-[#5E964F] focus:outline-none focus:ring-2 ${c.organicMatter?"focus:ring-red-400":"focus:ring-green-400"}`}),c.organicMatter&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.organicMatter})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-black mb-1",children:"Nitrogen (N) Level"}),e.jsxs("select",{name:"nitrogen",value:l.nitrogen,onChange:x,className:`w-full bg-green-50 text-green-700 p-3 rounded-md border ${c.nitrogen?"border-red-500":"border-green-500"} focus:outline-none focus:ring-2 ${c.nitrogen?"focus:ring-red-400":"focus:ring-green-400"}`,children:[e.jsx("option",{value:"",children:"Select nitrogen level"}),e.jsx("option",{value:"low",children:"Low (10-25 ppm)"}),e.jsx("option",{value:"medium",children:"Medium (25-40 ppm)"}),e.jsx("option",{value:"high",children:"High (40+ ppm)"})]}),c.nitrogen&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.nitrogen})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-black mb-1",children:"Phosphorus (P) Level"}),e.jsxs("select",{name:"phosphorus",value:l.phosphorus,onChange:x,className:`w-full bg-green-50 text-green-700 p-3 rounded-md border ${c.phosphorus?"border-red-500":"border-green-500"} focus:outline-none focus:ring-2 ${c.phosphorus?"focus:ring-red-400":"focus:ring-green-400"}`,children:[e.jsx("option",{value:"",children:"Select phosphorus level"}),e.jsx("option",{value:"low",children:"Low (5-15 ppm)"}),e.jsx("option",{value:"medium",children:"Medium (15-30 ppm)"}),e.jsx("option",{value:"high",children:"High (30+ ppm)"})]}),c.phosphorus&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.phosphorus})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-black mb-1",children:"Potassium (K) Level"}),e.jsxs("select",{name:"potassium",value:l.potassium,onChange:x,className:`w-full bg-green-50 text-green-700 p-3 rounded-md border ${c.potassium?"border-red-500":"border-green-500"} focus:outline-none focus:ring-2 ${c.potassium?"focus:ring-red-400":"focus:ring-green-400"}`,children:[e.jsx("option",{value:"",children:"Select potassium level"}),e.jsx("option",{value:"low",children:"Low (50-100 ppm)"}),e.jsx("option",{value:"medium",children:"Medium (100-200 ppm)"}),e.jsx("option",{value:"high",children:"High (200+ ppm)"})]}),c.potassium&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.potassium})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-black mb-1",children:"Environmental Notes"}),e.jsx("textarea",{name:"notes",value:l.notes,onChange:x,placeholder:"Enter notes",rows:5,className:"w-full bg-green-50 text-green-700 p-3 rounded-md border border-green-500 placeholder-[#5E964F] focus:outline-none focus:ring-2 focus:ring-green-400"})]})]}),e.jsx("div",{className:"mt-10 flex justify-end",children:e.jsx("button",{type:"submit",className:"bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 transition",children:"Submit Report"})})]})}function V1(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(jm,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx($1,{})})]})}function kd(){const[l,o]=j.useState(!1),[c,d]=j.useState(null),[f,x]=j.useState(!1),{cartItems:y}=uo(),_=Lt(),{logout:g}=mt();j.useEffect(()=>{const S=JSON.parse(localStorage.getItem("user"));S&&d(S)},[]);const b="flex items-center gap-3 px-4 py-2 rounded-md transition text-sm font-medium",N="bg-green-100 text-green-700 font-semibold",E="text-black hover:bg-green-50",P=y.length,R=async()=>{try{console.log("Buyer logout initiated..."),await g(),console.log("Logout successful, navigating to home..."),_("/",{replace:!0})}catch(S){console.error("Logout failed:",S),_("/",{replace:!0})}finally{x(!1)}},B=()=>{x(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden flex items-start bg-white shadow px-4 py-6",children:e.jsx("button",{className:"cursor-pointer",onClick:()=>o(!0),children:e.jsx(Di,{size:24})})}),e.jsxs("aside",{className:`fixed top-0 left-0 h-full w-64 bg-white shadow-sm font-poppins flex flex-col px-4 py-6 z-50 transform transition-transform ${l?"translate-x-0":"-translate-x-full"} md:translate-x-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(Ee,{to:"/",onClick:()=>o(!1),children:e.jsx("img",{src:Ts,alt:"FarmMaster Logo",className:"h-20 w-auto"})}),e.jsx("button",{className:"md:hidden cursor-pointer",onClick:()=>o(!1),children:e.jsx(on,{size:24})})]}),e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx("img",{src:mo,alt:"Buyer",className:"w-14 h-14 rounded-full object-cover mr-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold",children:(c==null?void 0:c.name)||"Guest Buyer"}),e.jsx("p",{className:"text-sm text-green-600",children:"Buyer"})]})]}),e.jsxs("nav",{className:"flex flex-col gap-2",children:[e.jsxs(Ee,{to:"/buyerdashboard",className:({isActive:S})=>`${b} ${S?N:E}`,onClick:()=>o(!1),children:[e.jsx(zi,{size:16}),"Dashboard"]}),e.jsxs(Ee,{to:"/marketplace",className:({isActive:S})=>`${b} ${S?N:E}`,onClick:()=>o(!1),children:[e.jsx(oN,{size:16}),"Marketplace"]}),e.jsx(Ee,{to:"/buyercart",className:({isActive:S})=>`${b} ${S?N:E}`,onClick:()=>o(!1),children:e.jsxs("div",{className:"relative flex items-center gap-3",children:[e.jsx(Ei,{size:16}),"Cart",P>0&&e.jsx("span",{className:"absolute left-3 -top-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:P})]})}),e.jsxs(Ee,{to:"/buyerorders",className:({isActive:S})=>`${b} ${S?N:E}`,onClick:()=>o(!1),children:[e.jsx(D_,{size:16}),"Orders"]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsxs(Ee,{to:"/",className:({isActive:S})=>`${b} ${S?N:E}`,onClick:()=>o(!1),children:[e.jsx(oo,{size:16}),"Go to Home"]}),e.jsxs("button",{className:`${b} text-red-600 hover:bg-red-50 mt-2 cursor-pointer`,onClick:B,children:[e.jsx(co,{size:16}),"Log out"]})]})]}),e.jsx(Qa,{isOpen:f,onClose:()=>x(!1),onConfirm:R,title:"Confirm Logout",message:"Are you sure you want to logout from your Buyer account? Your cart will be saved for when you log back in.",confirmText:"Yes, Logout",cancelText:"Cancel",type:"warning"})]})}const Y1="http://localhost/FARMMASTER-Backend";function G1(){const l=Lt(),[o,c]=j.useState({}),{user:d}=mt();j.useEffect(()=>{const g=JSON.parse(localStorage.getItem("user"));g&&c(g)},[]);const[f,x]=j.useState({allOrders:[],recentActivities:[]}),y=g=>{let b=0;return!g||!g.allOrders?b:(g.allOrders.forEach(N=>{b+=parseFloat(N.total_amount||0)}),parseFloat(b.toFixed(2)))},_=async()=>{try{const g=await be.post(`${Y1}/api/buyerDashboard`,{userId:o.id},{withCredentials:!0});if(g.data&&g.data.data){const b=[...g.data.data.recent_orders||[],...g.data.data.purchase_history||[]];x({allOrders:b,recentActivities:g.data.data.recent_activities||[]})}}catch(g){console.error("Error fetching buyer dashboard data:",g)}};return j.useEffect(()=>{o&&o.id&&_()},[o]),e.jsxs("div",{className:"p-4 md:p-10 font-poppins",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-10",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:"Dashboard"}),e.jsxs("p",{className:"text-green-600 mt-1",children:["Welcome back, ",(o==null?void 0:o.name)||"Buyer"]})]}),e.jsx(i0,{className:"mt-4 md:mt-0"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-10",children:[e.jsxs("div",{className:"border rounded-md p-6 shadow-sm text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:f.allOrders.length})]}),e.jsxs("div",{className:"border rounded-md p-6 shadow-sm text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Spendings"}),e.jsxs("p",{className:"text-2xl font-bold mt-1",children:[y(f)," LKR"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Recent Purchases"}),e.jsx("div",{className:"bg-white border rounded-xl shadow-sm",children:f.recentActivities.length>0?e.jsx("div",{className:"divide-y divide-gray-100",children:f.recentActivities.map((g,b)=>e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-green-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-green-100 rounded-full p-3",children:e.jsx(no,{className:"text-green-700",size:20})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["Order #",g.order_number]}),e.jsx("p",{className:"text-sm text-gray-600",children:g.created_at?new Date(g.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"No date"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-green-700",children:["Rs. ",parseFloat(g.total_amount||0).toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx(Oi,{size:12}),e.jsx("span",{children:g.created_at?new Date(g.created_at).toLocaleDateString():"N/A"})]})]})]},b))}):e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Ei,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"No recent purchases"}),e.jsx("p",{className:"text-sm",children:"Your recent orders will appear here"})]})}),f.recentActivities.length>0&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>l("/buyerorders"),className:"text-green-600 hover:text-green-700 font-medium text-sm hover:underline",children:"View All Orders "})})]})]})}function K1(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(kd,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(G1,{})})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var em=function(){return em=Object.assign||function(o){for(var c,d=1,f=arguments.length;d<f;d++){c=arguments[d];for(var x in c)Object.prototype.hasOwnProperty.call(c,x)&&(o[x]=c[x])}return o},em.apply(this,arguments)};function Q1(l,o){var c={};for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&o.indexOf(d)<0&&(c[d]=l[d]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,d=Object.getOwnPropertySymbols(l);f<d.length;f++)o.indexOf(d[f])<0&&Object.prototype.propertyIsEnumerable.call(l,d[f])&&(c[d[f]]=l[d[f]]);return c}var Si="",Jl=null,td=null,E0=null;function _m(){Si="",Jl!==null&&Jl.disconnect(),td!==null&&(window.clearTimeout(td),td=null)}function ig(l){var o=["BUTTON","INPUT","SELECT","TEXTAREA"],c=["A","AREA"];return o.includes(l.tagName)&&!l.hasAttribute("disabled")||c.includes(l.tagName)&&l.hasAttribute("href")}function lg(){var l=null;if(Si==="#")l=document.body;else{var o=Si.replace("#","");l=document.getElementById(o),l===null&&Si==="#top"&&(l=document.body)}if(l!==null){E0(l);var c=l.getAttribute("tabindex");return c===null&&!ig(l)&&l.setAttribute("tabindex",-1),l.focus({preventScroll:!0}),c===null&&!ig(l)&&(l.blur(),l.removeAttribute("tabindex")),_m(),!0}return!1}function X1(l){window.setTimeout(function(){lg()===!1&&(Jl===null&&(Jl=new MutationObserver(lg)),Jl.observe(document,{attributes:!0,childList:!0,subtree:!0}),td=window.setTimeout(function(){_m()},l||1e4))},0)}function k0(l){return qe.forwardRef(function(o,c){var d="";typeof o.to=="string"&&o.to.includes("#")?d="#"+o.to.split("#").slice(1).join("#"):typeof o.to=="object"&&typeof o.to.hash=="string"&&(d=o.to.hash);var f={};l===Ee&&(f.isActive=function(_,g){return _&&_.isExact&&g.hash===d});function x(_){_m(),Si=o.elementId?"#"+o.elementId:d,o.onClick&&o.onClick(_),Si!==""&&!_.defaultPrevented&&_.button===0&&(!o.target||o.target==="_self")&&!(_.metaKey||_.altKey||_.ctrlKey||_.shiftKey)&&(E0=o.scroll||function(g){return o.smooth?g.scrollIntoView({behavior:"smooth"}):g.scrollIntoView()},X1(o.timeout))}var y=Q1(o,["scroll","smooth","timeout","elementId"]);return qe.createElement(l,em({},f,y,{onClick:x,ref:c}),o.children)})}var W1=k0(Wt);k0(Ee);const md="/assets/vegetables-nxOBob5I.jpg",J1=()=>{const{cartItems:l,updateQuantity:o,removeFromCart:c,clearCart:d,isInitialized:f,reloadCart:x}=uo(),{user:y}=mt(),[_,g]=j.useState({show:!1,message:"",itemName:"",maxQuantity:0});j.useEffect(()=>{y!=null&&y.id&&(console.log("Cart page loaded for user:",y.id),setTimeout(()=>{l.length===0&&(console.log("Cart is empty, attempting to reload from cookies..."),x())},100))},[y==null?void 0:y.id]);const b=l.reduce((S,M)=>S+M.price*M.quantity,0),N=b>0?250:0,E=b+N;if(!f)return e.jsx("div",{className:"p-4 md:p-10 font-poppins bg-white min-h-screen",children:e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading your cart..."})]})});const P=async(S,M)=>{var F;try{const I=l.find(D=>D.name===S);if(!I)return;const T="http://localhost/FARMMASTER-Backend",H=await fetch(`${T}/api/products/${I.id||I.product_id}`,{method:"GET",credentials:"include"});if(H.ok){const V=((F=(await H.json()).data)==null?void 0:F.quantity)||0;if(console.log("Current available quantity:",V,"Requested:",M),M<=V){console.log("Quantity check passed, updating cart"),o(S,M);return}else{g({show:!0,message:`Only ${V} Kg available for ${S}`,itemName:S,maxQuantity:V});return}}const A=await(await fetch(`${T}/api/products/validate-quantity`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({product_id:I.id||I.product_id,quantity:M})})).json();if(A.status==="success")o(S,M);else{const D=A.data||{};g({show:!0,message:`Only ${D.available_quantity||0} Kg available for ${S}`,itemName:S,maxQuantity:D.available_quantity||0})}}catch(I){console.error("Error validating quantity:",I),o(S,M)}},R=(S,M)=>{P(S,M+1)},B=(S,M)=>{M>1&&o(S,M-1)};return e.jsxs("div",{className:"p-4 md:p-10 font-poppins bg-white min-h-screen",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-10 text-center md:text-left text-black",children:"Shopping Cart"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-10",children:[e.jsx("div",{className:"flex-1",children:l.length===0?e.jsxs("div",{className:"text-center mt-10",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Your cart is empty."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Items you add to your cart will be saved for your next visit."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 text-gray-500 font-semibold border-b pb-3 mb-4 text-sm",children:[e.jsx("span",{className:"col-span-2",children:"Item"}),e.jsx("span",{className:"hidden md:block",children:"Price"}),e.jsx("span",{className:"hidden md:block",children:"Quantity"}),e.jsx("span",{className:"hidden md:block",children:"Total"}),e.jsx("span",{className:"hidden md:block"})]}),l.map((S,M)=>e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 items-center gap-4 border-b py-4 text-sm",children:[e.jsxs("div",{className:"col-span-2 flex items-center gap-4",children:[e.jsx("img",{src:S.image_url||S.image||md,alt:S.name||"Product image",className:"w-16 h-16 object-contain",onError:F=>{F.target.src=md,F.target.onerror=null}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:S.name}),e.jsxs("div",{className:"md:hidden mt-2 text-gray-700 text-sm",children:[e.jsxs("p",{children:["Price: Rs. ",S.price.toFixed(2)]}),e.jsxs("p",{children:["Total: Rs. ",(S.price*S.quantity).toFixed(2)]})]})]})]}),e.jsxs("span",{className:"text-gray-700 hidden md:block",children:["Rs. ",S.price.toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>B(S.name,S.quantity),className:"px-2 py-1 border rounded hover:bg-gray-100","aria-label":"Decrease quantity",children:"-"}),e.jsxs("span",{children:[S.quantity," Kg"]}),e.jsx("button",{onClick:()=>R(S.name,S.quantity),className:"px-2 py-1 border rounded hover:bg-gray-100","aria-label":"Increase quantity",children:"+"})]}),e.jsxs("span",{className:"text-green-700 font-semibold hidden md:block",children:["Rs. ",(S.price*S.quantity).toFixed(2)]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>c(S.name),className:"text-red-500 hover:text-red-700","aria-label":"Remove item",children:e.jsx(on,{size:20})})})]},M))]})}),e.jsxs("div",{className:"w-full lg:w-1/3 bg-gray-50 p-6 rounded-md shadow-sm h-fit text-sm",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Order Summary"}),e.jsxs("div",{className:"flex justify-between mb-2 text-gray-700",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["Rs. ",b.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between mb-2 text-gray-700",children:[e.jsx("span",{children:"Shipping"}),e.jsxs("span",{children:["Rs. ",N.toFixed(2)]})]}),e.jsx("hr",{className:"my-3"}),e.jsxs("div",{className:"flex justify-between text-base font-bold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-green-700",children:["Rs. ",E.toFixed(2)]})]}),e.jsxs("div",{className:"mt-6 flex flex-col gap-3",children:[e.jsx(Wt,{to:"/checkoutpage",children:e.jsx("button",{className:"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 transition",children:"Proceed to Checkout"})}),e.jsx(W1,{smooth:!0,to:"/marketplace#vegetables",children:e.jsx("button",{className:"w-full border border-gray-400 text-gray-700 py-2 rounded hover:bg-gray-200 transition",children:"Continue Shopping"})}),l.length>0&&e.jsx("button",{onClick:d,className:"text-sm text-red-500 hover:underline mt-2",children:"Clear Cart"})]})]})]}),_.show&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4 text-center border-2 border-orange-500",children:[e.jsx("div",{className:"text-4xl mb-4 text-orange-500",children:""}),e.jsx("h2",{className:"text-lg font-bold mb-3 text-orange-800",children:"Quantity Limit Reached"}),e.jsx("p",{className:"text-orange-700 mb-4",children:_.message}),e.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg mb-4 text-sm",children:[e.jsxs("p",{className:"text-orange-700",children:[e.jsx("strong",{children:"Maximum available:"})," ",_.maxQuantity," Kg"]}),e.jsx("p",{className:"text-green-600 font-medium mt-2",children:"The quantity has been set to the maximum available amount"})]}),e.jsx("button",{onClick:()=>g({..._,show:!1}),className:"bg-orange-500 text-white px-6 py-2 rounded hover:bg-orange-600 transition",children:"Got it"})]})})]})};function eS(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(kd,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(J1,{})})]})}function tS({user:l,rootUrl:o}){const c=o||"http://localhost/FARMMASTER-Backend",[d,f]=j.useState([]),[x,y]=j.useState(!0),[_,g]=j.useState("");return j.useEffect(()=>{let b=l&&l.id?l:null;if(!b){const E=localStorage.getItem("user");if(E)try{b=JSON.parse(E)}catch{b=null}}const N=b&&b.id?b.id:null;if(console.log("Orders userId from localStorage:",b&&b.id),console.log("Orders userId from prop:",l&&l.id),console.log("Orders userId used:",N),!N){g("User not found."),y(!1);return}y(!0),be.post(`${c}/api/buyer/orders`,{userId:N},{withCredentials:!0}).then(E=>{console.log("Orders API response:",E.data),E.data&&E.data.status==="success"&&E.data.data&&Array.isArray(E.data.data.orders)?(f(E.data.data.orders),g(""),console.log("Orders set in state:",E.data.data.orders)):(f([]),g(E.data.message||"No orders found.")),y(!1)}).catch(()=>{f([]),g("Failed to fetch orders."),y(!1)})},[l,o]),e.jsxs("div",{className:"flex-1 bg-white min-h-screen p-4 md:p-10 font-poppins",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-black mb-2",children:"Orders"}),e.jsx("p",{className:"text-green-600 mb-6 text-sm sm:text-base",children:"View your recent order history (last 30 orders)"}),e.jsx("div",{className:"overflow-x-auto bg-white border rounded-xl shadow-sm",children:x?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"Loading orders..."}):_?e.jsx("div",{className:"p-6 text-center text-red-500",children:_}):e.jsxs("table",{className:"min-w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-green-50 text-black font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Order ID"}),e.jsx("th",{className:"px-4 py-3",children:"Payment Date"}),e.jsx("th",{className:"px-4 py-3",children:"Products"}),e.jsx("th",{className:"px-4 py-3",children:"Total Amount"})]})}),e.jsx("tbody",{children:d.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 py-6 text-center text-gray-500",children:"No orders to display."})}):d.map((b,N)=>e.jsxs("tr",{className:"border-t hover:bg-green-50",children:[e.jsx("td",{className:"px-4 py-3",children:b.order_number||b.id}),e.jsx("td",{className:"px-4 py-3 text-green-600",children:b.date}),e.jsx("td",{className:"px-4 py-3",children:b.product||"No products"}),e.jsx("td",{className:"px-4 py-3",children:b.total})]},b.id||N))})]})})]})}function sS(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(kd,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(tS,{})})]})}const nS=({isVisible:l,onClose:o,orderData:c})=>{var d;return l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-green-700",children:"Payment Successful!"}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(on,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"bg-green-100 rounded-full p-4",children:e.jsx(nn,{className:"text-green-600",size:48})})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-gray-800",children:"Your order has been placed successfully!"}),e.jsx("p",{className:"text-gray-600",children:"Thank you for your purchase. Your order is being processed."})]}),c&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Order Number:"}),e.jsx("span",{className:"text-gray-900",children:c.order_number})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Transaction ID:"}),e.jsx("span",{className:"text-gray-900 text-sm",children:c.transaction_id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Amount Paid:"}),e.jsxs("span",{className:"text-green-600 font-semibold",children:["LKR ",(d=c.amount)==null?void 0:d.toLocaleString()]})]})]})]}),e.jsx("div",{className:"p-6 border-t bg-gray-50 flex gap-3",children:e.jsx("button",{onClick:o,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition font-medium",children:"Continue Shopping"})})]})}):null},aS=({isVisible:l,onClose:o,errorMessage:c})=>l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-red-700",children:"Payment Failed"}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(on,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"bg-red-100 rounded-full p-4",children:e.jsx(id,{className:"text-red-600",size:48})})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-gray-800",children:"Payment Could Not Be Processed"}),e.jsx("p",{className:"text-gray-600",children:c||"There was an error processing your payment. Please try again."})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-yellow-800",children:e.jsx("strong",{children:"What you can do:"})}),e.jsxs("ul",{className:"text-sm text-yellow-700 mt-2 space-y-1",children:[e.jsx("li",{children:" Check your card details and try again"}),e.jsx("li",{children:" Ensure your card has sufficient funds"}),e.jsx("li",{children:" Try a different payment method"}),e.jsx("li",{children:" Contact your bank if the issue persists"})]})]})]}),e.jsx("div",{className:"p-6 border-t bg-gray-50 flex gap-3",children:e.jsx("button",{onClick:o,className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition font-medium",children:"Try Again"})})]})}):null;function rS({orderData:l,onSuccess:o,onError:c}){var I,T;const{user:d}=mt(),[f,x]=j.useState(!1),[y,_]=j.useState(""),[g,b]=j.useState("4242 4242 4242 4242"),[N,E]=j.useState("12/25"),[P,R]=j.useState("123"),[B,S]=j.useState((d==null?void 0:d.name)||""),M="http://localhost/FARMMASTER-Backend",F=async H=>{var A,D;if(H.preventDefault(),x(!0),_(""),!B.trim()){_("Please enter cardholder name"),x(!1);return}if(!g.trim()||!N.trim()||!P.trim()){_("Please fill in all card details"),x(!1);return}const q=(d==null?void 0:d.id)||33;try{if(console.log("=== MOCK PAYMENT PROCESS STARTED ==="),console.log("User:",d),console.log("Order Data:",l),!d||!d.id)throw new Error("Please log in to complete your purchase");if(d.role!=="Buyer")throw new Error("Only buyers can make purchases. Please log in with a buyer account.");console.log("Creating payment intent...");const V=await be.post(`${M}/api/payments/process`,{action:"create_payment_intent",user_id:q,payment_type:"cart_purchase",cart_order_id:l.orderId,amount:l.totalAmount},{headers:{"Content-Type":"application/json"},withCredentials:!0});if(console.log("Payment intent response:",V.data),V.data.status!=="success")throw new Error(V.data.message);const O=V.data.data.payment_intent_id;if(console.log("Payment intent created with ID:",O),!g||!N||!P)throw new Error("Please fill in all card details");await new Promise(K=>setTimeout(K,2e3)),console.log("Confirming payment...");const G=await be.post(`${M}/api/payments/process`,{action:"confirm_payment",payment_intent_id:O,user_id:q},{headers:{"Content-Type":"application/json"},withCredentials:!0});if(console.log("Payment confirmation response:",G.data),G.data.status==="success")_("Payment processed successfully! (Mock Mode)"),o({transaction_id:G.data.data.transaction_id,payment_intent_id:O,amount:l.totalAmount,order_number:l.orderNumber});else throw new Error(G.data.message)}catch(V){console.error("Mock payment error:",V),_("Payment failed: "+(((D=(A=V.response)==null?void 0:A.data)==null?void 0:D.message)||V.message)),c&&c(V)}finally{x(!1)}};return e.jsxs("form",{onSubmit:F,className:"bg-white p-6 rounded-lg shadow-lg max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-800 px-4 py-3 rounded mb-4",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"font-semibold",children:" Development Mock Payment"})}),e.jsx("p",{className:"text-sm mt-1",children:"Network connectivity to Stripe is unavailable. Using mock payment system for development."})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Payment Details"}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Order: #",l.orderNumber]}),e.jsxs("p",{className:"text-lg font-semibold text-blue-600",children:["Total: LKR ",(I=l.totalAmount)==null?void 0:I.toLocaleString()]})]})]}),y&&e.jsx("div",{className:`p-3 rounded-lg mb-4 ${y.includes("successfully")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cardholder Name *"}),e.jsx("input",{type:"text",value:B,onChange:H=>S(H.target.value),className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"John Doe",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number *"}),e.jsx("input",{type:"text",value:g,onChange:H=>b(H.target.value),className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"4242 4242 4242 4242",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use 4242 4242 4242 4242 for success"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Date *"}),e.jsx("input",{type:"text",value:N,onChange:H=>E(H.target.value),className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"12/25",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CVC *"}),e.jsx("input",{type:"text",value:P,onChange:H=>R(H.target.value),className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"123",maxLength:"4",required:!0})]})]})]}),e.jsx("button",{type:"submit",disabled:f,className:"w-full bg-orange-500 hover:bg-orange-600 disabled:bg-gray-400 text-white font-semibold py-3 rounded-lg transition duration-200 flex items-center justify-center gap-2 mt-6",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Processing Mock Payment..."]}):`Pay LKR ${(T=l.totalAmount)==null?void 0:T.toLocaleString()} (Mock)`}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600 text-center",children:" This is a development mock payment system"}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-1",children:"No real payment will be processed"})]})]})}const iS=xm("pk_test_51Rnk1kC523WS3olJgTHr67VfyR8w8fRy0kyoeoV257f1zaGdO7Egl1kXOtll5zbMnF1IgV0iRmWPkNlYiDvdesAP00teJxyQKk"),Fh={style:{base:{color:"#424770",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146",iconColor:"#9e2146"}}};function lS({cartItems:l,totalAmount:o,onSuccess:c,onError:d}){const f=y0(),x=x0(),{user:y}=mt(),[_,g]=j.useState(!1),[b,N]=j.useState(""),[E,P]=j.useState(""),R="http://localhost/FARMMASTER-Backend",B=async S=>{var F,I,T,H,q,A,D,V,O,G,K,Q,ue,le,de,z;if(S.preventDefault(),!f||!x)return;if(!E.trim()){N("Please enter a shipping address");return}g(!0),N(""),console.log("=== PAYMENT PROCESS STARTED ===");const M=(y==null?void 0:y.id)||33;try{if(!y)throw new Error("Please log in to complete your purchase");if(y.role!=="Buyer")throw new Error("Only buyers can make purchases. Please log in with a buyer account.");const J=l.map(Le=>({product_id:Le.product_id||Le.id,quantity:Le.quantity}));console.log("=== ORDER CREATION DATA ==="),console.log("Cart items for backend:",J),console.log("User ID:",M),console.log("User:",y),console.log("Shipping address:",E),console.log("API URL:",R);let W;try{console.log("Making order creation request..."),W=await be.post(`${R}/api/orders`,{user_id:M,cart_items:J,shipping_address:E,order_notes:"Order placed through checkout"},{headers:{"Content-Type":"application/json"},withCredentials:!0}),console.log("=== ORDER CREATION RESPONSE ==="),console.log("Status:",W.status),console.log("Response data:",W.data)}catch(Le){if(console.error("=== ORDER CREATION FAILED ==="),console.error("Error:",Le),console.error("Response status:",(F=Le.response)==null?void 0:F.status),console.error("Response data:",(I=Le.response)==null?void 0:I.data),console.error("Response headers:",(T=Le.response)==null?void 0:T.headers),((H=Le.response)==null?void 0:H.status)===401)throw new Error("Your session has expired. Please log in again to complete your purchase.");const De=((A=(q=Le.response)==null?void 0:q.data)==null?void 0:A.message)||Le.message||"Failed to create order";throw console.error("Final error message:",De),new Error(De)}if(console.log("=== CHECKING ORDER RESPONSE STATUS ==="),console.log("Response data status:",(D=W.data)==null?void 0:D.status),console.log("Full response data:",W.data),W.data.status!=="success")throw console.error("=== ORDER RESPONSE STATUS NOT SUCCESS ==="),console.error("Expected: 'success', Got:",W.data.status),console.error("Response message:",W.data.message),console.error("Full response data:",JSON.stringify(W.data,null,2)),new Error(W.data.message||"Failed to create order");const ve=W.data.data.order_id,U=W.data.data.order_number;console.log("Order created successfully. ID:",ve,"Number:",U),console.log("Creating payment intent...");let ne;try{ne=await be.post(`${R}/api/payments/process`,{action:"create_payment_intent",user_id:M,payment_type:"cart_purchase",cart_order_id:ve,amount:o},{headers:{"Content-Type":"application/json"},withCredentials:!0}),console.log("Payment intent response:",ne.data)}catch(Le){throw console.error("Payment intent creation failed:",Le),console.error("Payment intent error response:",(V=Le.response)==null?void 0:V.data),new Error(((G=(O=Le.response)==null?void 0:O.data)==null?void 0:G.message)||Le.message||"Failed to create payment intent")}if(ne.data.status!=="success")throw new Error(ne.data.message||"Failed to create payment intent");const ge=ne.data.data.client_secret,oe=ne.data.data.payment_intent_id;console.log("Payment intent created. ID:",oe);const xe=x.getElement(hd),{error:_e,paymentIntent:ye}=await f.confirmCardPayment(ge,{payment_method:{card:xe,billing_details:{name:(y==null?void 0:y.name)||"Buyer",email:(y==null?void 0:y.email)||"buyer@example.com"}}});if(_e)throw new Error(_e.message);if(ye.status==="succeeded"){const Le=await be.post(`${R}/api/payments/process`,{action:"confirm_payment",payment_intent_id:oe,user_id:M},{headers:{"Content-Type":"application/json"},withCredentials:!0});if(Le.data.status==="success")c({transaction_id:Le.data.data.transaction_id,payment_intent_id:oe,amount:o,order_number:U});else throw new Error(Le.data.message)}else throw new Error(`Payment not completed. Status: ${ye.status}`)}catch(J){console.error("Payment error:",J),console.error("Error details:",(K=J.response)==null?void 0:K.data),console.error("Error status:",(Q=J.response)==null?void 0:Q.status),((ue=J.response)==null?void 0:ue.status)===401||J.message.includes("session has expired")||J.message.includes("Authentication required")?(N("Your session has expired. Redirecting to login..."),d("Your session has expired. Please log in again to complete your purchase."),setTimeout(()=>{logout(),window.location.href="/login"},3e3)):((le=J.response)==null?void 0:le.status)===403?(N("Access denied. Please check your account permissions."),d("Access denied. Please check your account permissions.")):J.message.includes("session has expired")?(N("Your session has expired. Redirecting to login..."),d("Session expired. Please log in again."),setTimeout(()=>{logout(),window.location.href="/login"},2e3)):(z=(de=J.response)==null?void 0:de.data)!=null&&z.message?(N(`${J.response.data.message}`),d(J.response.data.message)):(N(`${J.message||"There was an error processing your payment. Please try again."}`),d(J.message||"There was an error processing your payment. Please try again."))}finally{g(!1)}};return e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[b&&e.jsx("div",{className:`p-3 rounded-lg text-sm ${b.includes("error")||b.includes("failed")||b.includes("expired")||b.includes("denied")?"bg-red-50 text-red-700":"bg-blue-50 text-blue-700"}`,children:b}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Address *"}),e.jsx("textarea",{value:E,onChange:S=>P(S.target.value),placeholder:"Enter your complete shipping address...",className:"w-full border border-gray-300 rounded-lg p-3 bg-white resize-none",rows:"3",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number *"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-white",children:e.jsx(hd,{options:Fh,onChange:S=>{S.error?N(""+S.error.message):N("")}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Date *"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-white",children:e.jsx(b0,{options:Fh,onChange:S=>{S.error?N(""+S.error.message):N("")}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CVV *"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-white",children:e.jsx(v0,{options:Fh,onChange:S=>{S.error?N(""+S.error.message):N("")}})})]})]}),e.jsx("button",{type:"submit",disabled:!f||_,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-semibold py-3 rounded-lg transition duration-200 flex items-center justify-center gap-2",children:_?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Processing Payment..."]}):`Pay ${o.toFixed(2)} LKR`}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Your payment information is secure and encrypted"})]})}function oS(){const{cartItems:l,clearCart:o}=uo(),{user:c,logout:d}=mt(),{forceRefresh:f}=Sd(),x=Lt(),[y,_]=j.useState(!1),[g,b]=j.useState(!1),[N,E]=j.useState(null),[P,R]=j.useState(""),[B,S]=j.useState(!0),[M,F]=j.useState(!0),[I,T]=j.useState(!0);j.useEffect(()=>{(async()=>{try{if(!navigator.onLine){console.log("No internet connection, using mock payment system"),T(!1);return}const Q=new Promise((de,z)=>setTimeout(()=>z(new Error("Timeout")),5e3)),ue=xm("pk_test_51Rnk1kC523WS3olJgTHr67VfyR8w8fRy0kyoeoV257f1zaGdO7Egl1kXOtll5zbMnF1IgV0iRmWPkNlYiDvdesAP00teJxyQKk");await Promise.race([ue,Q])?(console.log("Stripe loaded successfully"),T(!0)):(console.log("Stripe failed to load, using mock payment system"),T(!1))}catch{console.log("Stripe not accessible, using mock payment system"),T(!1)}})()},[]),j.useEffect(()=>{(async()=>{var Q,ue;if(!c){S(!1),F(!1);return}try{(await be.get("http://localhost/FARMMASTER-Backend/api/products",{withCredentials:!0})).status===200&&S(!0)}catch(le){console.log("Session check failed:",(Q=le.response)==null?void 0:Q.status),((ue=le.response)==null?void 0:ue.status)===401&&S(!1)}F(!1)})()},[c]);const H=l.reduce((K,Q)=>K+Q.price*Q.quantity,0),q=H>0?250:0,A=H+q,D=K=>{E(K),_(!0),setTimeout(()=>{console.log("Refreshing products after successful payment..."),f()},2e3)},V=K=>{R(K),b(!0)},O=()=>{_(!1),o(),f(),x("/buyerdashboard")},G=()=>{b(!1)};return M?e.jsx("div",{className:"min-h-screen bg-white p-4 md:p-10 font-poppins flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Checking authentication..."})]})}):!B||!c?e.jsx("div",{className:"min-h-screen bg-white p-4 md:p-10 font-poppins flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-black",children:"Session Expired"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your session has expired. Please log in again to complete your purchase."}),e.jsx(Wt,{to:"/login",className:"inline-block bg-green-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-700 transition mr-4",children:"Login Again"}),e.jsx(Wt,{to:"/marketplace",className:"inline-block bg-gray-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-gray-700 transition",children:"Back to Marketplace"})]})}):c?c.role!=="Buyer"?e.jsx("div",{className:"min-h-screen bg-white p-4 md:p-10 font-poppins flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-black",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Only buyers can make purchases. Please log in with a buyer account."}),e.jsx(Wt,{to:"/login",className:"inline-block bg-green-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-700 transition mr-4",children:"Login as Buyer"}),e.jsx(Wt,{to:"/marketplace",className:"inline-block bg-gray-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-gray-700 transition",children:"Back to Marketplace"})]})}):e.jsxs("div",{className:"min-h-screen bg-white p-4 md:p-10 font-poppins",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-8 text-black",children:"Checkout"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_1px_1fr] gap-8 mt-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6 text-gray-800",children:"Order Summary"}),l.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Your cart is empty."}),e.jsx(Wt,{to:"/marketplace",className:"text-green-600 hover:text-green-700 font-medium",children:"Continue Shopping"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4 mb-6",children:l.map((K,Q)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("img",{src:K.image_url||K.image||md,alt:K.name||"Product image",className:"w-16 h-16 object-contain rounded-md",onError:ue=>{ue.target.src=md,ue.target.onerror=null}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-800",children:K.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[K.quantity," Kg  LKR ",K.price.toFixed(2)]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold text-gray-800",children:["LKR ",(K.price*K.quantity).toFixed(2)]})})]},Q))}),e.jsxs("div",{className:"border-t pt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["LKR ",H.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Shipping"}),e.jsxs("span",{children:["LKR ",q.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-green-700 border-t pt-2",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["LKR ",A.toFixed(2)]})]})]})]})]}),e.jsx("div",{className:"hidden lg:block h-full w-px bg-gray-200"}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6 text-gray-800",children:"Payment Details"}),l.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Add items to your cart to proceed with payment."}):I?e.jsx(gm,{stripe:iS,children:e.jsx(lS,{cartItems:l,totalAmount:A,onSuccess:D,onError:V})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 bg-yellow-100 border border-yellow-400 text-yellow-800 px-4 py-3 rounded",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"font-semibold",children:" Development Mode"})}),e.jsx("p",{className:"text-sm mt-1",children:"Using mock payment system. No real payment will be processed."})]}),e.jsx(rS,{orderData:{orderId:Date.now(),orderNumber:`ORD${Date.now()}`,totalAmount:A},onSuccess:D,onError:V})]})]})]}),e.jsx("div",{className:"mt-8",children:e.jsxs(Wt,{to:"/buyercart",className:"inline-flex items-center gap-2 bg-green-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-700 transition",children:[e.jsx(wn,{size:18}),"Back to Cart"]})}),e.jsx(nS,{isVisible:y,onClose:O,orderData:N}),e.jsx(aS,{isVisible:g,onClose:G,errorMessage:P})]}):e.jsx("div",{className:"min-h-screen bg-white p-4 md:p-10 font-poppins flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-black",children:"Login Required"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You need to be logged in to complete your purchase."}),e.jsx(Wt,{to:"/login",className:"inline-block bg-green-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-700 transition",children:"Go to Login"})]})})}function cS(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(kd,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(oS,{})})]})}function Ar(){const[l,o]=j.useState(!1),[c,d]=j.useState(null),[f,x]=j.useState(!1),y=Lt(),{logout:_}=mt();j.useEffect(()=>{const R=JSON.parse(localStorage.getItem("user"));R&&d(R)},[]);const g="flex items-center gap-3 px-4 py-2 rounded-md transition text-sm font-medium",b="bg-green-100 text-green-700 font-semibold",N="text-black hover:bg-green-50",E=async()=>{try{console.log("Financial Manager logout initiated..."),await _(),console.log("Logout successful, navigating to home..."),y("/",{replace:!0})}catch(R){console.error("Logout failed:",R),y("/",{replace:!0})}finally{x(!1)}},P=()=>{x(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden flex items-start bg-white shadow px-4 py-6",children:e.jsx("button",{className:"cursor-pointer",onClick:()=>o(!0),children:e.jsx(Di,{size:24})})}),e.jsxs("aside",{className:`fixed top-0 left-0 h-full w-64 bg-white shadow-sm font-poppins flex flex-col px-4 py-6 z-50 transform transition-transform ${l?"translate-x-0":"-translate-x-full"} md:translate-x-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(Ee,{to:"/",onClick:()=>o(!1),children:e.jsx("img",{src:Ts,alt:"FarmMaster Logo",className:"h-20 w-auto"})}),e.jsx("button",{className:"md:hidden text-gray-600 cursor-pointer",onClick:()=>o(!1),children:e.jsx(on,{size:24})})]}),e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx("img",{src:mo,alt:"Financial Manager",className:"w-14 h-14 rounded-full object-cover mr-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold",children:(c==null?void 0:c.name)||"Financial Manager"}),e.jsx("p",{className:"text-sm text-green-600",children:"Financial Manager"})]})]}),e.jsxs("nav",{className:"flex flex-col gap-2",children:[e.jsxs(Ee,{to:"/financialmanagerdashboard",className:({isActive:R})=>`${g} ${R?b:N}`,onClick:()=>o(!1),children:[e.jsx(zi,{size:16}),"Dashboard"]}),e.jsxs(Ee,{to:"/financialmanagerpaymentmanagement",className:({isActive:R})=>`${g} ${R?b:N}`,onClick:()=>o(!1),children:[e.jsx(Jg,{size:16}),"Payment Management"]}),e.jsxs(Ee,{to:"/financialmanagerproposals",className:({isActive:R})=>`${g} ${R?b:N}`,onClick:()=>o(!1),children:[e.jsx(C_,{size:16}),"Proposal Management"]}),e.jsxs(Ee,{to:"/financialmanagerprofitrentcalculation",className:({isActive:R})=>`${g} ${R?b:N}`,onClick:()=>o(!1),children:[e.jsx(mm,{size:16}),"Profit Calculation"]}),e.jsxs(Ee,{to:"/financialmanagermarketplaceproducts",className:({isActive:R})=>`${g} ${R?b:N}`,onClick:()=>o(!1),children:[e.jsx(no,{size:16}),"Marketplace Products"]}),e.jsxs(Ee,{to:"/financialmanagerharvestincome",className:({isActive:R})=>`${g} ${R?b:N}`,onClick:()=>o(!1),children:[e.jsx(Nd,{size:16}),"Harvest Income Reports"]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsxs(Ee,{to:"/",className:({isActive:R})=>`${g} ${R?b:N}`,onClick:()=>o(!1),children:[e.jsx(oo,{size:16}),"Go to Home"]}),e.jsxs("button",{className:`${g} text-red-600 hover:bg-red-50 mt-2 cursor-pointer`,onClick:P,children:[e.jsx(co,{size:16}),"Log out"]})]})]}),e.jsx(Qa,{isOpen:f,onClose:()=>x(!1),onConfirm:E,title:"Confirm Logout",message:"Are you sure you want to logout from your Financial Manager account? You will be redirected to the home page.",confirmText:"Yes, Logout",cancelText:"Cancel",type:"warning"})]})}function dS(){const[l,o]=j.useState(""),[c,d]=j.useState({totalPaymentsReceived:0,currentHarvestIncome:0,marketplaceRevenue:0,landReportPayments:0,recentTransactions:[],monthlyTrend:0}),[f,x]=j.useState(!0),[y,_]=j.useState([]),[g,b]=j.useState(!0),[N,E]=j.useState(!0),[P,R]=j.useState([]),[B,S]=j.useState(!0),[M,F]=j.useState(!0);j.useEffect(()=>{const H=JSON.parse(localStorage.getItem("user"));H!=null&&H.name&&o(H.name)},[]),j.useEffect(()=>{(async()=>{b(!0);try{const D=await(await fetch("http://localhost/FARMMASTER-Backend/api/products/new-crops",{credentials:"include"})).json();_(D.data||[])}catch(q){console.error("Error fetching new crops:",q),_([])}b(!1)})()},[]),j.useEffect(()=>{(async()=>{S(!0);try{const D=await(await fetch("http://localhost/FARMMASTER-Backend/api/proposals/pending-financial-review",{credentials:"include"})).json();D.status==="success"?R(D.data||[]):(console.error("Error fetching proposals:",D.message),R([]))}catch(q){console.error("Error fetching new proposals:",q),R([])}S(!1)})()},[]),j.useEffect(()=>{(async()=>{try{const q="http://localhost/FARMMASTER-Backend",A=await fetch(`${q}/api.php/financial-analytics/land-reports`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),D=await fetch(`${q}/api.php/financial-analytics/transactions`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),V=await A.json(),O=await D.json();let G=0,K=0,Q=0,ue=[];O.status==="success"&&O.data.transactions&&(K=O.data.transactions.reduce((de,z)=>de+parseFloat(z.amount||0),0),G+=K),V.status==="success"&&V.data.payments&&(Q=V.data.payments.reduce((de,z)=>de+z.amount,0),G+=Q);const le=[];O.status==="success"&&O.data.transactions&&O.data.transactions.forEach(de=>{le.push({...de,source:"marketplace",sourceLabel:"Marketplace",sourceIcon:"shopping",customer_name:de.first_name&&de.last_name?`${de.first_name} ${de.last_name}`:"Customer"})}),V.status==="success"&&V.data.payments&&V.data.payments.forEach(de=>{le.push({...de,source:"land_report",sourceLabel:"Land Report",sourceIcon:"map",customer_name:de.first_name&&de.last_name?`${de.first_name} ${de.last_name}`:"Landowner",transaction_id:de.transaction_id||de.id,payment_status:de.payment_status||"completed"})}),ue=le.sort((de,z)=>new Date(z.created_at)-new Date(de.created_at)).slice(0,8),console.log("Dashboard Data Summary:",{marketplaceRevenue:K,landReportPayments:Q,totalPayments:G,transactionCount:ue.length}),d({totalPaymentsReceived:G,currentHarvestIncome:Q,marketplaceRevenue:K,landReportPayments:Q,recentTransactions:ue,monthlyTrend:15.2})}catch(q){console.error("Error fetching dashboard data:",q)}finally{x(!1)}})()},[]);const I=()=>{E(!1)},T=()=>{F(!1)};return e.jsxs("div",{className:"p-4 md:p-10 font-poppins",children:[e.jsx("div",{className:"mb-8 mt-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800",children:"Financial Dashboard"}),e.jsxs("p",{className:"text-sm md:text-lg text-green-600 mt-2",children:["Welcome back, ",l||"Financial Manager"]})]})})}),!B&&P.length>0&&M&&e.jsx("div",{className:"mb-6 bg-gradient-to-r from-amber-50 to-yellow-50 border-l-4 border-amber-400 rounded-r-lg shadow-sm",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Qh,{className:"h-6 w-6 text-amber-500 mt-0.5"})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-amber-800",children:" New Proposal Requests for Financial Review"}),e.jsx("button",{onClick:T,className:"text-amber-400 hover:text-amber-600 transition-colors",title:"Dismiss notification",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-amber-700 mb-3",children:[e.jsx("strong",{children:P.length})," proposal",P.length>1?"s":""," waiting for financial review and approval:"]}),e.jsxs("div",{className:"space-y-2 mb-4 max-h-32 overflow-y-auto",children:[P.slice(0,3).map(H=>e.jsxs("div",{className:"bg-white bg-opacity-70 rounded-md px-3 py-2 border border-amber-200 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-sm font-medium text-amber-800",children:["Proposal #",H.proposal_id]}),e.jsxs("span",{className:"text-xs text-amber-600 ml-2",children:["from ",H.landowner_name||"Landowner"]})]}),e.jsx("span",{className:"text-xs text-amber-600",children:new Date(H.created_at).toLocaleDateString()})]},H.proposal_id)),P.length>3&&e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"text-xs text-amber-600 font-medium",children:["+",P.length-3," more proposals"]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(Ee,{to:"/financialmanagerproposalreview",className:"inline-flex items-center px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white text-sm font-medium rounded-lg transition-colors gap-2",children:[e.jsx(Ka,{className:"w-4 h-4"}),"Review Proposals"]}),e.jsx("p",{className:"text-xs text-amber-600 flex items-center",children:" Review and approve financial terms to move proposals forward in the system."})]})]})]})]})})}),!g&&y.length>0&&N&&e.jsx("div",{className:"mb-6 bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-red-400 rounded-r-lg shadow-sm",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(id,{className:"h-6 w-6 text-red-500 mt-0.5"})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-800",children:"New Crops Available for Marketplace"}),e.jsx("button",{onClick:I,className:"text-red-400 hover:text-red-600 transition-colors",title:"Dismiss notification",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-red-700 mb-3",children:[e.jsx("strong",{children:y.length})," new crop",y.length>1?"s have":" has"," been added to inventory:"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 mb-4",children:y.map(H=>e.jsx("div",{className:"bg-white bg-opacity-70 rounded-md px-3 py-2 border border-red-200",children:e.jsx("span",{className:"text-sm font-medium text-red-800",children:H.crop_name})},H.crop_id))}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(Ee,{to:"/financialmanagermarketplaceproducts",className:"inline-flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors gap-2",children:[e.jsx(no,{className:"w-4 h-4"}),"Add to Marketplace"]}),e.jsx("p",{className:"text-xs text-red-600 flex items-center",children:"Add these crops to the marketplace to make them available for buyers and start generating revenue."})]})]})]})]})})}),e.jsxs("div",{className:"mb-10",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-6 text-gray-800",children:"Financial Overview"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border border-green-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-700 font-medium",children:"Total Payments Received"}),e.jsx("p",{className:"text-2xl font-bold mt-1 text-green-800",children:f?"Loading...":`${c.totalPaymentsReceived.toLocaleString()} LKR`})]}),e.jsx(Nd,{className:"w-8 h-8 text-green-600"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"text-xs text-green-600",children:"All revenue sources"})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 border border-emerald-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-emerald-700 font-medium",children:"Land Report Income"}),e.jsx("p",{className:"text-2xl font-bold mt-1 text-emerald-800",children:f?"Loading...":`${c.landReportPayments.toLocaleString()} LKR`})]}),e.jsx(os,{className:"w-8 h-8 text-emerald-600"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"text-xs text-emerald-600",children:"From land analysis reports"})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 border border-teal-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow relative",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-teal-700 font-medium",children:"Marketplace Revenue"}),e.jsx("p",{className:"text-2xl font-bold mt-1 text-teal-800",children:f?"Loading...":`${c.marketplaceRevenue.toLocaleString()} LKR`})]}),e.jsx(Xg,{className:"w-8 h-8 text-teal-600"})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-teal-600",children:"From product sales"}),e.jsxs("div",{className:"flex items-center gap-2",children:[y.length>0&&N&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-red-600 font-medium",children:"New items"})]}),P.length>0&&M&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-amber-600 font-medium",children:"Reviews"})]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-10",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Recent Transactions"}),e.jsx(Ee,{to:"/financialmanagerpaymentmanagement",className:"text-green-600 hover:text-green-700 text-sm font-medium hover:underline",children:"View All"})]}),f?e.jsx("div",{className:"text-center py-6 text-gray-500",children:"Loading transactions..."}):c.recentTransactions.length>0?e.jsxs("div",{className:"space-y-3",children:[c.recentTransactions.map((H,q)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-100 hover:bg-green-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border ${H.source==="marketplace"?"bg-blue-100 border-blue-200":"bg-emerald-100 border-emerald-200"}`,children:H.source==="marketplace"?e.jsx(Ei,{className:"w-5 h-5 text-blue-600"}):e.jsx(Tr,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:H.customer_name}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${H.source==="marketplace"?"bg-blue-100 text-blue-700 border border-blue-200":"bg-emerald-100 text-emerald-700 border border-emerald-200"}`,children:H.sourceLabel})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(H.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),H.source==="land_report"&&H.land_id&&e.jsxs("span",{className:"ml-2",children:[" Land #",H.land_id]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-800",children:["Rs ",parseFloat(H.amount).toLocaleString()]}),e.jsx("p",{className:`text-xs px-2 py-1 rounded-full font-medium ${H.payment_status==="completed"?"bg-green-100 text-green-700 border border-green-200":H.payment_status==="pending"?"bg-yellow-100 text-yellow-700 border border-yellow-200":"bg-red-100 text-red-700 border border-red-200"}`,children:H.payment_status})]})]},`${H.source}-${H.transaction_id||H.id}-${q}`)),c.recentTransactions.length===8&&e.jsx("div",{className:"text-center pt-2",children:e.jsx(Ee,{to:"/financialmanagerpaymentmanagement",className:"text-green-600 hover:text-green-700 text-sm font-medium hover:underline",children:"View more transactions "})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No recent transactions found"}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Transactions will appear here as they are processed"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Quick Actions"}),e.jsxs("div",{className:"flex items-center gap-2",children:[y.length>0&&N&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Items"})]}),P.length>0&&M&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-amber-600 font-medium",children:"Reviews"})]}),y.length>0&&N||P.length>0&&M?e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Action needed"}):null]})]}),e.jsxs("div",{className:"space-y-3",children:[P.length>0&&M&&e.jsxs(Ee,{to:"/financialmanagerproposalreview",className:"flex items-center gap-4 p-4 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 rounded-lg transition-colors group border border-amber-300 hover:border-amber-400 relative",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-600 rounded-lg flex items-center justify-center",children:e.jsx(Ka,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-gray-800 group-hover:text-amber-800",children:"Proposal Review"}),e.jsxs("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:[P.length," pending"]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Review financial terms for new proposals"})]}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full animate-pulse"})})]}),e.jsxs(Ee,{to:"/financialmanagerprofitcalculation",className:"flex items-center gap-4 p-4 bg-gradient-to-r from-green-50 to-green-100 hover:from-green-100 hover:to-green-150 rounded-lg transition-colors group border border-green-200 hover:border-green-300",children:[e.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center",children:e.jsx(mm,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800 group-hover:text-green-800",children:"Profit Calculation"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Calculate monthly profits and expenses"})]})]}),e.jsxs(Ee,{to:"/financialmanagerpayment",className:"flex items-center gap-4 p-4 bg-gradient-to-r from-emerald-50 to-emerald-100 hover:from-emerald-100 hover:to-emerald-150 rounded-lg transition-colors group border border-emerald-200 hover:border-emerald-300",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-600 rounded-lg flex items-center justify-center",children:e.jsx(Jg,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800 group-hover:text-emerald-800",children:"Payment Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Track all system payments"})]})]}),e.jsxs(Ee,{to:"/financialmanagermarketplacefinance",className:"flex items-center gap-4 p-4 bg-gradient-to-r from-teal-50 to-teal-100 hover:from-teal-100 hover:to-teal-150 rounded-lg transition-colors group border border-teal-200 hover:border-teal-300",children:[e.jsx("div",{className:"w-10 h-10 bg-teal-600 rounded-lg flex items-center justify-center",children:e.jsx(h_,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800 group-hover:text-teal-800",children:"Marketplace Finance"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View marketplace earnings"})]})]}),e.jsxs(Ee,{to:"/financialmanagerharvestincome",className:"flex items-center gap-4 p-4 bg-gradient-to-r from-lime-50 to-lime-100 hover:from-lime-100 hover:to-lime-150 rounded-lg transition-colors group border border-lime-200 hover:border-lime-300",children:[e.jsx("div",{className:"w-10 h-10 bg-lime-600 rounded-lg flex items-center justify-center",children:e.jsx(os,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800 group-hover:text-lime-800",children:"Harvest Income"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage harvest income reports"})]})]}),e.jsxs(Ee,{to:"/financialmanagermarketplaceproducts",className:`flex items-center gap-4 p-4 rounded-lg transition-colors group border relative ${y.length>0&&N?"bg-gradient-to-r from-red-50 to-orange-50 hover:from-red-100 hover:to-orange-100 border-red-300 hover:border-red-400":"bg-gradient-to-r from-green-50 to-green-100 hover:from-green-100 hover:to-green-150 border-green-200 hover:border-green-300"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${y.length>0&&N?"bg-red-600":"bg-green-600"}`,children:e.jsx(no,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:`font-medium ${y.length>0&&N?"text-gray-800 group-hover:text-red-800":"text-gray-800 group-hover:text-green-800"}`,children:"Marketplace Products"}),y.length>0&&N&&e.jsxs("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:[y.length," new"]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:y.length>0&&N?"Add new crops to marketplace":"Manage product listings"})]}),y.length>0&&N&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"})})]})]})]})]})]})}function uS(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(Ar,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(dS,{})})]})}function hS(){const[l,o]=j.useState("land-reports"),[c,d]=j.useState([]),[f,x]=j.useState([]),[y,_]=j.useState(!0);return j.useEffect(()=>{(async()=>{try{const E=await(await fetch("http://localhost/FARMMASTER-Backend/api.php/financial-analytics/land-reports",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}})).json();E.status==="success"?d(E.data.payments||[]):(console.error("Failed to fetch land report payments:",E.message),d([]))}catch(b){console.error("Error fetching land report payments:",b),d([])}})()},[]),j.useEffect(()=>{(async()=>{try{const E=await(await fetch("http://localhost/FARMMASTER-Backend/api.php/financial-analytics/transactions",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}})).json();if(E.status==="success"){const P=E.data.transactions||[];x(P);const R=P.reduce((B,S)=>B+parseFloat(S.amount||0),0);console.log("PaymentManagement - Marketplace Revenue:",R),console.log("PaymentManagement - Transaction count:",P.length)}else console.error("Failed to fetch marketplace payments:",E.message)}catch(b){console.error("Error fetching marketplace payments:",b)}finally{_(!1)}})()},[]),e.jsxs("div",{className:"flex-1 bg-white min-h-screen p-4 md:p-10 font-poppins",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-black mb-2 mt-4",children:"Payment Management"}),e.jsx("p",{className:"text-green-700 mb-6 text-sm",children:"Manage and track all payments within the FarmMaster system."}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"border rounded-md p-6 shadow-sm text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Land Report Payments"}),e.jsxs("p",{className:"text-2xl font-bold mt-1 text-green-600",children:["LKR ",c.reduce((g,b)=>g+b.amount,0).toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[c.length," transactions"]})]}),e.jsxs("div",{className:"border rounded-md p-6 shadow-sm text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Marketplace Revenue"}),e.jsxs("p",{className:"text-2xl font-bold mt-1 text-blue-600",children:["LKR ",f.reduce((g,b)=>g+parseFloat(b.amount||0),0).toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[f.length," transactions"]})]}),e.jsxs("div",{className:"border rounded-md p-6 shadow-sm text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed Transactions"}),e.jsx("p",{className:"text-2xl font-bold mt-1 text-green-600",children:[...c.filter(g=>g.payment_status==="completed"),...f.filter(g=>g.payment_status==="completed")].length})]}),e.jsxs("div",{className:"border rounded-md p-6 shadow-sm text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Transactions"}),e.jsx("p",{className:"text-2xl font-bold mt-1 text-yellow-600",children:[...c.filter(g=>g.payment_status==="pending"),...f.filter(g=>g.payment_status==="pending")].length})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>o("land-reports"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${l==="land-reports"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Land Report Payments"}),e.jsx("button",{onClick:()=>o("marketplace"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${l==="marketplace"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Marketplace Payments"})]})})}),y&&e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"text-gray-500",children:"Loading payment data..."})}),!y&&l==="land-reports"&&e.jsx("div",{className:"overflow-x-auto bg-white border rounded-xl shadow-sm",children:e.jsxs("table",{className:"min-w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-green-50 text-black font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 whitespace-nowrap",children:"Transaction ID"}),e.jsx("th",{className:"px-6 py-4 whitespace-nowrap",children:"Landowner"}),e.jsx("th",{className:"px-6 py-4 whitespace-nowrap",children:"Amount"}),e.jsx("th",{className:"px-6 py-4 whitespace-nowrap",children:"Date"}),e.jsx("th",{className:"px-6 py-4 whitespace-nowrap",children:"Land ID"}),e.jsx("th",{className:"px-6 py-4 whitespace-nowrap",children:"Status"})]})}),e.jsx("tbody",{children:c.length>0?c.map(g=>e.jsxs("tr",{className:"border-t hover:bg-green-50",children:[e.jsx("td",{className:"px-6 py-4",children:g.transaction_id||g.id}),e.jsx("td",{className:"px-6 py-4",children:g.first_name&&g.last_name?`${g.first_name} ${g.last_name}`:"Landowner"}),e.jsxs("td",{className:"px-6 py-4",children:["LKR ",g.amount.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4",children:new Date(g.created_at).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4",children:["Land #",g.land_id]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-4 py-1 rounded-full text-xs font-semibold block text-center w-fit ${g.payment_status==="completed"?"bg-green-100 text-green-700":g.payment_status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:g.payment_status})})]},g.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"No land report payments found"})})})]})}),!y&&l==="marketplace"&&e.jsx("div",{className:"overflow-x-auto bg-white border rounded-xl shadow-sm",children:e.jsxs("table",{className:"min-w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-green-50 text-black font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 whitespace-nowrap",children:"Transaction ID"}),e.jsx("th",{className:"px-6 py-4 whitespace-nowrap",children:"Buyer"}),e.jsx("th",{className:"px-6 py-4 whitespace-nowrap",children:"Amount"}),e.jsx("th",{className:"px-6 py-4 whitespace-nowrap",children:"Date"}),e.jsx("th",{className:"px-6 py-4 whitespace-nowrap",children:"Payment Method"}),e.jsx("th",{className:"px-6 py-4 whitespace-nowrap",children:"Status"})]})}),e.jsx("tbody",{children:f.length>0?f.map(g=>e.jsxs("tr",{className:"border-t hover:bg-green-50",children:[e.jsx("td",{className:"px-6 py-4",children:g.transaction_id||g.id}),e.jsx("td",{className:"px-6 py-4",children:g.first_name&&g.last_name?`${g.first_name} ${g.last_name}`:"Buyer"}),e.jsxs("td",{className:"px-6 py-4",children:["LKR ",parseFloat(g.amount).toLocaleString()]}),e.jsx("td",{className:"px-6 py-4",children:new Date(g.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:g.payment_method||"N/A"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-4 py-1 rounded-full text-xs font-semibold block text-center w-fit ${g.payment_status==="completed"?"bg-green-100 text-green-700":g.payment_status==="pending"?"bg-yellow-100 text-yellow-700":g.payment_status==="failed"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:g.payment_status})})]},g.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"No marketplace payments found"})})})]})})]})}function mS(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(Ar,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(hS,{})})]})}function fS(){const[l,o]=j.useState(new Date().getFullYear().toString()),[c,d]=j.useState((new Date().getMonth()+1).toString()),[f,x]=j.useState(""),[y,_]=j.useState(""),[g,b]=j.useState(""),[N,E]=j.useState(""),[P,R]=j.useState(""),[B,S]=j.useState(!1),[M,F]=j.useState({isOpen:!1,type:"info",title:"",message:""}),I=()=>{const G=parseFloat(f)||0,K=parseFloat(y)||0,Q=G+K,ue=parseFloat(g)||0,le=parseFloat(N)||0,de=parseFloat(P)||0,z=ue+le+de,J=Q-z,W=J,ve=Q>0?W/Q*100:0,U=Q>0?z/Q*100:0,ne=15,ge=z,oe=Q>ge?Q-ge:0,xe=Q>0?oe/Q*100:0,_e=de,ye=ue+le,Le=Q>0?z/(Q/100):0,De=Q>0?W/Q*100:0,Tt=z>0?Q/z:0,cs=W>0?"Profitable":W===0?"Break-even":"Loss",je=ve>=20?"Excellent":ve>=15?"Good":ve>=10?"Average":ve>=5?"Below Average":"Poor",He=Q*12,Ze=z*12,Be=W*12;return{totalIncome:Q,totalExpenses:z,netProfit:W,grossProfit:J,productSalesIncome:G,landReportIncome:K,wagesExpense:ue,harvestExpense:le,rentalExpense:de,fixedCosts:_e,variableCosts:ye,profitMargin:ve,expenseRatio:U,returnOnRevenue:De,costEfficiencyRatio:Tt,revenueGrowthRate:ne,breakEvenPoint:ge,marginOfSafety:oe,marginOfSafetyPercent:xe,averageCostPerUnit:Le,performanceStatus:cs,profitabilityGrade:je,annualProjectedIncome:He,annualProjectedExpenses:Ze,annualProjectedProfit:Be}},T=(G,K,Q)=>{F({isOpen:!0,type:G,title:K,message:Q})},H=()=>{F({...M,isOpen:!1})},q=()=>{x(""),_(""),b(""),E(""),R("")},A=()=>{if(O.totalIncome===0&&O.totalExpenses===0){T("warning","Missing Data","Please enter some income or expense data before generating a summary.");return}S(!0),T("success","Summary Generated","Financial summary has been successfully generated and is now displayed.")},D=()=>{if(O.totalIncome===0&&O.totalExpenses===0){T("warning","Missing Data","Please enter some income or expense data before printing.");return}const G=window.open("","_blank"),K=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),Q=new Date(parseInt(l),parseInt(c)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"});G.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>FARMMASTER - Profit Calculation Summary</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              color: #333;
              line-height: 1.4;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #2563eb;
              padding-bottom: 20px;
              margin-bottom: 30px;
            }
            .company-name {
              font-size: 28px;
              font-weight: bold;
              color: #2563eb;
              margin-bottom: 5px;
            }
            .report-title {
              font-size: 20px;
              font-weight: bold;
              color: #374151;
              margin-bottom: 10px;
            }
            .period-info {
              font-size: 14px;
              color: #6b7280;
            }
            .summary-section {
              margin-bottom: 25px;
              page-break-inside: avoid;
            }
            .section-title {
              font-size: 18px;
              font-weight: bold;
              color: #374151;
              margin-bottom: 15px;
              padding-bottom: 5px;
              border-bottom: 1px solid #e5e7eb;
            }
            .kpi-grid {
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
              gap: 15px;
              margin-bottom: 20px;
            }
            .kpi-card {
              border: 1px solid #e5e7eb;
              border-radius: 8px;
              padding: 15px;
              text-align: center;
            }
            .kpi-label {
              font-size: 12px;
              color: #6b7280;
              margin-bottom: 5px;
            }
            .kpi-value {
              font-size: 18px;
              font-weight: bold;
              margin-bottom: 3px;
            }
            .kpi-subtitle {
              font-size: 10px;
              color: #9ca3af;
            }
            .income-section, .expense-section {
              background-color: #f9fafb;
              padding: 15px;
              border-radius: 8px;
              margin-bottom: 15px;
            }
            .income-section {
              border-left: 4px solid #10b981;
            }
            .expense-section {
              border-left: 4px solid #ef4444;
            }
            .financial-row {
              display: flex;
              justify-content: space-between;
              margin-bottom: 8px;
              font-size: 14px;
            }
            .financial-row.total {
              border-top: 1px solid #d1d5db;
              padding-top: 8px;
              font-weight: bold;
            }
            .profit-highlight {
              background-color: ${O.netProfit>=0?"#dcfce7":"#fee2e2"};
              color: ${O.netProfit>=0?"#166534":"#991b1b"};
              padding: 15px;
              border-radius: 8px;
              text-align: center;
              font-size: 24px;
              font-weight: bold;
              margin: 20px 0;
            }
            .recommendations {
              background-color: #eff6ff;
              padding: 15px;
              border-radius: 8px;
              border-left: 4px solid #3b82f6;
            }
            .recommendations ul {
              margin: 10px 0 0 0;
              padding-left: 20px;
            }
            .recommendations li {
              margin-bottom: 5px;
              font-size: 14px;
            }
            .footer {
              margin-top: 30px;
              text-align: center;
              font-size: 12px;
              color: #6b7280;
              border-top: 1px solid #e5e7eb;
              padding-top: 15px;
            }
            @media print {
              body { margin: 0; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="company-name">FARMMASTER</div>
            <div class="report-title">Profit Calculation Summary</div>
            <div class="period-info">
              <strong>Period:</strong> ${Q}<br>
              <strong>Generated:</strong> ${K}
            </div>
          </div>

          <div class="summary-section">
            <div class="section-title">Key Performance Indicators</div>
            <div class="kpi-grid">
              <div class="kpi-card">
                <div class="kpi-label">Performance Status</div>
                <div class="kpi-value" style="color: ${O.performanceStatus==="Profitable"?"#059669":O.performanceStatus==="Break-even"?"#d97706":"#dc2626"}">${O.performanceStatus}</div>
                <div class="kpi-subtitle">${O.profitabilityGrade}</div>
              </div>
              <div class="kpi-card">
                <div class="kpi-label">Net Profit</div>
                <div class="kpi-value" style="color: ${O.netProfit>=0?"#2563eb":"#dc2626"}">Rs ${O.netProfit.toLocaleString()}</div>
                <div class="kpi-subtitle">Monthly</div>
              </div>
              <div class="kpi-card">
                <div class="kpi-label">Profit Margin</div>
                <div class="kpi-value" style="color: #7c3aed">${O.profitMargin.toFixed(1)}%</div>
                <div class="kpi-subtitle">Return on Revenue</div>
              </div>
              <div class="kpi-card">
                <div class="kpi-label">Cost Efficiency</div>
                <div class="kpi-value" style="color: #4338ca">${O.costEfficiencyRatio.toFixed(2)}x</div>
                <div class="kpi-subtitle">Revenue per Cost</div>
              </div>
              <div class="kpi-card">
                <div class="kpi-label">Break-even Point</div>
                <div class="kpi-value" style="color: #ea580c">Rs ${O.breakEvenPoint.toLocaleString()}</div>
                <div class="kpi-subtitle">Required Revenue</div>
              </div>
            </div>
          </div>

          <div class="profit-highlight">
            Net Profit: Rs ${O.netProfit.toLocaleString()}
            (${O.profitMargin.toFixed(1)}% Profit Margin)
          </div>

          <div class="summary-section">
            <div class="section-title">Financial Breakdown</div>
            
            <div class="income-section">
              <h4 style="color: #059669; margin-bottom: 10px;">Income Sources</h4>
              <div class="financial-row">
                <span>Product Sales:</span>
                <span>Rs ${O.productSalesIncome.toLocaleString()}</span>
              </div>
              <div class="financial-row">
                <span>Land Reports:</span>
                <span>Rs ${O.landReportIncome.toLocaleString()}</span>
              </div>
              <div class="financial-row total">
                <span>Total Income:</span>
                <span>Rs ${O.totalIncome.toLocaleString()}</span>
              </div>
            </div>

            <div class="expense-section">
              <h4 style="color: #dc2626; margin-bottom: 10px;">Expenses</h4>
              <div class="financial-row">
                <span>Workers' Wages:</span>
                <span>Rs ${O.wagesExpense.toLocaleString()}</span>
              </div>
              <div class="financial-row">
                <span>Harvest Costs:</span>
                <span>Rs ${O.harvestExpense.toLocaleString()}</span>
              </div>
              <div class="financial-row">
                <span>Land Rental:</span>
                <span>Rs ${O.rentalExpense.toLocaleString()}</span>
              </div>
              <div class="financial-row total">
                <span>Total Expenses:</span>
                <span>Rs ${O.totalExpenses.toLocaleString()}</span>
              </div>
            </div>
          </div>

          <div class="summary-section">
            <div class="section-title">Annual Projections</div>
            <div class="financial-row">
              <span>Projected Annual Income:</span>
              <span>Rs ${O.annualProjectedIncome.toLocaleString()}</span>
            </div>
            <div class="financial-row">
              <span>Projected Annual Expenses:</span>
              <span>Rs ${O.annualProjectedExpenses.toLocaleString()}</span>
            </div>
            <div class="financial-row total" style="font-size: 16px;">
              <span>Projected Annual Profit:</span>
              <span style="color: ${O.annualProjectedProfit>=0?"#059669":"#dc2626"}">Rs ${O.annualProjectedProfit.toLocaleString()}</span>
            </div>
          </div>

          <div class="recommendations">
            <h4 style="color: #2563eb; margin-bottom: 10px;">Recommendations & Action Items</h4>
            <ul>
              <li>${O.netProfit>0?"Great job! Consider reinvesting profits to expand operations":"Focus on increasing income streams or reducing operational costs"}</li>
              <li>${O.profitMargin>=15?"Excellent profit margins - maintain current efficiency":"Improve profit margins through cost optimization and pricing strategies"}</li>
              <li>${O.marginOfSafetyPercent>=20?"Good safety margin provides business stability":"Consider diversifying income sources to reduce risk"}</li>
              <li>${O.costEfficiencyRatio>=1.5?"Efficient cost management":"Review and optimize operational expenses"}</li>
            </ul>
          </div>

          <div class="footer">
            <p><strong>FARMMASTER</strong> - Agricultural Financial Management System</p>
            <p>This report is generated automatically based on the provided financial data.</p>
            <p> ${new Date().getFullYear()} FARMMASTER. All rights reserved.</p>
          </div>
        </body>
      </html>
    `),G.document.close(),G.focus(),setTimeout(()=>{G.print(),G.close(),T("success","Print Initiated","Financial summary has been sent to your printer successfully.")},250)},V=()=>{q(),o(new Date().getFullYear().toString()),d((new Date().getMonth()+1).toString()),T("info","Form Cleared","All fields have been cleared and reset to current date."),console.log("Form cleared successfully")},O=I();return e.jsxs("div",{className:"flex-1 bg-white min-h-screen p-4 md:p-10 font-poppins",children:[e.jsx("style",{jsx:!0,children:`
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }
        
        input[type="number"] {
          -moz-appearance: textfield;
        }
      `}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-black mb-2 mt-4",children:"Profit Calculation"}),e.jsx("p",{className:"text-green-700 text-sm mb-6",children:"Enter income and expense data to calculate company profit."}),e.jsxs("div",{className:"mb-8 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Select Time Period"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Year"}),e.jsx("select",{value:l,onChange:G=>o(G.target.value),className:"w-full bg-white border border-gray-300 rounded-md px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:Array.from({length:10},(G,K)=>{const Q=new Date().getFullYear()-5+K;return e.jsx("option",{value:Q.toString(),children:Q},Q)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Month"}),e.jsx("select",{value:c,onChange:G=>d(G.target.value),className:"w-full bg-white border border-gray-300 rounded-md px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[{value:"1",label:"January"},{value:"2",label:"February"},{value:"3",label:"March"},{value:"4",label:"April"},{value:"5",label:"May"},{value:"6",label:"June"},{value:"7",label:"July"},{value:"8",label:"August"},{value:"9",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}].map(G=>e.jsx("option",{value:G.value,children:G.label},G.value))})]})]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Selected Period:"})," ",new Date(parseInt(l),parseInt(c)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-green-50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-semibold text-green-700 mb-6",children:"Income Sources"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-green-600 mb-2",children:"Monthly Product Sales Income (LKR)"}),e.jsx("input",{type:"number",value:f,onChange:G=>x(G.target.value),className:"w-full bg-white border border-green-200 rounded-md px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-green-400",placeholder:"Enter monthly product sales income"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-green-600 mb-2",children:"Land Report Payment Income (LKR)"}),e.jsx("input",{type:"number",value:y,onChange:G=>_(G.target.value),className:"w-full bg-white border border-green-200 rounded-md px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-green-400",placeholder:"Enter land report payment income"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-green-100 rounded-md",children:[e.jsx("h3",{className:"font-semibold text-green-700 mb-2",children:"Total Income"}),e.jsxs("p",{className:"text-2xl font-bold text-green-800",children:["Rs ",O.totalIncome.toLocaleString()]}),e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Product Sales (%):"}),e.jsxs("span",{children:[O.totalIncome>0?(O.productSalesIncome/O.totalIncome*100).toFixed(1):0,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Land Reports (%):"}),e.jsxs("span",{children:[O.totalIncome>0?(O.landReportIncome/O.totalIncome*100).toFixed(1):0,"%"]})]})]})]})]})]}),e.jsxs("div",{className:"bg-red-50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-semibold text-red-700 mb-6",children:"Expenses"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-red-600 mb-2",children:"Workers' Wages (LKR)"}),e.jsx("input",{type:"number",value:g,onChange:G=>b(G.target.value),className:"w-full bg-white border border-red-200 rounded-md px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-red-400",placeholder:"Enter total workers' wages"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-red-600 mb-2",children:"Harvest Cost (LKR)"}),e.jsx("input",{type:"number",value:N,onChange:G=>E(G.target.value),className:"w-full bg-white border border-red-200 rounded-md px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-red-400",placeholder:"Enter harvest costs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-red-600 mb-2",children:"Land Rental (LKR)"}),e.jsx("input",{type:"number",value:P,onChange:G=>R(G.target.value),className:"w-full bg-white border border-red-200 rounded-md px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-red-400",placeholder:"Enter land rental costs"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-red-100 rounded-md",children:[e.jsx("h3",{className:"font-semibold text-red-700 mb-2",children:"Total Expenses"}),e.jsxs("p",{className:"text-2xl font-bold text-red-800",children:["Rs ",O.totalExpenses.toLocaleString()]}),e.jsxs("div",{className:"mt-2 text-sm text-red-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fixed Costs:"}),e.jsxs("span",{children:["Rs ",O.fixedCosts.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Variable Costs:"}),e.jsxs("span",{children:["Rs ",O.variableCosts.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Expense Ratio:"}),e.jsxs("span",{children:[O.expenseRatio.toFixed(1),"%"]})]})]})]})]})]})]}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Key Performance Indicators"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 text-center",children:[e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Performance Status"}),e.jsx("p",{className:`text-lg font-bold ${O.performanceStatus==="Profitable"?"text-green-700":O.performanceStatus==="Break-even"?"text-yellow-700":"text-red-700"}`,children:O.performanceStatus}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:O.profitabilityGrade})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Net Profit"}),e.jsxs("p",{className:`text-lg font-bold ${O.netProfit>=0?"text-blue-700":"text-red-700"}`,children:["Rs ",O.netProfit.toLocaleString()]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Monthly"})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Profit Margin"}),e.jsxs("p",{className:"text-lg font-bold text-purple-700",children:[O.profitMargin.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Return on Revenue"})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Cost Efficiency"}),e.jsxs("p",{className:"text-lg font-bold text-indigo-700",children:[O.costEfficiencyRatio.toFixed(2),"x"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Revenue per Cost"})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Break-even Point"}),e.jsxs("p",{className:"text-lg font-bold text-orange-700",children:["Rs ",O.breakEvenPoint.toLocaleString()]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Required Revenue"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Profitability Analysis"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Gross Profit:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["Rs ",O.grossProfit.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Return on Revenue:"}),e.jsxs("span",{className:"font-semibold text-blue-600",children:[O.returnOnRevenue.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Margin of Safety:"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:["Rs ",O.marginOfSafety.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Safety Margin %:"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:[O.marginOfSafetyPercent.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-gray-600",children:"Avg. Cost per Unit:"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:["Rs ",O.averageCostPerUnit.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Annual Projections"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Projected Annual Income:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["Rs ",O.annualProjectedIncome.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Projected Annual Expenses:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["Rs ",O.annualProjectedExpenses.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Projected Annual Profit:"}),e.jsxs("span",{className:`font-semibold ${O.annualProjectedProfit>=0?"text-blue-600":"text-red-600"}`,children:["Rs ",O.annualProjectedProfit.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Revenue Growth Rate:"}),e.jsxs("span",{className:"font-semibold text-indigo-600",children:[O.revenueGrowthRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-gray-600",children:"Monthly Avg. Needed:"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:["Rs ",O.breakEvenPoint.toLocaleString()]})]})]})]})]})]}),e.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-indigo-50 to-blue-50 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Strategic Recommendations"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-indigo-700 mb-2",children:"Growth Opportunities"}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxs("li",{children:[" ",O.productSalesIncome>O.landReportIncome?"Focus on expanding product sales channels":"Consider increasing product sales volume"]}),e.jsxs("li",{children:[" Target ",O.revenueGrowthRate,"% revenue growth for next period"]}),e.jsx("li",{children:" Optimize cost structure to improve margins"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-700 mb-2",children:"Risk Management"}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxs("li",{children:[" ",O.fixedCosts>O.variableCosts?"Consider reducing fixed costs":"Monitor variable cost fluctuations"]}),e.jsxs("li",{children:[" Maintain safety margin above ",O.marginOfSafetyPercent.toFixed(0),"%"]}),e.jsx("li",{children:" Diversify revenue streams to reduce dependency"})]})]})]})]}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-4",children:[e.jsx("button",{onClick:A,className:"bg-blue-600 text-white px-8 py-3 rounded-md font-semibold hover:bg-blue-700 transition-colors flex items-center gap-2",children:"Show Summary"}),e.jsx("button",{onClick:V,className:"bg-gray-600 text-white px-8 py-3 rounded-md font-semibold hover:bg-gray-700 transition-colors",children:"Clear All"})]}),B&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Profit Calculation Summary"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Period: ",new Date(parseInt(l),parseInt(c)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]}),e.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600 text-2xl font-bold w-8 h-8 flex items-center justify-center",children:""})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Performance Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${O.performanceStatus==="Profitable"?"text-green-600":O.performanceStatus==="Break-even"?"text-yellow-600":"text-red-600"}`,children:O.performanceStatus}),e.jsxs("div",{className:"text-sm text-gray-600",children:[O.profitabilityGrade," Performance"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-2xl font-bold ${O.netProfit>=0?"text-green-600":"text-red-600"}`,children:["Rs ",O.netProfit.toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Net Profit"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[O.profitMargin.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Profit Margin"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-700 mb-3",children:"Income Sources"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-green-600",children:"Product Sales:"}),e.jsxs("span",{className:"font-semibold text-green-700",children:["Rs ",O.productSalesIncome.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-green-600",children:"Land Reports:"}),e.jsxs("span",{className:"font-semibold text-green-700",children:["Rs ",O.landReportIncome.toLocaleString()]})]}),e.jsx("div",{className:"border-t border-green-200 pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold text-green-700",children:"Total Income:"}),e.jsxs("span",{className:"font-bold text-green-800",children:["Rs ",O.totalIncome.toLocaleString()]})]})})]})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-700 mb-3",children:"Expenses"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-red-600",children:"Workers' Wages:"}),e.jsxs("span",{className:"font-semibold text-red-700",children:["Rs ",O.wagesExpense.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-red-600",children:"Harvest Costs:"}),e.jsxs("span",{className:"font-semibold text-red-700",children:["Rs ",O.harvestExpense.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-red-600",children:"Land Rental:"}),e.jsxs("span",{className:"font-semibold text-red-700",children:["Rs ",O.rentalExpense.toLocaleString()]})]}),e.jsx("div",{className:"border-t border-red-200 pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold text-red-700",children:"Total Expenses:"}),e.jsxs("span",{className:"font-bold text-red-800",children:["Rs ",O.totalExpenses.toLocaleString()]})]})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-700 mb-3",children:"Key Metrics"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-blue-600",children:"Return on Revenue:"}),e.jsxs("span",{className:"font-semibold text-blue-700",children:[O.returnOnRevenue.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-blue-600",children:"Cost Efficiency:"}),e.jsxs("span",{className:"font-semibold text-blue-700",children:[O.costEfficiencyRatio.toFixed(2),"x"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-blue-600",children:"Break-even Point:"}),e.jsxs("span",{className:"font-semibold text-blue-700",children:["Rs ",O.breakEvenPoint.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-blue-600",children:"Margin of Safety:"}),e.jsxs("span",{className:"font-semibold text-blue-700",children:[O.marginOfSafetyPercent.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-700 mb-3",children:"Annual Projections"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-purple-600",children:"Projected Income:"}),e.jsxs("span",{className:"font-semibold text-purple-700",children:["Rs ",O.annualProjectedIncome.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-purple-600",children:"Projected Expenses:"}),e.jsxs("span",{className:"font-semibold text-purple-700",children:["Rs ",O.annualProjectedExpenses.toLocaleString()]})]}),e.jsx("div",{className:"border-t border-purple-200 pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold text-purple-700",children:"Projected Profit:"}),e.jsxs("span",{className:`font-bold ${O.annualProjectedProfit>=0?"text-green-600":"text-red-600"}`,children:["Rs ",O.annualProjectedProfit.toLocaleString()]})]})})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-indigo-700 mb-3",children:"Smart Insights & Recommendations"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-indigo-600 mb-2",children:"Business Health"}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxs("li",{children:[" Your business is currently ",e.jsx("strong",{children:O.performanceStatus.toLowerCase()})," with ",e.jsx("strong",{children:O.profitabilityGrade.toLowerCase()})," performance"]}),e.jsxs("li",{children:[" Product sales contribute ",e.jsxs("strong",{children:[O.totalIncome>0?(O.productSalesIncome/O.totalIncome*100).toFixed(1):0,"%"]})," of total income"]}),e.jsxs("li",{children:[" ",O.fixedCosts>O.variableCosts?"Fixed costs dominate your expense structure":"Variable costs are your main expense"]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-indigo-600 mb-2",children:"Action Items"}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[e.jsx("li",{children:O.netProfit>0?"Great job! Consider reinvesting profits":"Focus on increasing income or reducing costs"}),e.jsx("li",{children:O.profitMargin>=15?"Excellent profit margins":"Improve profit margins through optimization"}),e.jsx("li",{children:O.marginOfSafetyPercent>=20?"Good safety margin for stability":"Consider diversifying income sources"})]})]})]})]})]}),e.jsx("div",{className:"border-t border-gray-200 p-6 bg-gray-50 rounded-b-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Generated on ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:D,className:"bg-green-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors flex items-center gap-2",children:"Print Summary"}),e.jsx("button",{onClick:()=>S(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-blue-700 transition-colors",children:"Close Summary"})]})]})})]})}),e.jsx(Xa,{isOpen:M.isOpen,onClose:H,type:M.type,title:M.title,message:M.message,autoClose:!0,autoCloseDelay:4e3})]})}function pS(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(Ar,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(fS,{})})]})}const xS="http://localhost/FARMMASTER-Backend",gS=({product:l,onSave:o,onCancel:c})=>{if(!l||!l.product_id)return e.jsx("p",{className:"text-red-600",children:"Invalid product data. Cannot edit."});const[d,f]=j.useState({product_id:"",crop_name:"",price_per_unit:"",quantity:"",description:"",image_url:l.image_url||"",is_featured:!!l.is_featured}),[x,y]=j.useState(null),[_,g]=j.useState(l.image_url||"");j.useEffect(()=>{l&&(f({product_id:l.product_id,crop_name:l.crop_name||"",price_per_unit:l.price_per_unit||"",quantity:l.quantity||"",description:l.description||"",image_url:l.image_url||"",is_featured:!!l.is_featured}),g(l.image_url||""),y(null))},[l]);const b=R=>{const{name:B,value:S,type:M,checked:F}=R.target;f(M==="checkbox"?I=>({...I,[B]:F}):I=>({...I,[B]:S}))},N=R=>{const B=R.target.files[0];if(y(B),B){const S=new FileReader;S.onloadend=()=>{g(S.result)},S.readAsDataURL(B)}else g(d.image_url||"")},E=()=>{g(l.image_url||""),y(null),c()},P=async R=>{var F;R.preventDefault();const B={price_per_unit:d.price_per_unit,description:d.description,is_featured:d.is_featured?1:0},S=`${xS}/api/products/${d.product_id}`,M=new FormData;Object.entries(B).forEach(([I,T])=>{M.append(I,T)}),M.append("_method","PUT"),x&&M.append("image",x);try{const I=await be.post(S,M,{withCredentials:!0});if(I.data.status==="success"){const T=((F=I.data.data)==null?void 0:F.image_url)||d.image_url;o({...d,image_url:T})}else I.data.status==="info"?o({...d,error:I.data.message}):o({...d,error:I.data.message||"Failed to update product."})}catch(I){I.response&&I.response.data&&I.response.data.message?o({...d,error:I.response.data.message}):o({...d,error:"Failed to connect to the server."})}};return e.jsxs("form",{onSubmit:P,className:"bg-white p-4 shadow rounded mb-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-semibold",children:"Product ID (Can't Change)"}),e.jsx("input",{name:"product_id",value:d.product_id,readOnly:!0,className:"w-full border p-2 rounded bg-gray-100"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-semibold",children:"Crop Name"}),e.jsx("input",{name:"crop_name",value:d.crop_name,readOnly:!0,className:"w-full border p-2 rounded bg-gray-100"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-semibold",children:"Price Per Unit (Rs.)"}),e.jsx("input",{name:"price_per_unit",value:d.price_per_unit,onChange:b,className:"w-full border p-2 rounded",type:"text",pattern:"^\\d+(\\.\\d{0,2})?$",required:!0,inputMode:"decimal",autoComplete:"off"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-semibold",children:"Quantity (Kg) (Can't Change)"}),e.jsx("input",{name:"quantity",value:Number(d.quantity)===0?"No inventory (Sold out)":d.quantity,readOnly:!0,className:`w-full border p-2 rounded bg-gray-100 ${Number(d.quantity)===0?"text-red-700 font-bold":""}`,type:"text"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-semibold",children:"Description"}),e.jsx("textarea",{name:"description",value:d.description,onChange:b,className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-semibold",children:"Status (auto-set)"}),e.jsx("input",{name:"status",value:Number(d.quantity)===0?"Sold":"Available",readOnly:!0,className:`w-full border p-2 rounded ${Number(d.quantity)===0?"bg-red-100 text-red-700 font-bold":"bg-gray-100"}`})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-semibold",children:"Product Image"}),e.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:N,className:"w-full border p-2 rounded"}),_&&e.jsx("img",{src:_,alt:"Product Preview",className:"mt-2 w-24 h-24 object-contain"})]}),e.jsx("div",{className:"mb-2",children:e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("span",{className:"font-semibold mr-3",children:"Set as Featured Product"}),e.jsx("button",{type:"button",className:`w-12 h-6 flex items-center rounded-full px-1 transition-colors duration-200 ${d.is_featured?"bg-green-500":"bg-gray-300"}`,onClick:()=>f(R=>({...R,is_featured:!R.is_featured})),"aria-pressed":d.is_featured,children:e.jsx("span",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 ${d.is_featured?"translate-x-6":""}`})})]})}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded cursor-pointer",children:"Update Product"}),e.jsx("button",{type:"button",onClick:E,className:"text-gray-600 px-4 py-2 cursor-pointer",children:"Cancel"})]})]})},og="http://localhost/FARMMASTER-Backend",yS=({onProductAdded:l,onCancel:o})=>{const[c,d]=j.useState([]),[f,x]=j.useState(!0),[y,_]=j.useState({crop_id:"",price_per_unit:"",description:"",image:null,is_featured:!1}),[g,b]=j.useState(""),[N,E]=j.useState("");j.useEffect(()=>{(async()=>{x(!0);try{const F=(await be.get(`${og}/api/products/new-crops`,{withCredentials:!0})).data.data||[];d(F),x(!1)}catch{E("Failed to fetch crop data."),x(!1)}})()},[]);const P=S=>{const{name:M,value:F,files:I,type:T,checked:H}=S.target;if(M==="image"){const q=I[0];if(_(A=>({...A,image:q})),q){const A=new FileReader;A.onloadend=()=>{b(A.result)},A.readAsDataURL(q)}else b("")}else _(T==="checkbox"?q=>({...q,[M]:H}):q=>({...q,[M]:F}))},R=async S=>{if(S.preventDefault(),!y.crop_id){E("Please select a crop.");return}if(!y.price_per_unit||!y.description){E("Please enter price and description.");return}const M=new FormData;M.append("crop_id",y.crop_id),M.append("price_per_unit",y.price_per_unit),M.append("description",y.description),M.append("is_featured",y.is_featured?1:0),y.image&&M.append("image",y.image);try{const F=await be.post(`${og}/api/products`,M,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});F.data.status==="success"?(E("Product added successfully!"),_({crop_id:"",price_per_unit:"",description:"",image:null,is_featured:!1}),b(""),l&&l()):E(F.data.message||"Failed to add product.")}catch{E("Failed to connect to server.")}},B=()=>{_({crop_id:"",price_per_unit:"",description:"",image:null,is_featured:!1}),b(""),E(""),o&&o()};return f?e.jsx("p",{children:"Loading..."}):c.length===0?e.jsxs("div",{className:"bg-white p-4 rounded shadow text-center",children:[e.jsx("p",{className:"text-red-600 font-semibold mb-2",children:"No new crops available to add as products."}),e.jsx("p",{className:"text-gray-600",children:"All crops in inventory are already listed in the marketplace."})]}):e.jsxs("form",{onSubmit:R,className:"bg-white p-4 shadow rounded mb-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-semibold",children:"Crop Name"}),e.jsxs("select",{name:"crop_id",value:y.crop_id,onChange:P,className:"w-full border p-2 rounded",required:!0,children:[e.jsx("option",{value:"",children:"Select crop"}),c.map(S=>e.jsx("option",{value:S.crop_id,children:S.crop_name},S.crop_id))]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-semibold",children:"Price Per Unit (Rs.)"}),e.jsx("input",{name:"price_per_unit",value:y.price_per_unit,onChange:P,className:"w-full border p-2 rounded",type:"text",pattern:"^\\d+(\\.\\d{0,2})?$",required:!0,inputMode:"decimal",autoComplete:"off"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-semibold",children:"Description"}),e.jsx("textarea",{name:"description",value:y.description,onChange:P,className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-semibold",children:"Product Image"}),e.jsx("input",{type:"file",name:"image",accept:"image/png, image/jpeg, image/jpg",onChange:P,className:"w-full border p-2 rounded"}),g&&e.jsx("img",{src:g,alt:"Product Preview",className:"mt-2 w-24 h-24 object-contain"})]}),e.jsx("div",{className:"mb-2",children:e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("span",{className:"font-semibold mr-3",children:"Set as Featured Product"}),e.jsx("button",{type:"button",className:`w-12 h-6 flex items-center rounded-full px-1 transition-colors duration-200 ${y.is_featured?"bg-green-500":"bg-gray-300"}`,onClick:()=>_(S=>({...S,is_featured:!S.is_featured})),"aria-pressed":y.is_featured,children:e.jsx("span",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 ${y.is_featured?"translate-x-6":""}`})})]})}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded cursor-pointer",children:"Add Product"}),e.jsx("button",{type:"button",className:"text-gray-600 px-4 py-2 cursor-pointer",onClick:B,children:"Cancel"})]}),N&&e.jsx("div",{className:"mt-3 text-center text-red-600 font-semibold",children:N})]})},bS=()=>{const{products:l,updateProduct:o,fetchProducts:c}=Sd(),d=Lt(),[f,x]=j.useState(null),[y,_]=j.useState({show:!1,type:"success",message:""}),[g,b]=j.useState(!1),[N,E]=j.useState([]),[P,R]=j.useState(!0),[B,S]=j.useState({show:!1,message:""});j.useEffect(()=>{(async()=>{R(!0);try{const O=await(await fetch("http://localhost/FARMMASTER-Backend/api/products/new-crops",{credentials:"include"})).json();E(O.data||[])}catch{E([])}R(!1)})()},[]);const M=async A=>{if(A.error){_({show:!0,type:"error",message:A.error==="No changes made or product not found."?"No changes made.":A.error}),x(null);return}try{o(A.product_id||A.id,A),await c(),x(null),_({show:!0,type:"success",message:"Product updated successfully!"})}catch{_({show:!0,type:"error",message:"Failed to update product."})}},F=()=>{_({show:!1,type:"success",message:""})},I=()=>{_({show:!1,type:"success",message:""}),window.location.href="/marketplace"},T=()=>{b(!1),c(),S({show:!0,message:"Product added successfully! See it in the marketplace."})},H=()=>{b(!1)},q=()=>{S({show:!1,message:""}),window.location.href="/marketplace"};return e.jsxs("div",{className:"flex-1 bg-white min-h-screen p-4 md:p-10 font-poppins",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-black mb-2 mt-4",children:"Marketplace Products"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("button",{onClick:()=>d("/marketplace"),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition duration-200 flex items-center justify-center gap-2",title:"Go to marketplace",children:"Go to Marketplace"}),e.jsxs("button",{onClick:()=>b(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition duration-200 flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Product"]})]})]}),!P&&N.length>0&&e.jsx("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-green-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium",children:e.jsx("strong",{children:"New crops added to inventory:"})}),e.jsxs("div",{className:"mt-2",children:[e.jsx("ul",{className:"list-disc ml-4 text-sm",children:N.map(A=>e.jsx("li",{children:A.crop_name},A.crop_id))}),e.jsx("p",{className:"mt-2 text-sm",children:"Please add these crops to the marketplace to make them available for buyers."})]})]})]})}),g&&e.jsx(yS,{onProductAdded:T,onCancel:H}),f&&e.jsx(gS,{product:f,onSave:M,onCancel:()=>x(null)}),l.length===0?e.jsx("p",{className:"text-center text-gray-600",children:"No products available."}):e.jsx("div",{className:"overflow-x-auto bg-white border rounded-xl shadow-sm",children:e.jsxs("table",{className:"min-w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-green-50 text-black font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"#"}),e.jsx("th",{className:"px-6 py-4",children:"Crop Name"}),e.jsx("th",{className:"px-6 py-4",children:"Price/Unit"}),e.jsx("th",{className:"px-6 py-4",children:"Quantity"}),e.jsx("th",{className:"px-6 py-4",children:"Description"}),e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-green-700",children:"Actions"})]})}),e.jsx("tbody",{children:l.map((A,D)=>e.jsxs("tr",{className:`border-t hover:bg-green-50 ${A.status!=="available"||A.quantity===0?"bg-red-50":""}`,children:[e.jsx("td",{className:"px-6 py-4",children:D+1}),e.jsx("td",{className:"px-6 py-4",children:A.crop_name}),e.jsxs("td",{className:"px-6 py-4",children:["Rs. ",parseFloat(A.price).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4",children:A.quantity}),e.jsx("td",{className:"px-6 py-4",children:A.description}),e.jsx("td",{className:"px-6 py-4 w-28",children:e.jsx("span",{className:`font-semibold px-3 py-1 rounded-full block text-center capitalize ${Number(A.quantity)===0?"bg-red-100 text-red-700":A.status==="available"?"bg-green-100 text-green-700":"bg-gray-200 text-red-600"}`,children:Number(A.quantity)===0?"Sold":A.status==="available"?"Available":"Unavailable"})}),e.jsx("td",{className:"px-6 py-4 text-black font-semibold text-sm whitespace-nowrap",children:e.jsx("button",{onClick:()=>x(A),className:"hover:underline hover:text-green-600 cursor-pointer",children:"Update"})})]},A.product_id||A.id||D))})]})}),y.show&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:e.jsxs("div",{className:`bg-white border p-6 rounded-lg shadow-xl text-center ${y.type==="success"?"border-green-600":"border-red-600"}`,children:[e.jsx("h2",{className:`text-lg font-bold mb-2 ${y.type==="success"?"text-green-700":"text-red-700"}`,children:y.message}),e.jsxs("div",{className:"flex justify-center gap-4 mt-4",children:[y.type==="success"&&e.jsx("button",{onClick:I,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"See Updates"}),e.jsx("button",{onClick:F,className:"bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400",children:"Close"})]})]})}),B.show&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white border border-green-600 p-6 rounded-lg shadow-xl text-center",children:[e.jsx("h2",{className:"text-lg font-bold mb-2 text-green-700",children:B.message}),e.jsx("button",{onClick:q,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 mt-4",children:"Go to Marketplace"})]})})]})};function vS(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(Ar,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen",children:e.jsx(bS,{})})]})}const Gl="http://localhost/FARMMASTER-Backend";function jS(){var H;const[l,o]=j.useState([]),[c,d]=j.useState([]),[f,x]=j.useState(!0),[y,_]=j.useState(""),[g,b]=j.useState(null),[N,E]=j.useState("interest"),[P,R]=j.useState(!1),[B,S]=j.useState({crop_type:"",estimated_yield:"",lease_duration_years:3,rental_value:"",profit_sharing_farmmaster:60,profit_sharing_landowner:40,estimated_profit_landowner:""});j.useEffect(()=>{M()},[]);const M=async()=>{var q,A;try{x(!0);const[D,V]=await Promise.all([be.get(`${Gl}/api.php/land-reports/interest-requests-public`,{withCredentials:!0}),be.get(`${Gl}/api.php/land-reports/proposal-requests-public`,{withCredentials:!0})]);if(D.data.status==="success"){const O=D.data.data||[];d(O),O.length>0&&!g&&b(O[0])}if(V.data.status==="success"){const O=V.data.data||[];o(O)}}catch(D){_("Failed to fetch requests: "+(((A=(q=D.response)==null?void 0:q.data)==null?void 0:A.message)||D.message))}finally{x(!1)}},F=async(q,A,D="")=>{var V,O;try{const G=N==="interest"?`${Gl}/api.php/land-reports/interest-requests/${q}/status`:`${Gl}/api.php/land-reports/proposal-requests/${q}/status`,K=await be.put(G,{status:A,notes:D},{withCredentials:!0});K.data.status==="success"?M():_("Failed to update status: "+K.data.message)}catch(G){_("Failed to update status: "+(((O=(V=G.response)==null?void 0:V.data)==null?void 0:O.message)||G.message))}},I=async q=>{b(q),S({crop_type:q.crop_recommendations||"Organic Vegetables",estimated_yield:"",lease_duration_years:3,rental_value:"",profit_sharing_farmmaster:60,profit_sharing_landowner:40,estimated_profit_landowner:""}),R(!0)},T=async()=>{var q,A;try{x(!0);const D=await be.post(`${Gl}/api.php/proposals`,{land_id:g.land_id,user_id:g.user_id,crop_type:B.crop_type,estimated_yield:parseFloat(B.estimated_yield),lease_duration_years:parseInt(B.lease_duration_years),rental_value:parseFloat(B.rental_value),profit_sharing_farmmaster:parseFloat(B.profit_sharing_farmmaster),profit_sharing_landowner:parseFloat(B.profit_sharing_landowner),estimated_profit_landowner:parseFloat(B.estimated_profit_landowner),generated_from_request_id:g.request_id},{withCredentials:!0});D.data.status==="success"?(await F(g.request_id,"approved","Proposal generated and sent to landowner successfully"),R(!1),b(null),M()):_("Failed to create proposal: "+(D.data.message||"Unknown error"))}catch(D){_("Failed to create proposal: "+(((A=(q=D.response)==null?void 0:q.data)==null?void 0:A.message)||D.message))}finally{x(!1)}};return f?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),e.jsx("span",{className:"ml-2",children:"Loading interest requests..."})]})}):y?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-red-700",children:["Error: ",y]}),e.jsx("button",{onClick:M,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"})]})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Proposal Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage interest requests and generate proposals for organic farming partnerships"})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>E("interest"),className:`py-2 px-1 border-b-2 font-medium text-sm ${N==="interest"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Interest Requests (",c.length,")"]}),e.jsxs("button",{onClick:()=>E("proposals"),className:`py-2 px-1 border-b-2 font-medium text-sm ${N==="proposals"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Generated Proposals (",l.length,")"]})]})})}),N==="interest"&&c.length===0?e.jsxs("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4 text-green-500",children:e.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No Interest Requests Yet"}),e.jsx("p",{className:"text-gray-500",children:"When landowners express interest in organic farming partnerships, they'll appear here."})]}):N==="proposals"&&l.length===0?e.jsxs("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4 text-green-500",children:e.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No Proposal Requests Yet"}),e.jsx("p",{className:"text-gray-500",children:"When landowners request proposals for organic farming partnerships, they'll appear here."})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:N==="interest"?`Interest Requests (${c.length})`:`Proposal Requests (${l.length})`})}),e.jsx("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:(N==="interest"?c:l).map(q=>e.jsxs("div",{className:`p-4 cursor-pointer hover:bg-gray-50 transition-colors ${(g==null?void 0:g.request_id)===q.request_id?"bg-green-50 border-r-4 border-green-500":""}`,onClick:()=>b(q),children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-800 block truncate",children:[q.first_name," ",q.last_name]}),e.jsx("div",{className:"flex items-center gap-1 mt-1",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${q.status==="pending"?"bg-yellow-100 text-yellow-800":q.status==="under_review"?"bg-blue-100 text-blue-800":q.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:q.status.replace("_"," ").toUpperCase()})})]})}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-600",children:"@"}),e.jsx("span",{className:"truncate",children:q.email})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-600",children:"Location:"}),e.jsx("span",{className:"truncate",children:q.location})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-600",children:"Size:"}),e.jsxs("span",{children:["Size: ",q.size]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx("span",{className:"text-gray-600",children:"Date:"}),e.jsx("span",{children:new Date(q.created_at).toLocaleDateString()})]})]})]},q.request_id))})]})}),e.jsx("div",{className:"lg:col-span-2",children:g?e.jsxs("div",{className:"bg-white border border-green-600 p-6 md:p-8 rounded-md shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Interest Request Details"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Submitted on ",new Date(g.created_at).toLocaleDateString()]})]}),e.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-medium ${g.status==="pending"?"bg-yellow-100 text-yellow-800":g.status==="under_review"?"bg-blue-100 text-blue-800":g.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.status.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Landowner Information"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Name:"})," ",g.first_name," ",g.last_name]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Email:"})," ",g.email]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Phone:"})," ",g.phone]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"User ID:"})," #",g.user_id]})]})]})]}),e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Land Information"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Location:"})," ",g.location]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Size:"})," ",g.size]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Land ID:"})," #",g.land_id]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Report ID:"})," #",g.report_id]})]})]}),g.land_description&&e.jsx("div",{className:"mt-3",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Description:"})," ",g.land_description]})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Soil Analysis"}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"pH Level"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:g.ph_value})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Organic Matter"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:[g.organic_matter,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Nitrogen"}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:g.nitrogen_level})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Phosphorus"}),e.jsx("p",{className:"text-lg font-bold text-orange-600",children:g.phosphorus_level})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Potassium"}),e.jsx("p",{className:"text-lg font-bold text-red-600",children:g.potassium_level})]})})]}),g.conclusion&&e.jsxs("div",{className:"mb-6 p-4 bg-teal-50 border border-teal-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Land Assessment"}),e.jsxs("div",{className:`p-4 rounded-lg ${g.conclusion.is_good_for_organic?"bg-green-100 border-l-4 border-green-500":"bg-yellow-100 border-l-4 border-yellow-500"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`text-2xl ${g.conclusion.is_good_for_organic?"text-green-600":"text-yellow-600"}`,children:g.conclusion.is_good_for_organic?"SUITABLE":"NEEDS IMPROVEMENT"}),e.jsx("h4",{className:`font-semibold ${g.conclusion.is_good_for_organic?"text-green-800":"text-yellow-800"}`,children:g.conclusion.is_good_for_organic?"Excellent for Organic Farming!":"Needs Improvement"})]}),e.jsx("p",{className:"text-sm text-gray-700",children:g.conclusion.conclusion_text}),g.conclusion.recommended_crops&&g.conclusion.recommended_crops.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Recommended Crops:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:g.conclusion.recommended_crops.map((q,A)=>e.jsx("span",{className:"px-2 py-1 bg-green-200 text-green-800 text-xs rounded-full",children:q},A))})]})]})]}),g.financial_manager_notes&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Financial Manager Notes"}),e.jsx("p",{className:"text-sm text-gray-700",children:g.financial_manager_notes})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3 justify-end",children:N==="interest"?e.jsxs(e.Fragment,{children:[g.status==="pending"&&((H=g.conclusion)==null?void 0:H.is_good_for_organic)&&e.jsx("button",{onClick:()=>I(g),className:"px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition",children:" Generate Proposal"}),g.status==="approved"&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx("span",{className:"text-green-600",children:""}),e.jsx("span",{className:"font-medium",children:"Proposal Generated and Sent to Landowner"})]}),g.conclusion&&!g.conclusion.is_good_for_organic&&e.jsxs("div",{className:"flex items-center gap-2 text-yellow-600",children:[e.jsx("span",{className:"text-yellow-600",children:""}),e.jsx("span",{className:"font-medium",children:"Land Not Suitable for Organic Farming"})]})]}):g.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>F(g.request_id,"under_review","Request is under review by the Financial Manager"),className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition",children:"Mark Under Review"}),e.jsx("button",{onClick:()=>F(g.request_id,"rejected","Request rejected after review"),className:"px-6 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition",children:"Reject Request"}),e.jsx("button",{onClick:()=>I(g),className:"px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition",children:" Generate Proposal"})]})})]}):e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4 text-gray-400",children:e.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Select a Request"}),e.jsx("p",{className:"text-gray-500",children:"Choose an interest request from the list to view details and take actions."})]})})]}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Generate Proposal"}),e.jsx("button",{onClick:()=>R(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g&&e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-2",children:["Landowner: ",g.first_name," ",g.last_name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Land: ",g.location," (",g.size," acres)"]})]}),e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Crop Type"}),e.jsx("input",{type:"text",value:B.crop_type,onChange:q=>S({...B,crop_type:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., Organic Vegetables"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Yield (tons)"}),e.jsx("input",{type:"number",step:"0.1",value:B.estimated_yield,onChange:q=>S({...B,estimated_yield:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., 15.5"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lease Duration (years)"}),e.jsxs("select",{value:B.lease_duration_years,onChange:q=>S({...B,lease_duration_years:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:1,children:"1 Year"}),e.jsx("option",{value:2,children:"2 Years"}),e.jsx("option",{value:3,children:"3 Years"}),e.jsx("option",{value:5,children:"5 Years"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rental Value (Rs.)"}),e.jsx("input",{type:"number",step:"0.01",value:B.rental_value,onChange:q=>S({...B,rental_value:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., 50000.00"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"FarmMaster Share (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:B.profit_sharing_farmmaster,onChange:q=>{const A=parseFloat(q.target.value);S({...B,profit_sharing_farmmaster:A,profit_sharing_landowner:100-A})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Landowner Share (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:B.profit_sharing_landowner,onChange:q=>{const A=parseFloat(q.target.value);S({...B,profit_sharing_landowner:A,profit_sharing_farmmaster:100-A})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Profit for Landowner (Rs.)"}),e.jsx("input",{type:"number",step:"0.01",value:B.estimated_profit_landowner,onChange:q=>S({...B,estimated_profit_landowner:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., 75000.00"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>R(!1),className:"px-6 py-3 bg-gray-200 text-gray-700 font-medium rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),e.jsx("button",{type:"button",onClick:T,disabled:f,className:"px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 disabled:opacity-50 transition",children:f?"Sending...":" Send to Landowner"})]})]})]})})})]})}function _S(){return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(Ar,{}),e.jsx("main",{className:"flex-1 md:ml-64 p-4 min-h-screen bg-gray-50",children:e.jsx(jS,{})})]})}const NS=()=>{const{user:l}=mt(),[o,c]=j.useState([]),[d,f]=j.useState(null),[x,y]=j.useState(!1),[_,g]=j.useState(null),[b,N]=j.useState([]),[E,P]=j.useState(!1),[R,B]=j.useState(""),[S,M]=j.useState({land_id:"",harvest_date:"",product_type:"",harvest_amount:"",income:"",expenses:"",land_rent:"",notes:""}),F="http://localhost/FARMMASTER-Backend";j.useEffect(()=>{I()},[]);const I=async()=>{var le,de;try{const z=await be.get(`${F}/api/harvest/lands-for-reports`,{withCredentials:!0});z.data.status==="success"?c(z.data.data.lands):B("Failed to load lands")}catch(z){console.error("Error loading lands:",z),B("Error loading lands: "+(((de=(le=z.response)==null?void 0:le.data)==null?void 0:de.message)||z.message))}},T=async le=>{if(le)try{P(!0);const de=await be.get(`${F}/api/harvest?land_id=${le}`,{withCredentials:!0});de.data.status==="success"&&N(de.data.data||[])}catch(de){console.error("Error loading harvests:",de)}finally{P(!1)}},H=le=>{const de=o.find(z=>z.land_id===parseInt(le));f(de),M(z=>({...z,land_id:le})),T(le)},q=le=>{const{name:de,value:z}=le.target;M(J=>({...J,[de]:z}))},A=()=>{const le=parseFloat(S.income)||0,de=parseFloat(S.expenses)||0,z=parseFloat(S.land_rent)||0,J=le+z,W=J-de,ve=W*.4,U=W*.6;return{netProfit:W,landownerShare:ve,farmmasterShare:U,totalIncome:J}},D=async le=>{var de,z;if(le.preventDefault(),P(!0),B(""),!S.land_id){B("Error: Please select a land first"),P(!1);return}if(!S.harvest_date||!S.product_type||!S.harvest_amount||!S.income||!S.expenses||!S.land_rent){B("Error: Please fill in all required fields"),P(!1);return}try{const J={...S};_&&(J.harvest_id=_.harvest_id);const W=await be.post(`${F}/api/harvest/income-report`,J,{headers:{"Content-Type":"application/json"},withCredentials:!0});W.data.status==="success"?(B(`Harvest income report ${_?"updated":"created"} successfully!`),y(!1),g(null),V(),d&&T(d.land_id)):B("Error: "+W.data.message)}catch(J){console.error("Error saving harvest report:",J),B("Error: "+(((z=(de=J.response)==null?void 0:de.data)==null?void 0:z.message)||J.message))}finally{P(!1)}},V=()=>{M({land_id:(d==null?void 0:d.land_id)||"",harvest_date:"",product_type:"",harvest_amount:"",income:"",expenses:"",land_rent:"",notes:""})},O=le=>{g(le),M({land_id:le.land_id,harvest_date:le.harvest_date,product_type:le.product_type,harvest_amount:le.harvest_amount,income:le.income,expenses:le.expenses,land_rent:le.land_rent,notes:le.notes||""}),y(!0)},{netProfit:G,landownerShare:K,farmmasterShare:Q,totalIncome:ue}=A();return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Harvest Income Management"}),d&&e.jsxs("button",{onClick:()=>{y(!0),g(null),V()},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(Jc,{size:16}),"Add Income Report"]})]}),R&&e.jsx("div",{className:`mb-4 p-3 rounded-lg ${R.includes("Error")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:R}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Select Land"}),e.jsxs("select",{value:(d==null?void 0:d.land_id)||"",onChange:le=>H(le.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"",children:"Choose a land..."}),o.map(le=>e.jsxs("option",{value:le.land_id,children:[le.location," - ",le.size," acres - Owner: ",le.first_name," ",le.last_name]},le.land_id))]})]}),d&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Selected Land Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tr,{size:16,className:"text-blue-600"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Location:"})," ",d.location]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mm,{size:16,className:"text-blue-600"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Size:"})," ",d.size," acres"]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Owner:"})," ",d.first_name," ",d.last_name]})]})]}),d&&b.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Existing Harvest Reports"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Income"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Landowner Share"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(le=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(le.harvest_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:le.product_type}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[le.harvest_amount," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["LKR ",parseFloat(le.income).toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-semibold",children:["LKR ",parseFloat(le.landowner_share).toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("button",{onClick:()=>O(le),className:"text-blue-600 hover:text-blue-900 mr-3",children:e.jsx(iN,{size:16})})})]},le.harvest_id))})]})})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:[_?"Edit":"Create"," Harvest Income Report"]}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harvest Date"}),e.jsx("input",{type:"date",name:"harvest_date",value:S.harvest_date,onChange:q,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Type"}),e.jsx("input",{type:"text",name:"product_type",value:S.product_type,onChange:q,placeholder:"e.g., Tomato, Rice, Carrot",required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harvest Amount (kg)"}),e.jsx("input",{type:"number",step:"0.01",name:"harvest_amount",value:S.harvest_amount,onChange:q,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Income (LKR)"}),e.jsx("input",{type:"number",step:"0.01",name:"income",value:S.income,onChange:q,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expenses (LKR)"}),e.jsx("input",{type:"number",step:"0.01",name:"expenses",value:S.expenses,onChange:q,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Land Rent (LKR)"}),e.jsx("input",{type:"number",step:"0.01",name:"land_rent",value:S.land_rent,onChange:q,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),(S.income||S.expenses||S.land_rent)&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Financial Breakdown Preview"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Harvest Income:"}),e.jsxs("div",{className:"font-medium",children:["LKR ",(parseFloat(S.income)||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Land Rent:"}),e.jsxs("div",{className:"font-medium",children:["+ LKR ",(parseFloat(S.land_rent)||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Income:"}),e.jsxs("div",{className:"font-semibold text-blue-600",children:["LKR ",ue.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Expenses:"}),e.jsxs("div",{className:"font-medium text-red-600",children:["- LKR ",(parseFloat(S.expenses)||0).toLocaleString()]})]})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Net Profit:"}),e.jsxs("div",{className:"font-semibold",children:["LKR ",G.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Landowner Share (40%):"}),e.jsxs("div",{className:"font-semibold text-green-600",children:["LKR ",K.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"FarmMaster Share (60%):"}),e.jsxs("div",{className:"font-semibold text-blue-600",children:["LKR ",Q.toLocaleString()]})]})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),e.jsx("textarea",{name:"notes",value:S.notes,onChange:q,rows:"3",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Additional notes about the harvest..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{y(!1),g(null),V()},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:E,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:E?"Saving...":_?"Update Report":"Create Report"})]})]})]})})]})};function wS(){return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsx(Ar,{}),e.jsxs("main",{className:"flex-1 md:ml-64",children:[e.jsx("div",{className:"md:hidden",children:e.jsx(Ar,{})}),e.jsx(NS,{})]})]})}const SS=()=>{const{user:l}=mt(),[o,c]=j.useState([]),[d,f]=j.useState([]),[x,y]=j.useState(""),[_,g]=j.useState(null),[b,N]=j.useState(!1),[E,P]=j.useState(!1),[R,B]=j.useState({totalIncome:0,totalLandownerShare:0,totalReports:0,avgIncome:0}),S="http://localhost/FARMMASTER-Backend";j.useEffect(()=>{M()},[]),j.useEffect(()=>{o.length>0&&F()},[o,x]);const M=async()=>{P(!0);try{const A=await be.get(`${S}/api/harvest/income-reports`,{withCredentials:!0});A.data.status==="success"?(c(A.data.data.harvest_reports||[]),f(A.data.data.lands||[])):console.error("Failed to load harvest reports:",A.data.message)}catch(A){console.error("Error loading harvest reports:",A)}finally{P(!1)}},F=()=>{let A=o;x&&(A=o.filter(K=>K.land_id==x));const D=A.reduce((K,Q)=>K+parseFloat(Q.income||0),0),V=A.reduce((K,Q)=>K+parseFloat(Q.landowner_share||0),0),O=A.length,G=O>0?D/O:0;B({totalIncome:D,totalLandownerShare:V,totalReports:O,avgIncome:G})},I=x?o.filter(A=>A.land_id==x):o,T=A=>{g(A),N(!0)},H=A=>`LKR ${parseFloat(A||0).toLocaleString()}`,q=A=>new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"My Harvest Income Reports"}),e.jsx("p",{className:"text-gray-600",children:"View income reports and financial details for your lands"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Income"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:H(R.totalIncome)})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(Wl,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"My Share"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:H(R.totalLandownerShare)})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(Nd,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Reports"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R.totalReports})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:e.jsx(os,{className:"h-6 w-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Income"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:H(R.avgIncome)})]}),e.jsx("div",{className:"bg-orange-100 p-3 rounded-full",children:e.jsx(no,{className:"h-6 w-6 text-orange-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Filter by Land"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("select",{value:x,onChange:A=>y(A.target.value),className:"p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"",children:"All Lands"}),d.map(A=>e.jsxs("option",{value:A.land_id,children:[A.location," - ",A.size," acres"]},A.land_id))]}),x&&e.jsx("button",{onClick:()=>y(""),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Clear Filter"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Harvest Income Reports"})}),E?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading harvest reports..."})]}):I.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(os,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No harvest income reports found for your lands."}),e.jsx("p",{className:"text-sm mt-2",children:"Financial Manager will create reports after harvest completion."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Land"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Income"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Your Share"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oi,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-900",children:q(A.harvest_date)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Tr,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.land_location}),e.jsxs("div",{className:"text-sm text-gray-500",children:[A.land_size," acres"]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:A.product_type})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[parseFloat(A.harvest_amount).toLocaleString()," kg"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:H(A.income)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-semibold text-green-600",children:H(A.landowner_share)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("button",{onClick:()=>T(A),className:"text-blue-600 hover:text-blue-900 flex items-center gap-1",children:[e.jsx(Ka,{size:16}),"View Details"]})})]},A.harvest_id))})]})})]}),b&&_&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Harvest Income Report Details"}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Harvest Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Harvest Date:"}),e.jsx("span",{className:"font-medium",children:q(_.harvest_date)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Product Type:"}),e.jsx("span",{className:"font-medium",children:_.product_type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Harvest Amount:"}),e.jsxs("span",{className:"font-medium",children:[parseFloat(_.harvest_amount).toLocaleString()," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Land Location:"}),e.jsx("span",{className:"font-medium",children:_.land_location})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Land Size:"}),e.jsxs("span",{className:"font-medium",children:[_.land_size," acres"]})]})]})]}),_.notes&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-700",children:_.notes})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Financial Breakdown"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Income:"}),e.jsx("span",{className:"font-medium text-green-600",children:H(_.income)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Expenses:"}),e.jsxs("span",{className:"font-medium text-red-600",children:["-",H(_.expenses)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Land Rent:"}),e.jsxs("span",{className:"font-medium text-red-600",children:["-",H(_.land_rent)]})]}),e.jsx("hr",{className:"my-2"}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{className:"text-gray-800",children:"Net Profit:"}),e.jsx("span",{className:"text-blue-600",children:H(_.net_profit)})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Profit Distribution"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Your Share (40%):"}),e.jsx("span",{className:"font-bold text-green-600",children:H(_.landowner_share)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"FarmMaster Share (60%):"}),e.jsx("span",{className:"font-medium text-blue-600",children:H(_.farmmaster_share)})]})]})]}),e.jsx("div",{className:"text-xs text-gray-500 bg-gray-50 p-3 rounded-lg",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," Profit sharing is calculated as 40% to landowner and 60% to FarmMaster after deducting all expenses and land rent from the total income."]})})]})]})]})})]})};function CS(){return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsx(ki,{}),e.jsxs("main",{className:"flex-1 md:ml-64",children:[e.jsx("div",{className:"md:hidden",children:e.jsx(ki,{})}),e.jsx(SS,{})]})]})}function ES(){return Jj(5,0),e.jsx("main",{children:e.jsxs(Hb,{children:[e.jsx(Qe,{path:"/",element:e.jsx(LN,{})}),e.jsx(Qe,{path:"/marketplace",element:e.jsx(qN,{})}),e.jsx(Qe,{path:"/about",element:e.jsx(VN,{})}),e.jsx(Qe,{path:"/contact",element:e.jsx(GN,{})}),e.jsx(Qe,{path:"/register",element:e.jsx(KN,{})}),e.jsx(Qe,{path:"/login",element:e.jsx(dw,{})}),e.jsx(Qe,{path:"/forgot-password",element:e.jsx(uw,{})}),e.jsx(Qe,{path:"/reset-password",element:e.jsx(hw,{})}),e.jsx(Qe,{path:"/profile",element:e.jsx(ot,{children:e.jsx(fw,{})})}),e.jsx(Qe,{path:"/landownerdashboard",element:e.jsx(ot,{requiredRoles:["Landowner"],children:e.jsx(xw,{})})}),e.jsx(Qe,{path:"/landassessment",element:e.jsx(ot,{requiredRoles:["Landowner"],children:e.jsx(sg,{})})}),e.jsx(Qe,{path:"/landassessmentstripe",element:e.jsx(ot,{requiredRoles:["Landowner"],children:e.jsx(sg,{})})}),e.jsx(Qe,{path:"/landreport",element:e.jsx(ot,{requiredRoles:["Landowner"],children:e.jsx(N1,{})})}),e.jsx(Qe,{path:"/leaseproposal",element:e.jsx(ot,{requiredRoles:["Landowner"],children:e.jsx(S1,{})})}),e.jsx(Qe,{path:"/harvest",element:e.jsx(ot,{requiredRoles:["Landowner"],children:e.jsx(E1,{})})}),e.jsx(Qe,{path:"/operationalmanagerdashboard",element:e.jsx(ot,{requiredRoles:["Operational Manager","Operational_Manager"],children:e.jsx(R1,{})})}),e.jsx(Qe,{path:"/operationalmanagerusermanagement",element:e.jsx(ot,{requiredRoles:["Operational Manager","Operational_Manager"],children:e.jsx(T1,{})})}),e.jsx(Qe,{path:"/operationalmanagerproposalmanagement",element:e.jsx(ot,{requiredRoles:["Operational Manager","Operational_Manager"],children:e.jsx(M1,{})})}),e.jsx(Qe,{path:"/operationalmanagercropinventorymanagement",element:e.jsx(ot,{requiredRoles:["Operational Manager","Operational_Manager"],children:e.jsx(O1,{})})}),e.jsx(Qe,{path:"/operationalmanagerlandreportmanagement",element:e.jsx(ot,{requiredRoles:["Operational Manager","Operational_Manager"],children:e.jsx(U1,{})})}),e.jsx(Qe,{path:"/fieldsupervisordashboard",element:e.jsx(ot,{requiredRoles:["Supervisor"],children:e.jsx(H1,{})})}),e.jsx(Qe,{path:"/fieldsupervisorassignedtasks",element:e.jsx(ot,{requiredRoles:["Supervisor"],children:e.jsx(Z1,{})})}),e.jsx(Qe,{path:"/fieldsupervisorlanddatasubmission",element:e.jsx(ot,{requiredRoles:["Supervisor"],children:e.jsx(V1,{})})}),e.jsx(Qe,{path:"/proposal-details/:id",element:e.jsx(ot,{requiredRoles:["Operational Manager","Operational_Manager"],children:e.jsx(F1,{})})}),e.jsx(Qe,{path:"/buyerdashboard",element:e.jsx(ot,{requiredRoles:["Buyer"],children:e.jsx(K1,{})})}),e.jsx(Qe,{path:"/buyerorders",element:e.jsx(ot,{requiredRoles:["Buyer"],children:e.jsx(sS,{})})}),e.jsx(Qe,{path:"/buyercart",element:e.jsx(ot,{requiredRoles:["Buyer"],children:e.jsx(eS,{})})}),e.jsx(Qe,{path:"/checkoutpage",element:e.jsx(ot,{requiredRoles:["Buyer"],children:e.jsx(cS,{})})}),e.jsx(Qe,{path:"/financialmanagerdashboard",element:e.jsx(ot,{requiredRoles:["Financial Manager","Financial_Manager"],children:e.jsx(uS,{})})}),e.jsx(Qe,{path:"/financialmanagerpaymentmanagement",element:e.jsx(ot,{requiredRoles:["Financial Manager","Financial_Manager"],children:e.jsx(mS,{})})}),e.jsx(Qe,{path:"/financialmanagerproposals",element:e.jsx(ot,{requiredRoles:["Financial Manager","Financial_Manager"],children:e.jsx(_S,{})})}),e.jsx(Qe,{path:"/financialmanagerprofitrentcalculation",element:e.jsx(ot,{requiredRoles:["Financial Manager","Financial_Manager"],children:e.jsx(pS,{})})}),e.jsx(Qe,{path:"/financialmanagermarketplaceproducts",element:e.jsx(ot,{requiredRoles:["Financial Manager","Financial_Manager"],children:e.jsx(vS,{})})}),e.jsx(Qe,{path:"/financialmanagerharvestincome",element:e.jsx(ot,{requiredRoles:["Financial Manager","Financial_Manager"],children:e.jsx(wS,{})})}),e.jsx(Qe,{path:"/landownerharvestincome",element:e.jsx(ot,{requiredRoles:["Landowner"],children:e.jsx(CS,{})})}),e.jsx(Qe,{path:"*",element:e.jsx(mw,{})})]})})}class kS extends qe.Component{constructor(o){super(o),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(o){return{hasError:!0}}componentDidCatch(o,c){this.setState({error:o,errorInfo:c}),console.error("ErrorBoundary caught an error:",o),console.error("Error info:",c),console.error("Error stack:",o==null?void 0:o.stack)}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",margin:"20px",border:"2px solid #ff6b6b",borderRadius:"8px",backgroundColor:"#fff5f5"},children:[e.jsx("h2",{style:{color:"#d63031",marginBottom:"16px"},children:"Something went wrong"}),e.jsx("p",{style:{marginBottom:"16px"},children:"The application encountered an error. Please try refreshing the page."}),!1,e.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"16px",padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Refresh Page"})]}):this.props.children}}Xy.createRoot(document.getElementById("root")).render(e.jsx(j.StrictMode,{children:e.jsx(kS,{children:e.jsx(hv,{children:e.jsx(Wj,{children:e.jsx(zN,{children:e.jsx(bN,{children:e.jsx(ES,{})})})})})})}));
//# sourceMappingURL=index-C5gjQCZc.js.map
